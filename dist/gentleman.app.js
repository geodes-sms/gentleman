/*! For license information please see gentleman.app.js.LICENSE.txt */
(()=>{var t={684:(t,e,i)=>{"use strict";i.r(e),i.d(e,{App:()=>de});var n=i(835),s=i(241),a=i(98);const r=(t,e)=>t.getAttributeByName(e).target,o=(t,e)=>r(t,e).getReference(),l=(t,e,i=!1)=>r(t,e).getValue(i),c=(t,e)=>r(t,e).hasValue(),h=(t,e)=>t.isAttributeCreated(e),d=t=>(0,n.valOrDefault)(l(t,"name"),"").toLowerCase();function u(t,e){const{id:i,name:s}=e;let a=(0,n.createEmphasis)({class:["link","error-message__link"],title:s},t);const r=`.projection[data-concept="${i}"]`;return a.addEventListener("mouseenter",(t=>{let e=(0,n.getElement)(r,this.body);e&&this.highlight(e)})),a.addEventListener("mouseleave",(t=>{this.unhighlight()})),a.addEventListener("click",(t=>{let e=this.resolveElement((0,n.getElement)(r,this.body));e&&e.focus()})),a}const p="attributes",m="base",y="name",g="required",f="properties",b="prototype";function v(t={}){const e=[],{conceptModel:i}=this;this.logs.clear();const a=Object.assign({name:"metamodel",download:!0},t),r=i.getConcepts(["prototype-concept","concrete-concept","derivative-concept"]);return(0,n.isEmpty)(r)?(this.notify("<strong>Empty model</strong>: Please create at least one concept.",s.k$.WARNING),!1):(this.__errors=[],r.forEach((t=>{const{message:i}=w.call(this,t);e.find((t=>t.name===i.name))?this.__errors.push(`The model has two concepts with the same name: ${i.name}`):e.push(i)})),(0,n.isEmpty)(this.__errors)?(this.notify("The concept model was <strong>successfully</strong> built",s.k$.SUCCESS,2e3),a.download&&this.download({type:"concept",concept:e},a.name),delete this.__errors,e):(this.notify("<strong>Validation failed</strong>: The model could not be built.<br> <em>See Log for more details</em>.",s.k$.ERROR),this.logs.add(this.__errors,"Validation error",s.hi.ERROR),delete this.__errors,!1))}function w(t){const e=d(t),i=t.getProperty("nature"),s=l(t,"root"),a=[],h=[];if((0,n.isNullOrWhitespace)(e)){let e=u.call(this,"name",r(t,y)),s=(0,n.createSpan)({class:["error-message"]},[`${(0,n.capitalizeFirstLetter)(i)} concept: `,e," is missing a value"]);this.__errors.push(s)}t.isAttributeCreated(p)&&l(t,p).forEach((t=>{const{message:e}=x.call(this,t);a.find((t=>t.name===e.name))?this.__errors.push(`The concept has two attributes with the same name: ${e.name}`):a.push(e)})),t.isAttributeCreated(f)&&l(t,f).forEach((t=>{const{message:e}=j.call(this,t);h.find((t=>t.name===e.name))?this.__errors.push(`The concept has two properties with the same name: ${e.name}`):h.push(e)}));let g={id:t.id,name:e,nature:i,root:s,attributes:a,properties:h};return t.isAttributeCreated(b)&&c(t,b)&&(g.prototype=d(o(t,b))),t.isAttributeCreated(m)&&c(t,m)&&Object.assign(g,E.call(this,l(t,m,!0),"base")),{message:g}}function x(t){console.log("BuildingAttribute"),console.log(t);const e=d(t),i=!h(t,g)||!c(t,g)||l(t,g);if((0,n.isNullOrWhitespace)(e)){let e=u.call(this,"name",r(t,y)),i=(0,n.createSpan)({class:["error-message"]},["Attribute: ",e," is missing a value"]);this.__errors.push(i)}if(!c(t,"target")){let e=u.call(this,"target",r(t,"target")),i=(0,n.createSpan)({class:["error-message"]},["Attribute: ",e," is missing a value"]);this.__errors.push(i)}return console.log(e,i),{message:{name:e,target:E.call(this,l(t,"target",!0)),required:i}}}function E(t,e="name"){if(console.log("target"),console.log(t),(0,n.isNullOrUndefined)(t))return null;let i=t.getProperty("cname");if("concept"===i)if(c(t,"concept"))i=r(t,"concept").value;else{let e=u.call(this,"concept",r(t,"concept")),i=(0,n.createSpan)({class:["error-message"]},[`${(0,n.capitalizeFirstLetter)(t.getName())}: `,e," is missing a value"]);this.__errors.push(i)}const s={[e]:i};if(h(t,"accept")){let e=l(t,"accept",!0);(0,n.isObject)(e)?s.accept=E.call(this,e):s.accept={name:e.toLowerCase()}}if(["default","ordered","rel"].filter((e=>h(t,e)&&c(t,e))).forEach((e=>{s[e]=l(t,e)})),h(t,"constraints")){let e=[];l(t,"constraints").forEach((t=>{const i=A.call(this,t);e.push(i)})),s.constraint=e}return s}function A(t){const e={};if(!c(t,"type"))return e;e.property=l(t,"property");let i=l(t,"type",!0);return"constraint-number-value"===i.name?(e.type="value",e.value=l(i,"value")):"constraint-number-range"===i.name?(e.type="range",e.range={min:l(i,"min"),max:l(i,"max")}):"constraint-string-pattern"===i.name?(e.type="pattern",e.pattern={insensitive:l(i,"insensitive"),global:l(i,"global"),value:l(i,"value")}):"constraint-string-values"===i.name&&(e.type="values",console.log(t),e.values=l(i,"values",!0)),h(t,"scope")&&c(t,"scope")&&(e.scope=d(o(t,"scope"))),e}function j(t){const e=d(t);if((0,n.isNullOrWhitespace)(e)){let e=u.call(this,"name",r(t,y)),i=(0,n.createSpan)({class:["error-message"]},["Property: ",e," is missing a value"]);this.__errors.push(i)}h(t,"target")&&c(t,"target")||this.__errors.push(`Property ${(0,n.isNullOrWhitespace)(e)?"N/A":`'${e}'`}: <<target>> is missing a value.`);const i=l(t,"target",!0),s=i.getProperty("type");return(0,n.isNullOrUndefined)(s)&&this.__errors.push(`The property '${e}' target's type is missing a value.`),{message:{name:d(t),type:s,value:l(i,"value")}}}function O(t){let e={};return h(t,"css")&&c(t,"css")&&(e.css=l(t,"css",!0)),h(t,"ref")&&c(t,"ref")&&(e.ref=l(t,"ref",!0).map((t=>d(this.conceptModel.getConcept(t))))),h(t,"gss")&&(e.gss=N.call(this,r(t,"gss"))),h(t,"text")&&(e.text=k.call(this,r(t,"text"))),h(t,"box")&&(e.box=L.call(this,r(t,"box"))),e}function N(t){let e={};return h(t,"text")&&(e.text=k.call(this,r(t,"text"))),h(t,"box")&&(e.box=L.call(this,r(t,"box"))),e}function k(t){let e={};if(h(t,"bold")&&l(t,"bold")&&(e.bold=!0),h(t,"italic")&&l(t,"italic")&&(e.italic=!0),h(t,"underline")&&l(t,"underline")&&(e.underline=!0),h(t,"strikethrough")&&l(t,"strikethrough")&&(e.strikethrough=!0),h(t,"nonbreakable")&&l(t,"nonbreakable")&&(e.nonbreakable=!0),h(t,"transform")&&c(t,"transform")&&(e.transform=l(t,"transform")),h(t,"color")&&c(t,"color")){let i=M.call(this,r(t,"color"));i&&(e.color=i)}if(h(t,"opacity")&&c(t,"opacity")&&(e.opacity=l(t,"opacity")),h(t,"size")){let i=I.call(this,r(t,"size"));i&&(e.size=i)}return e}function L(t){let e={};if(h(t,"inner")){let i=_.call(this,r(t,"inner"));i&&(e.inner=i)}if(h(t,"outer")){let i=_.call(this,r(t,"outer"));i&&(e.outer=i)}if(h(t,"background")&&(e.background=S.call(this,r(t,"background"))),h(t,"width")){let i=I.call(this,r(t,"width"));i&&(e.width=i)}if(h(t,"height")){let i=I.call(this,r(t,"height"));i&&(e.height=i)}if(h(t,"border")&&(e.border=C.call(this,r(t,"border"))),h(t,"corner")&&(e.corner=T.call(this,r(t,"corner"))),h(t,"shadow")){let i=U.call(this,r(t,"shadow"));i&&(e.shadow=i)}return h(t,"opacity")&&c(t,"opacity")&&(e.opacity=l(t,"opacity")),e}function _(t){let e={},i=!1;return["all","top","right","bottom","left"].forEach((s=>{if(h(t,s)){let a=I.call(this,r(t,s));(0,n.isNullOrUndefined)(a)||(e[s]=a,i=!0)}})),i?e:null}function C(t){let e={};return["all","top","right","bottom","left"].forEach((i=>{if(h(t,i)){let n=r(t,i),s=I.call(this,r(n,"width"));if(s){let t=r(n,"color");e[i]={width:s,color:M.call(this,t),type:l(n,"type")}}}})),e}function T(t){let e={},i=!1;return["all","top-left","top-right","bottom-right","bottom-left"].forEach((s=>{if(h(t,s)){let a=I.call(this,r(t,s));(0,n.isNullOrUndefined)(a)||(e[s]=a,i=!0)}})),i?e:null}function S(t){let e={};if(h(t,"color")){let i=r(t,"color"),n=r(i,"value");e.color=M.call(this,n)}if(h(t,"image")){let i=r(t,"image");e.image=l(i,"url")}return e}function M(t){let e={};if((0,n.isNullOrUndefined)(t))return e;if("hex-color"===t.name){if(!c(t,"value"))return null;e.type="hex";let i=l(t,"value")||"";e.value=i.startsWith("#")?i:`#${i}`}else"rgb-color"===t.name&&(e.type="rgb",e.value={red:l(t,"red"),green:l(t,"green"),blue:l(t,"blue")});return e}function I(t){return(0,n.isNullOrUndefined)(t)||!c(t,"value")?null:{value:l(t,"value"),unit:l(t,"unit")}}function U(t){if((0,n.isNullOrUndefined)(t))return null;const e="offsetX",i="offsetY",s="blur",a="spread",o="inset";let c=3,d={};if(h(t,e)){let i=I.call(this,r(t,e));(0,n.isNullOrUndefined)(i)||(d.offsetX=i,c--)}if(h(t,i)){let e=I.call(this,r(t,i));(0,n.isNullOrUndefined)(e)||(d.offsetY=e,c--)}if(h(t,s)){let e=I.call(this,r(t,s));(0,n.isNullOrUndefined)(e)||(d.blur=e,c--)}if(h(t,a)){let e=I.call(this,r(t,a));(0,n.isNullOrUndefined)(e)||(d.spread=e,c--)}if(c>0)return null;if(h(t,o)&&l(t,o)&&(d.inset=!0),h(t,"color")){let e=r(t,"color");d.color=M.call(this,e)}return d}const D="content",H="concept",P="name",V="style",B="required",R="prototype",$="tag",F="tags",z="value",q="focusable",W="hidden",Z={projection:Y,template:G,style:J};function X(t={}){const e={type:"projection",projection:[],template:[],style:[]},{conceptModel:i}=this;this.logs.clear();const a=Object.assign({name:"projection",download:!0,notify:"always"},t),r=i.getConcepts(["projection","template","style rule"]);return(0,n.isEmpty)(r)?(this.notify("<strong>Empty model</strong>: Please create at least one projection.",s.k$.WARNING,2e3),!1):(this.__errors=[],r.forEach((t=>{let i=(0,n.valOrDefault)(t.getProperty("handler"),"");const s=Z[i],{message:a}=s.call(this,t);e[i].push(a)})),(0,n.isEmpty)(this.__errors)?("always"===a.notify&&this.notify("The projection model was <strong>successfully</strong> built",s.k$.SUCCESS,2e3),a.download&&this.download(e,a.name),delete this.__errors,e):(this.notify("<strong>Validation failed</strong>: The model could not be built.<br> <em>See Log for more details</em>.",s.k$.ERROR),this.logs.add(this.__errors,"Validation error",s.hi.ERROR),delete this.__errors,!1))}function Y(t){const e=h(t,F)?l(t,F,!0):[];let i=r(t,H);if(t.hasParent()){let e=t.getParent("collection");i=r(e,H)}const s=K.call(this,i);if((0,n.isEmpty)(Object.keys(s))){let e=u.call(this,"concept",r(t,H)),i=(0,n.createSpan)({class:["error-message"]},["Projection error: ",e," is missing a value"]);this.__errors.push(i)}const a=r(t,"container");let o={concept:s,tags:e,container:et.call(this,a)};return h(t,P)&&c(t,P)&&(o.name=d(t)),{success:!0,message:o}}function G(t){const e=d(t);if((0,n.isNullOrWhitespace)(e)){let e=u.call(this,"name",r(t,P)),i=(0,n.createSpan)({class:["error-message"]},["Template error: ",e," is missing a value"]);this.__errors.push(i)}if(!c(t,D)){let e=u.call(this,"content",r(t,D)),i=(0,n.createSpan)({class:["error-message"]},["Template error: ",e," is missing a value"]);this.__errors.push(i)}const i=[];return l(t,D).filter((t=>t.hasValue())).forEach((t=>{const e=t.getValue(!0);i.push(tt.call(this,e))})),{success:!0,message:{id:t.id,type:"template",name:e,content:i}}}function J(t){const e=d(t);if((0,n.isNullOrWhitespace)(e)){let e=u.call(this,"name",r(t,P)),i=(0,n.createSpan)({class:["error-message"]},["StyleRule error: ",e," is missing a value"]);this.__errors.push(i)}const i=N.call(this,r(t,V));return{success:!0,message:{id:t.id,type:"style",name:e,style:i}}}function K(t){const e={};return h(t,P)&&c(t,P)&&(e.name=l(t,P).toLowerCase()),h(t,R)&&c(t,R)&&(e.prototype=l(t,R).toLowerCase()),e}const Q={static:function(t){const e=t.getProperty("elementType");let i={type:e};const s=lt[e];return(0,n.isFunction)(s)?(i.focusable=l(t,q),i.hidden=l(t,W),Object.assign(i,s.call(this,t)),h(t,V)&&(i.style=O.call(this,r(t,V))),i):null},layout:st,dynamic:rt,field:function(t){const e=t.getProperty("elementType");var i={type:e};i.focusable=l(t,q),i.readonly=l(t,"readonly"),i.disabled=l(t,"disabled"),i.hidden=l(t,W),i.source=l(t,"source");const s=ct[e];return(0,n.isFunction)(s)?(Object.assign(i,s.call(this,t)),h(t,V)&&(i.style=O.call(this,r(t,V))),i):null},container:et,"svg-container":function(t){const e={type:"svg"};return h(t,"content")&&(e.content=l(t,"content")),h(t,"p-link")&&(e.link=function(t){const e={};return h(t,"tag")&&(e.tag=l(t,"tag")),h(t,"marker")&&(e.marker=l(t,"marker")),h(t,"external")&&(e.external=l(t,"external")),e}(r(t,"p-link"))),h(t,"attributes")&&!(0,n.isEmpty)(r(t,"attributes"))&&(e.attributes=[],l(t,"attributes").forEach((t=>{e.attributes.push(function(t){const e={};return h(t,"value")&&(e.value=l(t,"value")),h(t,"placement")&&(e.placement=function(t){const e={};switch(e.type=t.name,e.type){case"in-place":return h(t,"marker")&&(e.marker=l(t,"marker")),h(t,"tag")&&(e.tag=l(t,"tag")),e;case"link-place":return h(t,"static-dependents")&&!(0,n.isEmpty)(l(t,"static-dependents"))&&(e.sd=[],l(t,"static-dependents").forEach((t=>{e.sd.push(it(t))}))),h(t,"dynamic-dependents")&&!(0,n.isEmpty)(l(t,"dynamic-dependents"))&&(e.dd=[],l(t,"dynamic-dependents").forEach((t=>{e.dd.push(it(t))}))),e}}(l(t,"placement",!0))),h(t,"property")&&(e.property=l(t,"property")),e}(t))}))),e}};function tt(t){console.log(t);const e=t.getProperty("contentType"),i=Q[e];if(!(0,n.isFunction)(i))return null;let s=e;return Object.assign({kind:s},i.call(this,t))}function et(t){const e={type:"container"};let i=[];return l(t,"elements").filter((t=>t.hasValue())).forEach((t=>{const e=t.getValue(!0);i.push(tt.call(this,e))})),e.content=i,e.layout=st.call(this,l(t,"layout",!0)),e.focusable=l(t,q),h(t,"style")&&(e.style=O.call(this,r(t,"style"))),e}function it(t){const e={};return h(t,"marker")&&(e.marker=l(t,"marker")),h(t,"template")&&(e.template=l(t,"template")),e}const nt={flex:function(t){const e={},i="align-items",s="justify-content";return e.orientation=l(t,"orientation"),e.wrappable=l(t,"wrappable"),e[(0,n.camelCase)(i)]=l(t,i),e[(0,n.camelCase)(s)]=l(t,s),e},table:function(t){const e={};var i=[];return e.orientation=l(t,"orientation"),l(t,"rows").forEach((t=>{const e=[];l(t,"cells").forEach((t=>{let i=(0,n.valOrDefault)(l(t,"span"),1);if(c(t,"content")){let n=l(t,"content",!0);e.push({type:"cell",span:i,content:tt.call(this,n)})}})),i.push(e)})),e.disposition=i,e}};function st(t){const e=t.getProperty("elementType");var i={type:e};const s=nt[e];return(0,n.isFunction)(s)?(Object.assign(i,s.call(this,t)),h(t,"style")&&(i.style=O.call(this,r(t,"style"))),i):null}const at={attribute:ot,projection:ot,template:function(t){return c(t,z)?{type:"template",name:(e=t,z,d(o(e,"value")))}:null;var e}};function rt(t){console.log(t);const e=t.getProperty("elementType");var i={type:e};const s=at[e];return(0,n.isFunction)(s)?(Object.assign(i,s.call(this,t)),i):null}function ot(t){const e={type:"attribute",name:l(t,"src")},i="tag",n="placeholder";if(h(t,i)&&c(t,i)&&(e.tag=l(t,i)),h(t,B)&&(e.required=l(t,B)),h(t,"listen")&&(e.listen=l(t,"listen")),h(t,n)&&c(t,n)){const i=[];let s=r(t,n);l(s,D).filter((t=>t.hasValue())).forEach((t=>{const e=t.getValue(!0);i.push(tt.call(this,e))})),e.placeholder=i}return e}const lt={text:function(t){const e={};return e.asHTML=l(t,"asHTML"),e.content=l(t,D,!0),e},image:function(t){const e={};return e.url=l(t,"url"),e.alt=l(t,"alt"),e},link:function(t){const e={};return e.url=l(t,"url"),e.urlType=l(t,"type"),e.content=l(t,D).filter((t=>t.hasValue())).map((t=>{const e=t.getValue(!0);return tt.call(this,e)})),e},plink:function(t){const e={};return e.tag=l(t,"tag"),e.content=l(t,D).filter((t=>t.hasValue())).map((t=>{const e=t.getValue(!0);return tt.call(this,e)})),e},button:function(t){const e={};return e.trigger=l(t,"trigger"),e.disabled=l(t,"disabled"),e.content=l(t,D).filter((t=>t.hasValue())).map((t=>{const e=t.getValue(!0);return tt.call(this,e)})),e}},ct={text:function(t){const e={},i="input";return e.multiline=l(t,"multiline"),e.resizable=l(t,"resizable"),h(t,i)&&(e.input=pt.call(this,r(t,i))),e},binary:function(t){const e={},i="checkbox";e.state={};let n=r(t,"true");c(n,D)&&(e.state.true={content:l(n,D).filter((t=>t.hasValue())).map((t=>tt.call(this,t.getValue(!0))))});let s=r(t,"false");return c(s,D)&&(e.state.false={content:l(s,D).filter((t=>t.hasValue())).map((t=>tt.call(this,t.getValue(!0))))}),h(t,i)&&(e.checkbox=mt.call(this,r(t,i))),e},choice:function(t){const e={},i="placeholder",n="expanded",s="input",a="choice template";return e.choice={},h(t,i)&&(e.placeholder=l(t,i)),h(t,n)&&(e.expanded=l(t,n)),h(t,s)&&(e.input=pt.call(this,r(t,s))),h(t,a)&&(e.choice.option={template:gt.call(this,r(t,a))}),e},list:function(t){const e={},i="action",n="item template";if(e.list={},h(t,n)&&(e.list.item={template:gt.call(this,r(t,n))}),h(t,i)){let n=r(t,i);e.action={};const s="add";if(h(n,s)){let t=r(n,s);e.action[s]={position:l(t,"position")};const i=[{type:"static",static:{type:"text",content:l(t,D)}}];e.action.add.content=i}}return e},table:function(t){const e={},i="row template",n="header",s="body",a="footer";return e.table={},h(t,i)&&(e.table.row={template:gt.call(this,r(t,i))}),h(t,n)&&(e.header=O.call(this,r(t,n))),h(t,s)&&(e.body=O.call(this,r(t,s))),h(t,a)&&(e.footer=O.call(this,r(t,a))),e},interactive:function(t){const e={};return h(t,"content")&&(e.content=l(t,"content")),h(t,"field")&&(e.source=function(t){const e={};return h(t,"marker")&&(e.marker=l(t,"marker")),h(t,"tag")&&(e.tag=l(t,"tag")),e}(r(t,"field"))),h(t,"static-dependents")&&!(0,n.isEmpty)(l(t,"static-dependents"))&&(e.sd=[],l(t,"static-dependents").forEach((t=>{e.sd.push(it(t))}))),h(t,"dynamic-dependents")&&!(0,n.isEmpty)(l(t,"dynamic-dependents"))&&(e.dd=[],l(t,"dynamic-dependents").forEach((t=>{e.dd.push(it(t))}))),h(t,"marker")&&(e.marker=l(t,"marker")),h(t,"markers")&&(e.markers=[],l(t,"markers").forEach((t=>{e.markers.push(ht(t))}))),h(t,"self")&&(e.self=[],l(t,"self").forEach((t=>{e.self.push(l(t,"property"))}))),e},dynamic:function(t){const e={};return h(t,"content")&&(e.content=l(t,"content")),h(t,"marker")&&(e.marker=l(t,"marker")),h(t,"markers")&&(e.markers=[],l(t,"markers").forEach((t=>{e.markers.push(ht(t))}))),h(t,"self")&&(e.self=[],l(t,"self").forEach((t=>{e.self.push(l(t,"property"))}))),e},static:function(t){const e={};return h(t,"content")&&(e.content=l(t,"content")),h(t,"model-value")&&(e.mv=l(t,"model-value")),e},add:function(t){const e={type:"add"};return h(t,"content")&&(e.content=l(t,"content")),h(t,"items")&&(e.items=gt.call(this,r(t,"items"))),h(t,"ratio")&&(e.ratio=l(t,"ratio")),e},arrow:function(t){const e={type:"arrow"};return h(t,"source")&&(e.source=l(t,"source")),h(t,"target")&&(e.target=l(t,"target")),h(t,"decorator")&&(e.decorator=dt.call(this,r(t,"decorator"))),h(t,"arrow-style")&&(e.arrowStyle=ut.call(this,r(t,"arrow-style"))),e},svg:function(t){const e={};return h(t,"content")&&(e.content=l(t,"content")),h(t,"x")&&(e.x=l(t,"x")),h(t,"x")&&(e.x=l(t,"x")),e}};function ht(t){const e={};return h(t,"model-value")&&(e.mv=l(t,"model-value")),h(t,"aliases")&&(e.aliases=[],l(t,"aliases").forEach((t=>{e.aliases.push(function(t){const e={};return h(t,"marker-value")&&(e.mv=l(t,"marker-value")),h(t,"properties")&&(e.props=function(t){let e={props:[]};if(h(t,"bold")&&l(t,"bold")){const t={props:"font-weight",value:"bold"};e.props.push(t)}if(h(t,"italic")&&l(t,"italic")){const t={props:"font-style",value:"italic"};e.props.push(t)}if(h(t,"underline")&&l(t,"underline")){const t={props:"text-decoration",value:"underline"};e.props.push(t)}if(h(t,"color")){let i=r(t,"color"),s=l(i,"value");if(!(0,n.isNullOrUndefined)(s)){const t={props:"fill"};t.value=s,e.props.push(t)}}if(h(t,"size")){let i=r(t,"size");if(!(0,n.isNullOrUndefined)(i)&&c(i,"value")){const t={props:"font-size"};t.value=l(i,"value")+l(i,"unit"),e.props.push(t)}}if(h(t,"text-content")){let i=l(t,"text-content");(0,n.isNullOrUndefined)(i)||""===i||e.props.push({props:"textContent",value:i})}return h(t,"others")&&l(t,"others").forEach((t=>{e.props.push(function(t){const e={};return e.property=l(t,"property"),e.value=l(t,"value"),e}(t))})),e.props}(r(t,"properties"))),e}(t))}))),e}function dt(t){const e={};return h(t,"attribute")&&(e.attribute={type:"dynamic",dynamic:rt.call(this,r(t,"attribute"))}),h(t,"base")&&(e.base=l(t,"base")),e}function ut(t){const e={};if(h(t,"stroke")){let i=r(t,"stroke"),s=l(i,"value");(0,n.isNullOrUndefined)(s)?e.stroke="#000000":e.stroke=s.startsWith("#")?s:`#${s}`}return h(t,"stroke-width")&&(e.width=l(t,"stroke-width")),h(t,"stroke-dasharray")&&(e.dasharray=l(t,"stroke-dasharray")),h(t,"stroke-linecap")&&(e.linecap=l(t,"stroke-linecap")),h(t,"marker-end")&&(e.end=l(t,"marker-end")),h(t,"marker-start")&&(e.start=l(t,"marker-start")),e}function pt(t){let e={type:l(t,"type"),placeholder:l(t,"placeholder")};return h(t,V)&&(e.style=O.call(this,r(t,V))),e}function mt(t){let e={position:l(t,"position"),label:yt.call(this,r(t,"label"))};return h(t,V)&&(e.style=O.call(this,r(t,V))),e}function yt(t){let e={content:l(t,"content")};return h(t,V)&&(e.style=O.call(this,r(t,V))),e}function gt(t){const e={};return h(t,$)&&c(t,$)&&(e.tag=l(t,$)),h(t,P)&&c(t,P)&&(e.name=l(t,P)),h(t,V)&&(e.style=O.call(this,r(t,V))),e}const ft="elementType",bt="concept",vt="name",wt="required",xt="tags",Et={graphical:function(t){const e=h(t,xt)?l(t,xt,!0):[];let i=r(t,bt);if(t.hasParent()){let e=t.getParent("collection");i=r(e,bt)}const s=K.call(this,i);if((0,n.isEmpty)(Object.keys(s))){let e=u.call(this,"concept",r(t,bt)),i=(0,n.createSpan)({class:["error-message"]},["Projection error: ",e," is missing a value"]);this.__errors.push(i)}const a=l(t,"element",!0);let o={concept:s,tags:e};const p=a.getProperty("handlerType");return o.type=p,o.content=At[p].call(this,a),h(t,vt)&&c(t,vt)&&(o.name=d(t)),{success:!0,message:o}},projection:Y,template:G,style:J},At={algorithm:kt,arrow:function(t){const e=t.getProperty(ft);var i={type:e};const s=Ot[e];return(0,n.isFunction)(s)?(Object.assign(i,s.call(this,t)),i):null}};function jt(t={}){const e={type:"projection",projection:[],template:[],style:[]},{conceptModel:i}=this;this.logs.clear();const a=Object.assign({name:"projection",download:!0,notify:"always"},t),r=i.getConcepts(["graphical","projection","template","style rule"]);return(0,n.isEmpty)(r)?(this.notify("<strong>Empty model</strong>: Please create at least one projection.",s.k$.WARNING,2e3),!1):(this.__errors=[],r.forEach((t=>{let i=(0,n.valOrDefault)(t.getProperty("handler"),"");console.log("Handler For Base"),console.log(i);const s=Et[i];console.log(s);const{message:a}=s.call(this,t);"graphical"===i?e.projection.push(a):e[i].push(a)})),(0,n.isEmpty)(this.__errors)?("always"===a.notify&&this.notify("The projection model was <strong>successfully</strong> built",s.k$.SUCCESS,2e3),a.download&&this.download(e,a.name),delete this.__errors,e):(this.notify("<strong>Validation failed</strong>: The model could not be built.<br> <em>See Log for more details</em>.",s.k$.ERROR),this.logs.add(this.__errors,"Validation error",s.hi.ERROR),delete this.__errors,!1))}const Ot={force:function(t){const e={};if(!c(t,"from")){let e=u.call(this,"from",r(t,"from")),i=(0,n.createSpan)({class:["error-message"]},["Projection error: ",e," is missing a value"]);this.__errors.push(i)}if(e.from={name:l(t,"from")},!c(t,"to")){let e=u.call(this,"to",r(t,"from")),i=(0,n.createSpan)({class:["error-message"]},["Projection error: ",e," is missing a value"]);this.__errors.push(i)}return e.to={name:l(t,"to")},h(t,"decorator")&&(e.decorator=St.call(this,r(t,"decorator"))),e}},Nt={decoration:function(t){const e={};h(t,"dimensions")&&(e.dimensions=Ht.call(this,r(t,"dimensions"))),h(t,"coordinates")&&(e.coordinates=Bt.call(this,r(t,"coordinates")));const i=r(t,"shape");if(console.log(i),console.log(l(i,"elements")),(0,n.isEmpty)(l(i,"elements"))||(e.background=$t.call(this,i)),(0,n.isNullOrUndefined)(e.background)&&l(t,"background")&&(e.background=l(t,"content")),!(0,n.isEmpty)(l(t,"content"))){let i=[];l(t,"content").forEach((t=>{console.log(t);let e=l(t,"render",!0);console.log(e);const n={};n.dimension=Pt.call(this,l(e,"dimension",!0)),n.coordinates=Bt.call(this,r(e,"coordinates")),console.log(n),n.render=Ct.call(this,e),i.push(n)})),e.content=i}return e},force:function(t){const e={};return e.dimensions=Pt.call(this,r(r(t,"force"),"dimension")),e.force=Lt.call(this,r(t,"force")),e.tag=l(t,"tag"),e}};function kt(t){const e=t.getProperty(ft);var i={type:e};const s=Nt[e];return(0,n.isFunction)(s)?(Object.assign(i,s.call(this,t)),i):null}function Lt(t){const e={};return e.intensity=Math.min(l(t,"intensity"),-1*l(t,"intensity")),e.linkVal=l(t,"linkVal"),e}const _t={layout:kt,dynamic:St,field:function(t){console.log("BuildingField"),console.log(t);const e=t.getProperty(ft),i=It[e];return(0,n.isNullOrUndefined)(i)?null:Object.assign({type:e},i.call(this,t))},static:function(t){const e=t.getProperty(ft),i=Mt[e];return(0,n.isNullOrUndefined)(i)?null:Object.assign({type:e},i.call(this,t))}};function Ct(t){const e=t.getProperty("contentType"),i=_t[e];if(!(0,n.isFunction)(i))return null;let s=e;return Object.assign({kind:s},i.call(this,t))}const Tt={projection:function(t){const e={type:"attribute",name:l(t,"src")},i="tag",n="placeholder";if(h(t,i)&&c(t,i)&&(e.tag=l(t,i)),h(t,wt)&&(e.required=l(t,wt)),h(t,"listen")&&(e.listen=l(t,"listen")),h(t,n)&&c(t,n)){const i=[];let s=r(t,n);l(s,"content").filter((t=>t.hasValue())).forEach((t=>{const e=t.getValue(!0);i.push(Ct.call(this,e))})),e.placeholder=i}return e}};function St(t){const e=t.getProperty("elementType");var i={type:e};const s=Tt[e];return(0,n.isFunction)(s)?(Object.assign(i,s.call(this,t)),i):null}const Mt={"svg-text":function(t){const e={};return e.content=l(t,"content"),e.style=Dt.call(this,r(t,"style")),e},"svg-button":function(t){const e={},i=r(t,"shape");return(0,n.isEmpty)(r(i,"elements"))||(e.content=$t.call(this,i)),(0,n.isNullOrUndefined)(e.background)&&l(t,"content")&&(e.content=l(layout,"content")),e.action={type:(0,n.valOrDefault)(l(t,"action"),"SIDE")},console.log(t),"SIDE"===e.action.type&&(e.action.target=l(t,"tag")),e},svg:function(t){const e={};return e.content=l(t,"content"),e}},It={svg:function(t){const e={};return e.content=l(t,"placeholder"),e.readonly=(0,n.valOrDefault)(l(t,"readonly"),!1),e.break=l(t,"break"),e.style=Dt.call(this,r(t,"style")),e},"svg-choice":function(t){console.log("BuildingChoice");const e={};return e.tag=l(t,"tag"),e.selection=Ut.call(this,r(t,"selection")),e}};function Ut(t){const e={};return e.orientation=l(t,"orientation"),e.breakDown=l(t,"break"),e.dimensions=Vt.call(this,r(t,"dimensions")),e}function Dt(t){const e={};return e.font=l(t,"font"),e.baseline=l(t,"baseline"),e.size=l(t,"size"),e.anchor=l(t,"anchor"),h(t,"weight")&&c(t,"weight")&&(e.weight=l(t,"weight")),e}function Ht(t){const e={};return e.width=l(t,"width"),e.height=l(t,"height"),e}function Pt(t){const e={};switch(e.type=t.name,t.name){case"absolute":e.width=l(t,"width"),e.height=l(t,"height");break;case"fixed":e.value=l(t,"width")}return e}function Vt(t){const e={};return e.width=l(t,"width"),e.height=l(t,"height"),e}function Bt(t){const e={};return e.x=l(t,"x"),e.y=l(t,"y"),e}const Rt={circle:function(t){let e="<circle ";e+='cx="'+l(t,"cx")+'" ';e+='cy="'+l(t,"cy")+'" ';return e+='r="'+l(t,"r")+'" ',e+=Ft.call(this,r(t,"style")),e+="></circle>",e},rectangle:function(t){let e="<rect ";e+='x="'+l(t,"x")+'" ';e+='y="'+l(t,"y")+'" ';e+='width="'+l(t,"width")+'" ';return e+='height="'+l(t,"height")+'" ',e+=function(t){let e="";e+='fill="'+(0,n.valOrDefault)(l(t,"fill"),"black")+'" ',e+='stroke="'+(0,n.valOrDefault)(l(t,"stroke"),"black")+'" ',e+='stroke-width="'+(0,n.valOrDefault)(l(t,"s-width"),0)+'" ';const i=l(t,"s-dash");(0,n.isNullOrUndefined)(i)||(e+='stroke-dasharray="'+i+'" ');const s=l(t,"rx");(0,n.isNullOrUndefined)(s)||(e+='rx="'+s+'" ');const a=l(t,"ry");return(0,n.isNullOrUndefined)(a)||(e+='ry="'+a+'" '),e}(r(t,"style")),e+="></rect>",e},ellipse:function(t){let e="<ellipse ";e+='cx="'+l(t,"cx")+'" ';e+='cy="'+l(t,"cy")+'" ';e+='rx="'+l(t,"rx")+'" ';return e+='ry="'+l(t,"ry")+'" ',e+=Ft(r(t,"style")),e+="></ellipse>",e},polygon:function(t){let e="<polygon ";return e+='points="'+l(t,"points")+'" ',e+=Ft(r(t,"style")),e},path:function(t){let e="<path ";return e+='d="'+l(t,"d")+'" ',e+=Ft(r(t,"style")),e+="></path>",e}};function $t(t){let e='<svg xmlns="http://www.w3.org/2000/svg" ';const i=l(t,"width");e+='width="'+i+'" ';const s=l(t,"height");e+='height="'+s+'" ';const a=l(t,"minX"),r=l(t,"minY"),o=l(t,"windowW"),c=l(t,"windowH");return e+='viewBox="'+a+" "+r+" "+(0,n.valOrDefault)(o,i)+" "+(0,n.valOrDefault)(c,s)+'">',l(t,"elements").forEach((t=>{let i=t.getValue(!0);e+=Rt[i.name].call(this,i)})),e+="</svg>",e}function Ft(t){let e="";e+='fill="'+(0,n.valOrDefault)(l(t,"fill"),"black")+'" ',e+='stroke="'+(0,n.valOrDefault)(l(t,"stroke"),"black")+'" ',e+='stroke-width="'+(0,n.valOrDefault)(l(t,"s-width"),0)+'" ';const i=l(t,"s-dash");return(0,n.isNullOrUndefined)(i)||(e+='stroke-dasharray="'+i+'"'),e}const zt={PRIMITIVE:"E",CONCRETE:"C",PROTOTYPE:"P",DERIVATIVE:"D"},qt={container:null,header:null,body:null,schema:null,name:null,nature:null,prototype:null,btnCreate:null,instances:null,attributes:null,selectedAttribute:null,extras:null,tag:"",init(t){return this.schema=t,this.instances=[],this.extras=[],this.attributes=new Map,"primitive"===t.nature&&(this.tag=t.name),this},getName(){return this.schema.name},addInstance(t){this.instances.push(t)},render(){const{name:t,nature:e,attributes:i}=this.schema;(0,n.isHTMLElement)(this.container)||(this.container=(0,n.createDiv)({class:["app-model-concept"]})),this.header=(0,n.createDiv)({class:["app-model-concept-header"]});let s=(0,n.createI)({class:["app-model-concept-nature"],dataset:{name:e}},zt[e.toUpperCase()]),a=(0,n.createSpan)({class:["app-model-concept-name"]},t);this.header.append(s,a);let r=(0,n.createUnorderedList)({class:["bare-list","app-model-concept-attributes"]});return Array.isArray(i)&&i.forEach((t=>{let e=(0,n.createListItem)({class:["app-model-concept-attribute"],dataset:{name:t.name,type:"attribute"}},t.name);this.attributes.set(t.name,e),r.append(e)})),this.body=(0,n.createDiv)({class:["app-model-concept-body"]}),this.body.append(r),this.container.append(this.header,this.body),this.bindEvents(),this.container},select(){this.container.classList.add("selected"),this.instances.forEach((t=>{t.show()})),this.refresh()},unselect(){this.container.classList.remove("selected"),this.instances.forEach((t=>{t.hide()})),this.refresh()},selectAttribute(t){return!(0,n.isNullOrUndefined)(t)&&(this.selectedAttribute!==t&&(this.selectedAttribute&&this.attributes.get(this.selectedAttribute).classList.remove("selected"),!!this.attributes.has(t)&&(this.selectedAttribute=t,this.attributes.get(t).classList.add("selected"),this.displayAttribute(t),this.refresh(),!0)))},displayAttribute(t){const{name:e,target:i,required:s=!0}=this.schema.attributes.find((e=>e.name===t));let a=(0,n.createSpan)({class:["app-model__attribute-name"]},e),r=(0,n.createDiv)({class:["app-model__attribute-header"]},[a]);if(s){let t=(0,n.createI)({class:["app-model__attribute-required"]},(0,n.createSpan)({class:["help"]},"required"));r.append(t)}let o=(0,n.createDiv)({class:["app-model__attribute-target"]},Wt(i)),l=(0,n.createDiv)({class:["app-model__attribute-info"]},[r,o]);this.body.append(l),this.extras.forEach((t=>(0,n.removeChildren)(t).remove())),this.extras=[],this.extras.push(l),this.refresh()},clear(){this.selectedAttribute&&(this.attributes.get(this.selectedAttribute).classList.remove("selected"),this.selectedAttribute=null),this.extras.forEach((t=>(0,n.removeChildren)(t).remove())),this.extras=[],this.refresh()},destroy(){(0,n.removeChildren)(this.container),this.container.remove()},refresh(){},bindEvents(){this.container.addEventListener("click",(t=>{this.parent.selectConcept(this);const{target:e}=t,{type:i,name:n}=e.dataset;"attribute"===i?this.selectAttribute(n):"concept"===i?this.parent.selectConcept(n)||(0,s.lL)(e):this.clear()}))}};function Wt(t){const e=(0,n.createDocFragment)();if((0,n.isNullOrUndefined)(t))return e;const{name:i,accept:s}=t;let a=(0,n.createSpan)({class:["target-name"],dataset:{type:"concept",name:i}},i);if(e.append(a),s){let t=(0,n.createDiv)({class:["target-accept"]});Array.isArray(s)?(t.append(...s.map((t=>Wt(t)))),t.classList.add("array")):t.append(Wt(s)),e.append(t)}return e}var Zt=0;const Xt=t=>s.WV.list().includes(t.toLowerCase()),Yt={container:null,editor:null,init(t){return this.editor=t,this.aside=Object.create(Kt).init(null,t),this.editor.attach(this),this},show(){(0,s.$Z)(this.container)},hide(){(0,s.Cp)(this.container)},render(){return(0,n.isHTMLElement)(this.container)||(this.container=(0,n.createDiv)({class:["app-editor"]})),this.container.append(this.aside.render()),this.container.append(this.editor.container),this.container},refresh(){},bindEvents(){}},Gt={container:null,editor:null,init(t){return this.editor=t,this.aside=Object.create(Jt).init(null,t),this.editor.attach(this),this},show(){(0,s.$Z)(this.container)},hide(){(0,s.Cp)(this.container)},render(){return(0,n.isHTMLElement)(this.container)||(this.container=(0,n.createDiv)({class:["app-editor"]})),this.container.append(this.aside.render()),this.container.append(this.editor.container),this.container},refresh(){},bindEvents(){}},Jt={container:null,header:null,body:null,nav:null,model:null,userConceptSection:null,primitiveConceptSection:null,editor:null,uploader:null,btnModel:null,concepts:null,selectedConcept:null,tabs:null,selectedNav:null,init(t,e){return this.model=t,this.editor=e,this.tabs=new Map,this.concepts=[],this},show(){(0,s.$Z)(this.container)},hide(){(0,s.Cp)(this.container)},addModel(t){this.model=t,this.model.concept.forEach((t=>{let e=this.createConcept(t).init(t);this.concepts.push(e),this.userConceptSection.append((0,n.createDiv)({class:["app-concept"]},e.render()))})),s.WV.list().forEach((t=>{let e=this.createConcept(t).init({nature:"primitive",name:t});this.concepts.push(e),this.primitiveConceptSection.append((0,n.createDiv)({class:["app-concept"]},e.render()))})),this.refresh()},createConcept(t){return Object.create(qt,{parent:{value:this},id:{value:Zt++},editor:{value:this.editor,writable:!0}})},clear(){this.concepts.forEach((t=>{t.destroy()})),this.concepts=[]},findConcept(t){return(0,n.isNullOrUndefined)(t)?null:t.parent===this?t:Xt(t)?(this.notify(`'${t}' is a primitive.`,s.k$.NORMAL),null):this.concepts.find((e=>e.getName()===t))},selectConcept(t){if((0,n.isNullOrUndefined)(t))return!1;let e=this.findConcept(t);return!(0,n.isNullOrUndefined)(e)&&this.selectedConcept!==e&&(this.selectedConcept&&this.selectedConcept.unselect(),this.selectedConcept=e,this.selectedConcept.select(),this.refresh(),!0)},removeModel(){},selectTab(t){if((0,n.isNullOrUndefined)(t))return!1;if(this.selectedNav===t)return!1;if(this.selectedNav){const{tab:t,window:e}=this.tabs.get(this.selectedNav);t.classList.remove("selected"),(0,s.Cp)(e)}const{tab:e,window:i}=this.tabs.get(t);e.classList.add("selected"),this.selectedNav=t,(0,s.$Z)(i)},update(){},notify(t,e,i=4500){let s=(0,n.createParagraph)({class:["notify"],html:t});const a="open";e&&s.classList.add(e),this.header.append(s),setTimeout((()=>{s.classList.add(a)}),50),setTimeout((()=>{s.classList.remove(a),setTimeout((()=>{s.remove()}),500)}),i)},refresh(){(0,n.isNullOrUndefined)(this.selectedConcept)?this.editor.header.hide("body"):this.editor.header.show("body")},render(){(0,n.isHTMLElement)(this.container)||(this.container=(0,n.createDiv)({class:["app-editor-aside"]}));const t=(0,n.createDocFragment)();return(0,n.isHTMLElement)(this.header)||(this.header=(0,n.createDiv)({class:["app-editor-aside-header"]}),t.append(this.header)),(0,n.isHTMLElement)(this.input)||(this.uploader=(0,n.createLabel)({class:["app-uploader"]},[(0,n.createInput)({type:"file",class:["app-uploader-input","hidden"],accept:".json,.jsoncp"}),(0,n.createSpan)({class:["app-uploader-label"]},"Upload concepts")]),this.header.append(this.uploader)),(0,n.isHTMLElement)(this.body)||(this.body=(0,n.createDiv)({class:["app-editor-aside-body"]}),t.append(this.body)),(0,n.isHTMLElement)(this.nav)||(this.nav=(0,n.createUnorderedList)({class:["bare-list","app-editor-aside-nav"]}),["User-defined","Primitive"].forEach((t=>{this.nav.append((0,n.createListItem)({class:["app-editor-aside-nav-item"],dataset:{type:"nav",name:t.toLowerCase()}},t))})),this.body.append(this.nav)),this.userConceptSection=(0,n.createDiv)({class:["app-editor-aside-body-userconcept","hidden"]}),this.primitiveConceptSection=(0,n.createDiv)({class:["app-editor-aside-body-primitiveconcept","hidden"]}),this.tabs.set("user-defined",{tab:this.nav.children[0],window:this.userConceptSection}),this.tabs.set("primitive",{tab:this.nav.children[1],window:this.primitiveConceptSection}),this.body.append(this.userConceptSection,this.primitiveConceptSection),(0,n.isNullOrUndefined)(this.selectedNav)&&this.selectTab("user-defined"),t.hasChildNodes()&&(this.container.append(t),this.bindEvents()),this.refresh(),this.container},bindEvents(){this.uploader.addEventListener("change",(t=>{let e=t.target.files[0],i=new FileReader;i.onload=t=>{const e=JSON.parse(i.result);this.addModel(e)},i.readAsText(e)})),this.container.addEventListener("click",(t=>{const{target:e}=t,{type:i,name:n}=e.dataset;"nav"===i&&this.selectTab(n)})),this.editor.actions.set("create-instance",(t=>{const{concept:e}=t.dataset;let i=this.editor.createConcept(e);console.log(this.selectedConcept.tag);let n=this.editor.createProjection(i,this.selectedConcept.tag),s=this.editor.createInstance(i,n);"projection"!==e&&"general"!==e&&"graphical"!==e||s.concept.getAttribute("concept").getTarget().getAttribute("name").getTarget().setValue(this.selectedConcept.getName()),this.selectedConcept.addInstance(s)})),this.editor.actions.set("extract-instance",(t=>{const e=t;let i=this.editor.createConcept(e);console.log(this.selectedConcept.tag);let n=this.editor.createProjection(i,this.selectedConcept.tag),s=this.editor.createInstance(i,n);return"projection"!==e&&"general"!==e&&"graphical"!==e||s.concept.getAttribute("concept").getTarget().getAttribute("name").getTarget().setValue(this.selectedConcept.getName()),this.selectedConcept.addInstance(s),i.getAttributeByName("element").target.getValue(!0)}))}},Kt={container:null,header:null,body:null,nav:null,model:null,userConceptSection:null,primitiveConceptSection:null,editor:null,uploader:null,btnModel:null,concepts:null,selectedConcept:null,tabs:null,selectedNav:null,init(t,e){return this.model=t,this.editor=e,this.tabs=new Map,this.concepts=[],this},show(){(0,s.$Z)(this.container)},hide(){(0,s.Cp)(this.container)},addModel(t){this.model=t,this.model.concept.forEach((t=>{this.createConcept(t)})),this.refresh()},createConcept(t){const{name:e,nature:i,root:s,attributes:a,properties:r,base:o,prototype:l}=t,c={string:"string primitive",number:"number primitive",boolean:"boolean primitive",reference:"reference primitive",set:"set primitive"};let h=this.editor.createConcept({prototype:"prototype-concept",concrete:"concrete-concept",derivative:"derivative-concept"}[i]);if(h.getAttribute("name").getTarget().setValue(e),Array.isArray(a)){let t=h.getAttribute("attributes").getTarget();a.forEach((e=>{const{name:i,target:s}=e;t.createElement({attributes:[{name:"name",value:{value:i}},{name:"target",value:{value:{name:(0,n.valOrDefault)(c[s.name],"concept primitive")}}}]})}))}s&&h.getAttribute("root").getTarget().setValue(s),o&&h.getAttribute("base").getTarget().setValue({name:c[o]}),this.editor.createInstance(h)},clear(){this.concepts.forEach((t=>{t.destroy()})),this.concepts=[]},findConcept(t){return(0,n.isNullOrUndefined)(t)?null:t.parent===this?t:Xt(t)?(this.notify(`'${t}' is a primitive.`,s.k$.NORMAL),null):this.concepts.find((e=>e.getName()===t))},selectConcept(t){if((0,n.isNullOrUndefined)(t))return!1;let e=this.findConcept(t);return!(0,n.isNullOrUndefined)(e)&&this.selectedConcept!==e&&(this.selectedConcept&&this.selectedConcept.unselect(),this.selectedConcept=e,this.selectedConcept.select(),this.refresh(),!0)},removeModel(){},selectTab(t){if((0,n.isNullOrUndefined)(t))return!1;if(this.selectedNav===t)return!1;if(this.selectedNav){const{tab:t,window:e}=this.tabs.get(this.selectedNav);t.classList.remove("selected"),(0,s.Cp)(e)}const{tab:e,window:i}=this.tabs.get(t);e.classList.add("selected"),this.selectedNav=t,(0,s.$Z)(i)},update(){},notify(t,e,i=4500){let s=(0,n.createParagraph)({class:["notify"],html:t});const a="open";e&&s.classList.add(e),this.header.append(s),setTimeout((()=>{s.classList.add(a)}),50),setTimeout((()=>{s.classList.remove(a),setTimeout((()=>{s.remove()}),500)}),i)},refresh(){},render(){(0,n.isHTMLElement)(this.container)||(this.container=(0,n.createDiv)({class:["app-editor-aside"]}));const t=(0,n.createDocFragment)();return(0,n.isHTMLElement)(this.header)||(this.header=(0,n.createDiv)({class:["app-editor-aside-header"]}),t.append(this.header)),(0,n.isHTMLElement)(this.input)||(this.uploader=(0,n.createLabel)({class:["app-uploader"]},[(0,n.createInput)({type:"file",class:["app-uploader-input","hidden"],accept:".json,.jsoncp"}),(0,n.createSpan)({class:["app-uploader-label"]},"Upload concepts")]),this.header.append(this.uploader)),(0,n.isHTMLElement)(this.body)||(this.body=(0,n.createDiv)({class:["app-editor-aside-body"]}),t.append(this.body)),(0,n.isHTMLElement)(this.nav)||(this.nav=(0,n.createUnorderedList)({class:["bare-list","app-editor-aside-nav"]}),["User-defined","Primitive"].forEach((t=>{this.nav.append((0,n.createListItem)({class:["app-editor-aside-nav-item"],dataset:{type:"nav",name:t.toLowerCase()}},t))})),this.body.append(this.nav)),this.userConceptSection=(0,n.createDiv)({class:["app-editor-aside-body-userconcept","hidden"]}),this.primitiveConceptSection=(0,n.createDiv)({class:["app-editor-aside-body-primitiveconcept","hidden"]}),this.tabs.set("user-defined",{tab:this.nav.children[0],window:this.userConceptSection}),this.tabs.set("primitive",{tab:this.nav.children[1],window:this.primitiveConceptSection}),this.body.append(this.userConceptSection,this.primitiveConceptSection),(0,n.isNullOrUndefined)(this.selectedNav)&&this.selectTab("user-defined"),t.hasChildNodes()&&(this.container.append(t),this.bindEvents()),this.refresh(),this.container},bindEvents(){this.uploader.addEventListener("change",(t=>{let e=t.target.files[0],i=new FileReader;i.onload=t=>{const e=JSON.parse(i.result);this.addModel(e)},i.readAsText(e)})),this.container.addEventListener("click",(t=>{const{target:e}=t,{type:i,name:n}=e.dataset;"nav"===i&&this.selectTab(n)})),this.editor.actions.set("create-instance",(t=>{const{concept:e}=t.dataset;let i=this.editor.createConcept(e);console.log(this.selectedConcept.tag);let n=this.editor.createProjection(i,this.selectedConcept.tag),s=this.editor.createInstance(i,n);"projection"===e&&s.concept.getAttribute("concept").getTarget().getAttribute("name").getTarget().setValue(this.selectedConcept.getName()),this.selectedConcept.addInstance(s)}))}};let Qt=null,te=null,ee=null,ie=null;const ne=i(868),se=i(547),ae=i(78),re=i(221),oe=i(843),le=i(521),ce=i(276);ee=i(425),ie=i(445);var he=0;const de={menu:null,editorSection:null,btnNew:null,tabList:null,editors:null,tabs:null,activeEditor:null,activeTab:null,init(){return this.editors=[],this.tabs=new Map,this.bindDOM(),this.bindEvents(),this.render(),this},refresh(){return this},render(){this.refresh()},createEditor(t){let e=(0,a.createEditor)().init(t);return e.id="GE"+he++,this.addEditor(e),e},addEditor(t){return this.editors.push(t),this.editorSection.append(t.container),this.refresh(),this},getEditors(t){const e=this.editors;return(0,n.isFunction)(t)?this.editors.filter((e=>t(e))):e},getEditor(t){return this.editors.find((e=>e.id===t))},deleteEditor(t){let e=this.editors.findIndex((e=>e.id===t));return-1!==e&&(this.getEditor(t).destroy(),this.editors.splice(e,1),this.refresh(),!0)},addTab(t,e){return t.parentElement!==this.tabList&&this.tabList.append(t),this.tabs.set(t,e),e.registerHandler("editor.close@post",(()=>this.closeTab(t))),this},closeTab(t){if((0,n.isNullOrUndefined)(t)||!this.tabs.has(t))return!1;let e=this.tabs.get(t);return this.deleteEditor(e.id),this.tabs.delete(t),t===this.activeTab&&(this.activeTab=null,this.tabList.hasChildNodes()&&this.changeTab(t.previousElementSibling||t.nextElementSibling)),t.remove(),this.refresh(),!0},changeTab(t){if(!(0,n.isNullOrUndefined)(t)){if(this.activeTab){if(this.activeTab===t)return this;this.activeTab.classList.remove("selected"),this.tabs.get(this.activeTab).hide()}return this.activeTab=t,this.activeTab.classList.add("selected"),this.tabs.get(this.activeTab).show(),this.refresh(),this}},bindModel(){},bindDOM(){this.menu=(0,n.getElement)('[data-component="menu"]'),this.editorSection=(0,n.getElement)('[data-component="editor"]'),this.tabSection=(0,n.getElement)('[data-component="nav"]'),this.tabList=(0,n.getElement)('[data-component="nav-list"]'),(0,n.isHTMLElement)(this.tabList)||(this.tabList=(0,n.createUnorderedList)({class:["bare-list","app-tabs"]}),this.tabSection.append(this.tabList));const t={concept:ge,projection:fe,graphic:be};for(let e=0;e<this.tabList.childElementCount;e++){const i=this.tabList.children.item(e),{editor:n}=i.dataset;t[n].call(this).then((t=>{t.hide(),this.addTab(i,t),i.classList.contains("selected")&&(this.activeTab=i,this.tabs.get(this.activeTab).show())})).catch((t=>{console.log(t)}))}return this},bindEvents(){this.menu.addEventListener("click",(t=>{let e=function(t,e){return(0,n.isNullOrUndefined)(t)||t===e?null:(0,n.hasOwn)(t.dataset,"action")?t:t.parentElement===e?(0,n.getElement)("[data-action]",t):(0,n.findAncestor)(t,(t=>(0,n.hasOwn)(t.dataset,"action")),5)}(t.target,this.menu);if(!(0,n.isHTMLElement)(e))return!1;const{action:i}=e.dataset;if("new"===i){let t=ue.call(this,"EX"),e={toolbar:[{type:"button",name:"button-export",action:"export.model",class:["btn","editor-toolbar__button","editor-toolbar__button--save"]},{type:"button",name:"button-menu",action:"open.menu",class:["btn","editor-toolbar__button","editor-toolbar__button--home"]},{type:"button",name:"button-close",action:"close.editor",class:["btn","editor-toolbar__button","editor-toolbar__button--close"]}]};this.addTab(t,this.createEditor({config:e,handlers:{"export.model":function(){this.export()},"open.menu":function(){this.home.open()},"close.editor":function(){this.close()},"build-concept":function(t){v.call(this)},"build-projection":function(t){X.call(this)}}})),this.changeTab(t)}})),this.tabList.addEventListener("click",(t=>{let e=function(t,e){return t.parentElement===e?t:(0,n.findAncestor)(t,(t=>t.parentElement===e))}(t.target,this.tabList);if(!(0,n.isHTMLElement)(e))return!1;this.changeTab(e)}))}};function ue(t){let e=(0,n.createSpan)({class:["nav-item-title"]},t);return(0,n.createListItem)({class:["nav-item","has-helper"]},[e])}const pe={"open-constraint":function(t){let e=t[0],i=this.createProjection(e,"constraint"),s=this.findWindow("side-instance");(0,n.isNullOrUndefined)(s)&&(s=this.createWindow("side-instance"),s.container.classList.add("concept-constraint-sideview")),s.instances.size>0&&Array.from(s.instances)[0].delete();let a=this.createInstance(e,i,{type:"projection",close:"DELETE-PROJECTION"});s.addInstance(a)},"build-concept":function(t){v.call(this)}},me={"build-projection":function(t){X.call(this)},"value.changed":function(){if(!this.__previewStarted)return!1},"value.added":function(){if(!this.__previewStarted)return!1},"value.removed":function(){if(!this.__previewStarted)return!1},"open-style":function(t){let e=t[0],i=this.createProjection(e,"style"),s=this.findWindow("side-instance");(0,n.isNullOrUndefined)(s)&&(s=this.createWindow("side-instance"),s.container.classList.add("model-projection-sideview")),s.instances.size>0&&Array.from(s.instances)[0].delete();let a=this.createInstance(e,i,{type:"projection",close:"DELETE-PROJECTION"});s.addInstance(a)},"open-state":function(t){let e=t[0],i=this.createProjection(e,"state"),s=this.findWindow("side-instance");(0,n.isNullOrUndefined)(s)&&(s=this.createWindow("side-instance"),s.container.classList.add("model-projection-sideview")),s.instances.size>0&&Array.from(s.instances)[0].delete();let a=this.createInstance(e,i,{type:"projection",close:"DELETE-PROJECTION"});s.addInstance(a)},"open-layout":function(t){let e=t[0],i=this.createProjection(e,"layout"),s=this.findWindow("side-instance");(0,n.isNullOrUndefined)(s)&&(s=this.createWindow("side-instance"),s.container.classList.add("model-projection-sideview")),s.instances.size>0&&Array.from(s.instances)[0].delete();let a=this.createInstance(e,i,{type:"projection",close:"DELETE-PROJECTION"});s.addInstance(a)}},ye={"build-graphical":function(t){jt.call(this)},"open-state":function(t){let e=t[0],i=this.createProjection(e,"state"),s=this.findWindow("side-instance");(0,n.isNullOrUndefined)(s)&&(s=this.createWindow("side-instance"),s.container.classList.add("model-projection-sideview")),s.instances.size>0&&Array.from(s.instances)[0].delete();let a=this.createInstance(e,i,{type:"projection",close:"DELETE-PROJECTION"});s.addInstance(a)},"open-sibling":function(t){let e=t[0],i=this.createProjection(e,"sibling"),s=this.findWindow("side-instance");(0,n.isNullOrUndefined)(s)&&(s=this.createWindow("side-instance"),s.container.classList.add("model-projection-sideview")),s.instances.size>0&&Array.from(s.instances)[0].delete();let a=this.createInstance(e,i,{type:"projection",close:"DELETE-PROJECTION"});s.addInstance(a)},"open-style":function(t){let e=t[0],i=this.createProjection(e,"style"),s=this.findWindow("side-instance");(0,n.isNullOrUndefined)(s)&&(s=this.createWindow("side-instance"),s.container.classList.add("model-projection-sideview")),s.instances.size>0&&Array.from(s.instances)[0].delete();let a=this.createInstance(e,i,{type:"projection",close:"DELETE-PROJECTION"});s.addInstance(a)},"open-area":function(t){let e=t[0],i=this.createProjection(e,"area"),s=this.findWindow("side-instance");(0,n.isNullOrUndefined)(s)&&(s=this.createWindow("side-instance"),s.container.classList.add("model-projection-sideview")),s.instances.size>0&&Array.from(s.instances)[0].delete();let a=this.createInstance(e,i,{type:"projection",close:"DELETE-PROJECTION"});s.addInstance(a)},"open-draw":function(t){let e=t[0],i=this.createProjection(e,"draw"),s=this.findWindow("side-instance");(0,n.isNullOrUndefined)(s)&&(s=this.createWindow("side-instance"),s.container.classList.add("model-projection-sideview")),s.instances.size>0&&Array.from(s.instances)[0].delete();let a=this.createInstance(e,i,{type:"projection",close:"DELETE-PROJECTION"});s.addInstance(a)},"open-layout":function(t){let e=t[0],i=this.createProjection(e,"layout"),s=this.findWindow("side-instance");(0,n.isNullOrUndefined)(s)&&(s=this.createWindow("side-instance"),s.container.classList.add("model-projection-sideview")),s.instances.size>0&&Array.from(s.instances)[0].delete();let a=this.createInstance(e,i,{type:"projection",close:"DELETE-PROJECTION"});s.addInstance(a)}};function ge(){return(0,n.isNullOrUndefined)(Qt)?Promise.all([fetch("https://geodes.iro.umontreal.ca/gentleman/models/concept-model/concept.json"),fetch("https://geodes.iro.umontreal.ca/gentleman/models/concept-model/projection.json")]).then((async([t,e])=>{Qt=await t.json(),te=await e.json();let i=this.createEditor({conceptModel:Qt,projectionModel:te,config:ne,handlers:pe}),n=Object.create(Yt).init(i);return this.editorSection.append(n.render()),i})):new Promise((()=>this.createEditor({conceptModel:Qt,projectionModel:te,config:ne,handlers:pe})))}function fe(){return(0,n.isNullOrUndefined)(Qt)?Promise.all([fetch("https://geodes.iro.umontreal.ca/gentleman/models/projection-model/concept.json"),fetch("https://geodes.iro.umontreal.ca/gentleman/models/projection-model/projection.json"),fetch("https://geodes.iro.umontreal.ca/gentleman/models/style-model/concept.json"),fetch("https://geodes.iro.umontreal.ca/gentleman/models/style-model/projection.json")]).then((async([t,e,i,n])=>{let s=this.createEditor({conceptModel:le,projectionModel:ce,config:Object.assign({},se),handlers:me});s.addConcept(re),s.addProjection(oe);let a=Object.create(Gt).init(s);return this.editorSection.append(a.render()),s})):new Promise((()=>{let t=this.createEditor({conceptModel:le,projectionModel:ce,config:Object.assign({},se),handlers:me});t.addConcept(re),t.addProjection(oe);let e=Object.create(Gt).init(t);return this.editorSection.append(e.render()),t}))}function be(){return(0,n.isNullOrUndefined)(Qt)?Promise.all([fetch("https://geodes.iro.umontreal.ca/gentleman/models/projection-model/concept.json"),fetch("https://geodes.iro.umontreal.ca/gentleman/models/projection-model/projection.json"),fetch("https://geodes.iro.umontreal.ca/gentleman/models/style-model/concept.json"),fetch("https://geodes.iro.umontreal.ca/gentleman/models/style-model/projection.json")]).then((async([t,e,i,n])=>{let s=this.createEditor({conceptModel:[ee,le,re],projectionModel:[ie,ce,oe],config:Object.assign({},ae),handlers:ye}),a=Object.create(Gt).init(s);return this.editorSection.append(a.render()),s})):new Promise((()=>{let t=this.createEditor({conceptModel:ee,projectionModel:ie,config:Object.assign({}),handlers:ye}),e=Object.create(Gt).init(t);return this.editorSection.append(e.render()),t}))}},839:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Preview:()=>a});var n=i(835),s=i(241);const a={menu:null,editorSection:null,editor:null,channel:null,init(t){return this.channel=new BroadcastChannel(t),this.editor=Gentleman.createEditor().init({config:{settings:!1}}),this.bindDOM(),this.render(),this.bindEvents(),this},refresh(){return this.editor.isReady?this.editor.open():this.editor.close(),this},render(){this.editorSection.append(this.editor.container),this.refresh()},getEditor(){return this.editor},bindDOM(){this.menu=(0,n.getElement)('[data-component="menu"]'),this.editorSection=(0,n.getElement)('[data-component="editor"]'),(0,s.Cp)(this.menu)},bindEvents(){this.channel.addEventListener("message",(t=>{const{concept:e,projection:i}=t.data;let n=[];this.editor.conceptModel&&(n=this.editor.conceptModel.export()),this.editor.unload().freeze().loadConceptModel(e,n).loadProjectionModel(i).unfreeze().open()}))}}},868:t=>{"use strict";t.exports=JSON.parse('{"concept":{"concrete-concept":{"name":"concrete concept"},"prototype-concept":{"name":"prototype concept"},"derivative-concept":{"name":"derivative concept"}},"toolbar":[{"type":"button","name":"button-build","action":"build-concept","class":["btn","app-editor-header__button"],"content":"Build"},{"type":"button","name":"button-export","action":"export.model","class":["btn","editor-toolbar__button","editor-toolbar__button--save"]}]}')},425:t=>{"use strict";t.exports=JSON.parse('{"type":"concept","concept":[{"name":"proto-graphical","nature":"prototype","attributes":[{"name":"concept","target":{"name":"concept"},"required":true},{"name":"tags","target":{"name":"set","accept":{"name":"g-tag"}}}]},{"name":"g-tag","nature":"derivative","base":"string","constraint":{"value":{"type":"pattern","pattern":{"insensitive":true,"global":true,"value":"^\\\\w+(-\\\\w+)*$"}}}},{"name":"graphical","nature":"concrete","root":true,"prototype":"proto-graphical","attributes":[{"name":"name","target":{"name":"name"},"required":false},{"name":"element","target":{"name":"graphics","default":{"name":"decoration-layout"}},"required":true}],"properties":[{"name":"handler","type":"string","value":"graphical"}]},{"name":"graphics","nature":"prototype","attributes":[]},{"name":"graphical-field","nature":"prototype","attributes":[{"name":"dimensions","target":{"name":"dimensions"}},{"name":"coordinates","target":{"name":"coordinates"}}]},{"name":"svg-choice","nature":"concrete","prototype":"graphical-field","attributes":[{"name":"dimension","target":{"name":"dimensions","accept":[{"name":"pure"},{"name":"absolute"},{"name":"fixed"}],"default":{"name":"pure"}}},{"name":"coordinates","target":{"name":"coordinates"}},{"name":"dimensions","target":{"name":"absolute"},"required":false},{"name":"tag","target":{"name":"g-tag"}},{"name":"selection","target":{"name":"choice-selection"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"svg-choice"}]},{"name":"choice-selection","nature":"concrete","attributes":[{"name":"orientation","target":{"name":"string","values":["horizontal","vertical"],"default":"horizontal"}},{"name":"break","target":{"name":"number"},"required":true},{"name":"nbItem","target":{"name":"number","default":2}},{"name":"dimensions","target":{"name":"absolute-default"}}]},{"name":"svg-placeholder","nature":"concrete","prototype":"graphical-field","attributes":[{"name":"dimensions","target":{"name":"absolute"},"required":false},{"name":"tag","target":{"name":"g-tag"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"svg-placeholder"}]},{"name":"svg-switch","nature":"concrete","attributes":[{"name":"tag","target":{"name":"string"}},{"name":"order","target":{"name":"set","accept":{"name":"string"}}},{"name":"dimension","target":{"name":"dimensions","accept":[{"name":"pure"},{"name":"absolute"},{"name":"fixed"}],"default":{"name":"pure"}}},{"name":"coordinates","target":{"name":"coordinates"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"svg-switch"}]},{"name":"arrow","nature":"prototype","attributes":[{"name":"arrow-style","target":{"name":"arrow-style"}},{"name":"decorator","target":{"name":"projection-dynamic"},"required":false}]},{"name":"force-arrow","nature":"concrete","prototype":"arrow","attributes":[{"name":"from","target":{"name":"string"}},{"name":"to","target":{"name":"attribute"}}],"properties":[{"name":"handlerType","type":"string","value":"arrow"},{"name":"elementType","type":"string","value":"force"}]},{"name":"pattern-arrow","nature":"concrete","prototype":"arrow","attribute":[{"name":"target","target":{"name":"string"}}],"properties":[{"name":"handlerType","type":"string","value":"arrow"},{"name":"elementType","type":"string","value":"pattern"}]},{"name":"multi-arrow","nature":"concrete","prototype":"arrow","attributes":[{"name":"meet","target":{"name":"string","values":["free","maxX","minX","maxY","minY"],"default":"free"}},{"name":"offSet","target":{"name":"coordinates"}},{"name":"sub-paths","target":{"name":"sub-path"}}],"properties":[{"name":"handlerType","type":"string","value":"arrow"},{"name":"elementType","type":"string","value":"multi"}]},{"name":"sub-path","nature":"concrete","attributes":[{"name":"type","target":{"name":"string"}},{"name":"arrow-style","target":{"name":"arrow-style"}}]},{"name":"shape","nature":"concrete","attributes":[{"name":"elements","target":{"name":"set","accept":{"name":"shape-element","accept":[{"name":"circle"},{"name":"rectangle"},{"name":"ellipse"},{"name":"polygon"},{"name":"path"},{"name":"text"}]}}},{"name":"current","target":{"name":"reference","accept":{"name":"shape-element"}}},{"name":"width","target":{"name":"number","default":200}},{"name":"height","target":{"name":"number","default":200}},{"name":"minX","target":{"name":"number","default":0}},{"name":"minY","target":{"name":"number","default":0}},{"name":"windowW","target":{"name":"number"}},{"name":"windowH","target":{"name":"number"}}]},{"name":"shape-style","nature":"concrete","attributes":[{"name":"fill","target":{"name":"string","default":"black"}},{"name":"stroke","target":{"name":"string","default":"black"}},{"name":"s-width","target":{"name":"number","default":0}},{"name":"s-dash","target":{"name":"string","default":"0"}},{"name":"rx","target":{"name":"number"}},{"name":"ry","target":{"name":"number"}}]},{"name":"shape-element","nature":"prototype","attributes":[]},{"name":"circle","nature":"concrete","prototype":"shape-element","attributes":[{"name":"cx","target":{"name":"number"}},{"name":"cy","target":{"name":"number"}},{"name":"r","target":{"name":"number"}},{"name":"fill","target":{"name":"string"}},{"name":"style","target":{"name":"shape-style"}}]},{"name":"rectangle","nature":"concrete","prototype":"shape-element","attributes":[{"name":"x","target":{"name":"number"}},{"name":"y","target":{"name":"number"}},{"name":"width","target":{"name":"number"}},{"name":"height","target":{"name":"number"}},{"name":"style","target":{"name":"shape-style"}}]},{"name":"polygon","nature":"concrete","prototype":"shape-element","attributes":[{"name":"points","target":{"name":"string"}},{"name":"style","target":{"name":"shape-style"}}]},{"name":"ellipse","nature":"concrete","prototype":"shape-element","attributes":[{"name":"cx","target":{"name":"number"}},{"name":"cy","target":{"name":"number"}},{"name":"rx","target":{"name":"number"}},{"name":"ry","target":{"name":"number"}},{"name":"style","target":{"name":"shape-style"}}]},{"name":"text","nature":"concrete","prototype":"shape-element","attributes":[{"name":"content","target":{"name":"string"}}]},{"name":"path","nature":"concrete","prototype":"shape-element","attributes":[{"name":"d","target":{"name":"string"}},{"name":"style","target":{"name":"shape-style"}}]},{"name":"svg-text","nature":"concrete","prototype":"graphical-field","attributes":[{"name":"placeholder","target":{"name":"string"}},{"name":"readonly","target":{"name":"boolean","default":false}},{"name":"break","target":{"name":"number"},"required":false},{"name":"style","target":{"name":"textSVG-style"}},{"name":"dimension","target":{"name":"dimensions","accept":[{"name":"pure"},{"name":"absolute"},{"name":"fixed"}],"default":{"name":"pure"}}},{"name":"coordinates","target":{"name":"coordinates"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"svg"}]},{"name":"graphical-static","nature":"prototype","prototype":"graphics","attributes":[{"name":"dimensions","target":{"name":"dimensions"}},{"name":"coordinates","target":{"name":"coordinates"}}]},{"name":"svg-button","nature":"concrete","prototype":"graphical-static","attributes":[{"name":"content","target":{"name":"string"}},{"name":"shape","target":{"name":"shape"}},{"name":"action","target":{"name":"string","default":"CREATE"}},{"name":"dimension","target":{"name":"dimensions","accept":[{"name":"pure"},{"name":"absolute"},{"name":"fixed"}],"default":{"name":"pure"}}},{"name":"coordinates","target":{"name":"coordinates"}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"svg-button"}]},{"name":"alt-view","nature":"concrete","prototype":"graphical-static","attributes":[{"name":"content","target":{"name":"string"}},{"name":"shape","target":{"name":"shape"}},{"name":"tag","target":{"name":"tag"}},{"name":"dimension","target":{"name":"dimensions","accept":[{"name":"pure"},{"name":"absolute"},{"name":"fixed"}],"default":{"name":"pure"}}},{"name":"coordinates","target":{"name":"coordinates"}},{"name":"action","target":{"name":"string","default":"SIDE"}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"svg-button"}]},{"name":"svg-static","nature":"concrete","prototype":"graphical-static","attributes":[{"name":"content","target":{"name":"string"}},{"name":"dimension","target":{"name":"dimensions","accept":[{"name":"pure"},{"name":"absolute"},{"name":"fixed"}],"default":{"name":"pure"}}},{"name":"coordinates","target":{"name":"coordinates"}},{"name":"shape","target":{"name":"shape"}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"svg"}]},{"name":"svgText-static","nature":"concrete","prototype":"graphical-static","attributes":[{"name":"content","target":{"name":"string"}},{"name":"style","target":{"name":"textSVG-style"}},{"name":"dimension","target":{"name":"dimensions","accept":[{"name":"pure"},{"name":"absolute"},{"name":"fixed"}],"default":{"name":"pure"}}},{"name":"coordinates","target":{"name":"coordinates"}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"svg-text"}]},{"name":"graphical-layout","nature":"prototype","prototype":"graphics","attributes":[{"name":"rtag","target":{"name":"rtag"}}]},{"name":"force-layout","nature":"concrete","prototype":"graphical-layout","attributes":[{"name":"force","target":{"name":"force"}},{"name":"tag","target":{"name":"g-tag"}}],"properties":[{"name":"handlerType","type":"string","value":"algorithm"},{"name":"elementType","type":"string","value":"force"}]},{"name":"force","nature":"concrete","attributes":[{"name":"dimension","target":{"name":"absolute"}},{"name":"intensity","target":{"name":"number","default":500}},{"name":"linkVal","target":{"name":"number","default":300}},{"name":"radius","target":{"name":"number","default":50}},{"name":"width","target":{"name":"number","default":700}},{"name":"height","target":{"name":"number","default":700}}]},{"name":"pattern-layout","nature":"concrete","prototype":"graphical-layout","attributes":[{"name":"saturation","target":{"name":"number"}},{"name":"create","target":{"name":"boolean","default":"false"}},{"name":"pattern","target":{"name":"anchors"}},{"name":"item","target":{"name":"g-tag"}}]},{"name":"anchors","nature":"concrete","attributes":[{"name":"first","target":{"name":"coordinates-first"}},{"name":"next","target":{"name":"coordinates-next"}},{"name":"nbItem","target":{"name":"number","default":3}},{"name":"width","target":{"name":"number","default":350}},{"name":"height","target":{"name":"number","default":350}},{"name":"itemWidth","target":{"name":"number","default":50}}]},{"name":"decoration-layout","nature":"concrete","prototype":"graphical-layout","attributes":[{"name":"dimensions","target":{"name":"absolute"},"required":false},{"name":"coordinates","target":{"name":"coordinates"},"required":false},{"name":"background","target":{"name":"string"},"required":true},{"name":"shape","target":{"name":"shape"},"required":true},{"name":"reference","target":{"name":"boolean"},"default":false},{"name":"content","target":{"name":"set","accept":{"name":"graphical-component"}}}],"properties":[{"name":"handlerType","type":"string","value":"algorithm"},{"name":"elementType","type":"string","value":"decoration"}]},{"name":"graphical-component","nature":"concrete","attributes":[{"name":"render","target":{"name":"graphics"}}]},{"name":"dimensions","nature":"prototype","attributes":[]},{"name":"absolute-default","nature":"concrete","prototype":"dimensions","attributes":[{"name":"width","target":{"name":"number","default":50},"default":50},{"name":"height","target":{"name":"number","default":50},"default":50}]},{"name":"absolute","nature":"concrete","prototype":"dimensions","attributes":[{"name":"width","target":{"name":"number"}},{"name":"height","target":{"name":"number"}}]},{"name":"fixed","nature":"concrete","prototype":"dimensions","attributes":[{"name":"width","target":{"name":"number"}}]},{"name":"pure","nature":"concrete","prototype":"dimensions","attributes":[]},{"name":"coordinates","nature":"concrete","attributes":[{"name":"x","target":{"name":"number"}},{"name":"y","target":{"name":"number"}},{"name":"anchor","target":{"name":"string","values":["left","middle","right","center"]}}]},{"name":"coordinates-first","nature":"concrete","attributes":[{"name":"x","target":{"name":"number","default":50}},{"name":"y","target":{"name":"number","default":150}}]},{"name":"coordinates-next","nature":"concrete","attributes":[{"name":"x","target":{"name":"number","default":100}},{"name":"y","target":{"name":"number","default":0}}]},{"name":"rtag","nature":"derivative","base":"string","constraint":{"value":{"type":"pattern","pattern":{"insensitive":true,"global":true,"value":"^\\\\w+(-\\\\w+)*$"}}}},{"name":"textSVG-style","nature":"concrete","attributes":[{"name":"font","target":{"name":"string","default":"Verdana"}},{"name":"size","target":{"name":"number","default":11}},{"name":"anchor","target":{"name":"string","values":["left","middle","right"],"default":"middle"}},{"name":"weight","target":{"name":"number"},"required":false},{"name":"baseline","target":{"name":"string","values":["auto","text-bottom","alphabetic","ideographic","middle","central","mathematical","hanging","text-top"],"default":"auto"}}]},{"name":"arrow-style","nature":"concrete","attributes":[{"name":"stroke","target":{"name":"hex-color__black"}},{"name":"dasharray","target":{"name":"string"}},{"name":"width","target":{"name":"number","default":1}},{"name":"linecap","target":{"name":"string","default":"butt"}},{"name":"end","target":{"name":"markerArrow"},"required":false},{"name":"start","target":{"name":"markerArrow"},"required":false}]},{"name":"markerArrow","nature":"concrete","attributes":[{"name":"id","target":{"name":"string"}},{"name":"minX","target":{"name":"number"}},{"name":"minY","target":{"name":"number"}},{"name":"width","target":{"name":"number"}},{"name":"height","target":{"name":"number"}},{"name":"refX","target":{"name":"number"}},{"name":"refY","target":{"name":"number"}},{"name":"markerWidth","target":{"name":"number"}},{"name":"markerHeight","target":{"name":"number"}},{"name":"d","target":{"name":"string"}}]},{"name":"projection-dynamic","nature":"concrete","prototype":"graphics","attributes":[{"name":"src","target":{"name":"name"}},{"name":"attribute","target":{"name":"string"}},{"name":"tag","target":{"name":"g-tag"}},{"name":"dimension","target":{"name":"dimensions","accept":[{"name":"pure"},{"name":"absolute"},{"name":"fixed"}],"default":{"name":"pure"}}},{"name":"coordinates","target":{"name":"coordinates"}}],"properties":[{"name":"contentType","type":"string","value":"dynamic"},{"name":"elementType","type":"string","value":"projection"}]}]}')},78:t=>{"use strict";t.exports=JSON.parse('{"name":"Gentleman graphical","concepts":[{"name":"graphical"}],"toolbar":[{"type":"button","name":"button-build","action":"build-graphical","class":["btn","app-editor-header__button"],"content":"Build"},{"type":"button","name":"button-export","action":"export.model","class":["btn","editor-toolbar__button","editor-toolbar__button--save"]}]}')},445:t=>{"use strict";t.exports=JSON.parse('{"type":"projection","projection":[{"concept":{"name":"graphical"},"type":"container","tags":["default"],"container":{"content":[{"type":"container","content":[{"kind":"static","type":"text","content":"Tags","style":{"css":["title","mp-header__title"]}},{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"tags"}},"content":[{"kind":"static","type":"text","content":"+","style":{"css":["mp-header__button-content"]}}],"style":{"css":["mp-header__button","mp-header__button--add"]}},{"type":"attribute","name":"tags","tag":"tag-set","style":{"css":["mp-header__tags"]}},{"type":"attribute","name":"element","tag":"available-default"}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["model-projection-header"]}},{"type":"container","content":[{"type":"attribute","name":"element","tag":"default"}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection-body"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection"]}}},{"concept":{"name":"graphical"},"type":"container","tags":["string","number"],"container":{"content":[{"type":"container","content":[{"kind":"static","type":"text","content":"Tags","style":{"css":["title","mp-header__title"]}},{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"tags"}},"content":[{"kind":"static","type":"text","content":"+","style":{"css":["mp-header__button-content"]}}],"style":{"css":["mp-header__button","mp-header__button--add"]}},{"type":"attribute","name":"tags","tag":"tag-set","style":{"css":["mp-header__tags"]}},{"type":"attribute","name":"element","tag":"available-string"}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["model-projection-header"]}},{"type":"container","content":[{"type":"attribute","name":"element","tag":"string"}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection-body"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection"]}}},{"concept":{"name":"graphical"},"type":"container","tags":["boolean"],"container":{"content":[{"type":"container","content":[{"kind":"static","type":"text","content":"Tags","style":{"css":["title","mp-header__title"]}},{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"tags"}},"content":[{"kind":"static","type":"text","content":"+","style":{"css":["mp-header__button-content"]}}],"style":{"css":["mp-header__button","mp-header__button--add"]}},{"type":"attribute","name":"tags","tag":"tag-set","style":{"css":["mp-header__tags"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["model-projection-header"]}},{"type":"container","content":[{"type":"attribute","name":"element","tag":"boolean"}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection-body"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection"]}}},{"concept":{"name":"graphical"},"type":"container","tags":["reference"],"container":{"content":[{"type":"container","content":[{"kind":"static","type":"text","content":"Tags","style":{"css":["title","mp-header__title"]}},{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"tags"}},"content":[{"kind":"static","type":"text","content":"+","style":{"css":["mp-header__button-content"]}}],"style":{"css":["mp-header__button","mp-header__button--add"]}},{"type":"attribute","name":"tags","tag":"tag-set","style":{"css":["mp-header__tags"]}},{"type":"attribute","name":"element","tag":"available-reference"}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["model-projection-header"]}},{"type":"container","content":[{"type":"attribute","name":"element","tag":"reference"}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection-body"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection"]}}},{"concept":{"name":"graphical"},"type":"container","tags":["prototype"],"container":{"content":[{"type":"container","content":[{"kind":"static","type":"text","content":"Tags","style":{"css":["title","mp-header__title"]}},{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"tags"}},"content":[{"kind":"static","type":"text","content":"+","style":{"css":["mp-header__button-content"]}}],"style":{"css":["mp-header__button","mp-header__button--add"]}},{"type":"attribute","name":"tags","tag":"tag-set","style":{"css":["mp-header__tags"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["model-projection-header"]}},{"type":"container","content":[{"type":"attribute","name":"element","tag":"reference"}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection-body"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection"]}}},{"concept":{"name":"graphical"},"type":"container","tags":["set"],"container":{"content":[{"type":"container","content":[{"kind":"static","type":"text","content":"Tags","style":{"css":["title","mp-header__title"]}},{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"tags"}},"content":[{"kind":"static","type":"text","content":"+","style":{"css":["mp-header__button-content"]}}],"style":{"css":["mp-header__button","mp-header__button--add"]}},{"type":"attribute","name":"tags","tag":"tag-set","style":{"css":["mp-header__tags"]}},{"type":"attribute","name":"element","tag":"available-set"}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["model-projection-header"]}},{"type":"container","content":[{"type":"attribute","name":"element","tag":"set"}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection-body"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection"]}}},{"concept":{"name":"graphics"},"type":"layout","tags":["available-default"],"projection":{"type":"flex","orientation":"row","wrappable":false,"disposition":[{"type":"template","name":"mp-button3","param":[{"name":"type","value":"decoration-layout"},{"name":"name","value":"Decoration Layout"}]},{"type":"template","name":"mp-button3","param":[{"name":"type","value":"force-arrow"},{"name":"name","value":"Force Arrow"}]}],"style":{"css":["container-config"]}}},{"concept":{"name":"graphics"},"type":"layout","tags":["available-set"],"projection":{"type":"flex","orientation":"row","wrappable":false,"disposition":[{"type":"template","name":"mp-button3","param":[{"name":"type","value":"decoration-layout"},{"name":"name","value":"Decoration Layout"}]},{"type":"template","name":"mp-button3","param":[{"name":"type","value":"force-layout"},{"name":"name","value":"Force Layout"}]},{"type":"template","name":"mp-button3","param":[{"name":"type","value":"pattern-layout"},{"name":"name","value":"Pattern Layout"}]},{"type":"template","name":"mp-button3","param":[{"name":"type","value":"multi-arrow"},{"name":"name","value":"Multi Arrow"}]}],"style":{"css":["container-config"]}}},{"concept":{"name":"graphics"},"type":"layout","tags":["available-string"],"projection":{"type":"flex","orientation":"row","wrappable":false,"disposition":[{"type":"template","name":"mp-button3","param":[{"name":"type","value":"decoration-layout"},{"name":"name","value":"Decoration Layout"}]},{"type":"template","name":"mp-button3","param":[{"name":"type","value":"svg-text"},{"name":"name","value":"Text Field"}]}],"style":{"css":["container-config"]}}},{"concept":{"name":"graphics"},"type":"layout","tags":["available-reference"],"projection":{"type":"flex","orientation":"row","wrappable":false,"disposition":[{"type":"template","name":"mp-button3","param":[{"name":"type","value":"anchor-arrow"},{"name":"name","value":"Anchor Arrow"}]}],"style":{"css":["container-config"]}}},{"concept":{"name":"graphics"},"type":"layout","tags":["choice-selection_default","config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection_default","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"graphics"},"type":"layout","tags":["choice-selection","config","default"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection__default","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"graphics"},"type":"layout","tags":["component","config","default"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"graphics"},"type":"layout","tags":["choice-selection","config","string","number"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection__string","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"graphics"},"type":"layout","tags":["choice-selection","config","boolean"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection__boolean","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"graphics"},"type":"layout","tags":["choice-selection","config","set"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection__set","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"graphics"},"type":"layout","tags":["choice-selection","config","reference"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection__reference","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"graphics"},"type":"layout","tags":["choice-selection","config","set"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","wrappable":false,"disposition":[{"type":"template","name":"mp-button3","param":[{"name":"type","value":"decoration-layout"},{"name":"name","value":"Decoration"}]},{"type":"template","name":"mp-button3","param":[{"name":"type","value":"pattern-layout"},{"name":"name","value":"Pattern"}]},{"type":"template","name":"mp-button3","param":[{"name":"type","value":"force-layout"},{"name":"name","value":"Force"}]},{"type":"template","name":"mp-button3","param":[{"name":"type","value":"svg-button"},{"name":"name","value":"Button"}]},{"type":"template","name":"mp-button3","param":[{"name":"type","value":"svgText-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button3","param":[{"name":"type","value":"svg-alt"},{"name":"name","value":"Alt"}]}],"style":{"css":["container-config-header"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"decoration-layout"},"tags":["layout-setting"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"rtag","tag":"label-string"},{"kind":"static","type":"text","content":"Position","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"coordinates","placeholder":{"content":{"kind":"static","type":"text","content":"Add Coordinates","help":"Specify customed coordinates","style":{"css":["field-config-option","font-ui"],"ref":["box-top"]}}},"tag":"layout-coordinates"},{"kind":"static","type":"text","content":"Dimensions","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"dimensions","placeholder":{"content":{"kind":"static","type":"text","content":"Add Dimensions","help":"Specify customed dimensions","style":{"css":["field-config-option","font-ui"],"ref":["box-top"]}}},"tag":"layout-dimensions"}]}},{"concept":{"name":"coordinates-first"},"tags":["anchor-coord"],"type":"layout","projection":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"x"},{"type":"attribute","name":"y"}]}},{"concept":{"name":"coordinates-next"},"tags":["anchor-coord"],"type":"layout","projection":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"x"},{"type":"attribute","name":"y"}]}},{"concept":{"name":"coordinates"},"tags":["layout-coordinates"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"X","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"x"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Y","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"y"}]}}]}},{"concept":{"name":"coordinates"},"tags":["horizontal-coordinates"],"type":"layout","projection":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"x"},{"type":"attribute","name":"y"}]}},{"concept":{"name":"absolute"},"tags":["layout-dimensions"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Width","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"width"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Height","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"height"}]}}]}},{"concept":{"name":"absolute"},"tags":["layout-dimensions_row"],"type":"layout","projection":{"type":"flex","orientation":"row","justifyContent":"start","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Width","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"width"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Height","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"height"}]}}]}},{"concept":{"name":"absolute-default"},"tags":["layout-dimensions"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Width","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"width"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Height","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"height"}]}}]}},{"concept":{"name":"force-arrow"},"tags":["choice-selection__default","default"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"center","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"15\\" height=\\"15\\"><circle stroke=\\"#1f75fe\\" stroke-width=\\"1\\" cx=\\"7.5\\" cy=\\"12.5\\" r=\\"6\\" fill=\\"white\\"></circle><rect stroke=\\"#1f75fe\\" stroke-width=\\"1\\" x=\\"7.5\\" y=\\"2.5\\" width=\\"10\\" height=\\"10\\" fill=\\"white\\"></rect></svg>","action":{"type":"SIDE","target":"layout-background"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 20 20\\"><circle cx=\\"10\\" cy=\\"10\\" r=\\"8\\" fill=\\"#555\\"></circle><path d=\\"M 0 12 L 0 8 L 2.5 7.5 L 2.5 12.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 3.5 L 3.5 1 L 6.5 3 L 3 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 0 L 8 0 L 7.5 2.5 L 12.5 2.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 19 16.5 L 16.5 19 L 13.5 17 L 17 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 16.5 L 3.5 19 L 6.5 17 L 3 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 20 12 L 20 8 L 17.5 7.5 L 17.5 12.5 Z\\" fill=\\"#555\\" ></path><path d=\\"M 19 3.5 L 16.5 1 L 13.5 3 L 17 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 20 L 8 20 L 7.5 17.5 L 12.5 17.5 Z\\" fill=\\"#555\\"></path><circle cx=\\"10\\" cy=\\"10\\" r=\\"3.5\\" fill=\\"white\\"></circle></svg>","action":{"type":"SIDE","target":"layout-setting"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}}],"style":{"css":["editor-concept-toolbar"]}}}],"style":{"css":["container-config-header"]}}},{"type":"algorithm","algorithm":{"type":"decoration","dimensions":{"width":400,"height":50},"background":false,"style":"overflow:visible;","content":[{"dimension":{"type":"pure"},"coordinates":{"x":25,"y":25},"render":{"type":"attribute","name":"from","tag":"arrow-from"}},{"dimension":{"type":"pure"},"coordinates":{"x":375,"y":25},"render":{"type":"attribute","name":"to","tag":"arrow-to"}},{"dimension":{"type":"pure"},"coordinates":{"x":100,"y":0},"render":{"type":"attribute","name":"arrow-style","tag":"simulation"}}]}}]}},{"concept":{"name":"force-arrow"},"tags":["layout-setting"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"decorator","placeholder":{"content":{"kind":"static","type":"text","content":"Add Decorator","help":"Specify customed coordinates","style":{"css":["field-config-option","font-ui"],"ref":["box-top"]}}},"tag":"arrow-decorator"}]}},{"concept":{"name":"force-arrow"},"tags":["layout-background"],"type":"layout","projection":{"type":"flex","disposition":[{"type":"attribute","name":"arrow-style","tag":"arrow-s"}]}},{"concept":{"name":"arrow-style"},"tags":["simulation"],"type":"simulation","content":{"type":"arrow"}},{"concept":{"name":"arrow-style"},"tags":["arrow-s"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Arrow-style","style":{"css":["title","mp-style__title"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"stroke","tag":"color-simple"}]}},{"type":"attribute","name":"linecap","tag":"label-string"},{"type":"attribute","name":"dasharray","tag":"label-string"},{"type":"attribute","name":"width","tag":"textual--labelled"},{"type":"layout","layout":{"type":"flex","justifyContent":"center","disposition":[{"kind":"static","type":"text","content":"Marker-start","style":{"css":["title","mp-style__title"]}}]}},{"type":"attribute","name":"start","placeholder":{"content":{"kind":"static","type":"text","content":"Add Marker","help":"Specify customed coordinates","style":{"css":["field-config-option","font-ui"],"ref":["box-top"]}}},"tag":"marker"},{"type":"layout","layout":{"type":"flex","justifyContent":"center","disposition":[{"kind":"static","type":"text","content":"Marker-end","style":{"css":["title","mp-style__title"]}}]}},{"type":"attribute","name":"end","placeholder":{"content":{"kind":"static","type":"text","content":"Add Marker","help":"Specify customed coordinates","style":{"css":["field-config-option","font-ui"],"ref":["box-top"]}}},"tag":"marker"}],"style":{"css":["mp-style"]}}},{"concept":{"name":"markerArrow"},"tags":["simulation-start"],"type":"simulation","content":{"type":"marker","start":true}},{"concept":{"name":"markerArrow"},"tags":["simulation-end"],"type":"simulation","content":{"type":"marker","start":false}},{"concept":{"name":"markerArrow"},"type":"layout","tags":["marker"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","justifyContent":"start","disposition":[{"kind":"static","content":"ViewBox","type":"text","style":{"css":["title","mp-style__title"]}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","justifyContent":"space-between","wrappable":false,"disposition":[{"type":"attribute","name":"minX","tag":"textual--labelled"},{"type":"attribute","name":"minY","tag":"textual--labelled"},{"type":"attribute","name":"width","tag":"textual--labelled"},{"type":"attribute","name":"height","tag":"textual--labelled"}]}},{"type":"layout","layout":{"type":"flex","justifyContent":"center","disposition":[{"kind":"static","content":"Definition","type":"text","style":{"css":["title","mp-style__title"]}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","wrappable":false,"justifyContent":"space-between","disposition":[{"type":"attribute","name":"refX","tag":"textual--labelled"},{"type":"attribute","name":"refY","tag":"textual--labelled"},{"type":"attribute","name":"markerWidth","tag":"textual--labelled"},{"type":"attribute","name":"markerHeight","tag":"textual--labelled"}]}},{"type":"attribute","name":"id","tag":"label-string"},{"type":"attribute","name":"d","tag":"label-string"}]}},{"concept":{"name":"projection-dynamic"},"type":"layout","tags":["arrow-decorator"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"attribute","tag":"label-string"},{"type":"attribute","name":"tag","tag":"label-string"}]}},{"concept":{"name":"string"},"tags":["arrow-from"],"type":"field","content":{"type":"svg","placeholder":"From","readonly":false,"style":{"anchor":"middle","baseline":"middle","font":"Segoe UI","size":10,"weight":500,"fill":"black"}}},{"concept":{"name":"string"},"tags":["arrow-to"],"type":"field","content":{"type":"svg","placeholder":"To","readonly":false,"style":{"anchor":"middle","baseline":"middle","font":"Segoe UI","size":10,"weight":500,"fill":"black"}}},{"concept":{"name":"decoration-layout"},"tags":["choice-selection__default"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"template","name":"mp-button4","param":[{"name":"type","value":"projection-dynamic"},{"name":"name","value":"Proj"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-button"},{"name":"name","value":"Button"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svgText-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-static"},{"name":"name","value":"Image"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"alt-view"},{"name":"name","value":"Alt"}]},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"15\\" height=\\"15\\"><circle stroke=\\"#1f75fe\\" stroke-width=\\"1\\" cx=\\"7.5\\" cy=\\"12.5\\" r=\\"6\\" fill=\\"white\\"></circle><rect stroke=\\"#1f75fe\\" stroke-width=\\"1\\" x=\\"7.5\\" y=\\"2.5\\" width=\\"10\\" height=\\"10\\" fill=\\"white\\"></rect></svg>","action":{"type":"SIDE","target":"layout-background"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 20 20\\"><circle cx=\\"10\\" cy=\\"10\\" r=\\"8\\" fill=\\"#555\\"></circle><path d=\\"M 0 12 L 0 8 L 2.5 7.5 L 2.5 12.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 3.5 L 3.5 1 L 6.5 3 L 3 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 0 L 8 0 L 7.5 2.5 L 12.5 2.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 19 16.5 L 16.5 19 L 13.5 17 L 17 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 16.5 L 3.5 19 L 6.5 17 L 3 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 20 12 L 20 8 L 17.5 7.5 L 17.5 12.5 Z\\" fill=\\"#555\\" ></path><path d=\\"M 19 3.5 L 16.5 1 L 13.5 3 L 17 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 20 L 8 20 L 7.5 17.5 L 12.5 17.5 Z\\" fill=\\"#555\\"></path><circle cx=\\"10\\" cy=\\"10\\" r=\\"3.5\\" fill=\\"white\\"></circle></svg>","action":{"type":"SIDE","target":"layout-setting"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}}],"style":{"css":["editor-concept-toolbar"]}}}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"content","tag":"element-set","style":{"css":["container-config-content"]}}]}},{"concept":{"name":"decoration-layout"},"tags":["choice-selection__set"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-button"},{"name":"name","value":"Button"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svgText-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-static"},{"name":"name","value":"Image"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"alt-view"},{"name":"name","value":"Alt"}]},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"15\\" height=\\"15\\"><circle stroke=\\"#1f75fe\\" stroke-width=\\"1\\" cx=\\"7.5\\" cy=\\"12.5\\" r=\\"6\\" fill=\\"white\\"></circle><rect stroke=\\"#1f75fe\\" stroke-width=\\"1\\" x=\\"7.5\\" y=\\"2.5\\" width=\\"10\\" height=\\"10\\" fill=\\"white\\"></rect></svg>","action":{"type":"SIDE","target":"layout-background"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 20 20\\"><circle cx=\\"10\\" cy=\\"10\\" r=\\"8\\" fill=\\"#555\\"></circle><path d=\\"M 0 12 L 0 8 L 2.5 7.5 L 2.5 12.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 3.5 L 3.5 1 L 6.5 3 L 3 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 0 L 8 0 L 7.5 2.5 L 12.5 2.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 19 16.5 L 16.5 19 L 13.5 17 L 17 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 16.5 L 3.5 19 L 6.5 17 L 3 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 20 12 L 20 8 L 17.5 7.5 L 17.5 12.5 Z\\" fill=\\"#555\\" ></path><path d=\\"M 19 3.5 L 16.5 1 L 13.5 3 L 17 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 20 L 8 20 L 7.5 17.5 L 12.5 17.5 Z\\" fill=\\"#555\\"></path><circle cx=\\"10\\" cy=\\"10\\" r=\\"3.5\\" fill=\\"white\\"></circle></svg>","action":{"type":"SIDE","target":"layout-setting"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}}],"style":{"css":["editor-concept-toolbar"]}}}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"content","tag":"element-set","style":{"css":["container-config-content"]}}]}},{"concept":{"name":"decoration-layout"},"tags":["choice-selection__string"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-text"},{"name":"name","value":"TextField"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svgText-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-button"},{"name":"name","value":"Button"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-static"},{"name":"name","value":"Image"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"alt-view"},{"name":"name","value":"Alt"}]},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"15\\" height=\\"15\\"><circle stroke=\\"#1f75fe\\" stroke-width=\\"1\\" cx=\\"7.5\\" cy=\\"12.5\\" r=\\"6\\" fill=\\"white\\"></circle><rect stroke=\\"#1f75fe\\" stroke-width=\\"1\\" x=\\"7.5\\" y=\\"2.5\\" width=\\"10\\" height=\\"10\\" fill=\\"white\\"></rect></svg>","action":{"type":"SIDE","target":"layout-background"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 20 20\\"><circle cx=\\"10\\" cy=\\"10\\" r=\\"8\\" fill=\\"#555\\"></circle><path d=\\"M 0 12 L 0 8 L 2.5 7.5 L 2.5 12.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 3.5 L 3.5 1 L 6.5 3 L 3 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 0 L 8 0 L 7.5 2.5 L 12.5 2.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 19 16.5 L 16.5 19 L 13.5 17 L 17 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 16.5 L 3.5 19 L 6.5 17 L 3 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 20 12 L 20 8 L 17.5 7.5 L 17.5 12.5 Z\\" fill=\\"#555\\" ></path><path d=\\"M 19 3.5 L 16.5 1 L 13.5 3 L 17 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 20 L 8 20 L 7.5 17.5 L 12.5 17.5 Z\\" fill=\\"#555\\"></path><circle cx=\\"10\\" cy=\\"10\\" r=\\"3.5\\" fill=\\"white\\"></circle></svg>","action":{"type":"SIDE","target":"layout-setting"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}}],"style":{"css":["editor-concept-toolbar"]}}}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"content","tag":"element-set","style":{"css":["container-config-content"]}}]}},{"concept":{"name":"decoration-layout"},"tags":["choice-selection__reference"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-placeholder"},{"name":"name","value":"PlaceholderField"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-choice"},{"name":"name","value":"ChoiceField"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-switch"},{"name":"name","value":"SwitchField"}]},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"15\\" height=\\"15\\"><circle stroke=\\"#1f75fe\\" stroke-width=\\"1\\" cx=\\"7.5\\" cy=\\"12.5\\" r=\\"6\\" fill=\\"white\\"></circle><rect stroke=\\"#1f75fe\\" stroke-width=\\"1\\" x=\\"7.5\\" y=\\"2.5\\" width=\\"10\\" height=\\"10\\" fill=\\"white\\"></rect></svg>","action":{"type":"SIDE","target":"layout-background"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 20 20\\"><circle cx=\\"10\\" cy=\\"10\\" r=\\"8\\" fill=\\"#555\\"></circle><path d=\\"M 0 12 L 0 8 L 2.5 7.5 L 2.5 12.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 3.5 L 3.5 1 L 6.5 3 L 3 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 0 L 8 0 L 7.5 2.5 L 12.5 2.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 19 16.5 L 16.5 19 L 13.5 17 L 17 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 16.5 L 3.5 19 L 6.5 17 L 3 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 20 12 L 20 8 L 17.5 7.5 L 17.5 12.5 Z\\" fill=\\"#555\\" ></path><path d=\\"M 19 3.5 L 16.5 1 L 13.5 3 L 17 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 20 L 8 20 L 7.5 17.5 L 12.5 17.5 Z\\" fill=\\"#555\\"></path><circle cx=\\"10\\" cy=\\"10\\" r=\\"3.5\\" fill=\\"white\\"></circle></svg>","action":{"type":"SIDE","target":"layout-setting"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}}],"style":{"css":["editor-concept-toolbar"]}}}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"content","tag":"element-set","style":{"css":["container-config-content"]}}]}},{"concept":{"name":"decoration-layout"},"tags":["choice-selection__boolean"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-switch"},{"name":"name","value":"SwitchField"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svgText-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-button"},{"name":"name","value":"Button"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"svg-static"},{"name":"name","value":"Image"}]},{"type":"template","name":"mp-button4","param":[{"name":"type","value":"alt-view"},{"name":"name","value":"Alt"}]},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"15\\" height=\\"15\\"><circle stroke=\\"#1f75fe\\" stroke-width=\\"1\\" cx=\\"7.5\\" cy=\\"12.5\\" r=\\"6\\" fill=\\"white\\"></circle><rect stroke=\\"#1f75fe\\" stroke-width=\\"1\\" x=\\"7.5\\" y=\\"2.5\\" width=\\"10\\" height=\\"10\\" fill=\\"white\\"></rect></svg>","action":{"type":"SIDE","target":"layout-background"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 20 20\\"><circle cx=\\"10\\" cy=\\"10\\" r=\\"8\\" fill=\\"#555\\"></circle><path d=\\"M 0 12 L 0 8 L 2.5 7.5 L 2.5 12.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 3.5 L 3.5 1 L 6.5 3 L 3 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 0 L 8 0 L 7.5 2.5 L 12.5 2.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 19 16.5 L 16.5 19 L 13.5 17 L 17 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 16.5 L 3.5 19 L 6.5 17 L 3 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 20 12 L 20 8 L 17.5 7.5 L 17.5 12.5 Z\\" fill=\\"#555\\" ></path><path d=\\"M 19 3.5 L 16.5 1 L 13.5 3 L 17 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 20 L 8 20 L 7.5 17.5 L 12.5 17.5 Z\\" fill=\\"#555\\"></path><circle cx=\\"10\\" cy=\\"10\\" r=\\"3.5\\" fill=\\"white\\"></circle></svg>","action":{"type":"SIDE","target":"layout-setting"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}}],"style":{"css":["editor-concept-toolbar"]}}}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"content","tag":"element-set","style":{"css":["container-config-content"]}}]}},{"concept":{"name":"graphical-component"},"tags":["list-item"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"render","tag":"component"}]}},{"concept":{"name":"coordinates"},"tags":["component-dimensions"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"center","justifyContent":"center","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"x","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"x"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"y","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"y"}]}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Anchor","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"anchor","tag":"anchor-label"}]}}]}},{"concept":{"name":"dimensions"},"tags":["component-dimensions"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Dimensions","style":{"css":["title"]}},{"type":"container","content":[{"kind":"static","type":"text","content":"Type","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select a layout","expanded":false,"input":false,"style":{"css":["select-choice"]}}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["mp-fieldwrap","mp-fieldwrap--layout"]}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection"}]}},{"concept":{"name":"absolute"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"kind":"static","type":"text","content":"Absolute"}]}},{"concept":{"name":"absolute"},"tags":["choice"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Absolute"}]}},{"concept":{"name":"set"},"tags":["new-component"],"type":"field","content":{"type":"list","list":false,"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"+","focusable":false}}],"help":"Add an element","style":{"css":["list-action__btn-add"]}}},"style":{"css":["list-action"]}}},{"concept":{"name":"decoration-layout"},"tags":["layout-background","create"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--create"},{"type":"layout","layout":{"type":"flex","orientation":"column","alignItems":"center","disposition":[{"type":"attribute","name":"shape","tag":"shape"}]}},{"type":"attribute","name":"shape","tag":"interact"}]}},{"concept":{"name":"decoration-layout"},"tags":["layout-background","import"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--import"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Background","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"background","tag":"fixed"}]}},{"type":"attribute","name":"background","tag":"simulation-content"}]}},{"concept":{"name":"string"},"tags":["simulation-content"],"type":"simulation","content":{"type":"content"}},{"concept":{"name":"force-layout"},"tags":["choice-selection__set"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"rtag","tag":"label-string"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Tag","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"tag","tag":"text-string","options":{"placeholder":"g-tag"},"style":{"css":["mp-tag"]}}]}},{"type":"attribute","name":"force","tag":"interact"}]}},{"type":"attribute","name":"force","tag":"simulation"}]}},{"concept":{"name":"force"},"tags":["interact"],"type":"layout","projection":{"type":"flex","orientation":"row","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Intensity","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"intensity"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"linkVal","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"linkVal"}]}}]}},{"concept":{"name":"force"},"tags":["simulation"],"type":"simulation","content":{"type":"force"}},{"concept":{"name":"force-layout"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Settings","style":{"css":["title","mp-header__title"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Intensity","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"intensity"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"L-Distance","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"linkDistance"}]}}]}},{"type":"attribute","name":"dimension","tag":"force-dim"}]}},{"kind":"static","type":"text","content":"Nodes","style":{"css":["title","mp-header__title"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Item","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"item","tag":"tag-reference"}]}}]}},{"concept":{"name":"multi-arrow"},"tags":["choice-selection__set"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"meet","tag":"label-string"},{"kind":"static","type":"text","content":"Offset","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"offSet","tag":"horizontal-coordinates"}]}},{"type":"simulation","simulation":{"type":"multi"}}]}},{"concept":{"name":"sub-path"},"type":"simulation","tags":["simulation"],"content":{"type":"sub-path"}},{"concept":{"name":"pattern-layout"},"tags":["choice-selection__set"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"rtag","tag":"label-string"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Tag","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"item","tag":"text-string","options":{"placeholder":"g-tag"},"style":{"css":["mp-tag"]}}]}},{"type":"attribute","name":"pattern","tag":"interact"}]}},{"type":"layout","layout":{"type":"flex","justifyContent":"center","disposition":[{"type":"attribute","name":"pattern","tag":"simulation"}]}}]}},{"concept":{"name":"anchors"},"tags":["simulation"],"type":"simulation","content":{"type":"pattern"}},{"concept":{"name":"anchors"},"tags":["interact"],"type":"layout","projection":{"type":"flex","orientation":"row","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"First","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"first","tag":"anchor-coord"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Next","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"next","tag":"anchor-coord"}]}}]}},{"concept":{"name":"svgText-static"},"tags":["layout-background"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","tag":"draw"},{"type":"attribute","name":"style","tag":"textual"}]}},{"concept":{"name":"projection-dynamic"},"tags":["layout-setting"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Coordinates","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"coordinates","tag":"layout-coordinates"},{"kind":"static","type":"text","content":"Dimension","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"dimension","tag":"layout-dimensions"}]}},{"concept":{"name":"svg-static"},"tags":["layout-setting"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Coordinates","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"coordinates","tag":"layout-coordinates"},{"kind":"static","type":"text","content":"Dimension","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"dimension","tag":"layout-dimensions"}]}},{"concept":{"name":"alt-view"},"tags":["layout-setting"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Coordinates","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"coordinates","tag":"layout-coordinates"},{"kind":"static","type":"text","content":"Dimension","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"dimension","tag":"layout-dimensions"}]}},{"concept":{"name":"svg-text"},"tags":["layout-setting"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Coordinates","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"coordinates","tag":"layout-coordinates"},{"kind":"static","type":"text","content":"Dimension","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"dimension","tag":"layout-dimensions"}]}},{"concept":{"name":"svg-text"},"tags":["layout-setting_unit"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Coordinates","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"coordinates","tag":"layout-coordinates"}]}},{"concept":{"name":"svgText-static"},"tags":["layout-setting"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Coordinates","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"coordinates","tag":"layout-coordinates"},{"kind":"static","type":"text","content":"Dimension","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"dimension","tag":"layout-dimensions"}]}},{"concept":{"name":"svg-button"},"tags":["layout-setting"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Coordinates","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"coordinates","tag":"layout-coordinates"},{"kind":"static","type":"text","content":"Dimension","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"dimension","tag":"layout-dimensions"}]}},{"concept":{"name":"projection-dynamic"},"tags":["choice-selection","config"],"type":"container","container":{"content":[{"type":"template","name":"tpl-element-header_graph","param":[{"name":"type","value":"Prj"}]},{"type":"attribute","name":"src","tag":"text-string","options":{"placeholder":"attribute"}},{"type":"attribute","name":"tag","tag":"text-string","options":{"placeholder":"g-tag"},"style":{"css":["mp-tag"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["dynamic-config","dynamic-config--attribute"]}}},{"concept":{"name":"svg-button"},"type":"layout","tags":["layout-background"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","alignItems":"center","disposition":[{"type":"attribute","name":"shape","tag":"shape"}]}},{"type":"attribute","name":"shape","tag":"interact"}]}},{"concept":{"name":"svgText-static"},"type":"container","tags":["choice-selection","config"],"container":{"content":[{"type":"template","name":"tpl-element-header_graphd","param":[{"name":"type","value":"Txt"}]},{"type":"attribute","name":"content","tag":"text-string","options":{"resizable":true,"placeholder":"Content..."},"style":{"css":["text-static"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"svg-text"},"type":"container","tags":["choice-selection","config"],"container":{"content":[{"type":"template","name":"tpl-element-header_graphd","param":[{"name":"type","value":"TxF"}]},{"type":"attribute","name":"placeholder","tag":"text-string","options":{"resizable":true,"placeholder":"Placeholder..."},"style":{"css":["text-static"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"svg-text"},"type":"container","tags":["choice-selection__string","config"],"container":{"content":[{"type":"attribute","name":"placeholder","tag":"text-string","options":{"resizable":true,"placeholder":"Placeholder..."},"style":{"css":["text-static"]}},{"kind":"static","type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"15\\" height=\\"15\\"><circle stroke=\\"#1f75fe\\" stroke-width=\\"1\\" cx=\\"7.5\\" cy=\\"12.5\\" r=\\"6\\" fill=\\"white\\"></circle><rect stroke=\\"#1f75fe\\" stroke-width=\\"1\\" x=\\"7.5\\" y=\\"2.5\\" width=\\"10\\" height=\\"10\\" fill=\\"white\\"></rect></svg>","action":{"type":"SIDE","target":"layout-background"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}},{"kind":"static","type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 20 20\\"><circle cx=\\"10\\" cy=\\"10\\" r=\\"8\\" fill=\\"#555\\"></circle><path d=\\"M 0 12 L 0 8 L 2.5 7.5 L 2.5 12.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 3.5 L 3.5 1 L 6.5 3 L 3 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 0 L 8 0 L 7.5 2.5 L 12.5 2.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 19 16.5 L 16.5 19 L 13.5 17 L 17 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 16.5 L 3.5 19 L 6.5 17 L 3 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 20 12 L 20 8 L 17.5 7.5 L 17.5 12.5 Z\\" fill=\\"#555\\" ></path><path d=\\"M 19 3.5 L 16.5 1 L 13.5 3 L 17 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 20 L 8 20 L 7.5 17.5 L 12.5 17.5 Z\\" fill=\\"#555\\"></path><circle cx=\\"10\\" cy=\\"10\\" r=\\"3.5\\" fill=\\"white\\"></circle></svg>","action":{"type":"SIDE","target":"layout-setting_unit"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"svg-static"},"type":"layout","tags":["layout-background"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","alignItems":"center","disposition":[{"type":"attribute","name":"shape","tag":"shape"}]}},{"type":"attribute","name":"shape","tag":"interact"}]}},{"concept":{"name":"svg-static"},"type":"container","tags":["choice-selection","config"],"container":{"content":[{"type":"template","name":"tpl-element-header_graphd","param":[{"name":"type","value":"Img"}]},{"type":"attribute","name":"content","tag":"text-string","options":{"resizable":true,"placeholder":"Content..."},"style":{"css":["text-static"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"svg-switch"},"type":"container","tags":["choice-selection","config"],"container":{"content":[{"type":"template","name":"tpl-element-header_graph","param":[{"name":"type","value":"Img"}]},{"type":"attribute","name":"tag","tag":"text-string","options":{"resizable":true,"placeholder":"Tag..."},"style":{"css":["text-static"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"svg-switch"},"tags":["layout-setting"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Coordinates","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"coordinates","tag":"layout-coordinates"},{"kind":"static","type":"text","content":"Dimension","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"dimension","tag":"layout-dimensions"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Order","style":{"css":["mp-style__title","title"]}},{"type":"attribute","name":"order","tag":"action"}]}},{"type":"attribute","name":"order","tag":"element-set"}]}},{"concept":{"name":"svg-static"},"type":"layout","tags":["layout-background"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","alignItems":"center","disposition":[{"type":"attribute","name":"shape","tag":"shape"}]}},{"type":"attribute","name":"shape","tag":"interact"}]}},{"concept":{"name":"alt-view"},"type":"layout","tags":["layout-background"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","alignItems":"center","disposition":[{"type":"attribute","name":"shape","tag":"shape"}]}},{"type":"attribute","name":"shape","tag":"interact"}]}},{"concept":{"name":"alt-view"},"type":"container","tags":["choice-selection","config"],"container":{"content":[{"type":"template","name":"tpl-element-header_graphd","param":[{"name":"type","value":"Alt"}]},{"type":"attribute","name":"content","tag":"text-string","options":{"resizable":true,"placeholder":"Content..."},"style":{"css":["text-static"]}},{"type":"attribute","name":"tag","tag":"text-string","options":{"placeholder":"tag"},"style":{"css":["mp-tag"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"svg-placeholder"},"type":"container","tags":["choice-selection","config"],"container":{"content":[{"type":"template","name":"tpl-element-header_graph","param":[{"name":"type","value":"Plc"}]},{"type":"attribute","name":"tag","tag":"text-string","options":{"resizable":true,"placeholder":"Item..."},"style":{"css":["text-static"]}},{"type":"attribute","name":"tag","tag":"text-string","options":{"placeholder":"tag"},"style":{"css":["mp-tag"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"svg-button"},"type":"container","tags":["choice-selection","config"],"container":{"content":[{"type":"template","name":"tpl-element-header_graphd","param":[{"name":"type","value":"Btn"}]},{"type":"attribute","name":"action","tag":"text-string","options":{"resizable":true,"placeholder":"Action..."},"style":{"css":["text-static"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"svg-button"},"type":"layout","tags":["layout-background"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","alignItems":"center","disposition":[{"type":"attribute","name":"shape","tag":"shape"}]}},{"type":"attribute","name":"shape","tag":"interact"}]}},{"concept":{"name":"svg-text"},"tags":["layout-background"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","tag":"draw"},{"type":"attribute","name":"style","tag":"textual"}]}},{"concept":{"name":"svg-choice"},"type":"container","tags":["choice-selection","config"],"container":{"content":[{"type":"template","name":"tpl-element-header_graphd","param":[{"name":"type","value":"ChF"}]},{"type":"attribute","name":"tag","tag":"text-string","options":{"placeholder":"tag"},"style":{"css":["mp-tag"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"svg-choice"},"type":"layout","tags":["layout-setting","config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"dimensions","placeholder":{"content":{"kind":"static","type":"text","content":"Add dimensions","help":"Specify customed coordinates","style":{"css":["field-config-option","font-ui"],"ref":["box-top"]}}},"tag":"layout-dimensions_row"},{"type":"layout","layout":{"type":"flex","justifyContent":"center","disposition":[{"kind":"static","type":"text","content":"Selection","style":{"css":["mp-style__title","title"]}}]}},{"type":"layout","layout":{"type":"flex","justifyContent":"center","disposition":[{"type":"attribute","name":"selection","tag":"simulation"}]}},{"type":"attribute","name":"selection","tag":"interact"}]}},{"concept":{"name":"choice-selection"},"type":"simulation","tags":["simulation"],"projection":{"type":"selection"}},{"concept":{"name":"choice-selection"},"type":"layout","tags":["interact"],"projection":{"type":"flex","orientation":"row","justifyContent":"space-evenly","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"orientation","tag":"label-string"},{"type":"attribute","name":"break","tag":"textual--labelled"},{"type":"attribute","name":"nbItem","tag":"textual--labelled"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"dimensions"}]}}]}},{"concept":{"name":"dimensions"},"tags":["layout-dimensions"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"container","content":[{"kind":"static","type":"text","content":"Type","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select a layout","expanded":false,"input":false,"style":{"css":["select-choice"]}}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["mp-fieldwrap","mp-fieldwrap--layout"]}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection"}]}},{"concept":{"name":"dimensions"},"tags":["layout-dimensions_row"],"type":"layout","projection":{"type":"flex","orientation":"row","disposition":[{"type":"container","content":[{"kind":"static","type":"text","content":"Type","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select a layout","expanded":false,"input":false,"style":{"css":["select-choice"]}}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["mp-fieldwrap","mp-fieldwrap--layout"]}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection"}]}},{"concept":{"name":"absolute"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"kind":"static","type":"text","content":"Absolute"}]}},{"concept":{"name":"absolute"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"width","tag":"textual--labelled"},{"type":"attribute","name":"height","tag":"textual--labelled"}]}},{"concept":{"name":"pure"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"kind":"static","type":"text","content":"Pure"}]}},{"concept":{"name":"pure"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[]}},{"concept":{"name":"fixed"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"kind":"static","type":"text","content":"Fixed"}]}},{"concept":{"name":"fixed"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"width","tag":"textual--labelled"}]}},{"concept":{"name":"absolute"},"tags":["force-dim"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Width","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"width"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Height","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"height"}]}}]}},{"concept":{"name":"shape"},"tags":["shape"],"type":"shape","content":{"type":"canvas","content":[{"type":"attribute","name":"elements","tag":"g-element"}]}},{"concept":{"name":"set"},"tags":["g-element"],"type":"shape","content":{"type":"group","add":true}},{"concept":{"name":"shape"},"tags":["interact"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","justifyContent":"center","alignItems":"center","disposition":[{"kind":"static","type":"text","content":"Dimensions","style":{"css":["mp-style__title"]}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","justifyContent":"space-evenly","alignItems":"center","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Width","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"width"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Height","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"height"}]}}]}}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","justifyContent":"center","alignItems":"center","disposition":[{"kind":"static","type":"text","content":"ViewBox","style":{"css":["mp-style__title"]}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","justifyContent":"space-evenly","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","alignItems":"center","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Width","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"windowW"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Height","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"windowH"}]}}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","alignItems":"center","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"X","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"minX"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Y","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"minY"}]}}]}}]}},{"type":"attribute","name":"current","tag":"current-interact"}]}},{"concept":{"name":"reference"},"tags":"current-interact","type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"current-selection"}]}},{"concept":{"name":"circle"},"tags":["current-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Current selection","style":{"css":["mp-style__title"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"center","disposition":[{"kind":"static","type":"svg-button","content":"<svg width =\\"15\\" height=\\"15\\" version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\"><rect width=\\"15\\" height=\\"15\\" rx=\\"2\\" ry=\\"2\\" fill=\\"#fff\\"></rect><polygon points=\\"0.5 6, 10 6, 10 2.5, 14.5 7.5, 10 12.5, 10 9, 0.5 9\\" fill=\\"#87a1ff\\"></polygon></svg>","action":{"type":"EXTRACT"},"help":"Create new projection","dimensions":{"width":20,"height":20}},{"kind":"static","type":"svg-button","content":"<svg width =\\"15\\" height=\\"15\\" version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\"><rect width=\\"15\\" height=\\"15\\" rx=\\"2\\" ry=\\"2\\" fill=\\"red\\"></rect><line x1=\\"3\\" x2=\\"12\\" y1=\\"3\\" y2=\\"12\\" stroke=\\"#edeae1\\" stroke-width=\\"1.5\\"></line><line x1=\\"3\\" x2=\\"12\\" y1=\\"12\\" y2=\\"3\\" stroke=\\"#edeae1\\" stroke-width=\\"1.5\\"></line></svg>","action":{"type":"DELETE"},"help":"Remove shape","dimensions":{"width":20,"height":20}}],"style":{"css":["selected-panel"]}}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"cx","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"cx"},{"kind":"static","type":"text","content":"cy","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"cy"},{"kind":"static","type":"text","content":"Radius","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"r"}]}},{"type":"attribute","name":"style","tag":"circle-style"}]}},{"concept":{"name":"rectangle"},"tags":["current-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Current selection","style":{"css":["mp-style__title"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"center","disposition":[{"kind":"static","type":"svg-button","content":"<svg width =\\"15\\" height=\\"15\\" version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\"><rect width=\\"15\\" height=\\"15\\" rx=\\"2\\" ry=\\"2\\" fill=\\"#fff\\"></rect><polygon points=\\"0.5 6, 10 6, 10 2.5, 14.5 7.5, 10 12.5, 10 9, 0.5 9\\" fill=\\"#87a1ff\\"></polygon></svg>","action":{"type":"EXTRACT"},"help":"Create new projection","dimensions":{"width":20,"height":20}},{"kind":"static","type":"svg-button","content":"<svg width =\\"15\\" height=\\"15\\" version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\"><rect width=\\"15\\" height=\\"15\\" rx=\\"2\\" ry=\\"2\\" fill=\\"red\\"></rect><line x1=\\"3\\" x2=\\"12\\" y1=\\"3\\" y2=\\"12\\" stroke=\\"#edeae1\\" stroke-width=\\"1.5\\"></line><line x1=\\"3\\" x2=\\"12\\" y1=\\"12\\" y2=\\"3\\" stroke=\\"#edeae1\\" stroke-width=\\"1.5\\"></line></svg>","action":{"type":"DELETE"},"help":"Remove shape","dimensions":{"width":20,"height":20}}],"style":{"css":["selected-panel"]}}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"x","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"x"},{"kind":"static","type":"text","content":"y","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"y"},{"kind":"static","type":"text","content":"Width","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"width"},{"kind":"static","type":"text","content":"Height","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"height"}]}},{"type":"attribute","name":"style","tag":"rect-style"}]}},{"concept":{"name":"path"},"tags":["current-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Current selection","style":{"css":["mp-style__title"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"center","disposition":[{"kind":"static","type":"svg-button","content":"<svg width =\\"15\\" height=\\"15\\" version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\"><rect width=\\"15\\" height=\\"15\\" rx=\\"2\\" ry=\\"2\\" fill=\\"#fff\\"></rect><polygon points=\\"0.5 6, 10 6, 10 2.5, 14.5 7.5, 10 12.5, 10 9, 0.5 9\\" fill=\\"#87a1ff\\"></polygon></svg>","action":{"type":"EXTRACT"},"help":"Create new projection","dimensions":{"width":20,"height":20}},{"kind":"static","type":"svg-button","content":"<svg width =\\"15\\" height=\\"15\\" version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\"><rect width=\\"15\\" height=\\"15\\" rx=\\"2\\" ry=\\"2\\" fill=\\"red\\"></rect><line x1=\\"3\\" x2=\\"12\\" y1=\\"3\\" y2=\\"12\\" stroke=\\"#edeae1\\" stroke-width=\\"1.5\\"></line><line x1=\\"3\\" x2=\\"12\\" y1=\\"12\\" y2=\\"3\\" stroke=\\"#edeae1\\" stroke-width=\\"1.5\\"></line></svg>","action":{"type":"DELETE"},"help":"Remove shape","dimensions":{"width":20,"height":20}}],"style":{"css":["selected-panel"]}}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"d","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"d","tag":"fixed"}]}},{"type":"attribute","name":"style","tag":"path-style"}]}},{"concept":{"name":"polygon"},"tags":["current-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Current selection","style":{"css":["mp-style__title"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"center","disposition":[{"kind":"static","type":"svg-button","content":"<svg width =\\"15\\" height=\\"15\\" version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\"><rect width=\\"15\\" height=\\"15\\" rx=\\"2\\" ry=\\"2\\" fill=\\"#fff\\"></rect><polygon points=\\"0.5 6, 10 6, 10 2.5, 14.5 7.5, 10 12.5, 10 9, 0.5 9\\" fill=\\"#87a1ff\\"></polygon></svg>","action":{"type":"EXTRACT"},"help":"Create new projection","dimensions":{"width":20,"height":20}},{"kind":"static","type":"svg-button","content":"<svg width =\\"15\\" height=\\"15\\" version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\"><rect width=\\"15\\" height=\\"15\\" rx=\\"2\\" ry=\\"2\\" fill=\\"red\\"></rect><line x1=\\"3\\" x2=\\"12\\" y1=\\"3\\" y2=\\"12\\" stroke=\\"#edeae1\\" stroke-width=\\"1.5\\"></line><line x1=\\"3\\" x2=\\"12\\" y1=\\"12\\" y2=\\"3\\" stroke=\\"#edeae1\\" stroke-width=\\"1.5\\"></line></svg>","action":{"type":"DELETE"},"help":"Remove shape","dimensions":{"width":20,"height":20}}],"style":{"css":["selected-panel"]}}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Points","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"points","tag":"fixed"}]}},{"type":"attribute","name":"style","tag":"polygon-style"}]}},{"concept":{"name":"shape-style"},"tags":["path-style"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Style","style":{"css":["mp-style__title"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Fill","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"fill","tag":"fixed"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"stroke","tag":"fixed"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke-width","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"s-width"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke-dasharray","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"s-dash","tag":"fixed"}]}}]}},{"concept":{"name":"shape-style"},"tags":["polygon-style"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Style","style":{"css":["mp-style__title"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Fill","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"fill","tag":"fixed"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"stroke","tag":"fixed"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke-width","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"s-width"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke-dasharray","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"s-dash","tag":"fixed"}]}}]}},{"concept":{"name":"shape-style"},"tags":["circle-style"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Style","style":{"css":["mp-style__title"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Fill","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"fill","tag":"fixed"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"stroke","tag":"fixed"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke-width","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"s-width"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke-dasharray","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"s-dash","tag":"fixed"}]}}]}},{"concept":{"name":"shape-style"},"tags":["rect-style"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"kind":"static","type":"text","content":"Style","style":{"css":["mp-style__title"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Fill","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"fill","tag":"fixed"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"stroke","tag":"fixed"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke-width","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"s-width"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Stroke-dasharray","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"s-dash","tag":"fixed"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"rx","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"rx"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"ry","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"ry"}]}}]}},{"concept":{"name":"shape-element"},"tags":["list-item"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"expanded":false,"input":false,"style":{"css":["select-choice"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection"}]}},{"concept":{"name":"shape-element"},"tags":["shape"],"type":"field","content":{"type":"svg-choice","dimensions":false,"selection":{"item":{"dimension":{"width":40,"height":40},"tag":"choice-shape"},"breakPoint":2,"direction":"horizontal","close":true}}},{"concept":{"name":"circle"},"tags":["choice-shape"],"type":"algorithm","content":{"type":"decoration","content":[],"background":"<svg version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\"><circle cx=\\"20\\" cy=\\"20\\" r=\\"15\\" fill=\\"black\\"></circle><text x=\\"20\\" y=\\"20\\" text-anchor=\\"middle\\" font-family=\\"Segoe UI\\" font-size=\\"8\\" style=\\"dominant-baseline:middle\\" fill=\\"white\\">Circle</text></svg>"}},{"concept":{"name":"polygon"},"tags":["choice-shape"],"type":"algorithm","content":{"type":"decoration","content":[],"background":"<svg version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\"><polygon points=\\"12.5, 2.5 27.5, 2.5 37.5, 12.5 37.5, 27.5 27.5, 37.5 12.5, 37.5 2.5, 27.5 2.5, 12.5\\" fill=\\"black\\"></polygon><text x=\\"20\\" y=\\"20\\" text-anchor=\\"middle\\" font-size=\\"9\\" font-family=\\"Segoe UI\\" fill=\\"white\\" style=\\"dominant-baseline:middle\\">Polygon</text></svg>"}},{"concept":{"name":"polygon"},"tags":["shape"],"type":"shape","content":{"type":"polygon"}},{"concept":{"name":"ellipse"},"tags":["choice-shape"],"type":"algorithm","content":{"type":"decoration","content":[],"background":"<svg version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\"><ellipse cx=\\"20\\" cy=\\"20\\" rx=\\"19.5\\" ry=\\"15\\" fill=\\"black\\"></ellipse><text x=\\"20\\" y=\\"20\\" text-anchor=\\"middle\\" font-size=\\"9\\" font-family=\\"Segoe UI\\" fill=\\"white\\" style=\\"dominant-baseline:middle\\">Ellipse</text></svg>"}},{"concept":{"name":"ellipse"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"kind":"static","type":"text","content":"Ellipse"}]}},{"concept":{"name":"ellipse"},"tags":["shape"],"type":"shape","content":{"type":"ellipse"}},{"concept":{"name":"ellipse"},"tags":["current-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Current selection","style":{"css":["mp-style__title"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"center","disposition":[{"kind":"static","type":"svg-button","content":"<svg width =\\"15\\" height=\\"15\\" version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\"><rect width=\\"15\\" height=\\"15\\" rx=\\"2\\" ry=\\"2\\" fill=\\"#fff\\"></rect><polygon points=\\"0.5 6, 10 6, 10 2.5, 14.5 7.5, 10 12.5, 10 9, 0.5 9\\" fill=\\"#87a1ff\\"></polygon></svg>","action":{"type":"EXTRACT"},"help":"Create new projection","dimensions":{"width":20,"height":20}},{"kind":"static","type":"svg-button","content":"<svg width =\\"15\\" height=\\"15\\" version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\"><rect width=\\"15\\" height=\\"15\\" rx=\\"2\\" ry=\\"2\\" fill=\\"red\\"></rect><line x1=\\"3\\" x2=\\"12\\" y1=\\"3\\" y2=\\"12\\" stroke=\\"#edeae1\\" stroke-width=\\"1.5\\"></line><line x1=\\"3\\" x2=\\"12\\" y1=\\"12\\" y2=\\"3\\" stroke=\\"#edeae1\\" stroke-width=\\"1.5\\"></line></svg>","action":{"type":"DELETE"},"help":"Remove shape","dimensions":{"width":20,"height":20}}],"style":{"css":["selected-panel"]}}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"cx","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"cx"},{"kind":"static","type":"text","content":"cy","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"cy"},{"kind":"static","type":"text","content":"rx","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"rx"},{"kind":"static","type":"text","content":"ry","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"ry"}]}},{"type":"attribute","name":"style","tag":"circle-style"}]}},{"concept":{"name":"ellipse"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"cx","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"cx"},{"kind":"static","type":"text","content":"cy","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"cy"},{"kind":"static","type":"text","content":"rx","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"rx"},{"kind":"static","type":"text","content":"ry","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"ry"},{"kind":"static","type":"text","content":"fill","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"fill","tag":"fixed"}]}},{"concept":{"name":"circle"},"tags":["shape"],"type":"shape","content":{"type":"circle"}},{"concept":{"name":"circle"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"cx","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"cx"},{"kind":"static","type":"text","content":"cy","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"cy"},{"kind":"static","type":"text","content":"r","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"r"},{"kind":"static","type":"text","content":"fill","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"fill","tag":"fixed"}]}},{"concept":{"name":"text"},"tags":["choice-shape"],"type":"algorithm","content":{"type":"decoration","content":[],"background":"<svg version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\"><text x=\\"20\\" y=\\"20\\" text-anchor=\\"middle\\" font-size=\\"9\\" font-family=\\"Segoe UI\\" fill=\\"black\\" style=\\"dominant-baseline:middle\\">Text</text></svg>"}},{"concept":{"name":"text"},"tags":["shape"],"type":"shape","content":{"type":"text"}},{"concept":{"name":"path"},"tags":["choice-shape"],"type":"algorithm","content":{"type":"decoration","content":[],"background":"<svg version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\"><path d=\\"M2.5 20 C 2.5 20, 11.25 -5, 20 20 C 20 20, 31.25 40, 37.5 20\\" fill=\\"white\\" stroke=\\"grey\\"></path><text x=\\"20\\" y=\\"20\\" text-anchor=\\"middle\\" font-size=\\"9\\" font-family=\\"Segoe UI\\" font-weight=\\"500\\" fill=\\"black\\" style=\\"dominant-baseline:middle\\">Path</text></svg>"}},{"concept":{"name":"path"},"tags":["shape"],"type":"shape","content":{"type":"path"}},{"concept":{"name":"rectangle"},"tags":["choice-shape"],"type":"algorithm","content":{"type":"decoration","content":[],"background":"<svg version=\\"1.0\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\"><rect x=\\"2.5\\" y=\\"7.5\\" width=\\"35\\" height=\\"25\\" fill=\\"black\\"></rect><text x=\\"20\\" y=\\"20\\" text-anchor=\\"middle\\" font-size=\\"8\\" font-family=\\"Segoe UI\\" fill=\\"white\\" style=\\"dominant-baseline:middle\\">Rectangle</text></svg>"}},{"concept":{"name":"rectangle"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"kind":"static","type":"text","content":"Rectangle"}]}},{"concept":{"name":"rectangle"},"tags":["shape"],"type":"shape","content":{"type":"rectangle"}},{"concept":{"name":"rectangle"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"x","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"x"},{"kind":"static","type":"text","content":"y","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"y"},{"kind":"static","type":"text","content":"width","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"width"},{"kind":"static","type":"text","content":"height","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"height"},{"kind":"static","type":"text","content":"fill","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"attribute","name":"fill","tag":"fixed"}]}},{"concept":{"name":"textSVG-style"},"tags":["draw"],"type":"layout","projection":{"type":"flex","orientation":"column","justifyContent":"center","alignItems":"center","disposition":[{"type":"simulation","simulation":{"type":"text"}}]}},{"concept":{"name":"textSVG-style"},"tags":["textual"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","justifyContent":"center","disposition":[{"kind":"static","type":"text","content":"Text Style","style":{"css":["mp-style__title"]}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Font-family","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"font","tag":"fixed"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Font-size","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"size"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Text-anchor","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"anchor","tag":"fixed"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"kind":"static","type":"text","content":"Dominant-Baseline","style":{"css":["mp-fieldwrap__label","label"]}},{"type":"attribute","name":"baseline","tag":"fixed"}]}}]}}]}')},521:t=>{"use strict";t.exports=JSON.parse('{"type":"concept","concept":[{"name":"proto-projection","nature":"prototype","attributes":[{"name":"concept","target":{"name":"concept"},"required":true},{"name":"tags","target":{"name":"set","accept":{"name":"tag"}},"required":true}]},{"name":"projection","nature":"concrete","root":true,"prototype":"proto-projection","attributes":[{"name":"name","target":{"name":"name"},"required":false},{"name":"container","target":{"name":"container"},"required":true}],"properties":[{"name":"handler","type":"string","value":"projection"}]},{"name":"container-projection","nature":"concrete","root":false,"prototype":"proto-projection","attributes":[{"name":"container","target":{"name":"container"},"required":true}],"properties":[{"name":"handler","type":"string","value":"container-projection"}]},{"name":"static-projection","nature":"concrete","root":false,"prototype":"proto-projection","attributes":[{"name":"static","target":{"name":"static"}}],"properties":[{"name":"handler","type":"string","value":"static-projection"}]},{"name":"field-projection","nature":"concrete","root":false,"prototype":"proto-projection","attributes":[{"name":"field","target":{"name":"field"}}],"properties":[{"name":"handler","type":"string","value":"field-projection"}]},{"name":"graphic-projection","nature":"concrete","root":false,"prototype":"proto-projection","attributes":[{"name":"content","target":{"name":"set","accept":{"name":"render","accept":[{"name":"interactive-svg"},{"name":"add-field"},{"name":"arrow"},{"name":"svg-container"},{"name":"svg-text"}]}},"required":true}],"properties":[{"name":"handler","type":"string","value":"field-projection"}]},{"name":"template","nature":"concrete","root":true,"attributes":[{"name":"name","target":{"name":"name"},"required":true},{"name":"param","target":{"name":"set","accept":{"name":"parameter"}},"required":false},{"name":"content","target":{"name":"set","accept":{"name":"render","accept":[{"name":"container"},{"name":"text-field"},{"name":"binary-field"},{"name":"choice-field"},{"name":"list-field"},{"name":"text-static"},{"name":"image-static"},{"name":"link-static"},{"name":"plink-static"},{"name":"button-static"},{"name":"projection-dynamic"}]}}}],"properties":[{"name":"handler","type":"string","value":"template"}]},{"name":"parameter","nature":"concrete","attributes":[{"name":"name","target":{"name":"string"},"required":true},{"name":"type","target":{"name":"value"},"required":true}]},{"name":"value","nature":"prototype","attributes":[]},{"name":"string-value","nature":"concrete","prototype":"value","attributes":[{"name":"value","target":{"name":"string"}}]},{"name":"number-value","nature":"concrete","prototype":"value","attributes":[{"name":"value","target":{"name":"number"}}]},{"name":"boolean-value","nature":"concrete","prototype":"value","attributes":[{"name":"value","target":{"name":"boolean"}}]},{"name":"argument","nature":"concrete","attributes":[{"name":"name","target":{"name":"reference","accept":{"name":"parameter"}},"required":true},{"name":"value","target":{"name":"value"},"required":true}]},{"name":"concept","nature":"concrete","attributes":[{"name":"name","target":{"name":"name","src":["string","number","boolean","set","reference",{"type":"reference","target":{"value":"name"},"source":{"type":"resource","name":"metamodel"}}]}},{"name":"prototype","target":{"name":"name"}}]},{"name":"render","nature":"prototype","attributes":[{"name":"style","target":{"name":"style"},"required":false},{"name":"help","target":{"name":"string"},"required":false},{"name":"focusable","target":{"name":"boolean","default":true}},{"name":"hidden","target":{"name":"boolean","default":false}},{"name":"sibling","target":{"name":"sibling"},"required":false}]},{"name":"element","nature":"prototype","prototype":"render","attributes":[{"name":"name","target":{"name":"string"}}]},{"name":"container","nature":"concrete","prototype":"element","attributes":[{"name":"layout","target":{"name":"layout","default":"simple-layout"}},{"name":"elements","target":{"name":"set","accept":{"name":"render","accept":[{"name":"container"},{"name":"text-field"},{"name":"binary-field"},{"name":"choice-field"},{"name":"list-field"},{"name":"text-static"},{"name":"image-static"},{"name":"link-static"},{"name":"plink-static"},{"name":"button-static"},{"name":"projection-dynamic"},{"name":"template element"}]}}},{"name":"resizable","target":{"name":"boolean","default":false}},{"name":"sibling","target":{"name":"sibling"},"required":false}],"properties":[{"name":"contentType","type":"string","value":"container"}]},{"name":"field","nature":"prototype","prototype":"element","attributes":[{"name":"readonly","target":{"name":"boolean","default":false}},{"name":"disabled","target":{"name":"boolean","default":false}},{"name":"source","target":{"name":"string","src":[{"type":"meta-reference","target":{"name":"attributes","rel":"children","value":"name"},"query":{"type":"resource","resource":"concepts","params":[{"type":"eq","eq":[{"type":"property","value":"name"},{"type":"reference","rel":"parent","name":"projection","value":{"type":"reference","rel":"children","name":"concept","value":{"type":"attribute","name":"name"}}}]}]}}]}}]},{"name":"text-field","nature":"concrete","prototype":"field","attributes":[{"name":"input","target":{"name":"input"}},{"name":"multiline","target":{"name":"boolean","default":false}},{"name":"resizable","target":{"name":"boolean","default":false}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"text"}]},{"name":"input","nature":"concrete","prototype":"render","attributes":[{"name":"type","target":{"name":"string","default":"text","constraint":{"values":["text","number","email","tel","url","color","date","range"]}}},{"name":"placeholder","target":{"name":"string"}}]},{"name":"binary-field","nature":"concrete","prototype":"field","attributes":[{"name":"checkbox","target":{"name":"checkbox"},"required":false},{"name":"true","target":{"name":"static-content"}},{"name":"false","target":{"name":"static-content"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"binary"}]},{"name":"checkbox","nature":"concrete","prototype":"render","attributes":[{"name":"position","target":{"name":"string","constraint":{"values":["before","after"]},"default":"before"}},{"name":"label","target":{"name":"label"}}]},{"name":"label","nature":"concrete","prototype":"render","attributes":[{"name":"content","target":{"name":"string"}}]},{"name":"static-content","nature":"concrete","attributes":[{"name":"content","target":{"name":"set","accept":{"name":"element","accept":[{"name":"text-static"},{"name":"image-static"}]}}}]},{"name":"choice-field","nature":"concrete","prototype":"field","attributes":[{"name":"choice template","target":{"name":"template reference"},"required":true},{"name":"expanded","target":{"name":"boolean"},"required":true},{"name":"placeholder","target":{"name":"string"},"required":false},{"name":"input","target":{"name":"input"},"required":false}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"choice"}]},{"name":"list-field","nature":"concrete","prototype":"field","attributes":[{"name":"orientation","target":{"name":"string","constraint":{"values":["horizontal","vertical"]}}},{"name":"action","target":{"name":"list-field-action"}},{"name":"item template","target":{"name":"template reference"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"list"}]},{"name":"interactive-svg","nature":"concrete","prototype":"field","attributes":[{"name":"content","target":{"name":"string"}},{"name":"field","target":{"name":"source-svg"}},{"name":"static-dependents","target":{"name":"set","accept":{"name":"external-svg"}}},{"name":"dynamic-dependents","target":{"name":"set","accept":{"name":"external-svg"}}},{"name":"marker","target":"string"},{"name":"markers","target":{"name":"set","accept":{"name":"marker"}}},{"name":"self","target":{"name":"set","accept":{"name":"pure-marker"}}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"interactive"}]},{"name":"source-svg","nature":"concrete","attributes":[{"name":"tag","target":{"name":"tag"}},{"name":"marker","target":{"name":"string"}}]},{"name":"static-svg","nature":"concrete","prototype":"field","attributes":[{"name":"content","target":{"name":"string"}},{"name":"model-value","target":"string"}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"static"}]},{"name":"dynamic-svg","nature":"concrete","prototype":"field","attributes":[{"name":"content","target":{"name":"string"}},{"name":"marker","target":"string"},{"name":"markers","target":{"name":"set","accept":{"name":"marker"}}},{"name":"self","target":{"name":"set","accept":{"name":"pure-marker"}}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"dynamic"}]},{"name":"marker","nature":"concrete","attributes":[{"name":"model-value","target":"string"},{"name":"aliases","target":{"name":"set","accept":{"name":"alias"}}}]},{"name":"pure-marker","nature":"concrete","attributes":[{"name":"property","target":"string"}]},{"name":"alias","nature":"concrete","attributes":[{"name":"marker-value","target":"string"},{"name":"properties","target":"svg-properties"}]},{"name":"svg-properties","nature":"concrete","attributes":[{"name":"bold","target":"boolean","default":false},{"name":"italic","target":"boolean","default":false},{"name":"underline","target":"boolean","default":false},{"name":"text-content","target":"string"},{"name":"color","target":"hex-color"},{"name":"size","target":"size"},{"name":"others","target":{"name":"set","accept":{"name":"other"}}}]},{"name":"other","nature":"concrete","attributes":[{"name":"property","target":"string"},{"name":"value","target":"string"}]},{"name":"list-field-action","nature":"concrete","attributes":[{"name":"add","target":{"name":"action"}},{"name":"remove","target":{"name":"action"}}]},{"name":"action","nature":"concrete","prototype":"render","attributes":[{"name":"position","target":{"name":"string","constraint":{"values":["before","after"]},"default":"before"}},{"name":"content","target":{"name":"string"}}]},{"name":"table-field","nature":"concrete","prototype":"field","attributes":[{"name":"orientation","target":{"name":"string","constraint":{"values":["column","row"]}}},{"name":"row template","target":{"name":"template reference"}},{"name":"header","target":{"name":"style"},"required":false},{"name":"body","target":{"name":"style"},"required":true},{"name":"footer","target":{"name":"style"},"required":false}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"table"}]},{"name":"add-field","prototype":"field","nature":"concrete","attributes":[{"name":"content","target":{"name":"string","default":"Add"}},{"name":"items","target":{"name":"template reference"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"add"}]},{"name":"arrow","prototype":"field","nature":"concrete","attributes":[{"name":"source","target":{"name":"attribute element"}},{"name":"target","target":{"name":"attribute element"}},{"name":"decorator","target":{"name":"decorator element"}},{"name":"arrow-style","target":{"name":"arrow-style"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"arrow"}]},{"name":"decorator element","nature":"concrete","attributes":[{"name":"attribute","target":{"name":"attribute element"}},{"name":"base","target":{"name":"string","constraint":{"values":["source","target","center"]},"default":"center"}}]},{"name":"arrow-target","nature":"prototype","attributes":[]},{"name":"self-target","nature":"concrete","prototype":"arrow-target","attributes":[]},{"name":"attribute-target","nature":"concrete","prototype":"arrow-target","attributes":[{"name":"attribute","target":{"name":"string"}}]},{"name":"svg-text","nature":"concrete","prototype":"field","attributes":[{"name":"x","target":{"name":"number"}},{"name":"y","target":{"name":"number"}},{"name":"content","target":{"name":"string"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"svg"}]},{"name":"svg-link","nature":"concrete","attributes":[{"name":"tag","target":{"name":"tag"}},{"name":"marker","target":{"name":"string"}},{"name":"external","target":{"name":"boolean","default":false}}]},{"name":"svg-attribute","nature":"concrete","attributes":[{"name":"value","target":{"name":"attribute","src":[{"type":"reference","target":{"name":"attributes","rel":"children","value":"name","source":{"type":"reference","rel":"parent","name":"projection","value":{"type":"reference","rel":"children","name":"concept","value":{"type":"attribute","name":"name"}}}},"source":{"type":"resource","name":"metamodel"}}]}},{"name":"placement","target":{"name":"placement","accept":[{"name":"in-place"},{"name":"link-place"}],"default":"in-place"}},{"name":"property","target":{"name":"string"},"required":false}]},{"name":"placement","nature":"prototype"},{"name":"in-place","prototype":"placement","nature":"concrete","attributes":[{"name":"marker","target":{"name":"string"}},{"name":"tag","target":{"name":"tag"}},{"name":"visible","target":{"name":"boolean"},"default":true}]},{"name":"link-place","prototype":"placement","nature":"concrete","attributes":[{"name":"static-dependents","target":{"name":"set","accept":{"name":"external-svg"}}},{"name":"dynamic-dependents","target":{"name":"set","accept":{"name":"external-svg"}}}]},{"name":"external-svg","nature":"concrete","attributes":[{"name":"template","target":{"name":"string"}},{"name":"marker","target":{"name":"string"}}]},{"name":"template reference","nature":"concrete","prototype":"render","attributes":[{"name":"tag","target":{"name":"reference","accept":{"name":"tag"}}},{"name":"name","target":{"name":"string"}}]},{"name":"layout","nature":"prototype","prototype":"element","attributes":[]},{"name":"simple-layout","nature":"concrete","prototype":"layout","attributes":[{"name":"orientation","target":{"name":"string","default":"row","constraint":{"values":["row","column"]}}},{"name":"wrappable","target":{"name":"boolean","default":true}},{"name":"align-items","target":{"name":"string","default":"start","constraint":{"values":["start","end","center","stretch","baseline"]}}},{"name":"justify-content","target":{"name":"string","default":"start","constraint":{"values":["start","end","center","space-between","space-around","space-evenly"]}}}],"properties":[{"name":"contentType","type":"string","value":"layout"},{"name":"elementType","type":"string","value":"flex"}]},{"name":"table-layout","nature":"concrete","prototype":"layout","attributes":[{"name":"orientation","target":{"name":"string","default":"row","constraint":{"values":["row","column"]}}},{"name":"rows","target":{"name":"set","accept":{"name":"row"},"constraint":{"cardinality":{"type":"range","range":{"min":{"value":1}}}}}}],"properties":[{"name":"contentType","type":"string","value":"layout"},{"name":"elementType","type":"string","value":"table"}]},{"name":"row","nature":"concrete","prototype":"render","attributes":[{"name":"cells","target":{"name":"set","accept":{"name":"cell"}}}]},{"name":"cell","nature":"concrete","prototype":"render","attributes":[{"name":"span","target":{"name":"number"}},{"name":"content","target":{"name":"render","accept":[{"name":"container"},{"name":"text-field"},{"name":"binary-field"},{"name":"choice-field"},{"name":"list-field"},{"name":"text-static"},{"name":"image-static"},{"name":"link-static"},{"name":"plink-static"},{"name":"button-static"},{"name":"attribute element"}]}}]},{"name":"static element","nature":"prototype","prototype":"element","attributes":[{"name":"editable","target":{"name":"boolean","default":false}}]},{"name":"atomic element","nature":"prototype","prototype":"static element","attributes":[{"name":"content","target":{"name":"string"}}]},{"name":"text-static","nature":"concrete","prototype":"atomic element","attributes":[{"name":"asHTML","target":{"name":"boolean"}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"text"}]},{"name":"image-static","nature":"concrete","prototype":"atomic element","attributes":[{"name":"url","alias":"src","target":{"name":"string"}},{"name":"alt","target":{"name":"string"}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"image"}]},{"name":"link-static","nature":"concrete","prototype":"static element","attributes":[{"name":"url","alias":"href","target":{"name":"string"}},{"name":"type","alias":"urlType","target":{"name":"string","constraint":{"values":["link","email","phone"]},"default":"link"}},{"name":"content","target":{"name":"set","accept":{"name":"render","accept":[{"name":"text-static"},{"name":"image-static"}]}}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"link"}]},{"name":"plink-static","nature":"concrete","prototype":"element","attributes":[{"name":"tag","alias":"href","target":{"name":"string"}},{"name":"content","target":{"name":"set","accept":{"name":"render","accept":[{"name":"text-static"},{"name":"image-static"}]}}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"plink"}]},{"name":"button-static","nature":"concrete","prototype":"element","attributes":[{"name":"trigger","target":{"name":"name","default":false}},{"name":"disabled","target":{"name":"boolean","default":false}},{"name":"content","target":{"name":"set","accept":{"name":"render","accept":[{"name":"text-static"},{"name":"image-static"}]}}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"button"}]},{"name":"attribute element","nature":"concrete","prototype":"element","attributes":[{"name":"value","target":{"name":"attribute","src":[{"type":"reference","target":{"name":"attributes","rel":"children","value":"name","source":{"type":"reference","rel":"parent","name":"projection","value":{"type":"reference","rel":"children","name":"concept","value":{"type":"attribute","name":"name"}}}},"source":{"type":"resource","name":"metamodel"}}]}},{"name":"tag","target":{"name":"tag"},"required":true},{"name":"placeholder","target":{"name":"static-content"}},{"name":"required","target":{"name":"boolean"}}],"properties":[{"name":"contentType","type":"string","value":"dynamic"},{"name":"elementType","type":"string","value":"attribute"}]},{"name":"template element","nature":"concrete","prototype":"element","attributes":[{"name":"value","target":{"name":"reference","accept":{"name":"template"}}}],"properties":[{"name":"contentType","type":"string","value":"dynamic"},{"name":"elementType","type":"string","value":"template"}]},{"name":"projection-dynamic","nature":"concrete","prototype":"element","attributes":[{"name":"src","target":{"name":"name"}},{"name":"tag","target":{"name":"tag"}},{"name":"placeholder","target":{"name":"static-content"}},{"name":"required","target":{"name":"boolean"}},{"name":"listen","target":{"name":"boolean","default":false}}],"properties":[{"name":"contentType","type":"string","value":"dynamic"},{"name":"elementType","type":"string","value":"projection"}]},{"name":"external element","nature":"prototype","prototype":"element","attributes":[{"name":"content","target":{"name":"string"}}]},{"name":"html-external","nature":"concrete","prototype":"external element","attributes":[{"name":"selector","target":{"name":"string"}}],"properties":[{"name":"contentType","type":"string","value":"external"},{"name":"elementType","type":"string","value":"html"}]},{"name":"property-content","nature":"concrete","attributes":[{"name":"content","target":{"name":"string","src":["refname","value",{"type":"reference","target":{"name":"properties","rel":"children","value":"name","source":{"type":"reference","rel":"parent","name":"projection","value":{"type":"reference","rel":"children","name":"concept","value":{"type":"attribute","name":"name"}}}},"source":{"type":"resource","name":"metamodel"}}]}}],"properties":[{"name":"contentType","type":"string","value":"property"},{"name":"elementType","type":"string","value":"content"}]},{"name":"name","nature":"derivative","base":"string","constraint":{"length":{"type":"range","range":{"min":{"value":1},"max":{"value":50}}}}},{"name":"tag","nature":"derivative","base":"string","constraint":{"value":{"type":"pattern","pattern":{"insensitive":true,"global":true,"value":"^\\\\w+(-\\\\w+)*$"}}}},{"name":"attribute","nature":"derivative","base":"string","constraint":{"length":{"type":"range","range":{"min":1}}}},{"name":"property","nature":"derivative","base":"string","constraint":{"length":{"type":"range","range":{"min":1}}}},{"name":"sibling","nature":"concrete","attributes":[{"name":"tag","target":{"name":"string"}},{"name":"r-tag","target":{"name":"string"}}]}]}')},547:t=>{"use strict";t.exports=JSON.parse('{"toolbar":[{"type":"button","name":"button-build","action":"build-projection","class":["btn","app-editor-header__button","editor-toolbar__button--build"],"content":"Build"},{"type":"button","name":"button-export","action":"export.model","class":["btn","editor-toolbar__button","editor-toolbar__button--save"]}]}')},276:t=>{"use strict";t.exports=JSON.parse('{"type":"projection","projection":[{"concept":{"name":"template"},"type":"layout","tags":[],"content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","style":{"ref":["pad-left"]},"disposition":[{"type":"static","static":{"type":"text","content":"Template","style":{"text":{"bold":true}}}},{"type":"attribute","name":"name","tag":"textual"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","style":{"ref":["pad-left"]},"disposition":[{"type":"static","static":{"type":"text","content":"Content","style":{"css":["section-title","font-ui"]}}},{"type":"attribute","name":"content","tag":"action"}]}},{"type":"attribute","name":"content","tag":"element-set","style":{"css":["container-config-content"]}}],"style":{"css":["model-projection"]}}},{"concept":{"name":"template"},"type":"layout","tags":["choice","choice-selection"],"content":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"name","tag":"readonly"}]}},{"concept":{"name":"projection"},"type":"container","tags":["default"],"container":{"content":[{"type":"container","content":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"concept","help":"Target concept","style":{"ref":["box-left"]}}]}},{"kind":"static","type":"text","content":"Tags","style":{"css":["title","mp-header__title"]}},{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"tags"}},"content":[{"kind":"static","type":"text","content":"+","style":{"css":["mp-header__button-content"]}}],"style":{"css":["mp-header__button","mp-header__button--add"]}},{"type":"attribute","name":"tags","tag":"tag-set","style":{"css":["mp-header__tags"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["model-projection-header"]}},{"type":"container","content":[{"type":"attribute","name":"container"}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection-body"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection"]}}},{"concept":{"name":"concept"},"tags":[],"type":"container","container":{"content":[{"type":"attribute","name":"name"}],"layout":{"type":"flex","orientation":"row"}}},{"concept":{"name":"projection"},"type":"container","tags":["string"],"container":{"content":[{"type":"template","name":"tpl-projection-header"},{"type":"container","content":[{"type":"attribute","name":"container","tag":"string"}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection-body"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection"]}}},{"concept":{"name":"projection"},"type":"container","tags":["number"],"container":{"content":[{"type":"template","name":"tpl-projection-header"},{"type":"container","content":[{"type":"attribute","name":"container","tag":"number"}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection-body"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection"]}}},{"concept":{"name":"projection"},"type":"container","tags":["boolean"],"container":{"content":[{"type":"template","name":"tpl-projection-header"},{"type":"container","content":[{"type":"attribute","name":"container","tag":"boolean"}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection-body"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection"]}}},{"concept":{"name":"projection"},"type":"container","tags":["reference"],"container":{"content":[{"type":"template","name":"tpl-projection-header"},{"type":"container","content":[{"type":"attribute","name":"container","tag":"reference"}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection-body"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection"]}}},{"concept":{"name":"projection"},"type":"container","tags":["set"],"container":{"content":[{"type":"template","name":"tpl-projection-header"},{"type":"container","content":[{"type":"attribute","name":"container","tag":"set"}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection-body"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["model-projection"]}}},{"concept":{"name":"projection"},"type":"layout","tags":["edit"],"content":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"tags","tag":"tag-set"}],"style":{"css":["model-projection","model-projection--edit"]}}},{"concept":{"name":"render"},"tags":["list-item"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"projection","bind":"value","placeholder":false,"required":true,"tag":"choice-selection"}],"style":{"html":[{"name":"etype","value":{"type":"property","name":"value"}}]}}},{"concept":{"name":"render"},"tags":["select-list-item"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice","style":{"css":["list-choice__selection"]}},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["list-choice__option"]}},"style":{"css":["list-choice__options"]}},"expanded":true,"input":{"placeholder":"Filter","style":{"css":["list-choice__input"]}},"style":{"css":["list-choice","list-choice--render"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"button","trigger":"open-content","bind":"value","content":[{"kind":"static","type":"text","content":"Content"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--content"]}}},{"type":"static","static":{"type":"button","trigger":"open-action","bind":"value","content":[{"kind":"static","type":"text","content":"Action"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--action"]}}},{"type":"static","static":{"type":"button","trigger":"open-state","bind":"value","content":[{"kind":"static","type":"text","content":"State"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","bind":"value","content":[{"kind":"static","type":"text","content":"Style"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}],"style":{"css":["mp-element__header-navbar"],"html":[{"name":"etype","value":{"type":"property","name":"value"}}]}}}],"style":{"css":["mp-element__header"],"html":[{"name":"etype","value":{"type":"property","name":"value"}}]}}},{"type":"projection","bind":"value","placeholder":false,"required":true,"tag":"choice-selection"}],"style":{"html":[{"name":"etype","value":{"type":"property","name":"value"}}]}}},{"concept":{"name":"container"},"type":"layout","tags":["choice-selection","config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","wrappable":false,"disposition":[{"type":"template","name":"mp-button","param":[{"name":"type","value":"container"},{"name":"name","value":"Container"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"svg-container"},{"name":"name","value":"Svg"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"text-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"link-static"},{"name":"name","value":"Link"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"image-static"},{"name":"name","value":"Image"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"plink-static"},{"name":"name","value":"Viewswitch"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"button-static"},{"name":"name","value":"Button"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"projection-dynamic"},{"name":"name","value":"Projection"}]},{"kind":"static","type":"button","trigger":"open-layout","help":"Layout","content":[{"kind":"static","type":"text","content":"Layout"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--layout"]}},{"type":"static","static":{"type":"button","trigger":"open-style","help":"Style","content":[{"kind":"static","type":"text","content":"Style"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"elements","tag":"element-set","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"container"},"type":"layout","tags":["string","number"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","wrappable":false,"disposition":[{"type":"template","name":"mp-button","param":[{"name":"type","value":"text-field"},{"name":"name","value":"TextField"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"text-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"image-static"},{"name":"name","value":"Image"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"button-static"},{"name":"name","value":"Button"}]},{"kind":"static","type":"button","trigger":"open-layout","help":"Layout","content":[{"kind":"static","type":"text","content":"L"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--layout"]}},{"kind":"static","type":"button","trigger":"open-style","help":"Style","content":[{"kind":"static","type":"text","content":"S"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"elements","tag":"element-set","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"container"},"type":"layout","tags":["boolean"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","wrappable":false,"disposition":[{"type":"template","name":"mp-button","param":[{"name":"type","value":"binary-field"},{"name":"name","value":"BinaryField"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"text-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"image-static"},{"name":"name","value":"Image"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"button-static"},{"name":"name","value":"Button"}]},{"kind":"static","type":"button","trigger":"open-layout","help":"Layout","content":[{"kind":"static","type":"text","content":"L"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--layout"]}},{"type":"static","static":{"type":"button","trigger":"open-style","help":"Style","content":[{"kind":"static","type":"text","content":"S"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"elements","tag":"element-set","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"container"},"type":"layout","tags":["reference"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","wrappable":false,"disposition":[{"type":"template","name":"mp-button","param":[{"name":"type","value":"choice-field"},{"name":"name","value":"ChoiceField"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"text-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"image-static"},{"name":"name","value":"Image"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"button-static"},{"name":"name","value":"Button"}]},{"kind":"static","type":"button","trigger":"open-layout","help":"Layout","content":[{"kind":"static","type":"text","content":"L"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--layout"]}},{"type":"static","static":{"type":"button","trigger":"open-style","help":"Style","content":[{"kind":"static","type":"text","content":"S"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"elements","tag":"element-set","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"container"},"type":"layout","tags":["set"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","wrappable":false,"disposition":[{"type":"template","name":"mp-button","param":[{"name":"type","value":"list-field"},{"name":"name","value":"ListField"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"text-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"image-static"},{"name":"name","value":"Image"}]},{"type":"template","name":"mp-button","param":[{"name":"type","value":"button-static"},{"name":"name","value":"Button"}]},{"kind":"static","type":"button","trigger":"open-layout","help":"Layout","content":[{"kind":"static","type":"text","content":"L"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--layout"]}},{"type":"static","static":{"type":"button","trigger":"open-style","help":"Style","content":[{"kind":"static","type":"text","content":"S"}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"elements","tag":"element-set","style":{"css":["container-config-content"]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"container"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Co","style":{"css":["container-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Container","style":{"css":["container-choice-value"]}}}],"style":{"css":["container-choice"]}}},{"concept":{"name":"container"},"type":"layout","tags":["layout"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"layout"}],"style":{"css":["container-config","container-config--attribute"]}}},{"concept":{"name":"container"},"type":"layout","tags":["state","dynamic-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"wrappable","tag":"switch-field"},{"type":"attribute","name":"focusable","tag":"switch-field"}],"style":{"css":["container-config","container-config--attribute"]}}},{"concept":{"name":"container"},"type":"layout","tags":["style","field-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["container-config","container--binary"]}}},{"concept":{"name":"layout"},"tags":["list-item"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"container","content":[{"kind":"static","type":"text","content":"Layout","style":{"css":["label","mp-fieldwrap__label"]}},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select a layout","expanded":false,"input":false,"style":{"css":["select-choice"]}}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["mp-fieldwrap","mp-fieldwrap--layout"]}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection"}],"style":{"css":["layout-config"]}}},{"concept":{"name":"simple-layout"},"tags":["choice-selection","config"],"type":"container","container":{"content":[{"type":"attribute","name":"orientation","tag":"label-string"},{"type":"attribute","name":"align-items","tag":"label-string"},{"type":"attribute","name":"justify-content","tag":"label-string"},{"type":"attribute","name":"wrappable","tag":"switch-field"},{"type":"attribute","name":"sibling","placeholder":{"content":{"kind":"static","type":"text","content":"Add Shadow","help":"Specify customed coordinates","style":{"css":["field-config-option","font-ui"],"ref":["box-top"]}}}}],"layout":{"type":"flex","orientation":"column"}}},{"concept":{"name":"sibling"},"tags":[],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"r-tag","tag":"label-string"},{"type":"attribute","name":"tag","tag":"label-string"}]}},{"concept":{"name":"simple-layout"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Flex layout","content":"Flex layout"}}]}},{"concept":{"name":"table-layout"},"type":"layout","tags":["choice-selection","field-config","config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"rows","tag":"row-set"}],"style":{"css":["layout-config","layout-config--table"]}}},{"concept":{"name":"table-layout"},"type":"layout","tags":["choice-selection","field-state","state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"nav-bar","param":[{"name":"tabs","value":"layout-tabs"},{"name":"tab","value":"state"}]},{"type":"attribute","name":"orientation","tag":"label-string","style":{"ref":["pad-top"]}},{"type":"attribute","name":"focusable","tag":"field-binary-state"}],"style":{"css":["field-config","field-config--state"],"ref":["pad-left"]}}},{"concept":{"name":"table-layout"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Table Layout","content":"Table-Layout"}}]}},{"concept":{"name":"row"},"type":"layout","tags":["list-item"],"projection":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"cells","tag":"cell-set"}]}},{"concept":{"name":"cell"},"type":"layout","tags":["list-item"],"projection":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"content"}]}},{"concept":{"name":"text-field"},"type":"layout","tags":["choice-selection","config","field-config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"input","style":{"css":["field-config-main"]}}],"style":{"css":["field-config","field-config--text"]}}},{"concept":{"name":"text-field"},"type":"layout","tags":["state","field-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"readonly","tag":"switch-field"},{"type":"attribute","name":"resizable","tag":"switch-field"},{"type":"attribute","name":"multiline","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["field-config","field-config--text"]}}},{"concept":{"name":"text-field"},"type":"layout","tags":["style","field-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["field-config","field-config--text"]}}},{"concept":{"name":"text-field"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"help":"Text Field","disposition":[{"type":"static","static":{"type":"text","content":"Tx","style":{"css":["field-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Text-Field","style":{"css":["field-choice-value"]}}}],"style":{"css":["field-choice"]}}},{"concept":{"name":"binary-field"},"type":"layout","tags":["choice-selection","field-config","config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"checkbox","required":true,"style":{"css":["field-config-main"]}}],"style":{"css":["field-config","field-config--binary"]}}},{"concept":{"name":"binary-field"},"type":"layout","tags":["state","field-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"readonly","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["field-config","field-config--binary"]}}},{"concept":{"name":"binary-field"},"type":"layout","tags":["style","field-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["field-config","field-config--binary"]}}},{"concept":{"name":"binary-field"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"help":"Binary Field","disposition":[{"type":"static","static":{"type":"text","content":"Bi","style":{"css":["field-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Binary-Field","style":{"css":["field-choice-value"]}}}]}},{"concept":{"name":"choice-field"},"type":"layout","tags":["choice-selection","field-config","config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"choice template","tag":"choice-field-option"}],"style":{"css":["field-config","field-config--choice"]}}},{"concept":{"name":"choice-field"},"type":"layout","tags":["action","field-action"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"input","tag":"text","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Add search input","help":"The input is used to filter the options","style":{"css":["field-config-option","font-ui"],"ref":["box-top"]}}}},"style":{"ref":["box-top"]}}],"style":{"css":["field-config","field-config--choice"]}}},{"concept":{"name":"choice-field"},"type":"layout","tags":["state","field-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"expanded","tag":"switch-field"},{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"readonly","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["field-config","field-config--choice"]}}},{"concept":{"name":"choice-field"},"type":"layout","tags":["style","field-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["field-config","field-config--choice"]}}},{"concept":{"name":"choice-field"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"help":"Choice Field","disposition":[{"type":"static","static":{"type":"text","content":"Ch","style":{"css":["field-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Choice-Field","style":{"css":["field-choice-value"]}}}]}},{"concept":{"name":"list-field"},"type":"layout","tags":["choice-selection","field-config","config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"item template","tag":"list-field-item"}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"list-field"},"type":"layout","tags":["action","field-action"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"action","style":{"ref":["box-top"]}}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"list-field"},"type":"layout","tags":["state","field-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"readonly","tag":"switch-field"},{"type":"attribute","name":"orientation","tag":"label-string"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"list-field"},"type":"layout","tags":["style","field-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"list-field"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"help":"List Field","disposition":[{"type":"static","static":{"type":"text","content":"Ls","style":{"css":["field-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"List-Field","style":{"css":["field-choice-value"]}}}]}},{"concept":{"name":"list-field-action"},"type":"layout","tags":["choice-selection"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"add","style":{"css":["action-container"]}}]}}]}},{"concept":{"name":"action"},"type":"layout","tags":["choice-selection"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Add action (button)","style":{"css":["title"],"text":{"bold":true}}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"position","tag":"label-string"},{"type":"static","static":{"type":"text","content":"Content","style":{"css":["title"]}}},{"type":"attribute","name":"content","tag":"text-string"}]}},{"concept":{"name":"action"},"type":"layout","tags":["style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}]}},{"concept":{"name":"input"},"type":"layout","tags":["config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"baseline","disposition":[{"type":"static","static":{"type":"text","content":"Input","help":"Widget used to capture input","style":{"css":["title"]}}}]}},{"type":"attribute","name":"type","tag":"label-string"},{"type":"attribute","name":"placeholder","tag":"label-string"}],"style":{"css":["input-config"]}}},{"concept":{"name":"input"},"type":"layout","tags":["text"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"baseline","disposition":[{"type":"static","static":{"type":"text","content":"Search input","help":"Widget used to capture input","style":{"css":["title"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}]}},{"type":"attribute","name":"placeholder","tag":"label-string"}],"style":{"css":["input-config"]}}},{"concept":{"name":"input"},"type":"layout","tags":["state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["input-config"]}}},{"concept":{"name":"input"},"type":"layout","tags":["style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}]}},{"concept":{"name":"checkbox"},"type":"layout","tags":["config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"baseline","disposition":[{"type":"static","static":{"type":"text","content":"Checkbox","help":"Widget used to change state","style":{"css":["title"]}}},{"type":"static","static":{"type":"button","trigger":"open-state","content":[{"type":"static","static":{"type":"text","content":"State"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}]}},{"type":"attribute","name":"label","style":{"ref":["box-top"]}}],"style":{"css":["input-config"]}}},{"concept":{"name":"checkbox"},"type":"layout","tags":["state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["input-config"]}}},{"concept":{"name":"checkbox"},"type":"layout","tags":["style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}]}},{"concept":{"name":"label"},"type":"layout","tags":["config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"baseline","disposition":[{"type":"static","static":{"type":"text","content":"Label","help":"Widget used to change state","style":{"css":["title"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}]}},{"type":"attribute","name":"content","tag":"text-string"}],"style":{"css":["input-config"]}}},{"concept":{"name":"label"},"type":"layout","tags":["style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}]}},{"concept":{"name":"static-content"},"type":"layout","tags":[],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"content","tag":"element-set"}]}},{"concept":{"name":"template"},"type":"field","tags":[],"projection":{"type":"choice","choice":{"style":{"css":["template-choice"]},"option":{"template":{"tag":"choice"},"style":{"css":["template-choice-option"]}}}}},{"concept":{"name":"template reference"},"type":"layout","tags":["config"],"projection":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Tag","style":{"css":["label"]}}},{"type":"attribute","name":"tag","tag":"tag-reference"}],"style":{"css":["tag-reference-wrapper"]}}},{"concept":{"name":"template reference"},"type":"layout","tags":["choice-field-option"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Option template","style":{"css":["title"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Tag","style":{"css":["label"]}}},{"type":"attribute","name":"tag","tag":"tag-reference"}]}}],"style":{"css":["tag-reference-wrapper"]}}},{"concept":{"name":"template reference"},"type":"layout","tags":["list-field-item"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Item template","style":{"css":["title"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Tag","style":{"css":["label"]}}},{"type":"attribute","name":"tag","tag":"tag-reference"}]}}],"style":{"css":["tag-reference-wrapper"]}}},{"concept":{"name":"template reference"},"type":"layout","tags":["style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}]}},{"concept":{"name":"element"},"tags":["list-item"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice"},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select an element","expanded":false,"input":{"placeholder":"Select an element","style":{"css":["select-choice__input"]}},"style":{"css":["select-choice","select-choice--component"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection"}]}},{"concept":{"name":"static element"},"type":"field","tags":["list-item"],"projection":{"type":"choice","choice":{"style":{"css":["static-choice"]},"option":{"template":{"tag":"choice"},"style":{"css":["static-choice-option"]}}},"style":{"css":["static-choice-field"]}}},{"concept":{"name":"text-static"},"type":"container","tags":["choice-selection","config"],"container":{"content":[{"type":"template","name":"tpl-element-header","param":[{"name":"type","value":"Txt"}]},{"type":"attribute","name":"content","tag":"text-string","options":{"resizable":true,"placeholder":"text..."},"style":{"css":["text-static"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"text-static"},"type":"layout","tags":["state","config-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--state"},{"type":"attribute","name":"content","tag":"text-string","style":{"ref":["box-bottom"]}},{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"editable","tag":"switch-field"},{"type":"attribute","name":"asHTML","tag":"switch-field"}],"style":{"css":["mp-static","mp-static--text"]}}},{"concept":{"name":"text-static"},"type":"layout","tags":["style","config-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--style"},{"type":"attribute","name":"style","required":true}],"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"image-static"},"tags":["choice-selection","config"],"type":"container","container":{"content":[{"type":"template","name":"tpl-element-header","param":[{"name":"type","value":"Img"}]},{"type":"attribute","name":"url","tag":"text-string","options":{"resizable":false,"placeholder":"URL"},"style":{"css":["image-url"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["static-config","static-config--image"]}}},{"concept":{"name":"image-static"},"type":"layout","tags":["state","static-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--state"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Alt","style":{"css":["label"]}}},{"type":"attribute","name":"alt","tag":"text-string"}],"style":{"ref":["box-top"]}}},{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"editable","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["static-config","static-config--image"]}}},{"concept":{"name":"image-static"},"type":"layout","tags":["style","static-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--style"},{"type":"attribute","name":"style","required":true}],"style":{"css":["static-config","static-config--image"]}}},{"concept":{"name":"link-static"},"tags":["choice-selection","field-config","config"],"type":"container","container":{"content":[{"type":"template","name":"tpl-element-header","param":[{"name":"type","value":"Lnk"}]},{"type":"attribute","name":"url","tag":"text-string","options":{"resizable":false,"placeholder":"URL"},"style":{"css":["link-url"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"template","name":"mp-button2","param":[{"name":"type","value":"text-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button2","param":[{"name":"type","value":"image-static"},{"name":"name","value":"Image"}]}],"style":{"css":["mp-button__header"]}}},{"type":"attribute","name":"content","tag":"element-set","style":{"css":["mp-link-content"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"link-static"},"type":"layout","tags":["state","static-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--state"},{"type":"attribute","name":"type","tag":"label-string"},{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"editable","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"link-static"},"type":"layout","tags":["style","static-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--style"},{"type":"attribute","name":"style","required":true}],"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"plink-static"},"tags":["choice-selection","field-config","config"],"type":"container","container":{"content":[{"type":"template","name":"tpl-element-header","param":[{"name":"type","value":"Plk"}]},{"type":"attribute","name":"tag","tag":"text-string","options":{"placeholder":"tag"},"style":{"css":["mp-tag"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"template","name":"mp-button2","param":[{"name":"type","value":"text-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button2","param":[{"name":"type","value":"image-static"},{"name":"name","value":"Image"}]}],"style":{"css":["mp-button__header"]}}},{"type":"attribute","name":"content","tag":"element-set","style":{"css":["mp-link-content"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["static-config","static-config--plink"]}}},{"concept":{"name":"plink-static"},"type":"layout","tags":["state","static-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--state"},{"type":"attribute","name":"focusable","tag":"switch-field"}],"style":{"css":["static-config","static-config--plink"]}}},{"concept":{"name":"plink-static"},"type":"layout","tags":["style","static-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--style"},{"type":"attribute","name":"style","required":true}],"style":{"css":["static-config","static-config--plink"]}}},{"concept":{"name":"button-static"},"tags":["choice-selection","static-config","config"],"type":"container","container":{"content":[{"type":"template","name":"tpl-element-header","param":[{"name":"type","value":"Btn"}]},{"type":"attribute","name":"trigger","options":{"placeholder":"Trigger"},"tag":"text-string","style":{"css":["trigger"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"template","name":"mp-button2","param":[{"name":"type","value":"text-static"},{"name":"name","value":"Text"}]},{"type":"template","name":"mp-button2","param":[{"name":"type","value":"image-static"},{"name":"name","value":"Image"}]}],"style":{"css":["mp-button__header"]}}},{"type":"attribute","name":"content","tag":"element-set","style":{"css":["mp-button-content"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"button-static"},"type":"layout","tags":["content","static-content"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Content","style":{"css":["title"]}}},{"type":"attribute","name":"content","tag":"action"}]}},{"type":"attribute","name":"content","tag":"element-set","style":{"css":["mp-button-content"]}}],"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"button-static"},"type":"layout","tags":["state","static-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--state"},{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"disabled","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"button-static"},"type":"layout","tags":["style","static-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--style"},{"type":"attribute","name":"style","required":true}],"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"projection-dynamic"},"tags":["choice-selection","config"],"type":"container","container":{"content":[{"type":"template","name":"tpl-element-header","param":[{"name":"type","value":"Prj"}]},{"type":"attribute","name":"src","tag":"text-string","options":{"placeholder":"attribute"}},{"type":"attribute","name":"tag","tag":"text-string","options":{"placeholder":"tag"},"style":{"css":["mp-tag"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["dynamic-config","dynamic-config--attribute"]}}},{"concept":{"name":"projection-dynamic"},"type":"layout","tags":["state","dynamic-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--state"},{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"listen","tag":"switch-field"}],"style":{"css":["dynamic-config","dynamic-config--attribute"]}}},{"concept":{"name":"projection-dynamic"},"type":"layout","tags":["style","dynamic-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"tpl-options-nav--style"},{"type":"attribute","name":"style","required":true}],"style":{"css":["dynamic-config","dynamic-config--attribute"]}}},{"concept":{"name":"projection-dynamic"},"type":"layout","tags":["choice"],"content":{"type":"flex","orientation":"row","focusable":false,"help":"Projection (dynamic)","disposition":[{"type":"static","static":{"type":"text","content":"Prj","style":{"css":["dynamic-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Projection","style":{"css":["dynamic-choice-value"]}}}],"style":{"css":["dynamic-choice"]}}},{"concept":{"name":"template element"},"tags":["choice-selection"],"type":"container","container":{"content":[{"type":"template","name":"tpl-element-header","param":[{"name":"type","value":"Prj"}]},{"type":"attribute","name":"value","tag":"template-reference","style":{"css":["dynamic-config-main"]}}],"layout":{"type":"flex","orientation":"column"},"style":{"css":["dynamic-config","dynamic-config--template"]}}},{"concept":{"name":"template element"},"tags":["choice"],"type":"layout","content":{"type":"flex","orientation":"row","focusable":false,"help":"Template (dynamic)","disposition":[{"type":"static","static":{"type":"text","content":"Tpl","style":{"css":["dynamic-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Template","style":{"css":["dynamic-choice-value"]}}}],"style":{"css":["dynamic-choice"]}}},{"concept":{"name":"boolean"},"tags":["field-binary-state"],"type":"field","content":{"type":"binary","state":{"true":{"content":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["label","yesno-field__label"]}}},{"type":"static","static":{"type":"text","content":"yes","style":{"css":["yesno-field__value"]}}}]},"false":{"content":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["label","yesno-field__label"]}}},{"type":"static","static":{"type":"text","content":"no","style":{"css":["yesno-field__value"]}}}]}},"style":{"css":["yesno-field","yesno-field--check"]}}},{"concept":{"name":"boolean"},"tags":["switch-field"],"type":"field","content":{"type":"binary","checkbox":{"label":{"content":[{"type":"property","name":"refname"}],"style":{"css":["switch-field__label"]}},"style":{"css":["switch-field__checkbox"]}},"style":{"css":["switch-field"]}}},{"concept":{"name":"set"},"tags":["tag-set"],"type":"field","content":{"type":"list","list":{"item":{"template":{"tag":"text-string","options":{"placeholder":"tag"}},"style":{"css":["mp-tag"]}},"style":{"css":["mp-tags"]}},"action":{"add":false}}},{"concept":{"name":"set"},"tags":["projection-set"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Projections","style":{"css":["title","mp-projections-header__title"]}}},{"type":"field","field":{"type":"list","list":false,"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"+","focusable":false}}],"help":"Add a projection","style":{"css":["mp-projections-header__action-add"]}}},"style":{"css":["mp-projections-header__action"]}}}],"style":{"css":["mp-projections-header"]}}},{"type":"field","field":{"type":"list","list":{"item":{"template":{"tag":"collection-projection"},"style":{"css":["mp-projections-field__list-item"]}},"style":{"css":["mp-projections-field__list"]}},"action":{"add":false,"remove":false},"style":{"css":["mp-projections-field"]}}}],"style":{"css":["mp-projections"]}}},{"concept":{"name":"set"},"tags":["style-set"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Style rule","help":"Reuse the defined style rules","style":{"css":["config-title","font-ui"]}}},{"type":"field","field":{"type":"list","list":{"item":{"style":{"css":["textual-list__list-item--inline"]}},"style":{"css":["textual-list__list","textual-list__list--inline","textual-list__list--horizontal"]}},"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"Add rule","focusable":false}}],"help":"Add a rule","style":{"css":["textual-list__btn-add"]}},"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove rule","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--style"],"ref":["pad-left"]}}}]}},{"concept":{"name":"set"},"tags":["element-set"],"type":"field","content":{"type":"list","list":{"item":{"template":{"tag":"list-item"},"style":{"css":["textual-list__list-item--box"]}},"style":{"css":["textual-list__list"]}},"action":{"add":false,"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove element","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--element"]}}},{"concept":{"name":"set"},"tags":["action"],"type":"field","content":{"type":"list","list":false,"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"+","focusable":false}}],"help":"Add an element","style":{"css":["list-action__btn-add"]}}},"style":{"css":["list-action"]}}},{"concept":{"name":"set"},"tags":["row-set"],"type":"field","content":{"type":"list","list":{"item":{"template":{"tag":"list-item"},"style":{"css":["textual-list__list-item","textual-list__list-item--stripe"]}},"style":{"css":["textual-list__list"]}},"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"New row","focusable":false}}],"help":"Add a row","style":{"css":["textual-list__btn-add"]}},"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove row","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--row"]}}},{"concept":{"name":"set"},"tags":["cell-set"],"type":"field","content":{"type":"list","list":{"item":{"template":{"tag":"list-item"},"style":{"css":["textual-list__list-item","textual-list__list-item--box"]}},"style":{"css":["textual-list__list","textual-list__list--horizontal"]}},"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"New cell","focusable":false}}],"help":"Add a cell","style":{"css":["textual-list__btn-add"]}},"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove cell","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--cell"]}}},{"concept":{"name":"number"},"tags":["textual"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"number"},"tags":["simulation"],"type":"field","content":{"type":"svg","placeholder":"number...","style":{"anchor":"start","size":8,"baseline":"auto","font":"Segoe UI","weight":500}}},{"concept":{"name":"number"},"tags":["simulation-large"],"type":"field","content":{"type":"svg","placeholder":"0","style":{"anchor":"start","size":11,"baseline":"auto","font":"Segoe UI","weight":500}}},{"concept":{"name":"number"},"tags":["selection-info"],"type":"algorithm","content":{"type":"decoration","coordinates":{"x":100,"y":375},"content":[{"coordinates":{"x":10,"y":0},"dimension":{"type":"pure"},"render":{"kind":"static","type":"svg-text","content":"NbItems:","style":{"anchor":"end","size":18,"baseline":"hanging","font":"Segoe UI","weight":500}}},{"coordinates":{"x":10,"y":0},"dimension":{"type":"pure"},"render":{"kind":"field","type":"svg","placeholder":"number...","style":{"anchor":"start","size":18,"baseline":"hanging","font":"Segoe UI","weight":500}}}]}},{"concept":{"name":"tag"},"tags":["reference"],"type":"layout","content":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"value"}}}]}},{"concept":{"name":"number"},"tags":["textual--labelled"],"type":"layout","content":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["name-field--textual__label","label"]}}},{"type":"field","field":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"name"},"tags":["textual","list-item"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"name","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"attribute"},"tags":["textual","list-item"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"attribute","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["readonly"],"type":"static","static":{"type":"text","content":{"type":"property","name":"value"}}},{"concept":{"name":"string"},"tags":["label-string","textual--labelled"],"type":"container","container":{"content":[{"kind":"static","type":"text","content":{"type":"property","name":"refname"},"style":{"css":["label","mp-fieldwrap__label"]}},{"type":"field","field":{"type":"text","resizable":true,"input":{"style":{"css":["mp-fieldwrap__textfield-input"]}},"style":{"css":["mp-fieldwrap__textfield"]}}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["mp-fieldwrap"]}}},{"concept":{"name":"string"},"tags":["text-string","list-item"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"text...","style":{"css":["mp-textfield-input"]}},"style":{"css":["mp-textfield"]}}},{"concept":{"name":"string"},"tags":["fixed"],"type":"field","content":{"type":"text","resizable":false,"input":{"placeholder":"...","style":{"css":["mp-textfield-input"]}},"style":{"css":["mp-textfield"]}}},{"concept":{"name":"reference"},"type":"field","tags":["template-reference"],"content":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select a template","expanded":false,"input":{"placeholder":"filter","style":{"css":["select-choice__input"]}},"style":{"css":["select-choice"]}}},{"concept":{"name":"reference"},"type":"field","tags":["tag-reference"],"content":{"type":"choice","choice":{"option":{"template":{"tag":"reference"},"style":{"css":["tag-reference__choice-option"]}},"style":{"css":["tag-reference__choice"]}},"placeholder":"select a tag","expanded":false,"input":{"placeholder":"Search...","style":{"css":["tag-reference__input"]}},"style":{"css":["tag-reference"]}}},{"concept":{"prototype":"render"},"type":"layout","tags":["choice-selection","collapse"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"..."}},{"type":"static","static":{"type":"plink","tag":"config","content":[{"type":"static","static":{"type":"text","content":""}}],"style":{"css":["nav-projection","render__nav-projection","render__nav-projection--collapse"]}}}],"style":{"css":["render-config","render-config--collapse"]}}}],"style":[{"type":"style","name":"pad-all","style":{"box":{"inner":{"all":{"value":6,"unit":"px"}}}}},{"type":"style","name":"pad-top","style":{"box":{"inner":{"top":{"value":6,"unit":"px"}}}}},{"type":"style","name":"pad-right","style":{"box":{"inner":{"right":{"value":6,"unit":"px"}}}}},{"type":"style","name":"pad-bottom","style":{"box":{"inner":{"bottom":{"value":6,"unit":"px"}}}}},{"type":"style","name":"pad-left","style":{"box":{"inner":{"left":{"value":6,"unit":"px"}}}}},{"type":"style","name":"box-top","style":{"box":{"outer":{"top":{"value":6,"unit":"px"}}}}},{"type":"style","name":"box-right","style":{"box":{"outer":{"right":{"value":6,"unit":"px"}}}}},{"type":"style","name":"box-bottom","style":{"box":{"outer":{"bottom":{"value":6,"unit":"px"}}}}},{"type":"style","name":"box-left","style":{"box":{"outer":{"left":{"value":6,"unit":"px"}}}}},{"type":"style","name":"label","style":{"text":{"bold":500,"color":{"type":"hex","value":"#555"}}}}],"template":[{"type":"template","name":"nav-bar","param":[{"name":"tabs","type":"string"},{"name":"tab","type":"string","default":"content"}],"content":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"template","name":{"type":"param","name":"tabs"},"param":[{"name":"tab","value":{"type":"param","name":"tab"}}]}],"style":{"css":["nav","component-nav"]}}}]},{"type":"template","name":"mp-element-header","content":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"button","trigger":"open-state","content":[{"type":"static","static":{"type":"text","content":"State"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}]}}]},{"type":"template","name":"mp-button","param":[{"name":"type","type":"string"},{"name":"name","type":"string"}],"content":[{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"elements"},"value":{"name":{"type":"param","name":"type"}}},"content":[{"kind":"static","type":"text","content":{"type":"param","name":"name"}}],"style":{"css":["container__btn-element"]}}]},{"type":"template","name":"mp-button2","param":[{"name":"type","type":"string"},{"name":"name","type":"string"}],"content":[{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"content"},"value":{"name":{"type":"param","name":"type"}}},"content":[{"kind":"static","type":"text","content":{"type":"param","name":"name"}}],"style":{"css":["container__btn-element"]}}]},{"type":"template","name":"mp-button3","param":[{"name":"type","type":"string"},{"name":"name","type":"string"}],"content":[{"kind":"static","type":"button","action":{"type":"SELECT","target":{"type":"bind"},"value":{"name":{"type":"param","name":"type"}}},"content":[{"kind":"static","type":"text","content":{"type":"param","name":"name"}}],"style":{"css":["container__btn-element","graph-elem__btn"]}}]},{"type":"template","name":"mp-button4","param":[{"name":"type","type":"string"},{"name":"name","type":"string"}],"content":[{"kind":"static","type":"button","action":{"type":"CREATES","target":{"type":"attribute","name":"content","attribute":"render"},"value":{"name":{"type":"param","name":"type"}}},"content":[{"kind":"static","type":"text","content":{"type":"param","name":"name"}}],"style":{"css":["container__btn-element"]}}]},{"type":"template","name":"mp-button4","param":[{"name":"type","type":"string"},{"name":"name","type":"string"}],"content":[{"kind":"static","type":"button","action":{"type":"SELECT","target":{"type":"attribute","name":"content"},"value":{"name":{"type":"param","name":"type"}}},"content":[{"kind":"static","type":"text","content":{"type":"param","name":"name"}}],"style":{"css":["container__btn-element"]}}]},{"type":"template","name":"fixed-button","param":[{"name":"type","type":"string"},{"name":"name","type":"string"}],"content":[{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"fixed-elements"},"value":{"name":{"type":"param","name":"type"}}},"content":[{"kind":"static","type":"text","content":{"type":"param","name":"name"}}],"style":{"css":["container__btn-element"]}}]},{"type":"template","name":"dynamic-button","param":[{"name":"type","type":"string"},{"name":"name","type":"string"}],"content":[{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"dynamic-elements"},"value":{"name":{"type":"param","name":"type"}}},"content":[{"kind":"static","type":"text","content":{"type":"param","name":"name"}}],"style":{"css":["container__btn-element"]}}]},{"type":"template","name":"hole-button","param":[{"name":"type","type":"string"},{"name":"name","type":"string"}],"content":[{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"holes"},"value":{"name":{"type":"param","name":"type"}}},"content":[{"kind":"static","type":"text","content":{"type":"param","name":"name"}}],"style":{"css":["container__btn-element"]}}]},{"type":"template","name":"tpl-element-header","param":[{"name":"type","type":"string"}],"content":[{"type":"container","content":[{"kind":"static","type":"text","content":{"type":"param","name":"type"},"style":{"css":["static-choice-icon"]}},{"kind":"static","type":"button","trigger":"open-state","content":[],"style":{"css":["static-config__btn-option"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config-header"]}}]},{"type":"template","name":"tpl-projection-header","content":[{"type":"container","content":[{"kind":"static","type":"text","content":"Tags","style":{"ref":["box-left"]}},{"kind":"static","type":"button","action":{"type":"CREATE","target":{"type":"attribute","name":"tags"}},"content":[{"kind":"static","type":"text","content":"+"}],"style":{"css":["model-projection-header__btn-add"]}},{"type":"attribute","name":"tags","tag":"tag-set"}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["model-projection-header"]}}]},{"type":"template","name":"tpl-options-nav--state","content":[{"type":"container","content":[{"kind":"static","type":"plink","tag":"state","content":[{"kind":"static","type":"text","content":"State","style":{"css":["mp-options-nav__link-text"]}}],"style":{"css":["mp-options-nav__link","current"]}},{"kind":"static","type":"plink","tag":"style","content":[{"kind":"static","type":"text","content":"Style","style":{"css":["mp-options-nav__link-text"]}}],"style":{"css":["mp-options-nav__link"]}}],"style":{"css":["mp-options-nav"]},"layout":{"type":"flex","orientation":"row"}}]},{"type":"template","name":"tpl-options-nav--create","content":[{"type":"container","content":[{"kind":"static","type":"plink","tag":"create","content":[{"kind":"static","type":"text","content":"Create","style":{"css":["mp-options-nav__link-text"]}}],"style":{"css":["mp-options-nav__link","current"]}},{"kind":"static","type":"plink","tag":"import","content":[{"kind":"static","type":"text","content":"Import","style":{"css":["mp-options-nav__link-text"]}}],"style":{"css":["mp-options-nav__link"]}}],"style":{"css":["mp-options-nav"]},"layout":{"type":"flex","orientation":"row"}}]},{"type":"template","name":"tpl-options-nav--import","content":[{"type":"container","content":[{"kind":"static","type":"plink","tag":"create","content":[{"kind":"static","type":"text","content":"Create","style":{"css":["mp-options-nav__link-text"]}}],"style":{"css":["mp-options-nav__link"]}},{"kind":"static","type":"plink","tag":"import","content":[{"kind":"static","type":"text","content":"Import","style":{"css":["mp-options-nav__link-text"]}}],"style":{"css":["mp-options-nav__link","current"]}}],"style":{"css":["mp-options-nav"]},"layout":{"type":"flex","orientation":"row"}}]},{"type":"template","name":"tpl-options-nav--style","content":[{"type":"container","content":[{"kind":"static","type":"plink","tag":"state","content":[{"kind":"static","type":"text","content":"State","style":{"css":["mp-options-nav__link-text"]}}],"style":{"css":["mp-options-nav__link"]}},{"kind":"static","type":"plink","tag":"style","content":[{"kind":"static","type":"text","content":"Style","style":{"css":["mp-options-nav__link-text"]}}],"style":{"css":["mp-options-nav__link","current"]}}],"style":{"css":["mp-options-nav"]},"layout":{"type":"flex","orientation":"row"}}]},{"type":"template","name":"tpl-element-header_graph","param":[{"name":"type","type":"string"}],"content":[{"type":"container","content":[{"kind":"static","type":"text","content":{"type":"param","name":"type"},"style":{"css":["static-choice-icon"]}},{"kind":"static","type":"svg-button","dimensions":{"width":40,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"30\\" height=\\"15\\" viewBox=\\"-5 0 40 20\\"><circle cx=\\"10\\" cy=\\"10\\" r=\\"8\\" fill=\\"#555\\"></circle><path d=\\"M 0 12 L 0 8 L 2.5 7.5 L 2.5 12.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 3.5 L 3.5 1 L 6.5 3 L 3 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 0 L 8 0 L 7.5 2.5 L 12.5 2.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 19 16.5 L 16.5 19 L 13.5 17 L 17 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 16.5 L 3.5 19 L 6.5 17 L 3 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 20 12 L 20 8 L 17.5 7.5 L 17.5 12.5 Z\\" fill=\\"#555\\" ></path><path d=\\"M 19 3.5 L 16.5 1 L 13.5 3 L 17 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 20 L 8 20 L 7.5 17.5 L 12.5 17.5 Z\\" fill=\\"#555\\"></path><circle cx=\\"10\\" cy=\\"10\\" r=\\"3.5\\" fill=\\"white\\"></circle></svg>","action":{"type":"SIDE","target":"layout-setting"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config-header"]}}]},{"type":"template","name":"tpl-element-header_graphd","param":[{"name":"type","type":"string"}],"content":[{"type":"container","content":[{"kind":"static","type":"text","content":{"type":"param","name":"type"},"style":{"css":["static-choice-icon"]}},{"kind":"static","type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"15\\" height=\\"15\\"><circle stroke=\\"#1f75fe\\" stroke-width=\\"1\\" cx=\\"7.5\\" cy=\\"12.5\\" r=\\"6\\" fill=\\"white\\"></circle><rect stroke=\\"#1f75fe\\" stroke-width=\\"1\\" x=\\"7.5\\" y=\\"2.5\\" width=\\"10\\" height=\\"10\\" fill=\\"white\\"></rect></svg>","action":{"type":"SIDE","target":"layout-background"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}},{"kind":"static","type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 20 20\\"><circle cx=\\"10\\" cy=\\"10\\" r=\\"8\\" fill=\\"#555\\"></circle><path d=\\"M 0 12 L 0 8 L 2.5 7.5 L 2.5 12.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 3.5 L 3.5 1 L 6.5 3 L 3 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 0 L 8 0 L 7.5 2.5 L 12.5 2.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 19 16.5 L 16.5 19 L 13.5 17 L 17 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 16.5 L 3.5 19 L 6.5 17 L 3 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 20 12 L 20 8 L 17.5 7.5 L 17.5 12.5 Z\\" fill=\\"#555\\" ></path><path d=\\"M 19 3.5 L 16.5 1 L 13.5 3 L 17 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 20 L 8 20 L 7.5 17.5 L 12.5 17.5 Z\\" fill=\\"#555\\"></path><circle cx=\\"10\\" cy=\\"10\\" r=\\"3.5\\" fill=\\"white\\"></circle></svg>","action":{"type":"SIDE","target":"layout-setting"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config-header"]}}]},{"type":"template","name":"tpl-element-header_deco","param":[{"name":"type","type":"string"}],"content":[{"type":"container","content":[{"kind":"static","type":"text","content":{"type":"param","name":"type"},"style":{"css":["static-choice-icon"]}},{"kind":"static","type":"svg-button","dimensions":{"width":40,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"30\\" height=\\"15\\" viewBox=\\"-5 0 40 20\\"><circle cx=\\"10\\" cy=\\"10\\" r=\\"8\\" fill=\\"#555\\"></circle><path d=\\"M 0 12 L 0 8 L 2.5 7.5 L 2.5 12.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 3.5 L 3.5 1 L 6.5 3 L 3 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 0 L 8 0 L 7.5 2.5 L 12.5 2.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 19 16.5 L 16.5 19 L 13.5 17 L 17 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 1 16.5 L 3.5 19 L 6.5 17 L 3 13.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 20 12 L 20 8 L 17.5 7.5 L 17.5 12.5 Z\\" fill=\\"#555\\" ></path><path d=\\"M 19 3.5 L 16.5 1 L 13.5 3 L 17 6.5 Z\\" fill=\\"#555\\"></path><path d=\\"M 12 20 L 8 20 L 7.5 17.5 L 12.5 17.5 Z\\" fill=\\"#555\\"></path><circle cx=\\"10\\" cy=\\"10\\" r=\\"3.5\\" fill=\\"white\\"></circle></svg>","action":{"type":"SIDE","target":"layout-setting"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}},{"type":"static","static":{"type":"svg-button","dimensions":{"width":20,"height":20},"content":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"15\\" height=\\"15\\"><circle cx=\\"7.5\\" cy=\\"12.5\\" r=\\"6\\" fill=\\"purple\\"></circle><rect x=\\"7.5\\" y=\\"2.5\\" width=\\"10\\" height=\\"10\\" fill=\\"blue\\"></rect></svg>","action":{"type":"SIDE","target":"layout-background"},"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}}],"layout":{"type":"flex","orientation":"row"},"style":{"css":["static-config-header"]}}]}]}')},221:t=>{"use strict";t.exports=JSON.parse('{"concept":[{"name":"style","nature":"concrete","root":true,"attributes":[{"name":"css","target":{"name":"set","accept":{"name":"string"}}},{"name":"text","target":{"name":"text-style"}},{"name":"box","target":{"name":"box-style"}}]},{"name":"text-style","nature":"concrete","attributes":[{"name":"bold","target":{"name":"boolean","default":false}},{"name":"italic","target":{"name":"boolean","default":false}},{"name":"underline","target":{"name":"boolean","default":false}},{"name":"strikethrough","target":{"name":"boolean","default":false}},{"name":"nonbreakable","target":{"name":"boolean","default":false}},{"name":"color","target":{"name":"hex-color"}},{"name":"transform","target":{"name":"text-transform"}},{"name":"size","target":{"name":"size"}},{"name":"font","target":{"name":"font"}},{"name":"line-height","target":{"name":"number"}},{"name":"letter-spacing","target":{"name":"size"},"required":false},{"name":"word-spacing","target":{"name":"size"},"required":false}]},{"name":"box-style","nature":"concrete","attributes":[{"name":"inner","target":{"name":"spacing"}},{"name":"outer","target":{"name":"spacing"}},{"name":"background","target":{"name":"background"},"required":false},{"name":"width","target":{"name":"size"}},{"name":"height","target":{"name":"size"}},{"name":"border","target":{"name":"border"},"required":false},{"name":"corner","target":{"name":"border-radius"},"required":false},{"name":"opacity","target":{"name":"percentage","default":100}},{"name":"shadow","target":{"name":"box-shadow"}}]},{"name":"bold","nature":"concrete","attributes":[{"name":"value","target":{"name":"number","constraint":{"values":[100,200,300,400,500,600,700,800,900]}}}]},{"name":"font","nature":"concrete","attributes":[{"name":"name","target":{"name":"string","constraint":{"values":["Arial, sans-serif","Baskerville, \'Baskerville Old Face\', serif","\'Bradley Hand\', cursive","\'Brush Script MT\', \'Brush Script Std\', cursive","Calibri, sans-serif","Cambria, serif","\'Century Gothic\', CenturyGothic, AppleGothic, sans-serif","\'Comic Sans MS\', \'Comic Sans\', cursive","Consolas, monospace","\'Courier New\', Courier, monospace","Monaco, monospace","Didot, \'Didot LT STD\', serif","Garamond, serif","\'Hoefler Text\', serif","\'Gill Sans\', \'Gill Sans MT\', sans-serif","Georgia, serif","\'Helvetica Neue\', Helvetica, sans-serif","Impact, Haettenschweiler, fantasy","\'Lucida Grande\', sans-serif","\'Lucida Sans\', \'Lucida Sans Regular\', sans-serif","Luminari, fantasy","Rockwell, serif","\'Segoe UI\', \'Droid Sans\', Ubuntu, sans-serif","Tahoma, sans-serif","\'Times New Roman\', Times, serif","\'Trebuchet MS\', sans-serif","Geneva, sans-serif","Verdana, sans-serif","sans-serif","serif","monospace","cursive","fantasy"]}}}]},{"name":"size","nature":"concrete","attributes":[{"name":"value","target":{"name":"number"}},{"name":"unit","target":{"name":"size-unit","default":"px"}}]},{"name":"background","nature":"concrete","attributes":[{"name":"color","target":{"name":"background-color"},"required":true},{"name":"image","target":{"name":"background-image"},"required":false}]},{"name":"background-color","nature":"concrete","attributes":[{"name":"value","target":{"name":"hex-color"}}]},{"name":"background-image","nature":"concrete","attributes":[{"name":"url","target":{"name":"string"}},{"name":"position","target":{"name":"background-position"}},{"name":"size","target":{"name":"background-size"}},{"name":"repeat","target":{"name":"string","constraint":{"values":["horizontal","vertical","both"]}},"required":false},{"name":"attachment","target":{"name":"string","constraint":{"values":["scroll","fixed","local"]},"default":"scroll"},"required":false}]},{"name":"background-position","nature":"concrete","attributes":[{"name":"x","target":{"name":"string","constraint":{"values":["left","center","right"]}}},{"name":"y","target":{"name":"string","constraint":{"values":["top","center","bottom"]}}}]},{"name":"background-size","nature":"concrete","attributes":[{"name":"value","target":{"name":"string","constraint":{"values":["auto","cover","contain"]},"default":"auto"}}]},{"name":"box-shadow","nature":"concrete","attributes":[{"name":"offsetX","target":{"name":"size"}},{"name":"offsetY","target":{"name":"size"}},{"name":"blur","target":{"name":"size"}},{"name":"spread","target":{"name":"size"}},{"name":"inset","target":{"name":"boolean","default":false}},{"name":"color","target":{"name":"hex-color"}}]},{"name":"color","nature":"prototype","attributes":[{"name":"opacity","target":{"name":"percentage"}}]},{"name":"hex-color","nature":"concrete","prototype":"color","attributes":[{"name":"value","target":{"name":"string"}}],"properties":[{"name":"contentType","type":"string","value":"hex"}]},{"name":"hex-color__black","nature":"concrete","prototype":"color","attributes":[{"name":"value","target":{"name":"string","default":"#000000"}}],"properties":[{"name":"contentType","type":"string","value":"hex"}]},{"name":"rgb-color","nature":"concrete","prototype":"color","attributes":[{"name":"red","target":{"name":"rgb"}},{"name":"green","target":{"name":"rgb"}},{"name":"blue","target":{"name":"rgb"}}],"properties":[{"name":"contentType","type":"string","value":"rgb"}]},{"name":"spacing","nature":"concrete","attributes":[{"name":"all","target":{"name":"size"}},{"name":"top","target":{"name":"size"}},{"name":"right","target":{"name":"size"}},{"name":"bottom","target":{"name":"size"}},{"name":"left","target":{"name":"size"}}]},{"name":"border","nature":"concrete","attributes":[{"name":"all","target":{"name":"border-value"}},{"name":"top","target":{"name":"border-value"}},{"name":"right","target":{"name":"border-value"}},{"name":"bottom","target":{"name":"border-value"}},{"name":"left","target":{"name":"border-value"}}]},{"name":"border-value","nature":"concrete","attributes":[{"name":"width","target":{"name":"size"}},{"name":"color","target":{"name":"hex-color"}},{"name":"type","target":{"name":"border-type","default":"solid"}}]},{"name":"border-radius","nature":"concrete","attributes":[{"name":"all","target":{"name":"size"}},{"name":"top-left","target":{"name":"size"}},{"name":"top-right","target":{"name":"size"}},{"name":"bottom-right","target":{"name":"size"}},{"name":"bottom-left","target":{"name":"size"}}]},{"name":"rgb","nature":"derivative","base":"number","constraint":{"value":{"type":"range","range":{"min":{"value":0},"max":{"value":255}}}}},{"name":"percentage","nature":"derivative","base":"number","constraint":{"value":{"type":"range","range":{"min":{"value":0},"max":{"value":100}}}}},{"name":"size-unit","nature":"derivative","base":"string","constraint":{"values":["px","em","rem","%","vw","vh"]}},{"name":"border-type","nature":"derivative","base":"string","constraint":{"values":["solid","dotted","dashed","double","inset","outset"]}},{"name":"direction","nature":"derivative","base":"string","constraint":{"values":["top","right","bottom","left"]}},{"name":"alignment","nature":"derivative","base":"string","constraint":{"values":["left","right","center","justify"]}},{"name":"text-transform","nature":"derivative","base":"string","constraint":{"values":["capitalize","lowercase","uppercase"]}}]}')},843:t=>{"use strict";t.exports=JSON.parse('{"type":"projection","projection":[{"concept":{"name":"style"},"type":"layout","tags":[],"content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Text style","style":{"css":["mp-style__title"]}}},{"type":"attribute","name":"text"},{"type":"static","static":{"type":"text","content":"Box style","style":{"css":["mp-style__title"]}}},{"type":"attribute","name":"box"},{"type":"attribute","name":"css","tag":"css-set","style":{"ref":["pad-all"]}}],"style":{"css":["mp-style"]}}},{"concept":{"name":"text-style"},"tags":[],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"bold","tag":"toggle-field--bold","style":{"css":["text-style-rule"]}},{"type":"attribute","name":"italic","tag":"toggle-field--italic","style":{"css":["text-style-rule"]}},{"type":"attribute","name":"underline","tag":"toggle-field--underline","style":{"css":["text-style-rule"]}},{"type":"attribute","name":"strikethrough","tag":"toggle-field--strikethrough","style":{"css":["text-style-rule"]}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"color","style":{"css":["text-style-rule"]}}],"style":{"css":["text-style-rule"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Font","style":{"css":["label"]}}},{"type":"attribute","name":"font"},{"type":"attribute","name":"size"}],"style":{"css":["text-style-rule"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Line spacing","style":{"css":["label"]}}},{"type":"attribute","name":"line-height"}],"style":{"css":["text-style-rule"]}}}],"style":{"css":["text-style"]}}},{"concept":{"name":"box-style"},"tags":[],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"outer","tag":"margin","style":{"css":["box-style-rule"]}},{"type":"attribute","name":"inner","tag":"padding","style":{"css":["box-style-rule"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Width","style":{"css":["label"]}}},{"type":"attribute","name":"width"}],"style":{"css":["box-style-rule"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Height","style":{"css":["label"]}}},{"type":"attribute","name":"height"}],"style":{"css":["box-style-rule"]}}},{"type":"attribute","name":"background","required":true,"style":{"css":["box-style-rule"]}},{"type":"attribute","name":"border","required":true,"style":{"css":["box-style-rule"]}},{"type":"attribute","name":"corner","required":true,"style":{"css":["box-style-rule"]}}],"style":{"css":["box-style"]}}},{"concept":{"name":"spacing"},"tags":["margin"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","help":"Outer spacing","content":"Margin","style":{"css":["title"]}}},{"type":"template","name":"spacing-content"}]}},{"concept":{"name":"spacing"},"tags":["padding"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","help":"Inner spacing","content":"Padding","style":{"css":["title"]}}},{"type":"template","name":"spacing-content"}]}},{"concept":{"name":"border"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Border","style":{"css":["title"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"All","style":{"css":["title"]}}},{"type":"attribute","name":"all"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Top","style":{"css":["title"]}}},{"type":"attribute","name":"top"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Right","style":{"css":["title"]}}},{"type":"attribute","name":"right"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Bottom","style":{"css":["title"]}}},{"type":"attribute","name":"bottom"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Left","style":{"css":["title"]}}},{"type":"attribute","name":"left"}]}}]}},{"concept":{"name":"border-value"},"tags":[],"type":"layout","content":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"type","tag":"label-string"},{"type":"attribute","name":"width"},{"type":"attribute","name":"color"}],"style":{"css":["border-value-config"]}}},{"concept":{"name":"background"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Background","style":{"css":["title--small"]}}},{"type":"attribute","name":"color","style":{"css":["background-config"]}}]}},{"concept":{"name":"background-color"},"tags":[],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"value"}]}},{"concept":{"name":"background-image"},"tags":[],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"url","tag":"simple-string--url"}]}},{"concept":{"name":"border-radius"},"tags":["margin"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Corner (border-radius)","style":{"css":["title"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Top-left","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"top-left"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Top-right","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"top-right"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Btm-right","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"bottom-right"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Btm-left","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"bottom-left"}]}}]}}]}},{"concept":{"name":"box-shadow"},"tags":["margin"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Box Shadow","style":{"css":["title"]}}},{"type":"attribute","name":"inset","tag":"switch-field"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","help":"Horizontal offset","content":"offset-X","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"offsetX"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","help":"Vertical offset","content":"offset-Y","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"offsetY"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","help":"Blur radius","content":"Blur","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"blur"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Spread","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"spread"}]}}]}},{"type":"attribute","name":"color"}]}},{"concept":{"name":"font"},"tags":[],"type":"layout","content":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"name","tag":"choice"}]}},{"concept":{"name":"color"},"tags":[],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Color","style":{"css":["title--small"]}}},{"type":"field","field":{"type":"choice","input":false,"choice":{"style":{"css":["constraint-choice--textual__choice-list"]},"option":{"template":{"tag":"choice"},"style":{"css":["constraint-choice--textual__choice-option"]}}},"style":{"css":["constraint-choice--textual__choice"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection","style":{"css":["number-constraint"]}}]}},{"concept":{"name":"color"},"tags":["no-title"],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"field","field":{"type":"choice","input":false,"choice":{"style":{"css":["constraint-choice--textual__choice-list"]},"option":{"template":{"tag":"choice"},"style":{"css":["constraint-choice--textual__choice-option"]}}},"style":{"css":["constraint-choice--textual__choice"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection","style":{"css":["number-constraint"]}}]}},{"concept":{"name":"hex-color"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","style":{"css":["text-element"]},"disposition":[{"type":"attribute","name":"value","tag":"color-string"}]}},{"concept":{"name":"hex-color"},"tags":["color-simple"],"type":"layout","content":{"type":"stack","orientation":"vertical","style":{"css":["text-element"]},"disposition":[{"type":"attribute","name":"value","tag":"color-simple"}]}},{"concept":{"name":"hex-color"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Picker"}}]}},{"concept":{"name":"rgb-color"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","style":{"css":["text-element"]},"disposition":[{"type":"attribute","name":"red","tag":"textual--labelled"},{"type":"attribute","name":"green","tag":"textual--labelled"},{"type":"attribute","name":"blue","tag":"textual--labelled"}]}},{"concept":{"name":"rgb-color"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"RGB"}}]}},{"concept":{"name":"size"},"tags":[],"type":"layout","content":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"value","tag":"textual"},{"type":"attribute","name":"unit","tag":"simple-string"}],"style":{"css":["size-config"]}}},{"concept":{"name":"set"},"tags":["css-set"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"CSS class","style":{"css":["title","mp-tags-header__title"]}}},{"type":"field","field":{"type":"list","list":false,"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"+","focusable":false}}],"help":"Add a class","style":{"css":["mp-tags-header__action-add"]}}},"style":{"css":["mp-tags-header__action"]}}}],"style":{"css":["mp-tags-header"]}}},{"type":"field","field":{"type":"list","list":{"item":{"template":{"tag":"simple-string--css"},"style":{"css":["textual-list__list-item--inline"]}},"style":{"css":["textual-list__list","textual-list__list--inline","textual-list__list--horizontal"]}},"action":{"add":false},"style":{"css":["mp-tags__list"]}}}],"style":{"css":["mp-tags"]}}},{"concept":{"name":"set"},"tags":["style-set"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Style rule","help":"Reuse the defined style rules","style":{"css":["config-title","font-ui"]}}},{"type":"field","field":{"type":"list","list":{"item":{"style":{"css":["textual-list__list-item--inline"]}},"style":{"css":["textual-list__list","textual-list__list--inline","textual-list__list--horizontal"]}},"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"Add rule","focusable":false}}],"help":"Add a rule","style":{"css":["textual-list__btn-add"]}},"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove rule","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--style"],"ref":["pad-left"]}}}]}},{"concept":{"name":"set"},"tags":["cell-set"],"type":"field","content":{"type":"list","list":{"item":{"template":{"tag":"list-item"},"style":{"css":["textual-list__list-item","textual-list__list-item--box"]}},"style":{"css":["textual-list__list","textual-list__list--horizontal"]}},"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"New cell","focusable":false}}],"help":"Add a cell","style":{"css":["textual-list__btn-add"]}},"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove cell","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--cell"]}}},{"concept":{"name":"boolean"},"tags":["toggle-field--bold"],"type":"field","content":{"type":"binary","checkbox":{"label":{"content":[{"type":"raw","raw":"B","style":{"gss":{"text":{"bold":true}}}},{"type":"raw","raw":"Bold","style":{"css":["mp-toggle-field__label-help"]}}],"style":{"css":["mp-toggle-field__label"]}},"style":{"css":["mp-toggle-field__checkbox"]}},"style":{"css":["mp-toggle-field"]}}},{"concept":{"name":"boolean"},"tags":["toggle-field--italic"],"type":"field","content":{"type":"binary","checkbox":{"label":{"content":[{"type":"raw","raw":"I","style":{"gss":{"text":{"italic":true}}}},{"type":"raw","raw":"Italic","style":{"css":["mp-toggle-field__label-help"]}}],"style":{"css":["mp-toggle-field__label"]}},"style":{"css":["mp-toggle-field__checkbox"]}},"style":{"css":["mp-toggle-field"]}}},{"concept":{"name":"boolean"},"tags":["toggle-field--underline"],"type":"field","content":{"type":"binary","checkbox":{"label":{"content":[{"type":"raw","raw":"U","style":{"gss":{"text":{"underline":true}}}},{"type":"raw","raw":"Underline","style":{"css":["mp-toggle-field__label-help"]}}],"style":{"css":["mp-toggle-field__label"]}},"style":{"css":["mp-toggle-field__checkbox"]}},"style":{"css":["mp-toggle-field"]}}},{"concept":{"name":"boolean"},"tags":["toggle-field--strikethrough"],"type":"field","content":{"type":"binary","checkbox":{"label":{"content":[{"type":"raw","raw":"S","style":{"gss":{"text":{"strikethrough":true}}}},{"type":"raw","raw":"Strikethrough","style":{"css":["mp-toggle-field__label-help"]}}],"style":{"css":["mp-toggle-field__label"]}},"style":{"css":["mp-toggle-field__checkbox"]}},"style":{"css":["mp-toggle-field"]}}},{"concept":{"name":"number"},"tags":["textual"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"number"},"tags":["textual--labelled"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["name-field--textual__label","label"]}}},{"type":"field","field":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"name"},"tags":["textual","list-item"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"name","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["simple-string"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["readonly"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"value"}}}]}},{"concept":{"name":"string"},"tags":["simple-string--url"],"type":"field","content":{"type":"text","resizable":false,"input":{"placeholder":"url","type":"url","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["label-string","textual--labelled"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["label","name-field--textual__label"]}}},{"type":"field","field":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"string"},"tags":["color-string"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Color","style":{"css":["label","name-field--textual__label"]}}},{"type":"field","field":{"type":"text","input":{"type":"color","placeholder":"null","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"string"},"tags":["color-simple"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"field","field":{"type":"text","input":{"type":"color","placeholder":"null","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"string"},"tags":["choice"],"type":"field","content":{"type":"choice","choice":{"option":{"template":{"tag":"reference"},"style":{"css":["tag-reference__choice-option"]}},"style":{"css":["tag-reference__choice"]}},"placeholder":"inherit","expanded":false,"input":{"placeholder":"Search...","style":{"css":["tag-reference__input"]}},"style":{"css":["tag-reference"]}}}],"template":[{"type":"template","name":"spacing-content","content":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Top","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"top"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Right","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"right"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Bottom","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"bottom"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Left","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"left"}]}}]}}]}]}')},835:(t,e,i)=>{"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function o(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function h(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i?w(t)?e:t:x(t)?e:t}function d(t){return g(t)&&0===t.length}function u(t){return t instanceof Date||"object"===n(t)&&"[object Date]"===Object.prototype.toString.call(t)}function p(t){return"string"==typeof t||t instanceof String}function m(t){return"function"==typeof t}function y(t){return!x(t)&&"object"===n(t)}function g(t){return!x(t)&&"function"==typeof t[Symbol.iterator]}function f(t){return g(t)&&!p(t)}function b(t){return null===t}function v(t){return!t||p(t)&&(0===t.length||/^\s*$/.test(t))}function w(t){return void 0===t}function x(t){return b(t)||w(t)}function E(t,e,i){if(!Array.isArray(t)||!Number.isInteger(e))throw new TypeError("Bad argument");return t.splice(e,0,i),t.length}function A(t){if(!Array.isArray(t))throw new TypeError("Bad argument");if(!d(t))return t[t.length-1]}function j(t){if(!Array.isArray(t))throw new TypeError("Bad argument");return t[0]}i.r(e),i.d(e,{Accordion:()=>jn,Collapsible:()=>An,DELETE:()=>C,GET:()=>k,POST:()=>L,PUT:()=>_,Selector:()=>en,SelectorFactory:()=>nn,Switch:()=>un,addAttributes:()=>It,addPath:()=>rt,all:()=>Q,appendChildren:()=>_t,assert:()=>J,boolToInt:()=>Y,camelCase:()=>W,capitalize:()=>$,capitalizeFirstLetter:()=>F,changeSelectValue:()=>Ut,cloneObject:()=>R,cloneTemplate:()=>Ei,compareTime:()=>S,copytoClipboard:()=>Ci,createAbbreviation:()=>He,createAnchor:()=>ge,createArea:()=>fe,createArticle:()=>Wt,createAside:()=>Yt,createAudio:()=>we,createB:()=>Pe,createBase:()=>be,createBlockQuotation:()=>le,createButton:()=>ai,createCaption:()=>oi,createCite:()=>$e,createCode:()=>ze,createDataList:()=>ei,createDeletedPart:()=>Ie,createDescriptionDetails:()=>ye,createDescriptionList:()=>pe,createDescriptionTerm:()=>me,createDiv:()=>ie,createDocFragment:()=>Vt,createEmbed:()=>se,createEmphasis:()=>_e,createFieldset:()=>Qe,createFigure:()=>Oe,createFigureCaption:()=>Ne,createFooter:()=>zt,createForm:()=>qe,createH1:()=>Gt,createH2:()=>Jt,createH3:()=>Kt,createH4:()=>Qt,createH5:()=>te,createH6:()=>ee,createHeader:()=>Ft,createI:()=>Ve,createImage:()=>ve,createInput:()=>We,createInsertedPart:()=>Ue,createLabel:()=>Xe,createLegend:()=>ti,createLineBreak:()=>ae,createLink:()=>Rt,createListItem:()=>ue,createMain:()=>qt,createMark:()=>Ce,createMeter:()=>ii,createNav:()=>Xt,createObject:()=>ne,createOption:()=>Ge,createOptionGroup:()=>Ke,createOrderedList:()=>de,createOutput:()=>si,createParagraph:()=>oe,createPicture:()=>je,createProgress:()=>ni,createQuote:()=>De,createS:()=>Be,createSample:()=>Te,createSection:()=>Zt,createSelect:()=>Ye,createSource:()=>Ee,createSpan:()=>ke,createStrong:()=>Le,createSubscript:()=>Se,createSuperscript:()=>Me,createTable:()=>ri,createTableBody:()=>hi,createTableCell:()=>gi,createTableColumn:()=>ui,createTableColumnGroup:()=>pi,createTableFooter:()=>di,createTableHeader:()=>ci,createTableHeaderCell:()=>yi,createTableRow:()=>mi,createTemplate:()=>$t,createTextArea:()=>Ze,createTextNode:()=>Bt,createThematicBreak:()=>re,createTime:()=>Fe,createTrack:()=>Ae,createU:()=>Re,createUnorderedList:()=>he,createVideo:()=>xe,fetchWithTimeout:()=>T,findAncestor:()=>Ni,findByPath:()=>ht,first:()=>j,floatingLabel:()=>Mi,formatCase:()=>q,formatDate:()=>I,getDir:()=>ot,getDirTarget:()=>lt,getElement:()=>vi,getElements:()=>wi,getNextElementSibling:()=>Oi,getPreviousElementSibling:()=>ji,getRootUrl:()=>Nn,getTemplate:()=>xi,getUrlParams:()=>kn,hasOwn:()=>V,htmlToElement:()=>Et,htmlToElements:()=>At,inputCounter:()=>Ii,insert:()=>E,insertAfterElement:()=>kt,insertBeforeElement:()=>Nt,isCollection:()=>f,isDate:()=>u,isDerivedOf:()=>B,isDocumentFragment:()=>wt,isElement:()=>gt,isEmpty:()=>d,isFunction:()=>m,isHTMLCollection:()=>vt,isHTMLElement:()=>ft,isInElement:()=>Ot,isInViewport:()=>jt,isIterable:()=>g,isNode:()=>mt,isNodeList:()=>yt,isNull:()=>b,isNullOrUndefined:()=>x,isNullOrWhitespace:()=>v,isObject:()=>y,isString:()=>p,isUndefined:()=>w,last:()=>A,lone:()=>it,no:()=>et,one:()=>tt,pascalCase:()=>Z,preprendChild:()=>Lt,queryBuilder:()=>Ln,random:()=>st,removeAccents:()=>X,removeChildren:()=>_i,resolveDate:()=>M,shortDate:()=>U,shortDateTime:()=>D,some:()=>K,toBoolean:()=>G,valOrDefault:()=>h,windowHeight:()=>ut,windowWidth:()=>dt});var O={OK:200,Created:201,Accepted:202,NoContent:204,BadRequest:400,Unauthorized:401,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,UnsupportedMediaType:415,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavaible:503,GatewayTimeout:504},N=function(t,e,i,n,s,a){var r=new XMLHttpRequest;return r.onreadystatechange=function(){var t;if(4===r.readyState){var e=function(t,e){return{status:t,message:e}}(r.status,r.responseText);i(r.status)?t=n:(t=s,r.status>=200&&r.status<300&&m(a)&&(t=a)),m(t)&&t(e)}},r.open(t,e,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r};function k(t,e,i,n){var s=(n=h(n,{})).successPred,a=m(s)?s:function(t){return t===O.OK};N("GET",t,a,e,i,n.pass).send()}function L(t,e,i,n,s){var a=(s=h(s,{})).successPred,r=m(a)?a:function(t){return[O.OK,O.Created].includes(t)};N("POST",t,r,i,n,s.pass).send(e)}function _(t,e,i,n,s){var a=(s=h(s,{})).successPred,r=m(a)?a:function(t){return[O.OK,O.NoContent].includes(t)};N("PUT",t,r,i,n,s.pass).send(e)}function C(t,e,i,n,s){var a=(s=h(s,{})).successPred,r=m(a)?a:function(t){return[O.OK,O.Accepted,O.NoContent].includes(t)};N("DELETE",t,r,i,n,s.pass).send(e)}function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=new AbortController,s=r(r({},e),{},{signal:n.signal});return setTimeout((function(){n.abort()}),i),fetch(t,s).then((function(t){if(!t.ok)throw new Error("".concat(t.status,": ").concat(t.statusText));return t})).catch((function(t){if("AbortError"===t.name)throw new Error("Response timed out");throw new Error(t.message)}))}function S(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:":";if(x(t)||x(e)||!t.includes(i)||!e.includes(i))return null;var n=t.split(i),s=e.split(i);if(+n[0]>+s[0])return 1;if(+n[0]<+s[0])return-1;if(+n[1]>+s[1])return 1;if(+n[1]<+s[1])return-1;if(n.length==s.length&&3==n.length){if(+n[2]>+s[2])return 1;if(+n[2]<+s[2])return-1}return 0}function M(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(x(t))return new Date;if(u(t))return t;var i=new Date(t),n=i.getTime();return Number.isNaN(n)?new Date:e?new Date(n+6e4*i.getTimezoneOffset()):i}function I(t,e){var i=t.getDate(),n=t.getMonth()+1,s=t.getFullYear().toString(),a=t.getHours(),r=t.getMinutes(),o=t.getSeconds(),l=function(t){return t<10?"0".concat(t):t};return e.replace("yyyy",s).replace("yy",s.slice(-2)).replace("mm",l(n)).replace("m",n).replace("dd",l(i)).replace("d",i).replace("hh",l(a)).replace("h",a).replace("MM",l(r)).replace("M",r).replace("ss",l(o)).replace("s",o)}function U(t){return I(M(t),"yyyy-mm-dd")}function D(t){return I(M(t,!1),"yyyy-mm-dd hh:MM")}var H=Object.prototype.hasOwnProperty,P=Object.prototype.isPrototypeOf,V=function(t,e){return H.call(t,e)},B=function(t,e){return Object.getPrototypeOf(t)!==e&&P.call(e,t)};function R(t){if(x(t)||!y(t))return t;var e=t.constructor();for(var i in t)V(t,i)&&(t.isActiveClone=null,e[i]=R(t[i]),delete t.isActiveClone);return e}function $(t){return v(t)?t:t.toLowerCase().replace(/\b\w/g,(function(t){return t.toUpperCase()}))}function F(t){return v(t)?t:t.charAt(0).toUpperCase()+t.slice(1)}var z={camel:function(t){return W(t)},pascal:function(t){return Z(t)},upper:function(t){return t.toUpperCase()},lower:function(t){return t.toLowerCase()}};function q(t,e){return v(t)?t:V(z,e)?z[e](t):t}function W(t){if(v(t))return t;var e=Z(t);return e.charAt(0).toLowerCase()+e.slice(1)}function Z(t){return v(t)?t:$(t.replace(/[_-]+/g," ").replace(/\s+/g," ").trim()).replace(/\s+/g,"")}function X(t){return String.prototype.normalize?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):t.replace(/[àâäæ]/gi,"a").replace(/[ç]/gi,"c").replace(/[éèê]/gi,"e").replace(/[îï]/gi,"i").replace(/[ôœ]/gi,"o").replace(/[ùûü]/gi,"u")}function Y(t){return t?1:0}function G(t){var e=h(t,!1);return p(e)&&"true"===e.toLowerCase()||Number.isInteger(e)&&1===e||!0===e}var J=function(t,e,i,n){if(!Array.isArray(t)||!m(e))throw new TypeError("Bad argument");var s=nt(t,e);if(Q([i,n],Number.isInteger)){if(n<i)throw new Error("Bad argument: max must be greater than min");return s>=i&&s<=n}return Number.isInteger(i)?s>=i:Number.isInteger(n)?s<=n:s>0},K=function(t,e){if(!Array.isArray(t)||!m(e))throw new TypeError("Bad argument");for(var i=0;i<t.length;i++){var n=t[i];if(e.apply(void 0,o(Array.isArray(n)?n:[n])))return!0}return!1},Q=function(t,e){if(!Array.isArray(t)||!m(e))throw new TypeError("Bad argument");for(var i=0;i<t.length;i++){var n=t[i];if(!e.apply(void 0,o(Array.isArray(n)?n:[n])))return!1}return!0},tt=function(t,e){if(!Array.isArray(t)||!m(e))throw new TypeError("Bad argument");return 1===nt(t,e)},et=function(t,e){if(!Array.isArray(t)||!m(e))throw new TypeError("Bad argument");return 0===nt(t,e)},it=function(t,e){if(!Array.isArray(t)||!m(e))throw new TypeError("Bad argument");return nt(t,e)<=1};function nt(t,e){for(var i=0,n=0;n<t.length;n++){var s=t[n];e.apply(void 0,o(Array.isArray(s)?s:[s]))&&i++}return i}function st(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Number.isInteger(t))throw new TypeError("Bad argument");if(Number.isInteger(e)||(e=t,t=0),e<t)throw new Error("Bad argument: max must be greater than min");return t+Math.floor((i?at():Math.random())*(e-t+1))}function at(){return window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295}function rt(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";return v(t)?e:"".concat(t).concat(i).concat(e)}function ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";return t.substring(0,t.lastIndexOf(e))}function lt(t,e){return t.substring(0,t.lastIndexOf(e)-1)}function ct(t,e,i){var n=+e[0].match(/\d+/g);return t[i][n]}function ht(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=/\[\d+\]/g,s=R(t),a=function(t,e,i){var n=t.match(e),a=t.substring(0,t.indexOf("["));return i(s,n,a)},r=e.split(i),o=0,l=r.length;o<l;o++){var c=r[o];if(x(s=n.test(c)?a(c,n,ct):s[c]))return}return s}var dt=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},ut=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},pt=function(t){return!x(t)&&t.nodeType===Node.ELEMENT_NODE},mt=function(t){return t instanceof Node},yt=function(t){return t instanceof NodeList},gt=function(t){return pt(t)&&t instanceof Element},ft=function(t,e){return!!(pt(t)&&t instanceof HTMLElement)&&(!g(e)||(i=t,n=Array.isArray(e)?e:[e],s=function(t){return i instanceof t},a=function(t){return i.tagName===t.toUpperCase()},r=function(t){return Array.isArray(t)?t.includes(i.type):i.type===t},n.some((function(t){if(!g(t))return!1;var e=t,i=null;if(Array.isArray(t)){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,s=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){s=!0,a=t}finally{try{n||null==o.return||o.return()}finally{if(s)throw a}}return i}}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2);e=n[0],i=n[1]}e=e.toLowerCase();var o="HTML".concat(V(bt,e)?bt[e]:Z(e),"Element");return!(!s(window[o])&&!a(e))&&(!(f(i)&&!d(i))||r(i))}))));var i,n,s,a,r},bt={a:"Anchor",br:"BR",dl:"DList",datalist:"DataList",fieldset:"FieldSet",frameset:"FrameSet",hr:"HR",h1:"Heading",h2:"Heading",h3:"Heading",h4:"Heading",h5:"Heading",h6:"Heading",li:"LI",ol:"OList",optgroup:"OptGroup",p:"Paragraph",q:"Quote",blockquote:"Quote",caption:"TableCaption",td:"TableCell",th:"TableCell",col:"TableCol",tr:"TableRow",tbody:"TableSection",thead:"TableSection",tfoot:"TableSection",textarea:"TextArea",ul:"UList"},vt=function(t){return t instanceof HTMLCollection},wt=function(t){return function(t){return!x(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(t)&&t instanceof DocumentFragment};function xt(t,e){if(!p(e))return null;var i=document.createElement("template");return i.innerHTML=e.trim(),i.content[t]}var Et=xt.bind(null,"firstChild"),At=xt.bind(null,"childNodes");function jt(t){if(!ft(t))throw new Error("The given element is not a valid HTML Element");var e=t.getBoundingClientRect(),i=e.top,n=e.right,s=e.bottom,a=e.left;return i>=0&&a>=0&&s<=ut()&&n<=dt()}function Ot(t,e){if(!Q([t,e],ft))throw new Error("The given element is not a valid HTML Element");var i=t.getBoundingClientRect(),n=i.top,s=i.right,a=i.bottom,r=i.left,o=e.getBoundingClientRect(),l=o.top,c=o.right,h=o.bottom,d=o.left;return Q([[l,n],[d,r],[s,c],[a,h]],(function(t,e){return t<=e}))}function Nt(t,e){if(!Q([t,e],gt))throw new TypeError("Bad argument: The given `element` or `target` is not a valid Element");return t.insertAdjacentElement("beforebegin",e),t}function kt(t,e){if(!Q([t,e],gt))throw new TypeError("Bad argument: The given `element` or `target` is not a valid Element");return t.insertAdjacentElement("afterend",e),t}function Lt(t,e){if(!Q([t,e],gt))throw new TypeError("Bad argument: The given `element` or `target` is not a valid Element");return t.insertAdjacentElement("afterbegin",e),t}function _t(t,e){if(!mt(t))throw new TypeError("Bad argument: The given `parent` is not a valid Node");if(!vt(e)&&!f(e))throw new TypeError("Bad argument: The given `children` is not a valid HTMLCollection/HTMLElement array");var i=wt(t)?t:document.createDocumentFragment();return Array.from(e).forEach((function(t){var e;x(t)||i.appendChild(mt(t)?t:(e=t.toString(),document.createTextNode(e.toString())))})),t!==i&&t.appendChild(i),t}function Ct(t,e,i){t[e]=i}function Tt(t,e,i){t.setAttribute(e,i)}var St="accesskey,autocapitalize,class,dataset,editable,draggable,hidden,id,inputmode,lang,html,style,tabindex,text,title",Mt={accesskey:[Ct,"accessKey"],autocapitalize:[Ct,"autocapitalize"],class:[function(t,e){var i;if(!ft(t))throw new Error("Bad argument: The passed `element` argument is not a valid HTML Element");return(i=t.classList).add.apply(i,o(Array.isArray(e)?e:[e])),t}],dataset:[function(t,e,i){Object.assign(t[e],i)},"dataset"],draggable:[Ct,"draggable"],editable:[Ct,"contentEditable"],hidden:[Ct,"hidden"],id:[Ct,"id"],inputmode:[Ct,"inputMode"],lang:[Ct,"lang"],html:[Ct,"innerHTML"],style:[Ct,"style"],tabindex:[Ct,"tabIndex"],text:[Ct,"textContent"],title:[Ct,"title"],data:[Ct,"data"],cite:[Ct,"cite"],download:[Ct,"download"],ping:[Ct,"ping"],target:[Ct,"target"],coords:[Ct,"coords"],shape:[Ct,"shape"],autoplay:[Ct,"autoplay"],buffered:[Ct,"buffered"],controls:[Ct,"controls"],loop:[Ct,"loop"],muted:[Ct,"muted"],playsinline:[Tt,"playsinline"],poster:[Ct,"poster"],preload:[Ct,"preload"],crossorigin:[Ct,"crossOrigin"],decoding:[Ct,"decoding"],height:[Ct,"height"],ismap:[Ct,"isMap"],loading:[Ct,"loading"],srcset:[Ct,"srcset"],width:[Ct,"width"],alt:[Ct,"alt"],as:[Ct,"as"],media:[Ct,"media"],rel:[Ct,"rel"],src:[Ct,"src"],sizes:[Ct,"sizes"],reversed:[Ct,"reversed"],start:[Ct,"start"],accept:[Ct,"accept"],"accept-charset":[Ct,"acceptCharset"],action:[Ct,"action"],autocomplete:[Ct,"autocomplete"],autofocus:[Ct,"autofocus"],capture:[Ct,"capture"],checked:[Ct,"checked"],cols:[Ct,"cols"],disabled:[Ct,"disabled"],dirname:[Ct,"dirName"],enctype:[Ct,"enctype"],for:[Ct,"for"],form:[Ct,"form"],formaction:[Ct,"formAction"],formenctype:[Ct,"formEnctype"],formmethod:[Ct,"formMethod"],formnovalidate:[Ct,"formNoValidate"],formtarget:[Ct,"formTarget"],high:[Ct,"high"],label:[Ct,"label"],list:[Ct,"list"],low:[Ct,"low"],max:[Ct,"max"],maxlength:[Ct,"maxLength"],method:[Ct,"method"],min:[Ct,"min"],minlength:[Ct,"minLength"],multiple:[Ct,"multiple"],name:[Ct,"name"],novalidate:[Ct,"noValidate"],optimum:[Ct,"optimum"],pattern:[Ct,"pattern"],placeholder:[Ct,"placeholder"],readonly:[Ct,"readOnly"],required:[Ct,"required"],rows:[Ct,"rows"],selected:[Ct,"selected"],size:[Ct,"size"],spellcheck:[Tt,"spellcheck"],step:[Ct,"step"],wrap:[Ct,"wrap"],default:[Ct,"default"],kind:[Ct,"kind"],srclang:[Ct,"srclang"],abbr:[Ct,"abbr"],colspan:[Ct,"colSpan"],span:[Ct,"span"],rowspan:[Ct,"rowSpan"],scope:[Ct,"scope"],href:[Ct,"href"],hreflang:[Ct,"hreflang"],datetime:[Ct,"dateTime"],type:[Ct,"type"],value:[Ct,"value"],usemap:[Ct,"useMap"]};function It(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!ft(t))throw new Error("Bad argument: The given element argument is not a valid HTML Element");if(!y(e))return t;for(var n=function(t){return St.includes(t)||i.includes(t)},s=0,a=Object.keys(e);s<a.length;s++){var r=a[s];if(n(r)){var l=e[r],c=Mt[r].slice(0),h=c.shift();h.apply(void 0,[t].concat(o(c),[l]))}}return t}function Ut(t,e){if(!ft(t,"select"))throw new Error("Bad argument: The given select argument is not a valid HTML Select element");if(x(e))throw new Error("The given value parameter is a null or undefined");for(var i=t.options,n=0;n<i.length;n++){var s=i[n];if(s.value===e.toString())return s.selected=!0,!0}return!1}function Dt(t,e,i){var n=document.createElement(t);return ft(n)?(y(i)&&It(n,i,h(e,"")),n):null}function Ht(t,e,i,n){var s=Dt(t,e,i);return ft(s)?(x(n)||fi(s,n),s):null}function Pt(t,e,i,n,s){var a=Dt(t,e,n);return ft(a)?(x(s)||fi(a,s,i),a):null}function Vt(t){var e=document.createDocumentFragment();return x(t)||fi(e,t),e}var Bt=function(t){return document.createTextNode(t)},Rt=Dt.bind(null,"link","as,crossorigin,disabled,href,hreflang,media,rel,sizes,type"),$t=Ht.bind(null,"template",""),Ft=Ht.bind(null,"header",""),zt=Ht.bind(null,"footer",""),qt=Ht.bind(null,"main",""),Wt=Ht.bind(null,"article",""),Zt=Ht.bind(null,"section",""),Xt=Ht.bind(null,"nav",""),Yt=Ht.bind(null,"aside",""),Gt=Ht.bind(null,"h1",""),Jt=Ht.bind(null,"h2",""),Kt=Ht.bind(null,"h3",""),Qt=Ht.bind(null,"h4",""),te=Ht.bind(null,"h5",""),ee=Ht.bind(null,"h6",""),ie=Ht.bind(null,"div",""),ne=Ht.bind(null,"object","data,height,name,type,usemap,width"),se=Dt.bind(null,"embed","height,src,type,width"),ae=Dt.bind(null,"br",""),re=Dt.bind(null,"hr",""),oe=Ht.bind(null,"p",""),le=Ht.bind(null,"blockquote","cite"),ce=function(t){return ft(t,"li")?t:ue(null,t)},he=Pt.bind(null,"ul","",ce),de=Pt.bind(null,"ol","reversed,start,type",ce),ue=Ht.bind(null,"li","value"),pe=Ht.bind(null,"dl",""),me=Ht.bind(null,"dt",""),ye=Ht.bind(null,"dd",""),ge=Ht.bind(null,"a","download,href,hreflang,ping,rel,target,type"),fe=Dt.bind(null,"area","alt,coords,download,href,hreflang,media,ping,rel,shape,target"),be=Dt.bind(null,"base","href,target"),ve=Dt.bind(null,"img","alt,crossorigin,decoding,height,ismap,loading,sizes,src,srcset,usemap,width"),we=Ht.bind(null,"audio","autoplay,controls,crossorigin,loop,muted,preload,src"),xe=Ht.bind(null,"video","autoplay,controls,crossorigin,height,loop,muted,playsinline,poster,preload,src,width"),Ee=Dt.bind(null,"source","media,sizes,src,srcset,type"),Ae=Dt.bind(null,"track","default,kind,label,src,srclang"),je=Ht.bind(null,"picture",""),Oe=Ht.bind(null,"figure",""),Ne=Ht.bind(null,"figcaption",""),ke=Ht.bind(null,"span",""),Le=Ht.bind(null,"strong",""),_e=Ht.bind(null,"em",""),Ce=Ht.bind(null,"mark",""),Te=Ht.bind(null,"samp",""),Se=Ht.bind(null,"sub",""),Me=Ht.bind(null,"sup",""),Ie=Ht.bind(null,"del","cite,datetime"),Ue=Ht.bind(null,"ins","cite,datetime"),De=Ht.bind(null,"q","cite"),He=Ht.bind(null,"abbr",""),Pe=Ht.bind(null,"b",""),Ve=Ht.bind(null,"i",""),Be=Ht.bind(null,"s",""),Re=Ht.bind(null,"u",""),$e=Ht.bind(null,"cite",""),Fe=Ht.bind(null,"time","datetime"),ze=Ht.bind(null,"code",""),qe=Ht.bind(null,"form","accept-charset,action,autocomplete,enctype,method,name,novalidate,rel,target"),We=Dt.bind(null,"input","accept,alt,autocomplete,autofocus,capture,checked,dirname,disabled,height,max,maxlength,minlength,min,multiple,name,pattern,placeholder,readonly,required,size,src,step,type,value,width"),Ze=Ht.bind(null,"textarea","autocomplete,autofocus,cols,disabled,maxlength,minlength,name,placeholder,readonly,required,rows,spellcheck,value,wrap"),Xe=Ht.bind(null,"label","for"),Ye=Pt.bind(null,"select","autocomplete,autofocus,disabled,multiple,name,required,size",(function(t){return ft(t,["option","optgroup"])?t:Array.isArray(t)?Ke(null,t):Ge(null,t)})),Ge=Ht.bind(null,"option","disabled,label,selected,value"),Je=function(t){return ft(t,"option")?t:Ge(null,t)},Ke=Pt.bind(null,"optgroup","disabled,label",Je),Qe=Ht.bind(null,"fieldset","disabled,name"),ti=Ht.bind(null,"legend",""),ei=Pt.bind(null,"datalist","",Je),ii=Ht.bind(null,"meter","high,low,max,min,optimum,value"),ni=Ht.bind(null,"progress","max,value"),si=Ht.bind(null,"output","name,value"),ai=Ht.bind(null,"button","autofocus,disabled,formaction,formenctype,formmethod,formnovalidate,formtarget,name,type,value"),ri=Ht.bind(null,"table",""),oi=Ht.bind(null,"caption",""),li=function(t){return ft(t,"tr")?t:mi(null,t)},ci=Pt.bind(null,"thead","",li),hi=Pt.bind(null,"tbody","",li),di=Pt.bind(null,"tfoot","",li),ui=Dt.bind(null,"col","span"),pi=Pt.bind(null,"colgroup","span",(function(t){return ft(t,"col")?t:null})),mi=Pt.bind(null,"tr","",(function(t){return ft(t,["th","td"])?t:gi(null,t)})),yi=Ht.bind(null,"th","abbr,colspan,rowspan,scope"),gi=Ht.bind(null,"td","colspan,rowspan");function fi(t,e,i){var n=Array.isArray(e)?e:[e];return m(i)&&(n=n.map((function(t){return i(t)}))),_t(t,n),t}var bi=function(t){return/^\.[a-zA-Z0-9_-]+$/.test(t)};function vi(t,e){var i=h(e,document);return v(t)?null:wt(i)?i.querySelector(t):function(t){return/^#[a-zA-Z0-9_-]+$/.test(t)}(t)?document.getElementById(t.substring(1)):bi(t)?i.getElementsByClassName(t.substring(1))[0]:i.querySelector(t)}function wi(t,e){var i=h(e,document);return v(t)?null:wt(i)?i.querySelectorAll(t):bi(t)?i.getElementsByClassName(t.substring(1)):i.querySelectorAll(t)}function xi(t,e){return"content"in document.createElement("template")?vi(t,e):null}function Ei(t,e){return t?document.importNode(t.content,h(e,!0)):t}function Ai(t,e,i){if(!ft(e))return null;var n=e[t];if(m(i))for(;gt(n)&&!i(n);)n=n[t];return n}var ji=Ai.bind(null,"previousElementSibling"),Oi=Ai.bind(null,"nextElementSibling");function Ni(t,e,i){if(!gt(t))throw new TypeError("Bad argument: The given target parameter is not a valid HTML Element");if(!m(e))throw new TypeError("Bad argument: The given pred parameter is not a valid Function");var n=t.parentElement;return i>0?Li(n,e,i-1):ki(n,e)}function ki(t,e){return x(t)?null:e(t)?t:ki(t.parentElement,e)}function Li(t,e,i){return x(t)||0===i?null:e(t)?t:Li(t.parentElement,e,i-1)}function _i(t,e){if(!mt(t))throw new TypeError("Bad argument: The given `node` is not a valid Node");return m(e)?(Array.from(t.childNodes).forEach((function(i){e(i)&&t.removeChild(i)})),t):function(t){for(;t.hasChildNodes();)t.removeChild(t.lastChild);return t}(t)}function Ci(t){if(x(t))return!1;var e=Ze({value:ft(t)?t.textContent:t.toString(),readonly:!0});return!!ft(e)&&(document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),!0)}var Ti=function(t){return t.classList.add("down")},Si=function(t){return t.classList.remove("down")};function Mi(t){for(var e=wi(".form-label",t),i=0;i<e.length;i++){var n=e[i];if("placeholder"==n.dataset.type&&!v(n.htmlFor)){var s=vi("#".concat(n.htmlFor));ft(s)?v(s.placeholder)?(a(s,n),d(s.value)&&Ti(n)):console.warn('%c@zenkai%c #FloatingLabel>%cfloatingLabel:%c Input "'.concat(n.htmlFor,'" contains a placeholder'),"text-decoration: underline","","font-weight: bold;","font-weight: normal;"):console.error('%c@zenkai%c #FloatingLabel>%cfloatingLabel:%c Missing input for label "'.concat(n.htmlFor,'"'),"text-decoration: underline","","font-weight: bold;","font-weight: normal;")}}function a(t,e){v(t.placeholder)&&(t.addEventListener("focus",(function(i){t.placeholder="",Si(e),e.parentElement.classList.add("focused")})),t.addEventListener("blur",(function(t){d(this.value)&&Ti(e),e.parentElement.classList.remove("focused")})),t.addEventListener("input",(function(i){document.activeElement!=t&&(d(this.value)?Ti(e):Si(e))})))}return e}function Ii(t){for(var e=wi("[data-counter]",t),i=0;i<e.length;i++){var n=e[i],s=n.dataset.counter,a=vi("#".concat(s));ft(a)?(n.dataset.counterMax=a.maxLength,n.dataset.counterVal=a.value.length,r(a,n)):console.error("%c@zenkai%c #InputCounter>%cinputCounter:%c Failed to add counter ".concat(s,". Input (referenced) was not found."),"text-decoration: underline","","font-weight: bold;","font-weight: normal;")}function r(t,e){t.addEventListener("input",(function(i){e.dataset.counterVal=t.value.length}))}return e}var Ui=function(t){return t.dataset.type},Di=function(t){return t.dataset.state},Hi=function(t,e){return t.dataset.state=e},Pi=function(t,e){return Hi(t,h(e,"checked"))},Vi=function(t,e){return Hi(t,h(e,"unchecked"))};function Bi(t,e,i){if(ft(t))return e(t)?[t]:wi(i,t);if(p(t)&&!d(t)){var n=vi(t);return x(n)?null:Bi(n)}return x(t)?wi(i):null}function Ri(t,e){return v(e.htmlFor)?vi("input[type='".concat(h(t,"text"),"']"),e):vi("#".concat(e.htmlFor))}var $i="on",Fi={init:function(t){return Object.assign(this,t),this.isChecked()&&Pi(this.container,$i),this},container:null,index:null,get value(){return this.container.dataset.value},isChecked:function(){return Di(this.container)===$i},setChecked:function(t){return!x(t)&&(t?Pi(this.container,$i):Vi(this.container,"off"),!0)}},zi={name:"selector",container:null,items:null,selectedIndex:null,selectedItem:null,beforeChange:null,afterChange:null,get value(){return this.selectedItem.value},setSelectedItem:function(t){return this.items.includes(t)?(this.selectedItem&&this.selectedItem.setChecked(!1),this.selectedItem=t,this.selectedItem.setChecked(!0),!0):null},init:function(){for(var t=this.container.dataset.value,e=null,i=0;i<this.items.length;i++){var n=this.items[i];n.isChecked()&&this.setSelectedItem(n),n.value===t&&(e=n)}return b(this.selectedItem)&&!b(e)&&this.setSelectedItem(e),this.bindEvents(),this},bindEvents:function(){var t=this;this.container.addEventListener("click",(function(e){var i=e.target;if(V(i.dataset,"selector")){var n=!1;if(m(t.beforeChange)&&(n=!1===t.beforeChange(t,e)),!n){var s=t.items.find((function(t){return t.index===+h(i.dataset.selectorIndex,-1)}));x(s)||(t.setSelectedItem(s),m(t.afterChange)&&t.afterChange(t,e))}}}))}},qi={init:function(t){return Object.assign(this,t),this.isChecked()&&Pi(this.container,"on"),this},container:null,input:null,index:null,get value(){return this.input.value},isChecked:function(){return this.input.checked},setChecked:function(t){return!x(t)&&(t?(this.input.checked=!0,Pi(this.container,"on")):(this.input.checked=!1,Vi(this.container,"off")),!0)}},Wi={name:"form-selector",container:null,items:null,selectedIndex:null,selectedItem:null,beforeChange:null,afterChange:null,get value(){return this.selectedItem.value},setSelectedItem:function(t){return this.items.includes(t)?(this.selectedItem&&this.selectedItem.setChecked(!1),this.selectedItem=t,this.selectedItem.setChecked(!0),!0):null},init:function(){for(var t=this.container.dataset.value,e=null,i=0;i<this.items.length;i++){var n=this.items[i];n.isChecked()&&this.setSelectedItem(n),n.value===t&&(e=n)}return b(this.selectedItem)&&!b(e)&&this.setSelectedItem(e),this.bindEvents(),this},bindEvents:function(){var t=this;this.container.addEventListener("change",(function(e){var i=e.target,n=!1;if(m(t.beforeChange)&&(n=!1===t.beforeChange(t,e)),n)return i.checked=!1,void t.items[t.selectedIndex].setChecked(!0);var s=t.items.find((function(t){return t.index===+h(i.dataset.selectorIndex,-1)}));x(s)||(t.setSelectedItem(s),m(t.afterChange)&&t.afterChange(t,e))}))}},Zi="BAD_CONTAINER",Xi=function(t){return'[data-type="'.concat(t.name,'"]')},Yi={BaseSelector:Xi(zi),FormSelector:Xi(Wi)},Gi={create:function(t,e){if(!ft(t))return Zi;var i=wi("[data-selector]",t);if(!yt(i))return Zi;var n=null,s=null,a=Ui(t);switch(a){case"selector":s=Ji(i,a,!1),n=Object.create(zi);break;case"form-selector":s=Ji(i,a,!0),n=Object.create(Wi)}return Object.assign(n,e,{container:t,items:s,querySelector:Xi(n)}),n}};function Ji(t,e,i){for(var n=[],s={selector:function(){return Object.create(Fi)},"form-selector":function(){return Object.create(qi)}},a=0;a<t.length;a++){var r=t[a];r.dataset.selectorIndex=a;var o={container:r,index:a};if(i){var l=Ri("radio",r);if(!ft(l))return"BAD_INPUT";l.dataset.selectorIndex=a,Object.assign(o,{input:l})}var c=s[e]().init(o);n.push(c)}return n}var Ki={BAD_CONTAINER:new Error("Missing container: A selector requires a container"),BAD_INPUT:new Error("Missing input: FormSelector requires an input in the container")},Qi=function(t){return RegExp("selector|form-selector").test(t.dataset.type)},tn=[Yi.BaseSelector,Yi.FormSelector].join(",");function en(t,e){var i=Bi(t,Qi,tn),n=h(e,{});if(x(i))return null;for(var s=[],a=0;a<i.length;a++){var r=Gi.create(i[a],n);if(V(Ki,r))throw Ki[r];r.init(),s.push(r)}return s}var nn=Gi,sn={BAD_CONTAINER:new Error("Missing container: A switch requires a container"),BAD_INPUT:new Error("Missing input: FormSwitch requires an input in the container")},an="on",rn=function(t){return'[data-type="'.concat(t.name,'"]')},on=function(t){return RegExp("switch|form-switch").test(t.dataset.type)},ln=function(t,e){if(!ft(t))return"BAD_CONTAINER";var i=null,n=null;switch(Ui(t)){case"switch":i=Object.create(cn);break;case"form-switch":if(n=Ri("checkbox",t),!ft(n))return"BAD_INPUT";e.input=n,i=Object.create(hn)}return Object.assign(i,e,{container:t,querySelector:rn(i)}),i},cn={name:"switch",container:null,beforeChange:null,afterChange:null,get value(){return this.container.dataset.value},isChecked:function(){return Di(this.container)===an},setChecked:function(t){return!x(t)&&(t?Pi(this.container,an):Vi(this.container,"off"),!0)},toggle:function(){this.isChecked()?this.setChecked(!1):this.setChecked(!0)},init:function(t){return Object.assign(this,t),this.isChecked()&&Pi(this.container,an),this.bindEvents(),this},bindEvents:function(){var t=this;this.container.addEventListener("click",(function(e){var i=!1;m(t.beforeChange)&&(i=!1===t.beforeChange(t,e)),i||(t.toggle(),m(t.afterChange)&&t.afterChange(t,e))}))}},hn={name:"form-switch",container:null,input:null,beforeChange:null,afterChange:null,get value(){return this.input.value},isChecked:function(){return Di(this.container)===an},setChecked:function(t){return!x(t)&&(this.input.checked=t,t?Pi(this.container,an):Vi(this.container,"off"),!0)},toggle:function(){this.isChecked()?this.setChecked(!1):this.setChecked(!0)},init:function(t){return Object.assign(this,t),this.input.checked&&this.setChecked(!0),this.bindEvents(),this},bindEvents:function(){var t=this;this.input.addEventListener("change",(function(e){var i=!1;m(t.beforeChange)&&(i=!1===t.beforeChange(t,e)),i?t.input.checked=!t.input.checked:(t.toggle(),m(t.afterChange)&&t.afterChange(t,e))}))}},dn=[rn(cn),rn(hn)].join(",");function un(t,e){var i=Bi(t,on,dn),n=h(e,{});if(x(i))return null;for(var s=[],a=0;a<i.length;a++){var r=ln(i[a],n);if(V(sn,r))throw sn[r];r.init(),s.push(r)}return s}function pn(t){t.style.display="block"}function mn(t){t.style.display="none"}var yn={BAD_CONTAINER_COLLAPSIBLE:"BAD_CONTAINER_COLLAPSIBLE",BAD_CONTAINER_ACCORDION:"BAD_CONTAINER_ACCORDION"},gn={BAD_CONTAINER_COLLAPSIBLE:new Error("Missing container: A collapsible requires a container"),BAD_CONTAINER_ACCORDION:new Error("Missing container: An accordion requires a container")},fn="expanded",bn="collapsed",vn=function(t){return"collapsible"in t.dataset},wn=function(t){return"accordion"===t.dataset.boost},xn={create:function(t,e){if(!ft(t))return yn.BAD_CONTAINER_COLLAPSIBLE;var i=Object.create(this);return Object.assign(i,e,{container:t}),i},name:"collapsible",container:null,header:null,content:null,beforeOpen:null,afterOpen:null,beforeClose:null,afterClose:null,getState:function(){return this.container.dataset[this.name]},setState:function(t){this.container.dataset[this.name]=t},isCollapsed:function(){return this.getState()===bn},isExpanded:function(){return this.getState()===fn},isClosed:!1,isInitialized:!1,open:function(){if(this.isInitialized&&!this.isClosed)return this;var t=!1;return m(this.beforeOpen)&&(t=!1===this.beforeOpen(this)),t||(this.toggle(pn,fn,"add"),m(this.afterOpen)&&this.afterOpen(this),this.isClosed=!1),this},close:function(){if(this.isInitialized&&this.isClosed)return this;var t=!1;return m(this.beforeClose)&&(t=!1===this.beforeClose(this)),t||(this.toggle(mn,bn,"remove"),m(this.afterClose)&&this.afterClose(this),this.isClosed=!0),this},toggle:function(t,e,i){t(this.content),this.setState(e),this.container.classList[i]("expanded")},init:function(t){return Object.assign(this,t),this.header=vi("[data-".concat(this.name,"-header]"),this.container),this.content=vi("[data-".concat(this.name,"-content]"),this.container),this.isCollapsed()?this.close():this.isExpanded()&&(this.isClosed=!0,this.open()),this.bindEvents(),this.isInitialized=!0,this},bindEvents:function(){var t=this,e=this.container,i=this.header;i.addEventListener("click",(function(n){var s=Ni(n.target,(function(e){return t.name in e.dataset}));e===s&&(t.isCollapsed()?t.open():i.parentNode===e&&t.close())}))}},En={create:function(t,e){if(!ft(t))return yn.BAD_CONTAINER_ACCORDION;var i=Object.create(this);return Object.assign(i,e,{container:t}),i},container:null,sections:null,selectedSection:null,beforeChange:null,afterChange:null,init:function(){var t=this;this.sections=[];for(var e=wi("[data-accordion]",this.container),i=0;i<e.length;i++){var n=e[i],s=xn.create(n,{name:"accordion",index:i,afterOpen:function(e){m(t.beforeChange)&&t.beforeChange(e),t.sections.filter((function(t){return t.index!==e.index})).forEach((function(t){return t.close()})),m(t.afterChange)&&t.afterChange(e),t.selectedSection=e}});if(V(yn,s))return s;this.sections.push(s),s.init()}return this}};function An(t,e){var i=Bi(t,vn,"[data-collapsible]"),n=h(e,{});if(x(i))return null;for(var s=[],a=0;a<i.length;a++){var r=xn.create(i[a],n);if(V(gn,r))throw gn[r];r.init(),s.push(r)}return s}function jn(t,e){var i=Bi(t,wn,"[data-boost=accordion]"),n=h(e,{});if(x(i))return null;for(var s=[],a=0;a<i.length;a++){var r=En.create(i[a],n);if(V(gn,r))throw gn[r];r.init(),s.push(r)}return s}var On=encodeURIComponent;function Nn(t){return t.toString().replace(/^(.*\/\/[^/?#]*).*$/,"$1")}function kn(t,e){var i=decodeURIComponent(window.location.search);if(v(i))return null;var n={};if("URLSearchParams"in window){var s,a=new URLSearchParams(i.substring(1)),r=function(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=l(t))){i&&(t=i);var n=0,s=function(){};return{s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,o=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){o=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(o)throw a}}}}(a.entries());try{for(r.s();!(s=r.n()).done;){var o=s.value;n[o[0]]=o[1]}}catch(t){r.e(t)}finally{r.f()}return t?a.get(t):n}return i.substring(1).split("&").forEach((function(t){var e=t.split("=",2);n[e[0]]=e[1]})),t?h(n[t],e):n}function Ln(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];return Object.keys(t).forEach((function(n){e&&v(t[n])||i.push("".concat(On(n),"=").concat(On(t[n])))})),i.join("&")}},98:(t,e,n)=>{"use strict";n.d(e,{createEditor:()=>Lr});var s=n(835),a=n(241);const r={file:null,title:null,status:null,container:null,mainView:null,infoView:null,conceptList:null,selection:null,placeholder:null,cache:null,init(){return this.cache=new Map,this},get hasFile(){return this.cache.size>0},get hasSelection(){return!(0,s.isNullOrUndefined)(this.selection)},refresh(){return this.hasFile?(this.container.classList.remove("empty"),(0,a.Cp)(this.placeholder),(0,a.$Z)(this.conceptList)):(this.container.classList.add("empty"),(0,a.$Z)(this.placeholder),(0,a.Cp)(this.conceptList)),this.hasSelection||(0,a.Cp)(this.infoView),this},render(){return this.container=(0,s.createDiv)({class:["editor-config"]}),this.mainView=(0,s.createDiv)({class:["editor-config-main"]}),this.infoView=(0,s.createDiv)({class:["editor-config-info"]}),this.conceptList=(0,s.createUnorderedList)({class:["bare-list","editor-config__list"]}),this.placeholder=(0,s.createParagraph)({class:["editor-config-placeholder"],html:`${(0,a._b)("No concept found")}. Please upload your files.`}),this.mainView.append(this.conceptList,this.placeholder),this.container.append(this.mainView,this.infoView),this.bindEvents(),this.refresh(),this.container},clear(){(0,s.removeChildren)(this.conceptList),(0,s.removeChildren)(this.infoView),this.cache.clear(),this.refresh()},selectItem(t){if(!this.cache.has(t))return null;let e=this.cache.get(t);return(0,s.isHTMLElement)(this.selection)&&this.selection.classList.remove("selected"),this.selection=e,this.selection.classList.add("selected"),this.refresh(),t},show(){return(0,a.$Z)(this.container),this.visible=!0,this},hide(){return(0,a.Cp)(this.container),this.visible=!1,this},showInfo(t){let e=o(this.editor.conceptModel.getCompleteModelConcept(t),(0,s.getTemplate)("#concept-schema"));(0,s.removeChildren)(this.infoView).append(e),(0,a.$Z)(this.infoView)},addItem(t){let e=(0,s.createSpan)({class:["loaded-element-name","fit-content"]},t.name),i=(0,s.createListItem)({class:["loaded-element",`loaded-element--${this.type}`],dataset:{context:"menu",action:"open-concept",concept:t.name,status:"active"}}),n=(0,s.createButton)({class:["btn","file-section__actionbar-button","file-section__actionbar-button--edit"],title:`Reload the ${this.type}`,dataset:{context:"menu",action:"open-concept",concept:t.name}});i.append(e,n),this.conceptList.append(i),this.cache.set(t.name,i),this.refresh()},bindEvents(){}};function o(t,e){if((0,s.isNullOrUndefined)(t))throw new TypeError("Bad argument: The 'schema' is missing");if(!(0,s.isHTMLElement)(e))throw new TypeError("Bad argument: The given 'template' is not a valid HTML Element");const i=(0,s.cloneTemplate)(e);return(0,s.getElements)("[data-if]",i).forEach(((e,i)=>{let n=e.dataset.if;(0,s.hasOwn)(t,n)||e.remove()})),(0,s.getElements)("[data-name]",i).forEach(((e,i)=>{let n=e.dataset.name;e.textContent=t[n]})),(0,s.getElements)("[data-attr]",i).forEach(((e,i)=>{let n=e.dataset.attr,[s,a]=n.split(":"),r=(e=>e.startsWith("$")?t[e.substring(1)]:e)(a);delete e.dataset.attr,e.dataset[s]=r})),(0,s.getElements)("[data-bind]",i).forEach(((e,i)=>{let n=e.dataset.bind;if(!(0,s.hasOwn)(t,n))return;let a=(0,s.getElement)("[data-item]",e),r=a.dataset.item,l=(0,s.getTemplate)(`#${r}`);t[n].forEach((t=>{a.append(o(t,l))}))})),i}const l={PRIMITIVE:"E",CONCRETE:"C",PROTOTYPE:"P",DERIVATIVE:"D"},c={file:null,title:null,status:null,container:null,mainView:null,infoView:null,files:null,btnLoad:null,btnUnload:null,btnDownload:null,btnEdit:null,selection:null,concepts:null,selectedConcept:null,attributes:null,filter:null,init(){return this.concepts=new Map,this.attributes=new Map,this.filter=Object.create(d,{editor:{value:this.editor},settings:{value:this}}).init([{label:"Concrete",nature:"concrete"},{label:"Prototype",nature:"prototype"},{label:"Derivative",nature:"derivative"}]),this},get hasFile(){return this.concepts.size>0},get hasSelection(){return!(0,s.isNullOrUndefined)(this.selection)},getFile(){return this.file},setFile(t){this.file=t,this.refresh()},refresh(){return this.hasFile?(this.container.classList.remove("empty"),(0,a.$Z)(this.files)):(this.container.classList.add("empty"),(0,a.Cp)(this.files)),this.btnUnload.disabled=!this.hasFile,this.editor.isReady?((0,a.Cp)(this.placeholder),this.placeholder.classList.remove("error")):this.hasFile?(this.editor.hasConceptModel||(this.placeholder.innerHTML=`${(0,a._b)("Missing projections")}`),this.editor.hasProjectionModel||(this.placeholder.innerHTML=`${(0,a._b)("Missing projections")}`),this.placeholder.classList.add("error"),(0,a.$Z)(this.placeholder)):(this.placeholder.innerHTML=`Add your ${(0,a._b)("concepts")} and ${(0,a._b)("projections")} or load a previously saved ${(0,a._b)("model")}`,this.placeholder.classList.remove("error")),this.hasSelection?(0,a.$Z)(this.infoView):(0,a.Cp)(this.infoView),this},reload(){this.editor.hasConceptModel&&(this.editor.conceptModel.schema.forEach((t=>{let e=(0,s.createListItem)({class:["editor-file-concept"],dataset:{name:t.name,nature:t.nature,root:(0,s.valOrDefault)(t.root,"false")}},t.name);if(t.root){let t=(0,s.createI)({class:["editor-file-concept-root"],title:"root concept"});e.append(t)}this.concepts.set(t.name,e),this.files.append(e)})),this.refresh())},render(){this.container=(0,s.createDiv)({class:["editor-file"]});let t=(0,s.createDiv)({class:["editor-file-actionbar"]});return this.btnLoad=(0,s.createButton)({class:["btn","editor-file__browse-button"],title:"Load file in editor",dataset:{action:"load"}},"Browse"),this.btnImport=(0,s.createButton)({class:["btn","editor-file__browse-button"],title:"Load file in editor",dataset:{action:"load"}},"Import"),this.btnUnload=(0,s.createButton)({class:["btn","editor-file-actionbar__button","editor-file-actionbar__btn-remove"],title:"Remove all files",dataset:{action:"unload"}}),t.append(this.btnLoad,this.btnUnload),this.mainView=(0,s.createDiv)({class:["editor-file-mainview"]}),this.files=(0,s.createUnorderedList)({class:["bare-list","editor-file__list"]}),this.infoView=(0,s.createDiv)({class:["detail-area","editor-file-detail"]}),this.placeholder=(0,s.createParagraph)({class:["editor-file-placeholder"],html:`Add your ${(0,a._b)("concepts")}, ${(0,a._b)("projections")} and all other ${(0,a._b)("resources")}`}),this.mainView.append(this.filter.render(),this.files,this.infoView),this.container.append(t,this.mainView),this.bindEvents(),this.refresh(),this.container},clear(){(0,s.removeChildren)(this.files)},show(){return(0,a.$Z)(this.container),this.visible=!0,this},hide(){return(0,a.Cp)(this.container),this.visible=!1,this},selectItem(t){let e=this.concepts.get(t);(0,s.isHTMLElement)(this.selection)&&this.selection.classList.remove("selected"),this.selection=e,this.selection.classList.add("selected"),this.displayInfo(t),this.refresh()},displayConcept(t){if((0,s.isNullOrUndefined)(t))return;let e=this.editor.conceptModel.getConceptSchema(t);if((0,s.isNullOrUndefined)(e))return;this.selection=t;const{name:i,nature:n,attributes:a}=e;let r=(0,s.createDiv)({class:["app-model-concept"]}),o=(0,s.createDiv)({class:["app-model-concept-header"]}),c=(0,s.createI)({class:["app-model-concept-nature"],dataset:{name:n}},l[n.toUpperCase()]),d=(0,s.createSpan)({class:["app-model-concept-name"]},i);o.append(c,d);let u=(0,s.createUnorderedList)({class:["bare-list","app-model-concept-attributes"]});Array.isArray(a)&&a.forEach((t=>{let e=(0,s.createListItem)({class:["app-model-concept-attribute"],dataset:{name:t.name,type:"attribute"}}),i=(0,s.createDiv)({class:["app-model__attribute-header"]}),n=(0,s.createSpan)({class:["app-model__attribute-name"]},t.name);if(t.required){let t=(0,s.createI)({class:["app-model__attribute-required"]},(0,s.createSpan)({class:["help"]},"required"));i.append(t)}i.append(n);let a=(0,s.createDiv)({class:["app-model__attribute-target"]},h(t.target)),r=(0,s.createDiv)({class:["app-model__attribute-info"]},[i,a]);e.append(r),this.attributes.set(t.name,e),u.append(e)})),r.append(o,u),(0,s.removeChildren)(this.infoView),this.infoView.append(r),this.selectedConcept=e,this.refresh()},selectAttribute(t){return!(0,s.isNullOrUndefined)(t)&&(this.selectedAttribute!==t&&(this.selectedAttribute&&this.attributes.get(this.selectedAttribute).classList.remove("selected"),!!this.attributes.has(t)&&(this.selectedAttribute=t,this.attributes.get(t).classList.add("selected"),this.displayAttribute(t),this.refresh(),!0)))},displayAttribute(t){this.refresh()},bindEvents(){this.editor.registerHandler("editor.load-concept@post",(t=>{this.reload()})),this.editor.registerHandler("editor.unload-concept@post",(t=>{this.reload()})),this.editor.registerHandler("editor.unload-projection@post",(t=>{this.reload()})),this.container.addEventListener("dragenter",(t=>{this.container.classList.add("highlight"),t.preventDefault(),t.stopPropagation()}),!1),this.container.addEventListener("dragleave",(t=>{this.container.classList.remove("highlight"),t.preventDefault(),t.stopPropagation()}),!1),this.container.addEventListener("dragover",(t=>{this.container.classList.add("highlight"),t.preventDefault(),t.stopPropagation()}),!1),this.container.addEventListener("drop",(t=>{this.container.classList.remove("highlight");let e=t.dataTransfer.files[0];if(!e.name.endsWith(".json"))return void this.notify("This file is not supported. Please use a .json file");let i=new FileReader;i.onload=t=>{this.editor.load(i.result,this.type)},i.readAsText(e),t.preventDefault(),t.stopPropagation()}),!1),this.container.addEventListener("click",(t=>{const{target:e}=t,{type:i,name:n}=e.dataset;this.displayConcept(n),"attribute"===i?this.selectAttribute(n):"concept"===i&&this.parent.selectConcept(n)}))}};function h(t){const e=(0,s.createDocFragment)();if((0,s.isNullOrUndefined)(t))return e;const{name:i,accept:n}=t;let a=(0,s.createSpan)({class:["target-name"],dataset:{type:"concept",name:i}},i);if(e.append(a),n){let t=(0,s.createDiv)({class:["target-accept"]});Array.isArray(n)?(t.append(...n.map((t=>h(t)))),t.classList.add("array")):t.append(h(n)),e.append(t)}return e}const d={container:null,values:null,filters:null,concepts:null,init(t){this.values=(0,s.valOrDefault)(t,[]);let e=1;return this.values.forEach((t=>{t.id=e++})),this.filters=new Map,this},refresh(){this.filters.forEach(((t,e)=>{t.checked?t.parentElement.classList.add("checked"):t.parentElement.classList.remove("checked")}))},render(){return(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:"concept-filter"})),this.search=(0,s.createInput)({class:["concept-filter-search"]}),this.values.forEach((t=>{let e=(0,s.createInput)({class:["cf-option-checkbox"],type:"checkbox",checked:!0,value:t.id}),i=(0,s.createSpan)({class:["cf-option-text"]},t.label),n=(0,s.createLabel)({class:"concept-filter-option"},[e,i]);this.filters.set(t,e),this.container.append(n)})),this.bindEvents(),this.refresh(),this.container},filterConcepts(){this.settings.concepts.forEach(((t,e)=>{const{nature:i,root:n}=t.dataset;this.filters.forEach(((e,r)=>{r.nature===i&&(e.checked?(0,a.$Z)(t):(0,a.Cp)(t)),r.root===(0,s.toBoolean)(n)&&(e.checked?(0,a.$Z)(t):(0,a.Cp)(t))}))})),this.refresh()},bindEvents(){this.container.addEventListener("change",(t=>{const{target:e}=t;this.filterConcepts()}))}},u={file:null,title:null,status:null,container:null,mainView:null,infoView:null,conceptList:null,selection:null,placeholder:null,cache:null,init(){return this.cache=new Map,this},get hasFile(){return this.cache.size>0},get hasSelection(){return!(0,s.isNullOrUndefined)(this.selection)},refresh(){return this.hasFile?(this.container.classList.remove("empty"),(0,a.Cp)(this.placeholder),(0,a.$Z)(this.conceptList)):(this.container.classList.add("empty"),(0,a.$Z)(this.placeholder),(0,a.Cp)(this.conceptList)),this.hasSelection||(0,a.Cp)(this.infoView),this},render(){return this.container=(0,s.createDiv)({class:["editor-config"]}),this.mainView=(0,s.createDiv)({class:["editor-config-main"]}),this.infoView=(0,s.createDiv)({class:["editor-config-info"]}),this.conceptList=(0,s.createUnorderedList)({class:["bare-list","editor-config__list"]}),this.placeholder=(0,s.createParagraph)({class:["editor-config-placeholder"],html:`${(0,a._b)("No concept found")}. Please upload your files.`}),this.mainView.append(this.conceptList,this.placeholder),this.container.append(this.mainView,this.infoView),this.bindEvents(),this.refresh(),this.container},clear(){(0,s.removeChildren)(this.conceptList),(0,s.removeChildren)(this.infoView),this.cache.clear(),this.refresh()},selectItem(t){if(!this.cache.has(t))return null;let e=this.cache.get(t);return(0,s.isHTMLElement)(this.selection)&&this.selection.classList.remove("selected"),this.selection=e,this.selection.classList.add("selected"),this.refresh(),t},show(){return(0,a.$Z)(this.container),this.visible=!0,this},hide(){return(0,a.Cp)(this.container),this.visible=!1,this},addItem(t){let e=(0,s.createSpan)({class:["loaded-element-name","fit-content"]},t.name),i=(0,s.createListItem)({class:["loaded-element",`loaded-element--${this.type}`],dataset:{context:"menu",action:"open-concept",concept:t.name,status:"active"}}),n=(0,s.createButton)({class:["btn","file-section__actionbar-button","file-section__actionbar-button--edit"],title:`Reload the ${this.type}`,dataset:{context:"menu",action:"open-concept",concept:t.name}});i.append(e,n),this.conceptList.append(i),this.cache.set(t.name,i),this.refresh()},bindEvents(){}},p={file:null,title:null,status:null,container:null,mainView:null,infoView:null,conceptList:null,selection:null,placeholder:null,cache:null,init(){return this.cache=new Map,this},get hasFile(){return this.cache.size>0},get hasSelection(){return!(0,s.isNullOrUndefined)(this.selection)},refresh(){return this.hasFile?(this.container.classList.remove("empty"),(0,a.Cp)(this.placeholder),(0,a.$Z)(this.conceptList)):(this.container.classList.add("empty"),(0,a.$Z)(this.placeholder),(0,a.Cp)(this.conceptList)),this.hasSelection||(0,a.Cp)(this.infoView),this},render(){return this.container=(0,s.createDiv)({class:["editor-config"]}),this.mainView=(0,s.createDiv)({class:["editor-config-main"]}),this.infoView=(0,s.createDiv)({class:["editor-config-info"]}),this.conceptList=(0,s.createUnorderedList)({class:["bare-list","editor-config__list"]}),this.placeholder=(0,s.createParagraph)({class:["editor-config-placeholder"],html:`${(0,a._b)("No concept found")}. Please upload your files.`}),this.mainView.append(this.conceptList,this.placeholder),this.container.append(this.mainView,this.infoView),this.bindEvents(),this.refresh(),this.container},clear(){(0,s.removeChildren)(this.conceptList),(0,s.removeChildren)(this.infoView),this.cache.clear(),this.refresh()},selectItem(t){if(!this.cache.has(t))return null;let e=this.cache.get(t);return(0,s.isHTMLElement)(this.selection)&&this.selection.classList.remove("selected"),this.selection=e,this.selection.classList.add("selected"),this.refresh(),t},show(){return(0,a.$Z)(this.container),this.visible=!0,this},hide(){return(0,a.Cp)(this.container),this.visible=!1,this},addItem(t){let e=(0,s.createSpan)({class:["loaded-element-name","fit-content"]},t.name),i=(0,s.createListItem)({class:["loaded-element",`loaded-element--${this.type}`],dataset:{context:"menu",action:"open-concept",concept:t.name,status:"active"}}),n=(0,s.createButton)({class:["btn","file-section__actionbar-button","file-section__actionbar-button--edit"],title:`Reload the ${this.type}`,dataset:{context:"menu",action:"open-concept",concept:t.name}});i.append(e,n),this.conceptList.append(i),this.cache.set(t.name,i),this.refresh()},bindEvents(){}},m={menu:null,schema:null,isOpen:!1,visible:!0,btnStart:null,settings:null,init(t){return t&&(this.schema=t),this},get isRendered(){return(0,s.isHTMLElement)(this.container)},clear(){return(0,s.removeChildren)(this.container),this},update(){},render(){const t=(0,s.createDocFragment)();if(!(0,s.isHTMLElement)(this.container)){this.container=(0,s.createDiv)({class:["editor-home"]});let t=(0,s.createImage)({class:["editor-logo"],src:"https://gentlemancp.org/assets/images/logo_gentleman_200.png"}),e=(0,s.createH2)({class:["editor-title"]},"Settings"),i=(0,s.createDiv)({class:["editor-home-header"]},[t,e]);this.container.append(i)}return(0,s.isHTMLElement)(this.menu)||(this.menu=Object.create(y,{editor:{value:this.editor}}).init(),t.append(this.menu.render())),(0,s.isHTMLElement)(this.btnStart)||(this.btnStart=(0,s.createButton)({class:["btn","editor-home-section--model__button","editor-home-section__button--start"],dataset:{action:"close",context:"home"}},"Done!"),t.append(this.btnStart)),t.hasChildNodes()&&(this.container.append(t),this.bindEvents()),this.refresh(),this.container},refresh(){const{hasConceptModel:t,hasProjectionModel:e}=this.editor;return this.btnStart.disabled=!(t&&e),this},actionHandler(t,e){const{concept:i}=e.dataset;"open-concept"===t&&(this.menu.config.selectItem(i),this.menu.config.showInfo(i))},bindEvents(){this.editor.registerHandler("concept-model.updated",(()=>{this.menu.config.clear(),this.editor.hasConceptModel&&this.editor.conceptModel.schema.filter((t=>t.root)).forEach((t=>{this.menu.config.addItem(t)}))}))}},y={container:null,tabsElement:null,tabs:null,currentTab:null,activeTab:null,fileIO:null,config:null,dataSettings:null,buildSettings:null,init(){return this.tabs=new Map,this.tabs.set("file","File"),this.tabs.set("config","Config"),this.tabs.set("data","Data"),this.tabs.set("build","Build"),this.currentTab="file",this},refresh(){},render(){return this.container=(0,s.createSection)({class:["editor-home-menu"]}),this.tabsElement=(0,s.createUnorderedList)({class:["bare-list","editor-home-menu-tabs"]}),this.tabs.forEach(((t,e)=>{let i=(0,s.createListItem)({class:["editor-home-menu-tab"],dataset:{name:e}},t);this.tabs.set(e,i),this.tabsElement.append(i)})),this.window=(0,s.createDiv)({class:["editor-home-menu-section"]}),this.fileIO=g.call(this),this.config=f.call(this),this.dataSettings=b.call(this),this.buildSettings=v.call(this),this.window.append(this.fileIO.render()),this.window.append(this.config.render()),this.window.append(this.dataSettings.render()),this.window.append(this.buildSettings.render()),this.selectTab(this.currentTab),this.container.append(this.tabsElement,this.window),this.bindEvents(),this.container},selectTab(t){(0,s.isNullOrUndefined)(t)||this.activeTab&&this.currentTab===t||("file"===t?(this.fileIO.show(),this.config.hide(),this.dataSettings.hide(),this.buildSettings.hide()):"config"===t&&(this.config.show(),this.fileIO.hide(),this.dataSettings.hide(),this.buildSettings.hide()),this.activeTab&&(0,a.hF)(this.activeTab),this.currentTab=t,this.activeTab=this.tabs.get(this.currentTab),(0,a.Ys)(this.activeTab))},bindEvents(){this.tabsElement.addEventListener("click",(t=>{const{target:e}=t,{name:i}=e.dataset;this.selectTab(i)}))}};function g(t){const e=Object.create(c,{editor:{value:this.editor}});return e.init(),e}function f(){const t=Object.create(r,{editor:{value:this.editor}});return t.init(),t}function b(){const t=Object.create(u,{editor:{value:this.editor}});return t.init(),t}function v(){const t=Object.create(p,{editor:{value:this.editor}});return t.init(),t}function w(t,e){const{name:i,object:n,id:a}=e,r=(0,s.createListItem)({class:["selector-concept",`selector-concept--${t}`],title:e.getName(),dataset:{concept:a,object:n}});var o=(0,s.createSpan)({class:["selector-concept-content"]},e.getName());r.append(o),"ancestor"===t&&o.classList.add("fit-content");const l=(0,s.createI)({class:["selector-concept-status"]});if(e.hasError){l.classList.add("error");let t=(0,s.createUnorderedList)({class:["bare-list","selector-concept-status__errors"]});e.errors.forEach((e=>{let i=(0,s.createListItem)({class:["selector-concept-status__error"]},e);i.style.minWidth=`${Math.min(.5*e.length,30)}em`,t.append(i)})),l.append(t),r.classList.add("error")}else l.classList.add("valid"),r.classList.add("valid");return r.append(l),r.addEventListener("mouseenter",(t=>{let e=(0,s.getElement)(`.projection[data-concept="${a}"]`,this.editor.body);e&&this.editor.highlight(e)})),r.addEventListener("mouseleave",(t=>{this.editor.unhighlight()})),r.addEventListener("click",(t=>{let e=(0,s.getElement)(`.projection[data-concept="${a}"]`,this.editor.body);e&&e.focus()})),r}const x={container:null,title:null,conceptList:null,header:null,body:null,get isRendered(){return(0,s.isHTMLElement)(this.container)},init(t={}){return this.schema=t,this},update(){},refresh(){const{activeInstance:t,activeConcept:e,hasActiveInstance:i,hasActiveConcept:n}=this.editor;if(!i||!n)return(0,s.removeChildren)(this.conceptList),this;const a=t.concept,r=(0,s.createDocFragment)();let o=w.call(this,"root",a);if(r.append(o),a===e&&o.classList.add("selector-concept--active"),a===e)return(0,s.removeChildren)(this.conceptList).append(r),this;if(!e.hasParent())return(0,s.removeChildren)(this.conceptList).append(r),this;let l=e.getParent(),c=[];for(;l&&l!==a;)c.unshift(l),l=l.getParent();return c.forEach((t=>{r.append(w.call(this,"ancestor",t))})),o=w.call(this,"active",e),r.append(o),(0,s.removeChildren)(this.conceptList).append(r),this},render(){const t=(0,s.createDocFragment)();(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["editor-breadcrumb"]})),(0,s.isHTMLElement)(this.notification)||(this.notification=(0,s.createDiv)({class:["notification","breadcrumb-notification"]}),t.append(this.notification));const e=(0,s.createSpan)({class:["breadcrumb-title","hidden"],dataset:{ignore:"all"}},"Breadcrumb");return t.append(e),(0,s.isHTMLElement)(this.conceptList)||(this.conceptList=(0,s.createUnorderedList)({class:["bare-list","selector-concepts"]}),t.append(this.conceptList)),t.hasChildNodes()&&(this.container.append(t),this.bindEvents()),this.update(),this.refresh(),this.container},bindEvents(){}},E={schema:null,isOpen:!1,visible:!0,btnStart:null,logList:null,init(t){return t&&(this.schema=t),this},get isRendered(){return(0,s.isHTMLElement)(this.container)},add(t,e,i=a.hi.NORMAL){if(!Array.isArray(t))return;let n=(0,s.createUnorderedList)({class:["bare-list","log-item-messages"]});t.forEach((t=>n.append((0,s.createListItem)({class:["log-item-message"]},t))));let r=(0,s.createListItem)({class:["log-item",`log-item--${i}`]}),o=(0,s.createButton)({class:["btn","btn-delete"],dataset:{action:"delete",target:"parent"}},"✖"),l=(0,s.createSpan)({class:["log-item__name"],dataset:{action:"delete",target:"parent"}},`${(0,s.valOrDefault)(e,"Log")} (${(0,s.shortDateTime)(Date.now())})`);return r.append(o,l,n),this.logList.append(r),this.refresh(),this},clear(){return(0,s.removeChildren)(this.logList),this},update(){},render(){const t=(0,s.createDocFragment)();return(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["editor-log"]})),(0,s.isHTMLElement)(this.logList)||(this.logList=(0,s.createUnorderedList)({class:["bare-list","log-list"]}),t.append(this.logList)),t.hasChildNodes()&&(this.container.append(t),this.bindEvents()),this.refresh(),this.container},refresh(){return this.logList.hasChildNodes()?this.show():this.hide(),this},bindEvents(){}},A={modelstatus:null,editorstatus:null,notification:null,views:null,view:"grid",viewContainer:null,viewList:null,viewItem:null,activeViewItem:null,groupList:null,groupItem:null,activeGroupItem:null,visible:!0,container:null,get isRendered(){return(0,s.isHTMLElement)(this.container)},init(){return this.views=new Map,this},show(){return(0,a.$Z)(this.container),this.visible=!0,this},hide(){return(0,a.Cp)(this.container),this.visible=!1,this},toggle(){return(0,a.ZN)(this.container),this.visible=!this.visible,this},updateActiveView(){"tab"===this.view&&(this.editor.instances.forEach((t=>{t!==this.editor.activeInstance&&(t.view.classList.remove("active"),t.hide())})),this.editor.activeInstance.view.classList.add("active"),this.editor.activeInstance.show()),this.editor.refresh()},addView(t){if((0,s.isNullOrUndefined)(t))return!1;let e=t.title.textContent,i=(0,s.createI)({class:["ico","ico-delete"]},"✖"),n=(0,s.createButton)({class:["btn","btn-close"]},i),a=(0,s.createDiv)({class:[`editor-view-${this.view}list-item__content`,"fit-content"]},e),r=(0,s.createListItem)({class:[`editor-view-${this.view}list-item`],title:t.title.textContent},[a,n]);t.view=r,r.addEventListener("click",(e=>{if(function(t){const e=t=>t===r||t===n;return e(t)?t:(0,s.findAncestor)(t,(t=>e(t)),5)}(e.target)===n){let e=r.previousSibling||r.nextSibling;t.delete(),null===this.editor.activeInstance&&e&&e.click()}else this.editor.updateActiveInstance(t)})),this.tabView.append(r)},changeView(t){if(t===this.view)return this;this.view=t,(0,a.hF)(this.viewItem),this.viewItem=this.views.get(this.view),(0,a.Ys)(this.viewItem),(0,s.removeChildren)(this.editor.viewSection),"tab"===t?(this.tabView=(0,s.createUnorderedList)({class:["bare-list","editor-view-tablist"]}),(0,s.removeChildren)(this.tabView),this.editor.instances.forEach((t=>{t.expand(),this.addView(t)})),this.editor.viewSection.append(this.tabView)):"grid"===t&&this.editor.instances.forEach((t=>{t.show()})),this.updateActiveView()},addGroup(){(0,s.createListItem)({class:["editor-footer-group"]})},notify(t,e=4500){let i=t;const n="open";if(this.notification.classList.contains(n))return!1;this.notification.appendChild(i),setTimeout((()=>{this.notification.classList.add(n),this.container.classList.add("menu--notifying")}),50),setTimeout((()=>{this.notification.classList.remove(n),this.container.classList.remove("menu--notifying"),setTimeout((()=>{(0,s.removeChildren)(this.notification)}),500)}),e)},refresh(){const{conceptModel:t}=this.editor;if(this.editor.isReady){if(t.hasError){this.modelstatusBadge.classList.add("error"),this.modelstatusBadge.classList.remove("valid"),this.container.classList.add("error");let e=t.concepts.filter((t=>t.hasError)).length;this.modelstatusInfo.textContent=`${e} ${function(t,e,i){if(1===i)return t;let n="s".split("|");return 1===n.length?t+n[0]:t.substring(0,t.lastIndexOf(n[0]))+n[1]}("error",0,e)}`}else this.modelstatusBadge.classList.add("valid"),this.modelstatusBadge.classList.remove("error"),this.container.classList.remove("error"),(0,s.removeChildren)(this.modelstatusInfo),this.editor.logs.clear();if(this.editor.hasError){this.editorstatusBadge.classList.add("error"),this.editorstatusBadge.classList.remove("valid"),this.container.classList.add("error");let t=this.editor.errors.length;this.editorstatusInfo.textContent=`${t}`}else this.editorstatusBadge.classList.add("valid"),this.editorstatusBadge.classList.remove("error"),this.container.classList.remove("error"),(0,s.removeChildren)(this.editorstatusInfo),this.editor.logs.clear()}},render(){const t=(0,s.createDocFragment)();if((0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["editor-statusbar"]})),(0,s.isHTMLElement)(this.badgeContainer)||(this.badgeContainer=(0,s.createDiv)({class:["editor-statusbar-badge-container"]}),t.appendChild(this.badgeContainer)),(0,s.isHTMLElement)(this.modelstatus)||(this.modelstatus=(0,s.createDiv)({class:["editor-statusbar-model"]}),this.modelstatusBadge=(0,s.createI)({class:["editor-statusbar-model-badge"]}),this.modelstatusInfo=(0,s.createDiv)({class:["editor-statusbar-model-info"]}),this.modelstatus.append(this.modelstatusBadge,this.modelstatusInfo),this.badgeContainer.appendChild(this.modelstatus)),(0,s.isHTMLElement)(this.editorstatus)||(this.editorstatus=(0,s.createDiv)({class:["editor-statusbar-global"]}),this.editorstatusBadge=(0,s.createI)({class:["editor-statusbar-global-badge"]}),this.editorstatusInfo=(0,s.createDiv)({class:["editor-statusbar-global-info"]}),this.editorstatus.append(this.editorstatusBadge,this.editorstatusInfo),this.badgeContainer.appendChild(this.editorstatus)),(0,s.isHTMLElement)(this.viewContainer)||(this.viewContainer=(0,s.createDiv)({class:["editor-statusbar-viewer-container"]}),t.appendChild(this.viewContainer)),!(0,s.isHTMLElement)(this.btnGroup)){let t=(0,s.createI)({class:["ico","ico-plus","btn-content"],title:"Add a group",dataset:{ignore:"all"}},"+");this.btnGroup=(0,s.createButton)({class:["editor-statusbar-viewer__button-add"],dataset:{action:"add-group"}},t)}return(0,s.isHTMLElement)(this.groupContainer)||(this.groupContainer=(0,s.createDiv)({class:["editor-footer-group"]})),(0,s.isHTMLElement)(this.viewList)||(this.viewList=(0,s.createUnorderedList)({class:["bare-list","editor-statusbar-viewers"]}),this.viewContainer.appendChild(this.viewList)),["grid","tab"].forEach((t=>{let e=(0,s.createListItem)({class:["editor-statusbar-viewer"],dataset:{type:"viewer",action:"change-view",value:t}},t);this.views.set(t,e),this.viewList.append(e)})),this.viewItem=this.views.get(this.view),this.viewItem.classList.add("selected"),t.hasChildNodes()&&(this.container.append(t),this.bindEvents()),this.refresh(),this.container},bindEvents(){function t(t,e){let i=(0,s.createEmphasis)({class:["link","error-message__link"]},t);const n=`.projection[data-concept="${e}"]`;return i.addEventListener("mouseenter",(t=>{let e=(0,s.getElement)(n,this.editor.body);e&&this.editor.highlight(e)})),i.addEventListener("mouseleave",(t=>{this.editor.unhighlight()})),i.addEventListener("click",(t=>{let e=this.editor.resolveElement((0,s.getElement)(n,this.editor.body));e&&e.focus()})),i}this.modelstatus.addEventListener("click",(e=>{if(!this.editor.conceptModel.hasError)return;let i=[];this.editor.conceptModel.concepts.forEach((e=>{e.hasError&&i.push(...e.errors.map((i=>{let n=t.call(this,e.getName(),e.id);return(0,s.createSpan)({class:["error-message"]},[n,`: ${i}`])})))})),this.editor.logs.clear(),this.editor.logs.add(i,"Validation error",a.hi.ERROR)})),this.editorstatus.addEventListener("click",(t=>{if(!this.editor.hasError)return;let e=[];e.push(...this.editor.errors.map((t=>(0,s.createSpan)({class:["error-message"]},[`${t.message}`])))),this.editor.logs.clear(),this.editor.logs.add(e,"Validation error",a.hi.ERROR)})),this.editor.registerHandler("editor.instance@active:updated",(()=>{this.updateActiveView()}))}},j={container:null,list:null,editor:null,dataList:null,fetch:null,init(t){return this.fetch=t,this},render(){const t=(0,s.createDocFragment)();return(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["container","container--editor-selectors"]})),(0,s.isHTMLElement)(this.list)||(this.list=(0,s.createUnorderedList)({class:["bare-list","editor-selectors","font-ui"]}),t.append(this.list)),t.hasChildNodes()&&(this.container.append(t),this.bindEvents()),this.refresh(),this.container},refresh(){return this},update(){this.dataList=this.fetch(),(0,s.removeChildren)(this.list);let t=(0,s.valOrDefault)(this.editor.getConfig("concept"),{});return this.dataList.forEach((e=>{const{concept:i,accept:n}=e;let a=(0,s.createH4)({class:["title","editor-selector__title"]},`${r=e.name,(0,s.hasOwn)(t,r)?t[r].name:r}`);var r;i&&a.append((0,s.createSpan)({class:["editor-selector__title-concept"]},(i.name||i.prototype).replace(" ","-").toLowerCase())),n&&a.append((0,s.createSpan)({class:["editor-selector__title-accept"]},n.name)),(0,s.createButton)({class:["btn","editor-selector__header-button","editor-selector__header-button--info"],title:`View ${e.name||e.type} info`,dataset:{action:"collapse",rel:"parent",target:"selector"}},"i");let o=(0,s.createHeader)({class:["title","editor-selector__header"],title:`Expand/Collapse ${this.type}`},[a]),l=O[this.type],c=(0,s.createDiv)({class:["editor-selector__action-bar"]},l.call(this,e)),h=(0,s.createListItem)({class:["editor-selector","collapsed","font-ui"],tabindex:0,dataset:{type:this.type,alias:`${e.name||e.type}`,name:"selector",projection:e.id}},[o,c]);this.list.append(h)})),this.refresh(),this},show(){return(0,a.$Z)(this.container),this},hide(){return(0,a.Cp)(this.container),this},bindEvents(){}},O={projection:function(t){const e=(0,s.createDocFragment)();let i=(0,s.createButton)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button","editor-selector__action-bar-button--clone"],dataset:{action:"edit:projection",id:t.id}},"Edit");return e.append(i),e},value:function(t){const e=(0,s.createDocFragment)();let i=(0,s.createButton)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button--clone"],dataset:{action:"create-instance:value",id:t.id}},(0,s.createI)({class:["ico","ico-plus","btn-content"],dataset:{ignore:"all"}},"+")),n=(0,s.createButton)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button--clone"],dataset:{action:"copy:value",id:t.id}},(0,s.createI)({class:["ico","ico-copy","btn-content"],dataset:{ignore:"all"}})),a=(0,s.createButton)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button--delete"],dataset:{action:"delete:value",id:t.id}},(0,s.createI)({class:["ico","ico-delete","btn-content"],dataset:{ignore:"all"}},"✖"));return e.append(a,n,i),e},concept:function(t){const e=(0,s.createDocFragment)();let i=this.editor.projectionModel.hasProjectionSchema(t),n=(0,s.createButton)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button--clone"],disabled:!i,title:`Create an instance of "${t.name}"`,dataset:{action:"create-instance",concept:t.name}},(0,s.createI)({class:["ico","ico-plus","btn-content"],dataset:{ignore:"all"}},"+"));return i||(n.title=`The concept ${t.name} has no projection`),e.append(n),e},resource:function(t){const{name:e,type:i,required:n}=t,a=(0,s.createDocFragment)();let r=(0,s.createButton)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button--add"],dataset:{action:"load-resource",id:e}},(0,s.createI)({class:["ico","ico-plus","btn-content"],dataset:{ignore:"all"}},"+")),o=(0,s.createButton)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button--delete"],dataset:{action:"delete:resource",id:e}},(0,s.createI)({class:["ico","ico-delete","btn-content"],dataset:{ignore:"all"}},"✖"));return this.editor.getResource(e)?a.append(o):a.append(r),a}},N={editor:null,valueCount:0,fileCount:0,container:null,title:null,visible:!0,tabs:null,tabConcept:null,tabValue:null,tabProjection:null,tabResource:null,tabConceptNotification:null,tabValueNotification:null,tabProjectionNotification:null,tabResourceNotification:null,activeTab:null,activeTabValue:null,menu:null,header:null,body:null,btnHome:null,btnSave:null,btnClose:null,get isRendered(){return(0,s.isHTMLElement)(this.container)},init(t){return t&&(this.editor=t),this._conceptSelector=function(t,e,i){return Object.create(j,{object:{value:"selector"},model:{value:void 0},type:{value:"concept"},editor:{value:e}})}(0,this.editor).init((()=>this.editor.isReady?this.editor.conceptModel.getSchema("concrete").filter((t=>t.root)):[])),this},render(){const t=(0,s.createDocFragment)();(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["editor-header"],dataset:{name:"editor-header",alias:"header"}})),(0,s.isHTMLElement)(this.title)||(this.title=(0,s.createSpan)({class:["editor-header-title"]},"Gentleman")),(0,s.isHTMLElement)(this.menu)||(this.menu=(0,s.createDiv)({class:["editor-header-left"]},[this.title]));let e=(0,s.valOrDefault)(this.editor.getConfig("toolbar"),[]),i=(0,s.createDiv)({class:["editor-toolbar"]},e.map((t=>(0,s.createButton)({class:(0,s.valOrDefault)(t.class,[]),dataset:{name:t.name,action:t.action}},t.content))));return(0,s.isHTMLElement)(this.btnHome)||(this.btnHome=(0,s.createButton)({class:["btn","editor-toolbar__button","editor-toolbar__button--home"],title:"Toggle menu",dataset:{action:"home"}}),i.append(this.btnHome)),(0,s.isHTMLElement)(this.header)||(this.header=(0,s.createDiv)({class:["editor-header-menu"]},[this.menu,i]),t.append(this.header)),(0,s.isHTMLElement)(this.body)||(this.body=(0,s.createDiv)({class:["editor-header-main"]}),t.append(this.body)),(0,s.isHTMLElement)(this._conceptSelector.container)||this.body.append(this._conceptSelector.render()),t.hasChildNodes()&&(this.container.append(t),this.bindEvents()),this.refresh(),this.container},refresh(){let t=(0,s.valOrDefault)(this.editor.getConfig("settings"),!0),e=(0,s.valOrDefault)(this.editor.getConfig("header"),!0);return this.editor.hasConceptModel?(this._conceptSelector.update(),(0,a.$Z)(this.body)):(0,a.Cp)(this.body),!1===t&&(0,a.Cp)(this.btnHome),!1===e&&(0,a.Cp)(this.body),this},show(t){if(!(0,s.isHTMLElement)(this[t]))return(0,a.$Z)(this.container),this.visible=!0,this;(0,a.$Z)(this[t])},hide(t){if(!(0,s.isHTMLElement)(this[t]))return(0,a.Cp)(this.container),this.visible=!1,this;(0,a.Cp)(this[t])},toggle(){return(0,a.ZN)(this.container),this.visible=!this.visible,this},bindEvents(){}};var k=0;const L={createInstance(t,e,i){if((0,s.isNullOrUndefined)(t))return this.notify("The concept is not valid",a.k$.ERROR),!1;let n="concept"===t.type?t:this.createConcept(t),r=e;(0,s.isNullOrUndefined)(r)&&this.hasProjectionModel&&(r=this.createProjection(n).init());let o=Object.create(_,{id:{value:"instance"+k++},object:{value:"environment"},name:{value:"editor-instance"},type:{value:"instance"},concept:{value:n,writable:!0},projection:{value:r,writable:!0},editor:{value:this}});const l=Object.assign({type:"concept",resize:!0,maximize:!0,close:"DELETE-CONCEPT"},i);return o.init(l),this.addInstance(o),o},getInstance(t){return this.instances.get(t)},addInstance(t){return t.isRendered||this.instanceSection.append(t.render()),this.instances.set(t.id,t),"tab"===this.status.view&&this.status.addView(t),t.concept.notify("displayed",t.projection.element.id),this.updateActiveInstance(t),this.refresh(),this},removeInstance(t){let e=this.getInstance(t);return!(0,s.isNullOrUndefined)(e)&&(e===this.activeInstance&&(this.activeInstance=null),e.view&&(0,s.removeChildren)(e.view).remove(),this.instances.delete(t),this.refresh(),!0)},moveInstance(t,e){return this.instanceSection.children[e].before(t),this},swapInstance(t,e){let i=Array.from(this.instanceSection.children);const n=i.indexOf(t),s=i.indexOf(e);return this.moveInstance(e,n),this.moveInstance(t,s),this}},_={window:null,container:null,title:null,visible:!0,menu:null,header:null,body:null,btnMaximize:null,btnClose:null,size:1,fullscreen:!1,collapsed:!1,schema:null,ctype:null,get isRendered(){return(0,s.isHTMLElement)(this.container)},init(t={}){return this.ctype=(0,s.valOrDefault)(t.type,"concept"),this.schema=t,this},setTitle(t){return!(0,s.isNullOrWhitespace)(t)&&(this.title.textContent=t,!0)},collapse(){return(0,a.wo)(this.container),this.collapsed=!0,this.fullscreen=!1,this.size="normal",this.refresh(),this},expand(){return(0,a.jn)(this.container),this.collapsed=!1,this.refresh(),this},changeSize(t){this.size=t,"fullscreen"===t?(this.fullscreen=!0,this.container.style.removeProperty("width"),this.container.style.removeProperty("height")):this.fullscreen=!1,this.refresh()},show(){return(0,a.$Z)(this.container),this.visible=!0,this},hide(){return(0,a.Cp)(this.container),this.visible=!1,this},toggle(){return(0,a.ZN)(this.container),this.visible=!this.visible,this},refresh(){return this.container.dataset.size=`${this.size}`,(0,s.isNullOrUndefined)(this.projection)&&(this.body.textContent="No projection found"),Array.from(this.editor.instances).some((t=>t.fullscreen))?this.editor.instanceSection.classList.add("fullscreen"):this.editor.instanceSection.classList.remove("fullscreen"),this},render(){const t=(0,s.createDocFragment)(),{name:e}=this.concept,i=e.toLowerCase();(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["editor-concept",`editor-concept--${this.ctype}`],tabindex:0,dataset:{nature:"concept-container",type:this.ctype,size:1}})),(0,s.isHTMLElement)(this.header)||(this.header=(0,s.createHeader)({title:"concept"===this.schema.type?`Instance of "${i}"`:`Linked instance of "${i}"`,class:["editor-concept-header"]}),t.append(this.header)),(0,s.isHTMLElement)(this.btnClose)||(this.btnClose=(0,s.createButton)({class:["btn","editor-concept-toolbar__btn-delete"],title:`Delete the instance "${i}"`,dataset:{action:"close",context:this.type,id:this.id}}),"projection"===this.schema.type&&(this.btnClose.title=`Close the linked instance "${i}"`)),(0,s.isHTMLElement)(this.btnMaximize)||(this.btnMaximize=(0,s.createButton)({class:["btn","editor-concept-toolbar__btn-maximize"],title:`Maximize ${e.toLowerCase()}`,dataset:{action:"maximize",context:this.type,id:this.id}})),this.title=(0,s.createH3)({class:["title","editor-concept-title","fit-content"],dataset:{nature:"editable",id:this.id}},(0,s.valOrDefault)(this.schema.title,e));let n=(0,s.createDiv)({class:["editor-concept-toolbar"]},[this.btnMaximize,this.btnClose]);return(0,s.removeChildren)(this.header).append(this.title,n),this.body&&this.body.remove(),this.projection?this.body=this.projection.render():this.body=(0,s.createParagraph)(),t.append(this.body),t.hasChildNodes()&&(this.container.appendChild(t),this.bindEvents()),(0,a.n2)(this.container),this.refresh(),this.container},clear(){},actionHandler(t){switch(t){case"collapse":this.collapsed?this.expand():this.collapse();break;case"maximize":this.fullscreen?this.changeSize("normal"):this.changeSize("fullscreen");break;case"close":this.delete()}},delete(){switch(this.schema.close){case"DELETE-CONCEPT":if(!this.concept.delete(!0))return this.editor.notify("The concept could not be deleted",a.k$.ERROR),this;break;case"DELETE-PROJECTION":if(this.projection&&!this.projection.delete())return this.notify("The projection could not be deleted",a.k$.ERROR),this}(0,s.removeChildren)(this.container).remove(),this.editor.removeInstance(this.id),this.window&&this.window.removeInstance(this)},bindEvents(){this.container.addEventListener("focusin",(t=>{this.editor.updateActiveInstance(this)}))}};var C=0;const T={createWindow(t){let e=Object.create(S,{id:{value:"window"+C++},object:{value:"environment"},name:{value:"editor-window"},type:{value:"window"},editor:{value:this}});return e.refname=t,e.init(),this.addWindow(e),e},getWindow(t){return this.windows.get(t)},findWindow(t){return Array.from(this.windows.values()).find((e=>e.refname===t))},addWindow(t){return t.isRendered||this.body.append(t.render()),this.windows.set(t.id,t),"tab"===this.status.view&&this.status.addView(t),this.refresh(),this},removeWindow(t){let e=this.getWindow(t);return!(0,s.isNullOrUndefined)(e)&&(e===this.activeWindow&&(this.activeWindow=null),e.view&&(0,s.removeChildren)(e.view).remove(),this.windows.delete(t),this.refresh(),!0)},moveWindow(t,e){return this.body.children[e].before(t),this},swapWindow(t,e){let i=Array.from(this.body.children);const n=i.indexOf(t),s=i.indexOf(e);return this.moveWindow(e,n),this.moveWindow(t,s),this}},S={container:null,title:null,visible:!0,instances:null,menu:null,header:null,body:null,btnClose:null,maxInstance:1,get isRendered(){return(0,s.isHTMLElement)(this.container)},init(t={}){return this.ctype=(0,s.valOrDefault)(t.type,"concept"),this.schema=t,this.instances=new Set,this},isEmpty(){return 0===this.instances.size},show(){return(0,a.$Z)(this.container),this.visible=!0,this},hide(){return(0,a.Cp)(this.container),this.visible=!1,this},toggle(){return(0,a.ZN)(this.container),this.visible=!this.visible,this},close(){(0,s.removeChildren)(this.container).remove(),this.editor.removeWindow(this.id)},refresh(){return this.isEmpty()?this.hide():this.show(),this},render(){const t=(0,s.createDocFragment)();(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["editor-window"],tabindex:-1})),(0,s.isHTMLElement)(this.header)||(this.header=(0,s.createHeader)({class:["editor-window-header"]}),t.append(this.header)),(0,s.isHTMLElement)(this.title)||(this.title=(0,s.createH3)({class:["title","editor-window-title","fit-content"]})),(0,s.isHTMLElement)(this.btnClose)||(this.btnClose=(0,s.createButton)({class:["btn","editor-window-header__btn-delete"],title:"Close the window",dataset:{action:"close",context:this.type,id:this.id}}));let e=(0,s.createDiv)({class:["editor-window-toolbar"]},[this.btnClose]);return(0,s.removeChildren)(this.header).append(this.title,e),t.hasChildNodes()&&(this.container.appendChild(t),this.bindEvents()),this.refresh(),this.container},getInstance(t){return(0,s.isNullOrUndefined)(t)?null:Array.from(this.instances).find((e=>e.id===t))},addInstance(t){if(!(0,s.isNullOrUndefined)(t)&&!this.instances.has(t))return this.instances.add(t),t.window=this,this.container.append(t.container),this.refresh(),!0},removeInstance(t){if(!(0,s.isNullOrUndefined)(t)&&this.instances.has(t))return this.instances.delete(t),this.refresh(),!0},actionHandler(t){switch(t){case"close":this.close()}},bindEvents(){}},M={schema:null,isOpen:!1,visible:!0,btnClose:null,btnExport:null,outputName:null,selector:null,init(t){return t&&(this.schema=t),this},get isRendered(){return(0,s.isHTMLElement)(this.container)},clear(){return(0,s.removeChildren)(this.logList),this},update(){},render(){const t=(0,s.createDocFragment)();(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["editor-exporter"]})),(0,s.isHTMLElement)(this.btnClose)||(this.btnClose=(0,s.createButton)({title:"Close window",class:["btn","btn-collapse"]}),t.append(this.btnClose));let e=(0,s.createH4)({class:["editor-exporter-title"]},"Export model");if(t.append(e),(0,s.isNullOrUndefined)(this.selector)){let e=(0,s.createParagraph)({class:["editor-exporter__instruction"]},"Select the export format");this.selector=(i=["JSON","XML"],Object.create(I).init(i)),t.append(e,this.selector.render()),this.selector.select("JSON")}var i;if(!(0,s.isHTMLElement)(this.outputName)){let e=(0,s.createLabel)({class:["editor-exporter-file__label"]}),i=(0,s.createLabel)({class:["editor-exporter-file__label-value"]},"File");this.outputName=(0,s.createInput)({placeholder:"File name",class:["editor-exporter-file__input"]}),e.append(i,this.outputName),t.append(e)}return(0,s.isHTMLElement)(this.btnExport)||(this.btnExport=(0,s.createButton)({class:["btn","btn-export"]},"Export"),t.append(this.btnExport)),t.hasChildNodes()&&(this.container.append(t),this.bindEvents()),this.refresh(),this.container},refresh(){return this},execute(){switch(this.selector.getValue()){case"JSON":this.toJSON(this.outputName.value);break;case"XML":this.toXML(this.outputName.value)}},toXML(){const{conceptModel:t}=this.editor,e=t.toXML();this.editor.download(e,`${this.outputName.value}.xml`,"XML")},toJSON(){const{conceptModel:t}=this.editor,e=JSON.stringify({concept:t.schema,values:t.export()});this.editor.download(e,`${this.outputName.value}.json`,"JSON")},isValid(){return!(0,s.isNullOrWhitespace)(this.outputName.value)},bindEvents(){this.btnClose.addEventListener("click",(t=>{this.close()})),this.btnExport.addEventListener("click",(t=>{if(!this.isValid())return(0,a.lL)(this.btnExport),void this.editor.notify("Enter the file name",a.k$.ERROR,3e3);this.execute()}))}},I={container:null,values:null,selectors:null,selected:null,value:null,init(t){return this.values=(0,s.valOrDefault)(t,[]),this.selectors=new Map,this},getValue(){return this.value},refresh(){(0,s.isNullOrUndefined)(this.value)?this.container.classList.add("empty"):this.container.classList.remove("empty")},render(){let t=!1;return(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createUnorderedList)({class:["bare-list","export-selector"]}),t=!0),this.values.forEach((t=>{let e=this.createItem(t);this.container.append(e)})),t&&this.bindEvents(),this.container},select(t){if((0,s.isNullOrUndefined)(t))return;if(!this.selectors.has(t))return;let e=this.selectors.get(t);this.setSelectedItem(e),this.value=t,this.refresh()},createItem(t){let e=(0,s.createListItem)({class:["export-selector-item"],dataset:{value:t}}),i=(0,s.createLabel)({class:["export-selector-item__label"]}),n=(0,s.createInput)({type:"radio",name:"export-choice",value:t,class:["export-selector-item__input"]});return i.append(n,t),e.append(i),this.addItem(t,e),e},addItem(t,e){return this.selectors.set(t,e),this.refresh(),this},getItem(t){return this.selectors.get(t)},setSelectedItem(t){return!(!(0,s.isHTMLElement)(t)||t.parentElement!==this.container)&&(this.selected!==t?(this.selected&&(0,a.hF)(this.selected),this.selected=t,(0,a.Ys)(this.selected),!0):void 0)},bindEvents(){this.container.addEventListener("change",(t=>{const{target:e}=t;(0,s.isNullOrUndefined)(e.value)||this.select(e.value)}))}},U={container:null,isOpen:!1,visible:!0,show(){return(0,a.$Z)(this.container),this.visible=!0,this},hide(){return(0,a.Cp)(this.container),this.visible=!1,this},toggle(){return(0,a.ZN)(this.container),this.visible=!this.visible,this},open(){return this.container.classList.add("open"),this.show(),this.isOpen=!0,this.editor.refresh(),this},close(){return this.container.classList.remove("open"),this.hide(),this.isOpen=!1,this.editor.refresh(),this}};function D(){return Object.create(N,{object:{value:"environment"},name:{value:"editor-header"},editor:{value:this}})}function H(){return Object.create(x,{object:{value:"environment"},name:{value:"editor-breadcrumb"},type:{value:"breadcrumb"},editor:{value:this}})}function P(){return Object.assign(Object.create(U,{object:{value:"environment"},name:{value:"editor-home"},type:{value:"home"},editor:{value:this}}),m)}function V(){return Object.create(A,{object:{value:"environment"},name:{value:"editor-status"},type:{value:"status"},editor:{value:this}})}function B(){return Object.assign(Object.create(U,{object:{value:"environment"},name:{value:"editor-log"},type:{value:"log"},editor:{value:this}}),E)}function R(){return Object.assign(Object.create(U,{object:{value:"environment"},name:{value:"editor-exporter"},type:{value:"exporter"},editor:{value:this}}),M)}const $={getHandlers(t){return(0,s.valOrDefault)(this.handlers.get(t),[])},triggerEvent(t,e,i=!0){const{name:n,options:a,args:r}=t,o=this.getHandlers(n),l=(0,s.isFunction)(e);let c=!1;return o.forEach((t=>{let n=t.call(this,r,a);!1!==n?i&&l&&e.call(this,n):c=!0})),!c&&(!i&&l&&e.call(this),!0)},registerHandler(t,e){return this.hasHanlder(t)||this.handlers.set(t,[]),this.handlers.get(t).push(e),!0},unregisterHandler(t,e){if(!this.hasHanlder(t))return!1;let i=this.getHandlers(t);for(let t=0;t<i.length;t++)if(i[t]===e)return i.splice(t,1),!0;return!1},hasHanlder(t){return this.handlers.has(t)},registerReceiver(t,e){(0,s.isNullOrUndefined)(this.activeReceiver[e])&&(this.activeReceiver[e]=t),(0,s.isNullOrUndefined)(this.receivers[e])&&(this.receivers[e]={root:t,projections:[]},t.isRoot=!0),this.receivers[e].projections.push(t)},saturationRevolved(t,e){console.log("Revolving"),console.log(e),console.log(this.receivers);let i,n=this.receivers[e].projections;for(let e=0;e<n.length;e++)t.id===n[e].id&&(i=e);if(i>=n.length)return void this.setActiveReceiver(t,e);let s=n[i+1].transmitFirst();console.log("Transmitting first"),console.log(s),t.acceptAnchor(s)},getActiveReceiver(t){return this.activeReceiver[t]},setActiveReceiver(t,e){this.activeReceiver[e]=t},getRootReceiver(t){return this.receivers[t].root},findReceiverInstance(t,e){let i=this.receivers[e].projections;for(let e=0;e<i.length;e++){let n=i[e].instances.get(t);if((0,s.isHTMLElement)(n))return{container:i[e],instance:n}}alert("Not Found")}};var F=n(914);const z={create(t,e){const i=Object.create(this);return i.concept=t,i.schema=e,i},model:null,schema:null,source:null,id:null,value:null,object:"structure",init(t){throw new Error("This function has not been implemented")}};Object.defineProperty(z,"model",{get(){return this.concept.model}}),Object.defineProperty(z,"name",{get(){return this.schema.name}}),Object.defineProperty(z,"required",{get(){return(0,s.valOrDefault)(this.schema.required,!0)}});const q={object:"attribute",target:null,init(t){return this.target=this.model.createConcept(this.schema.target,{value:(0,s.valOrDefault)(t,this.schema.value),parent:this.concept,ref:this}),this},getValue(){return this.target.getValue()},hasValue(){return this.target.hasValue()},setValue(t){this.target.setValue(t)},getTarget(){return this.target},copy(){return this.target.hasValue()?this.target.copy(!1):null},clone(){return this.target.hasValue()?this.target.clone():null},export(){return this.target.hasValue()?{id:this.target.id,name:this.target.name}:null},toString(){return{[`attribute.${this.name}`]:this.target.toString()}},toXML(){return this.target.hasValue()?this.target.toXML():""}},W=Object.assign(Object.create(z),q),Z={attributes:null,attributes_created:null,initAttribute(){return this.attributes=[],this.attributes_created=new Set,this.attributes_updated=new Set,this.attributes_deleted=new Set,Array.isArray(this.attributeSchema)&&this.attributeSchema.filter((t=>(0,s.valOrDefault)(t.required,!0))).forEach((t=>this.createAttribute(t.name))),this},getAttributes(){return this.attributes},getAttribute(t){if((0,s.isNullOrUndefined)(t))throw new TypeError("Bad argument");return this.getAttributeByName(t)},getAttributeSchema(t){if((0,s.isNullOrWhitespace)(t))throw new TypeError("Bad argument");if(!this.hasAttribute(t))throw new Error(`Attribute '${t}' does not exist`);return(0,s.cloneObject)(this.attributeSchema.find((e=>e.name===t)))},getAttributeByName(t){if((0,s.isNullOrWhitespace)(t))throw new TypeError("Bad argument");var e=this.attributes.find((e=>e.name===t));return(0,s.isNullOrUndefined)(e)&&(e=this.createAttribute(t)),e},createAttribute(t,e){if(!this.hasAttribute(t))throw new Error(`Attribute not found: The concept '${this.name}' does not contain an attribute named '${t}'`);if(this.isAttributeCreated(t)){let i=this.getAttributeByName(t);if(e){let t=this.model.getValue(e);i.target.initValue(t)}return i}const i=this.getAttributeSchema(t);let n=this.model.getValue(e);var s=W.create(this,i).init(n);return this.addAttribute(s),s},addAttribute(t){if((0,s.isNullOrUndefined)(t)||"attribute"!==t.object)throw new Error("Bad argument: 'attribute' must be an attribute object");return this.attributes.push(t),this.attributes_created.add(t.name),this.notify("attribute.added",t),this},hasAttributes(){return!(0,s.isEmpty)(this.attributeSchema)||!(0,s.isEmpty)(this.attributes)},hasAttribute(t){return-1!==this.attributeSchema.findIndex((e=>e.name===t))},isAttributeRequired(t){const e=this.getAttributeSchema(t);return(0,s.valOrDefault)(e.required,!0)},isAttributeCreated(t){return this.attributes_created.has(t)},listAttributes(){const t=[];return this.attributeSchema.forEach((e=>{t.push({type:"attribute",name:e.name,target:e.target,accept:e.accept,required:this.isAttributeRequired(name),created:this.isAttributeCreated(name)})})),t},removeAttribute(t){if(this.isAttributeRequired(t))return{message:`The attribute '${t}' is required.`,success:!1};var e=this.attributes.findIndex((e=>e.name===t));if(-1===e)return{message:`The attribute '${t}' was not found.`,success:!1};var i=this.attributes.splice(e,1)[0];return this.attributes_created.delete(t),this.notify("attribute.removed",i),{message:`The attribute '${t}' was successfully removed.`,success:!0}}},X={listeners:null,initObserver(){return this.listeners=[],this},register(t){return this.listeners.includes(t)||this.listeners.push(t),!0},unregister(t){var e=this.listeners.indexOf(t);return-1!==e&&(this.listeners.splice(e,1),!0)},unregisterAll(){this.listeners=[]},notify(t,e){this.listeners.forEach((i=>{i.update(t,e,this)}))}},Y={model:null,schema:null,source:null,id:null,name:null,ref:null,actions:null,operations:null,accept:null,parent:null,references:null,errors:null,value:null,values:null,action:null,shadows:null,watchers:null,kind:"concept",init(t={}){return this.accept=t.accept,this.parent=t.parent,this.ref=t.ref,this.properties=(0,s.valOrDefault)(this.schema.properties,[]),Array.isArray(t.properties)&&this.properties.push(...t.properties),this.default=(0,s.valOrDefault)(this.schema.default,null),this.values=(0,s.valOrDefault)(t.values,(0,s.valOrDefault)(this.schema.values,[])),this.src=(0,s.valOrDefault)(this.schema.src,[]),this.constraint=this.schema.constraint,this.watchers=new Map,this.errors=[],this.initObserver(),this.initAttribute(),this.initValue(t.value),this},isRoot(){return(0,s.isNullOrUndefined)(this.parent)},initValue(){throw new Error("This function has not been implemented")},getName(){return this.ref&&"attribute"===this.ref.object?this.ref.name:this.name},getCandidates(){return this.values.forEach((t=>{(0,s.isObject)(t)&&(t.type="value")})),this.values},getStructure(){return[...this.listAttributes()]},getProperty(t,e){if("refname"===t){if((0,s.isNullOrUndefined)(this.ref))return;return this.ref.name}if("name"===t)return this.name;if("value"===t)return this.value;if(!this.hasProperty(t))return;let i=this.properties.find((e=>e.name===t));const{type:n,value:a}=i;return"string"===n?G.call(this,a):"number"===n?+a:"boolean"===n?(0,s.toBoolean)(a):a},hasProperty(t){return!!["refname","name","value"].includes(t)||-1!==(0,s.valOrDefault)(this.schema.properties,[]).findIndex((e=>e.name===t))},getConstraint(t){if(this.hasConstraint(t))return this.constraint[t]},hasConstraint(t){return!(0,s.isNullOrUndefined)(this.constraint)&&(!!(0,s.isNullOrUndefined)(t)||(0,s.hasOwn)(this.constraint,t))},hasParent(){return!this.isRoot()},getParent(t){if(this.isRoot())return null;if((0,s.isNullOrWhitespace)(t))return this.parent;const e=this.parent;return e.name===t?e:e.getParent(t)},getParentWith(t){if(this.isRoot())return null;if((0,s.isNullOrWhitespace)(t))return this.parent;const e=this.parent;return e.hasPrototype(t)?e:e.getParentWith(t)},getPrototype(){return(0,s.isNullOrUndefined)(this.prototype)?null:this.prototype},hasPrototype(t){if((0,s.isNullOrUndefined)(this.schema.prototype))return!1;if((0,s.isNullOrUndefined)(t))return!0;let e=this.model.getConceptSchema(this.schema.prototype);for(;!(0,s.isNullOrUndefined)(e);){if(e.name===t)return!0;e=this.model.getConceptSchema(e.prototype)}return!1},getAncestor(t){const e=[];for(var i=this.getParent(t);i;)e.push(i),i=i.getParent(t);return e},getChildren(t){const e=[];return(0,s.isNullOrUndefined)(t)?this.getAttributes().forEach((t=>{e.push(t.target)})):this.getAttributes().forEach((i=>{i.target.name===t?e.push(i.target):e.push(...i.target.getChildren(t))})),e},getDescendant(t){const e=[];return this.getChildren(t).forEach((i=>{e.push(i),e.push(...i.getDescendant(t))})),e},propagate(t,e,i){this.watchers.has(t)&&this.signal(t,e,i),this.hasParent()&&this.getParent().propagate(t,e,i)},watch(t,e){this.watchers.has(t)||this.watchers.set(t,[]),this.watchers.get(t).push(e)},signal(t,e,i){this.watchers.has(t)&&this.watchers.get(t).forEach((t=>t(e,this)))},unwatch(t,e){if((0,s.isNullOrUndefined)(t)||!this.watchers.has(t))return!1;if(!(0,s.isFunction)(e))return this.watchers.delete(t),!0;let i=this.watchers.get(t).findIndex((t=>t===e));return-1!==i&&(this.watchers.splice(i,1),!0)},done(){this.unregisterAll(),this.watchers.clear()},delete(t=!1){if(!t){const{object:t}=this.ref;let e={success:!0};if("concept"===t?e=this.getParent().removeValue(this):"attribute"===t&&(e=this.getParent().removeAttribute(this.ref.name)),!e.success)return e}this.getChildren().forEach((t=>{t&&t.delete(!0)}));try{this.model.removeConcept(this.id)&&this.notify("delete")}catch(t){return console.error(this),{message:"Concept not found",success:!1}}return{message:`The concept '${this.name}' was successfully deleted.`,success:!0}},copy(t=!0){const e={name:this.name,nature:this.nature};var i=[];return this.getAttributes().forEach((t=>{i.push({name:t.name,value:t.copy(!1)})})),e.attributes=i,t&&this.model.addValue(e),e},clone(){const t={id:this.id,name:this.name};var e=[];return this.getAttributes().forEach((t=>{e.push({name:t.name,value:t.clone()})})),t.attributes=e,t},export(){const t={id:this.id,root:this.isRoot(),name:this.name};var e=[];return this.getAttributes().forEach((t=>{e.push({name:t.name,value:t.export()})})),t.force=this.force,t.attributes=e,t},toString(){var t={};return this.attributes.forEach((e=>{Object.assign(t,e.toString())})),t},toXML(){let t=this.getName().replace(" ","-");return`<${t} id="${this.id}">`+this.attributes.map((t=>t.toXML())).join("")+`</${t}>`},toXMI(){let t=this.getName().replace(" ","-");return`<${t} id="${this.id}">`+this.attributes.map((t=>t.toXML())).join("")+`</${t}>`}};function G(t){if((0,s.isString)(t))return t;const{type:e}=t;switch(e){case"concat":return K.call(this,t.concat)}}function J(t,e){const{type:i}=t;return"string"===i?G.call(this,t.value):"property"===i?this.getProperty(t.name):e||t}function K(t,e=""){if(!Array.isArray(t))throw new TypeError("Terms need to be an array");return t.length<2?J.call(this,t[0]):t.map((t=>J.call(this,t))).join(e)}const Q=Object.assign(Y,X,Z);Object.defineProperty(Q,"attributeSchema",{get(){return this.schema.attributes}}),Object.defineProperty(Q,"_prototype",{get(){return this.schema.prototype}}),Object.defineProperty(Q,"hasError",{get(){return this.errors&&!(0,s.isEmpty)(this.errors)}});const tt={nature:"primitive",init(t={}){return this.parent=t.parent,this.ref=t.ref,this.default=(0,s.valOrDefault)(this.schema.default,!0),this.constraint=this.schema.constraint,this.errors=[],this.initObserver(),this.initAttribute(),this.initValue(t.value),this},initValue(t){if((0,s.isNullOrUndefined)(t))return this.value=this.default,this;if((0,s.isObject)(t)){const{id:e="",value:i}=t;e.length>10&&(this.id=e),this.setValue(i)}else this.setValue(t);return this},hasValue(){return!(0,s.isNullOrUndefined)(this.value)},getValue(){return this.value},setValue(t){let e=(0,s.isObject)(t)?t.value:t;return 200!==this.validate(e)?{success:!1,message:"Validation failed: The value could not be updated."}:(this.value=(0,s.toBoolean)(e),this.notify("value.changed",e),{success:!0,message:"The value has been successfully updated."})},restore(t){const{value:e}=t;this.setValue(e)},update:(t,e)=>!0,getCandidates:()=>[!0,!1],getChildren:t=>[],validate(t){return this.errors=[],(0,s.isString)(t)&&["true","false"].includes(t.toLowerCase())||Number.isInteger(t)&&[1,0].includes(t)||[!0,!1].includes(t)?200:400},copy(t=!0){if(!this.hasValue())return null;const e={name:this.name,nature:this.nature,value:this.getValue()};return t&&this.model.addValue(e),e},clone(){return{id:this.id,name:this.name,value:this.getValue()}},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue()}},toString(){return this.value},toXML(){let t=this.getName();return`<${t} id="${this.id}">`+this.getValue()+`</${t}>`}},et=Object.assign(Object.create(Q),tt);function it(t,e){switch(t){case 400:return{success:!1,message:"The value is not a number."};case 401:return{success:!1,message:`Valid values: ${e}`};case 403:return{success:!1,message:`Maximum allowed: ${e.value}.`};case 402:return{success:!1,message:`Minimum allowed: ${e.value}.`};case 404:return{success:!1,message:`Value allowed: ${e.value}.`}}}const nt={nature:"primitive",initValue(t){if((0,s.isNullOrUndefined)(t))return this.value=this.default,this;if((0,s.isObject)(t)){const{id:e="",value:i}=t;e.length>10&&(this.id=e),this.setValue(i)}else this.setValue(t);return this},hasValue(){return"number"==typeof this.value&&!isNaN(this.value)},getValue(){return this.hasValue()?+this.value:null},setValue(t){let e=(0,s.isObject)(t)?t.value:t;const{code:i,ctx:n}=this.validate(e);return this.value!==e&&(this.value=(0,s.isNullOrWhitespace)(e)?null:+e,this.notify("value.changed",e),this.propagate("value.changed",e,this)),200!==i?{success:!1,message:"Validation failed."}:{success:!0,message:"The value has been successfully updated."}},removeValue(){return this.value=null,this.notify("value.changed",this.value),{success:!0,message:"The value has been successfully updated."}},restore(t){const{value:e}=t;this.setValue(e)},getCandidates(){return this.values.forEach((t=>{(0,s.isObject)(t)&&(t.type="value")})),this.values},getChildren:t=>[],update:(t,e)=>!0,validate(t){if(this.errors=[],isNaN(t)){let t=400;return this.errors.push(it.call(this,t).message),{code:t}}if(!this.hasConstraint())return{code:200};if(this.hasConstraint("value")){let e=this.getConstraint("value");const{type:i}=e;if("range"===i){const{min:n,max:s}=e[i];if(n&&+t<n.value){let t=402;return this.errors.push(it.call(this,t,n).message),{code:t,ctx:n}}if(s&&+t>s.value){let t=403;return this.errors.push(it.call(this,t,s).message),{code:t,ctx:s}}}else if("fixed"===i){const{value:n}=e[i];if(t!==n){let t=404;return this.errors.push(it.call(this,t,e[i]).message),{code:t,ctx:e[i]}}}}if(this.hasConstraint("values")){let e=this.getConstraint("values").map((t=>st.call(this,t))).flat(),i=!1;for(let n=0;!i&&n<e.length;n++){const a=e[n];i=(0,s.isObject)(a)?a.value===t:a===t}if(!i){let t=401;return this.errors.push(it.call(this,t,e).message),{code:t,ctx:e}}}return{code:200}},copy(t=!0){if(!this.hasValue())return null;const e={name:this.name,nature:this.nature,value:this.getValue()};return t&&this.model.addValue(e),e},clone(){return{id:this.id,name:this.name,value:this.getValue()}},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue()}},toString(){return this.value},toXML(){let t=this.getName();return`<${t} id="${this.id}">`+this.getValue()+`</${t}>`}};function st(t){if("reference"===t.type){let t=[];return this.model.isPrototype("model concept")&&(t=this.model.getConceptsByPrototype("model concept")),t.map((t=>t.getChildren(this.name))).flat().map((t=>t.value))}return t}const at=Object.assign(Object.create(Q),nt),rt={nature:"primitive",reference:null,path:null,init(t={}){return this.parent=t.parent,this.ref=t.ref,this.accept=this.schema.accept,this.path=this.schema.path,this.values=(0,s.valOrDefault)(this.schema.values,[]),this.constraint=this.schema.constraint,this.errors=[],this.initObserver(),this.initAttribute(),this.initValue(t.value),this},initValue(t){return(0,s.isNullOrUndefined)(t)||this.setValue(t.value),this},restore(t){const{value:e}=t;this.setValue(e)},hasValue(){return!(0,s.isNullOrWhitespace)(this.value)},getValue(t=!1){return(0,s.isNullOrUndefined)(this.value)?null:t?this.reference:this.value},removeValue(){return this.reference&&this.reference.unregister(this),this.reference=null,this.value=null,this.notify("value.changed",this.value),{success:!0,message:"The value has been successfully updated."}},getReference(){return(0,s.isNullOrUndefined)(this.reference)?null:this.reference},setValue(t,e=!0){let i=(0,s.isObject)(t)?t.id:t;return 200!==this.validate(i)?{success:!1,message:"Validation failed: The value could not be updated."}:(0,s.isNullOrUndefined)(i)||this.value===i?{success:!0,message:"The value has been ignored."}:(this.reference&&this.reference.unregister(this),this.value=i,this.reference=this.model.getConcept(i),console.log("This.ref"),console.log(this.reference),console.log(this),(0,s.isNullOrUndefined)(this.reference)&&e?setTimeout((()=>this.setValue(t,!1)),20):(this.reference.register(this),this.notify("value.changed",this.reference)),{success:!0,message:"The value has been successfully updated."})},getCandidates(){if((0,s.isNullOrUndefined)(this.accept))throw new Error("Bad reference: 'accept' property is not defined");var t=ot.call(this,this.accept);return this.path&&lt(this,this.path).map((t=>({type:this.accept.type,value:t}))),t},getChildren(t){return(0,s.isNullOrUndefined)(this.reference)||t&&this.reference.name!==t?[]:[this.reference]},delete(t=!1){if(!t){const{object:t}=this.ref;let e={success:!0};if("concept"===t?e=this.getParent().removeValue(this):"attribute"===t&&(e=this.getParent().removeAttribute(this.ref.name)),!e.success)return e}return this.reference&&this.reference.unregister(this),this.model.removeConcept(this.id),this.notify("delete"),{message:`The concept '${name}' was successfully deleted.`,success:!0}},update(t,e){switch(console.log("Updating"),console.log(t),t){case"delete":this.reference.unregister(this),this.value=null,this.reference=null,this.notify("value.changed",this.reference);break;case"value.changed":console.log("Received message"),this.setValue(this.value)}return!0},validate(t){return this.errors=[],(0,s.isNullOrUndefined)(t)||this.model.hasConcept(t)?200:(this.errors.push("This element is not valid"),401)},copy(t=!0){if(!this.hasValue())return null;const e={name:this.name,nature:this.nature,value:this.getValue()};return t&&this.model.addValue(e),e},clone(){return{id:this.id,name:this.name,value:this.getValue()}},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue()}},toString(){var t=[];return this.value.forEach((e=>{t.push(e.toString())})),t},toXML(){let t=this.getName();return`<${t} id="${this.id}">`+this.getValue()+`</${t}>`}};function ot(t){const{name:e,scope:i,rel:n}=t;return"parent"===n?this.getParent(i).getChildren(e):"children"===n?this.getChildren(e):this.model.isPrototype(e)?this.model.getConceptsByPrototype(e):this.model.getConcepts(e)}function lt(t,e){if((0,s.isNullOrUndefined)(e))return t;const{target:i,value:n,rel:a}=e;var r=[];return"parent"===a?r.push(t.getParentWith(i)):"children"===a?r.push(...t.getChildren(i)):"property"===a&&r.push(t.getProperty(i)),r.map((t=>lt(t,n))).flat()}const ct=Object.assign({},Q,rt),ht={SUCCESS:200,INVALID_VALUE:401,MIN_CARDINALITY_ERROR:402,MAX_CARDINALITY_ERROR:403,FIX_CARDINALITY_ERROR:404};function dt(t,e){switch(t){case ht.INVALID_VALUE:return{success:!1,message:`Valid values: ${e}`};case ht.MAX_CARDINALITY_ERROR:return{success:!1,message:`Maximum cardinality: ${this.value.length}/${e.value}.`};case ht.MIN_CARDINALITY_ERROR:return{success:!1,message:`Minimum cardinality: ${this.value.length}/${e.value}.`};case ht.FIX_CARDINALITY_ERROR:return{success:!1,message:`Fixed cardinality: ${e.value}.`};case ht.PATTERN_ERROR:return{success:!1,message:"The value is not valid."}}}const ut={nature:"primitive",init(t={}){return this.parent=t.parent,this.ref=t.ref,this.accept=this.schema.accept,this.ordered=(0,s.valOrDefault)(this.schema.ordered,!0),this.constraint=this.schema.constraint,this.watchers=new Map,this.value=[],this.initObserver(),this.initAttribute(),this.initValue(t.value),this},initValue(t){this.removeAllElement();let e=pt.call(this);if((0,s.isNullOrUndefined)(t)){let t=e;for(let e=0;e<t;e++)this.createElement();return this}const{id:i="",name:n,value:a}=t;i.length>10&&(this.id=i);for(let t=0;t<a.length;t++)this.createElement(a[t]);let r=e-a.length;for(let t=0;t<r;t++)this.createElement();return this},hasValue(){return!(0,s.isEmpty)(this.value)},getValue(t=!1){const e=this.value.map((t=>this.model.getConcept(t)));return t?e.map((t=>t.getValue())):e},removeValue(t){return this.hasValue()?(this.removeElement(t),{success:!0,message:"The value has been successfully updated."}):{success:!0,message:"The value has been successfully updated."}},isValidElement(t){const{name:e,accept:i}=this.accept;return this.model.isPrototype(e)?(0,s.isNullOrUndefined)(i)?this.model.hasPrototype(t.name,e):Array.isArray(i)?i.some((e=>e.name===t.name)):i.name===t.name:this.accept.name===t.name},setValue(t){let e=t.value||t;if(Array.isArray(e)){this.removeAllElement();for(let t=0;t<e.length;t++)this.createElement(e[t])}else this.isValidElement(e)&&this.createElement(e)},restore(t){const{value:e}=t;e.forEach(((t,e)=>{this.value.includes(t.id)||this.createElement(t)}))},getElements(){return this.value.map((t=>this.model.getConcept(t)))},getElement(t){var e=this.value.find((e=>e===t));if(!(0,s.isNullOrUndefined)(e))return this.model.getConcept(e)},getElementAt(t){if(!(t<0||t>=this.value.length))return this.model.getConcept(this.value[t])},getFirstElement(){return this.getElementAt(0)},getLastElement(){return this.getElementAt(this.count-1)},addElement(t){return!(0,s.isNullOrUndefined)(t)&&(this.value.push(t.id),t.index=this.value.length-1,t.parent=this,t.ref=this,this.validate(),this.notify("value.added",t),this.propagate("value.changed",t,this),!0)},addElementAt(t,e=0){return(0,s.isNullOrUndefined)(t)&&(t=this.createElement()),this.value.splice(e,0,t.id),this.validate(),this.notify("value.added",t),this.propagate("value.changed",t,this),this},swapElement(t,e){if(!this.ordered)return this;let i=this.value[t];this.value[t]=this.value[e],this.value[e]=i;let n=this.getElementAt(t);n.index=+t;let s=this.getElementAt(e);return s.index=+e,this.notify("value.swapped",[n,s]),this},removeElement(t){let e=(0,s.valOrDefault)(t.index,this.value.indexOf(t.id));return-1!==e&&this.removeElementAt(e)},removeElementAt(t){let e=this.getElementAt(t);if((0,s.isNullOrUndefined)(e))return{message:`The element at index '${t}' was not found.`,success:!1};e.delete(!0),this.value.splice(t,1);const i=this.getValue();for(let e=t;e<i.length;e++)i[e].index=e;return this.validate(),this.notify("value.removed",e),this.propagate("value.changed",e,this),{message:`The element '${e.name}' was successfully removed.`,success:!0}},removeAllElement(){return this.value.forEach((t=>{this.model.removeConcept(t)})),this.value=[],this.notify("value.changed",this.value),this.propagate("value.changed",this.value,this),this},createElement(t){const e={value:this.model.getValue(t),parent:this,ref:this},i=this.model.createConcept(this.accept,e);return this.addElement(i),i},getProperty(t,e){if("refname"===t)return this.ref.name;if("name"===t)return this.name;if("value"===t)return this.value;if("length"===t||"cardinality"===t)return this.value.length;let i=this.properties.find((e=>e.name===t));if((0,s.isNullOrUndefined)(i))return;const{type:n,value:a}=i;return"string"===n?a:"number"===n?+a:"boolean"===n?(0,s.toBoolean)(a):a},hasProperty(t){return!!["refname","name","value","length","cardinality"].includes(t)||-1!==this.properties.findIndex((e=>e.name===t))},getCandidates(){return mt.call(this,this.accept)},getChildren(t){if(!this.hasValue())return[];const e=this.getElements();return(0,s.isNullOrUndefined)(t)?e:e.filter((e=>e.name===t))},validate(){if(this.errors=[],!this.hasConstraint())return{code:ht.SUCCESS};if(this.hasConstraint("cardinality")){let t=this.getConstraint("cardinality");const{type:e}=t;if("range"===e){const{min:i,max:n}=t[e];if(i&&this.value.length<i.value){let t=ht.MIN_CARDINALITY_ERROR;return this.errors.push(dt.call(this,t,i).message),{code:t,ctx:i}}if(n&&this.value.length>n.value){let t=ht.MAX_CARDINALITY_ERROR;return this.errors.push(dt.call(this,t,n).message),{code:t,ctx:n}}}else if("fixed"===e){const{value:i}=t[e];if(this.value.length!==i){let i=ht.FIX_CARDINALITY_ERROR;return this.errors.push(dt.call(this,i,t[e]).message),{code:i,ctx:t[e]}}}}return{code:ht.SUCCESS}},copy(t=!0){if(!this.hasValue())return null;const e={name:this.name,nature:this.nature,value:this.getValue().map((t=>t.copy(!1)))};return t&&this.model.addValue(e),e},clone(){return{id:this.id,name:this.name,value:this.getValue().map((t=>t.clone()))}},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.value}},toString(){return this.getValue().map((t=>t.toString()))},toXML(){let t=this.getName();return`<${t} id="${this.id}">`+this.getValue().map((t=>t.toXML())).join("")+`</${t}>`}};function pt(){if(!this.hasConstraint("cardinality"))return 0;const t=this.getConstraint("cardinality"),{type:e}=t;if("range"===e){const{min:i}=t[e];return i.value}if("fixed"===e){const{value:i}=t[e];return i}return 0}function mt(t){return this.model.getConceptSchema(t)}const yt=Object.assign(Object.create(Q),ut);Object.defineProperty(yt,"count",{get(){return this.value.length}}),Object.defineProperty(yt,"canAddValue",{get:()=>!0});const gt=200,ft=405;function bt(t,e){switch(t){case 401:return{success:!1,message:`Valid values: ${e}`};case 403:return{success:!1,message:`Maximum length: ${e.value}.`};case 402:return{success:!1,message:`Minimum length: ${e.value}.`};case 404:return{success:!1,message:`Fixed length: ${e.value}.`};case ft:return{success:!1,message:"The value is not valid."};case 406:return{success:!1,message:"The value is already used."}}}const vt={nature:"primitive",initValue(t){if((0,s.isNullOrUndefined)(t))return this.value=this.default,this;if((0,s.isObject)(t)){const{id:e="",value:i}=t;e.length>10&&(this.id=e),this.setValue(i)}else this.setValue(t);return this},restore(t){const{value:e}=t;this.setValue(e)},hasValue(){return!(0,s.isNullOrWhitespace)(this.value)},getValue(){return this.value},removeValue(){return this.value=null,this.notify("value.changed",this.value),{success:!0,message:"The value has been successfully updated."}},setValue(t){let e=(0,s.isObject)(t)?t.value:t;var{code:i,ctx:n}=this.validate(e);return this.value!==e&&(this.value=e,this.notify("value.changed",e),this.propagate("value.changed",e,this)),i!==gt?{success:!1,message:"Validation failed."}:{success:!0,message:"The value has been successfully updated."}},getProperty(t,e){if("refname"===t)return this.ref.name;if("name"===t)return this.name;if("value"===t)return this.value;if("length"===t)return this.value.length;let i=this.properties.find((e=>e.name===t));if((0,s.isNullOrUndefined)(i))return;const{type:n,value:a}=i;return"string"===n?a:"number"===n?+a:"boolean"===n?(0,s.toBoolean)(a):a},hasProperty(t){return!!["refname","name","value","length"].includes(t)||-1!==this.properties.findIndex((e=>e.name===t))},getCandidates(){let t=(0,s.valOrDefault)(this.getConstraint("values"),[]);return(0,s.isEmpty)(t)?[...this.src.map((t=>{if("reference"===t.type){const{source:e,target:i}=t;let n=this.model.environment.getModel(e.name||e);if((0,s.isNullOrUndefined)(n))return null;let r=n.concept||n;if(!Array.isArray(r))return null;if(r.forEach((t=>{const e=function(t,e){var i=e;const n=[],r=e=>{let i=t.find((t=>t.name===e));if(!(0,s.isNullOrUndefined)(i))return(0,a.p$)(i)};for(;!(0,s.isNullOrUndefined)(i);){const t=(0,s.valOrDefault)(r(i),{});o=t.attributes,Array.isArray(o)&&o.forEach((t=>{const e=n.find((e=>e.name===t.name));(0,s.isNullOrUndefined)(e)?n.push(t):t.required&&(e.required=t.required)})),i=t.prototype}var o;return{attributes:n}}(r,t.prototype);t.attributes.push(...e.attributes)})),(0,s.isNullOrUndefined)(i.rel))return r.map((t=>t[i.value]));let o=xt.call(this,i,r);return(0,s.isNullOrUndefined)(o)?[]:o}if("concept"===t.type){const{concept:e,value:i}=t;let n=this.model.getConceptsByPrototype(e.prototype);return"attribute"===i.type?n.map((t=>t.getAttribute(i.name).getValue())):[]}return t}))].flat().filter((t=>!(0,s.isNullOrUndefined)(t))):t.map((t=>wt.call(this,t))).flat().filter((t=>!(0,s.isNullOrWhitespace)(t)))},getChildren:t=>[],update:(t,e)=>!0,validate(t){if(this.errors=[],(0,s.isNullOrWhitespace)(t))return{code:gt};if(!this.hasConstraint())return{code:gt};if(this.hasConstraint("length")){let e=this.getConstraint("length");const{type:i}=e;if("range"===i){const{min:n,max:s}=e[i];if(n&&t.length<n.value){let t=402;return this.errors.push(bt.call(this,t,n).message),{code:t,ctx:n}}if(s&&t.length>s.value){let t=403;return this.errors.push(bt.call(this,t,s).message),{code:t,ctx:s}}}else if("fixed"===i){const{value:n}=e[i];if(t.length!==n){let t=404;return this.errors.push(bt.call(this,t,e[i]).message),{code:t,ctx:e[i]}}}}if(this.hasConstraint("value")){let e=this.getConstraint("value");const{type:i}=e;if("pattern"===i){const{value:i,insensitive:n=!0,global:s=!0}=e.pattern;let a="";if(n&&(a+="g"),s&&(a+="i"),!new RegExp(i,a).test(t)){let t=ft;return this.errors.push(bt.call(this,t,e.pattern).message),{code:t,ctx:e.pattern}}}else if(i==="match".startsWith){const{start:n,end:s}=e[i];if(n&&!t.startsWith<n.value){let t=ft;return this.errors.push(bt.call(this,t,e.match).message),{code:t,ctx:e.match}}if(s&&t.length>s.value){let t=ft;return this.errors.push(bt.call(this,t,e.match).message),{code:t,ctx:e.match}}}else if("unique"===i){const{rel:i="parent",prototype:n}=e.unique;let s=this.getParent(),a=[];if(n?(s.hasPrototype()||(a=[]),a=this.model.getConceptsByPrototype(s._prototype)):a=this.model.getConcepts(s.name),a.some((e=>e!==s&&At(e,this.ref.name)===t))){let t=406;return this.errors.push(bt.call(this,t,e.unique).message),{code:t,ctx:e.unique}}}}if(this.hasConstraint("values")){let e=this.getConstraint("values").map((t=>wt.call(this,t))).flat(),i=!1;for(let n=0;!i&&n<e.length;n++){const a=e[n];i=(0,s.isObject)(a)?a.value===t:a===t}if(!i){let t=401;return this.errors.push(bt.call(this,t,e).message),{code:t,ctx:e}}}return{code:gt}},copy(t=!0){if(!this.hasValue())return null;const e={name:this.name,nature:this.nature,value:this.getValue()};return t&&this.model.addValue(e),e},clone(){return{id:this.id,name:this.name,value:this.getValue()}},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue()}},toString(){return this.value},toXML(){let t=this.getName();return`<${t} id="${this.id}">`+this.getValue()+`</${t}>`}};function wt(t){if("reference"===t.type){let t=[];return this.model.isPrototype("model concept")&&(t=this.model.getConceptsByPrototype("model concept")),t.map((t=>t.getChildren(this.name))).flat().map((t=>t.value))}if("meta-reference"===t.type){let t=[];return this.model.isPrototype("model concept")&&(t=this.model.getConceptsByPrototype("model concept")),t.map((t=>t.getChildren(this.name))).flat().map((t=>t.value))}return t}function xt(t,e){const{name:i,rel:n,scope:a,value:r}=t;let o=null;if("parent"===n){let t=this.getParent(i);if((0,s.isNullOrUndefined)(r))return t;if("reference"===r.type)return xt.call(t,r);if("attribute"===r.type)return t.getAttributeByName(r.name).getValue()}if("children"===n){let t=this.getChildren(i);if((0,s.isNullOrUndefined)(r))return t;if("reference"===r.type)return t.map((t=>xt.call(t,r)));if("attribute"===r.type)return t.filter((t=>Ot(t,r.name)&&jt(t,r.name))).map((t=>At(t,r.name)))}if(t.source){const{type:e,value:i}=t.source;o="reference"===e?xt.call(this,t.source):i}if((0,s.isNullOrUndefined)(o))return e.map((t=>t[i].map((t=>t[r]))));if((0,s.isIterable)(o)&&(0,s.isEmpty)(o))return[];let l=e.find((t=>Array.isArray(o)?o.includes(t.name):t.name===o));return(0,s.isNullOrUndefined)(l)||!(0,s.hasOwn)(l,i)?[]:l[i].map((t=>t[r]))}const Et=(t,e)=>t.getAttributeByName(e).target,At=(t,e)=>Et(t,e).getValue(),jt=(t,e)=>Et(t,e).hasValue(),Ot=(t,e)=>t.isAttributeCreated(e),Nt=Object.assign(Object.create(Q),vt),kt={nature:"concrete",initValue(t){if((0,s.isNullOrUndefined)(t))return!1;const{id:e="",attributes:i=[]}=t;return e.length>10&&(this.id=e),i.forEach((t=>{const{name:e,id:i,value:n}=t;this.createAttribute(e,n)})),!0},restore(t){const{attributes:e}=t;e.forEach((t=>{const{name:e,id:i,value:n}=t;this.isAttributeCreated(e)||this.createAttribute(e,n)}))},hasValue:()=>!0,getValue(){return{name:this.name,attributes:this.getAttributes().map((t=>({name:t.name,value:t.copy(!1)})))}},setValue(t){const{attributes:e=[]}=t;return e.forEach((t=>{const{name:e,id:i,value:n}=t;this.hasAttribute(e)&&this.createAttribute(e,n)})),!0}},Lt=Object.assign(Object.create(Q),kt),_t=200;function Ct(t){switch(t){case 401:return{success:!1,message:"The value is not included in the list of valid values."}}}const Tt={name:"prototype",nature:"prototype",initValue(t){if((0,s.isNullOrUndefined)(t)){if(this.default){let t=this.createConcept(this.default);this.setValue(t)}return this}const{id:e="",value:i}=t;e.length>10&&(this.id=e);let n=null;return i?(n=this.createConcept(i.name,i),this.setValue(n)):t.name&&t.attributes&&(n=this.createConcept(t.name,t),this.setValue(n)),this},getValue(t=!1){return(0,s.isNullOrUndefined)(this.value)?null:t?this.target:this.value},getTarget(){return this.target},restore(t){const{value:e}=t;if((0,s.isNullOrUndefined)(e))return;let i=this.createConcept(e.name,e);this.setValue(i)},setValue(t){let e=t.name||t;if(this.validate(e)!==_t)return{success:!1,message:"Validation failed: The value could not be updated."};let i=t;if(t&&"concept"===t.object&&(0,s.hasOwn)(t,"id")||(i=t.attributes?this.createConcept(e,t):this.createConcept(e)),this.target){let t=this.target.copy(!1);this.target.delete(!0),i.setValue(t)}return this.target=i,this.value=e,this.notify("value.changed",this.getCandidates().find((t=>t.name===this.value))),{success:!0,message:"The value has been successfully updated."}},removeValue(){return(0,s.isNullOrUndefined)(this.value)||(this.value=null,this.notify("value.changed",this.value)),{success:!0,message:"The value has been successfully updated."}},hasValue(){return!(0,s.isNullOrUndefined)(this.value)},getCandidates(){return this.candidates||(this.candidates=St.call(this,this.schema.accept).map((t=>({type:"meta-concept",name:t.name,concept:Object.create(Mt,{object:{value:"meta-concept"},type:{value:"meta-concept"},name:{value:t.name},model:{value:this.model},schema:{value:t}})})))),this.candidates},getChildren(t){if(!this.hasValue())return[];const e=[];return((0,s.isNullOrUndefined)(t)||this.target.name===t)&&e.push(this.target),e},createConcept(t,e){let i=this.model.getValue(e);const n={parent:this,ref:this};i&&(n.value=i);const s=this.model.createConcept(t,n);return s.prototype=this,s},validate(t){if((0,s.isNullOrWhitespace)(t))return _t;if((0,s.isEmpty)(this.values))return _t;var e=!1;for(let i=0;!e&&i<this.values.length;i++){const n=this.values[i];e=(0,s.isObject)(n)?n.value===t:n===t}if(!e){let t=401;return this.errors.push(Ct.call(this,t).message),t}return _t},copy(t=!0){if(!this.hasValue())return null;const e={name:this.name,nature:this.nature,value:this.target.copy(!1)};return t&&this.model.addValue(e),e},clone(){let t=null;return this.hasValue()&&(t=this.target.clone()),{id:this.id,name:this.name,value:t}},export(){let t=null;return this.hasValue()&&(t={id:this.target.id,name:this.target.name}),{id:this.id,name:this.name,root:this.isRoot(),value:t}},toXML(){if(!this.hasValue())return"";let t=this.getName();return`<${t} id="${this.id}">`+this.target.attributes.map((t=>t.toXML())).join("")+`</${t}>`}};function St(t){const e=this.model.getConcreteConcepts(this.name);return(0,s.isNullOrUndefined)(t)?e:Array.isArray(t)?e.filter((e=>t.some((t=>t.name===e.name)))):e.filter((e=>t===e.name))}const Mt={getProperty(t,e){if("refname"===t)return this.name;if("name"===t)return this.name;let i=this.properties.find((e=>e.name===t));if((0,s.isNullOrUndefined)(i))return;const{type:n,value:a}=i;return"string"===n?a:"number"===n?+a:"boolean"===n?(0,s.toBoolean)(a):a},hasPrototype(t){if((0,s.isNullOrUndefined)(this.schema.prototype))return!1;let e=this.model.getConceptSchema(this.schema.prototype);for(;!(0,s.isNullOrUndefined)(e);){if(e.name===t)return!0;e=this.model.getConceptSchema(e.prototype)}return!1}},It=Object.assign({},Q,Tt);function Ut(t){switch(t){case 401:return{success:!1,message:"The value is not included in the list of valid values."}}}const Dt={name:"meta",reference:null,initValue(t){return(0,s.isNullOrUndefined)(t)||this.setValue(t.value),this},hasValue(){return!(0,s.isNullOrWhitespace)(this.value)},getValue(){return(0,s.isNullOrUndefined)(this.value)?null:this.value},getProperty(t){const e=this.schema[t];if((0,s.isObject)(e)){const t=[];for(const i in e){const n=e[i];t.push(Object.assign({},{name:i},n))}return t}return e},setValue(t){var e=this.validate(t);return 200!==e?{success:!1,message:"Validation failed: The value could not be updated.",errors:[Ut(e).message]}:(0,s.isNullOrUndefined)(t)||this.value===t?void 0:(this.reference&&this.reference.unregister(this),this.reference=this.model.getConcept(t),this.reference.register(this),this.value=t,this.notify("value.changed",this.reference),{success:!0,message:"The value has been successfully updated."})},getChildren:t=>[],delete(t=!1){if(!t){let t=this.getParent().remove(this);if(!t.success)return t}return this.reference&&this.reference.unregister(this),this.model.removeConcept(this.id),this.notify("delete"),{message:`The concept '${name}' was successfully deleted.`,success:!0}},update(t,e){switch(t){case"delete":this.reference.unregister(this),this.value=null,this.reference=null,this.notify("value.changed",this.reference)}return!0},validate(t){return(0,s.isNullOrWhitespace)(t)||(0,s.isEmpty)(this.values),200},export(){return{id:this.id,name:this.name,value:this.value}},toString(){var t=[];return this.value.forEach((e=>{t.push(e.toString())})),t}},Ht=Object.assign({},Q,Dt);function Pt(t,e){return{object:{value:"concept"},type:{value:"concept"},model:{value:t},name:{value:e.name},base:{value:e.base},schema:{value:e,writable:!0}}}const Vt={boolean:(t,e)=>Object.create(et,Pt(t,e)),number:(t,e)=>Object.create(at,Pt(t,e)),reference:(t,e)=>Object.create(ct,Pt(t,e)),set:(t,e)=>Object.create(yt,Pt(t,e)),string:(t,e)=>Object.create(Nt,Pt(t,e)),meta:(t,e)=>Object.create(Ht,Pt(t,e))},Bt={primitive:(t,e)=>Vt[e.name](t,e),prototype:(t,e)=>Object.create(It,Pt(t,e)),concrete:(t,e)=>Object.create(Lt,Pt(t,e)),derivative:(t,e)=>Vt[e.base](t,e)},Rt={createConcept(t,e,i){const{name:n,nature:a}=e,r=Bt[a];if((0,s.isNullOrUndefined)(r))throw new Error(`Missing handler: The '${n}' concept could not be handled`);const o=r(t,e);if((0,s.isNullOrUndefined)(o))throw new Error(`Bad request: The '${n}' concept could not be created`);return o.init(i),(0,s.isNullOrUndefined)(o.id)&&(o.id=F.h.generate()),o}};var $t=0;const Ft={concepts:null,values:null,listeners:null,get hasError(){return this.concepts.some((t=>t.hasError))},init(t){return this.concepts=[],this.values=[],this.listeners=[],Array.isArray(t)&&(this.values=t,t.filter((t=>t.root)).forEach((t=>{this.createConcept({name:t.name},{value:t})})),this.values=t.filter((t=>t.id.startsWith("value")))),this},initValue(t){return console.log(t),Array.isArray(t)&&(this.values=t,t.filter((t=>t.root)).forEach((t=>{this.createConcept({name:t.name},{value:t})})),this.values=t.filter((t=>t.id.startsWith("value")))),this},done(){return this.concepts.forEach((t=>{t.done()})),this.concepts=[],!0},createConcept(t,e){const i=this.getCompleteModelConcept(t);if((0,s.isNullOrUndefined)(i))throw new Error(`Concept not found: ${t}`);var n=Rt.createConcept(this,i,e);return this.addConcept(n),n},getConcepts(t){if((0,s.isIterable)(t)){const e=Array.isArray(t)?e=>t.includes(e.name):e=>e.name===t;return this.concepts.filter((t=>e(t)))}return this.concepts.slice()},getRootConcepts(){return this.concepts.filter((t=>t.isRoot()))},getConceptsByPrototype(t){return this.concepts.filter((e=>e.hasPrototype(t)))},getConcept(t){if(!(0,s.isString)(t)||(0,s.isEmpty)(t))throw new TypeError("Bad request: The 'id' argument must be a non-empty string");return this.concepts.find((e=>e.id===t))},addConcept(t){if((0,s.isNullOrUndefined)(t))throw new TypeError("Bad request: The 'concept' argument must be a Concept");return this.concepts.push(t),t.register(this.environment),this},removeConcept(t){if(!(0,s.isObject)(t)&&!(0,s.isString)(t))throw new TypeError("Bad request: The 'id' argument must be a non-empty string");var e=this.concepts.findIndex((e=>e.id===t));return-1===e?null:this.concepts.splice(e,1)[0]},hasConcept(t){if(!(0,s.isObject)(t)&&!(0,s.isString)(t))throw new TypeError("Bad request: The 'id' argument must be a non-empty string");if((0,s.isEmpty)(this.concepts))return!1;let e=t.id||t;return t.name,this.concepts.some((t=>t.id===e))},getValues(t){if((0,s.isIterable)(t)){const e=Array.isArray(t)?e=>t.includes(e.name):e=>e.name===t;return this.values.filter((t=>e(t)))}return this.values.slice()},getValue(t){return(0,s.isNullOrUndefined)(t)?null:(0,s.hasOwn)(t,"value")||(0,s.hasOwn)(t,"attributes")?t:(0,s.hasOwn)(t,"id")?this.values.find((e=>e.id===t.id)):this.values.find((e=>e.id===t))},addValue(t){if((0,s.isNullOrUndefined)(t))throw new TypeError("Bad request: The 'value' argument must be a Value");return this.values.some((e=>{return n=t,(i=e).name===n.name&&(i.value?i.value===n.value:JSON.stringify(i.attributes)===JSON.stringify(n.attributes));var i,n}))||(t.id="value"+$t++,this.values.push(t),this.notify("value.added",t)),this},removeValue(t){if(!(0,s.isObject)(t)&&!(0,s.isString)(t))throw new TypeError("Bad request: The 'id' argument must be a non-empty string");var e=this.values.findIndex((e=>e.id===t));if(-1===e)return null;let i=this.values.splice(e,1)[0];return this.notify("value.removed",i),i},register(t){return this.listeners.includes(t)||this.listeners.push(t),!0},unregister(t){let e=this.listeners.indexOf(t);return-1!==e&&(this.listeners.splice(e,1),!0)},unregisterAll(){this.listeners=[]},notify(t,e){this.listeners.forEach((i=>{i.update(t,e)}))},isConcept(t){return!!(0,s.isString)(t)&&-1!==this.schema.findIndex((e=>e.name===t))},isConcrete(t){if(!(0,s.isString)(t))return!1;const e=this.schema.find((e=>e.name===t));return!(0,s.isNullOrUndefined)(e)&&"concrete"===e.nature},isPrototype(t){if(!(0,s.isString)(t))return!1;const e=this.schema.find((e=>e.name===t));return!(0,s.isNullOrUndefined)(e)&&"prototype"===e.nature},hasPrototype(t,e){if(!this.isConcept(t))return!1;let i=this.getConceptSchema(t);for(;!(0,s.isNullOrUndefined)(i);){if(i.prototype===e)return!0;i=this.model.getConceptSchema(i.prototype)}return!1},addConceptSchema(t){let e=t.concept||t;return this.schema.push(...e),this.environment.update("concept-model.updated"),!0},getSchema(t){if((0,s.isIterable)(t)){const e=Array.isArray(t)?e=>t.includes(e.nature):e=>e.nature===t;return this.schema.filter((t=>e(t)))}return this.schema.slice()},getConceptSchema(t){const e=Wt(this.schema,t);if(!(0,s.isNullOrUndefined)(e))return(0,a.p$)(e)},getCompleteModelConcept(t){let e=t;(0,s.isString)(t)&&(e={name:t});const i=this.getConceptSchema(e.name);if((0,s.isNullOrUndefined)(i))return;Object.assign(i,e),(0,s.hasOwn)(i,"attributes")||(i.attributes=[]);const n=zt.call(this,i.prototype);return i.attributes.push(...n.attributes),i},getConcreteConcepts(t){const e=e=>{for(var i=e.prototype;!(0,s.isNullOrUndefined)(i);){if(i===t)return!0;i=(0,s.valOrDefault)(Wt(this.schema,i),{}).prototype}return!1},i=this.schema.filter((t=>"concrete"===t.nature));return t?i.filter((t=>e(t))):i},getDerivedConcepts(t){if((0,s.isNullOrUndefined)(t))throw new TypeError("Bad argument");return this.schema.filter((e=>e.base===t))},export(){const t=[];return this.getConcepts().forEach((e=>{t.push(e.export())})),t.push(...this.getValues()),t},toString(){return JSON.stringify({[this.root.name]:this.root.toString()})},toXML(){return"<model:gentleman>"+this.getRootConcepts().map((t=>t.toXML())).join("")+"</model:gentleman>"},toXMI(){return'\n            <?xml version="1.0" encoding="ISO-8859-1"?>\n            <xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gent="geodes.sms.gentleman">\n                <gent:Model name="MindMap">\n        '+this.getRootConcepts().map((t=>t.toXMI())).join("")+"\n                </gent:Model>\n            </xmi:XMI>\n        "}};function zt(t){var e=t;const i=[];for(;!(0,s.isNullOrUndefined)(e);){const t=(0,s.valOrDefault)(this.getConceptSchema(e),{});n=t.attributes,Array.isArray(n)&&n.forEach((t=>{const e=i.find((e=>e.name===t.name));(0,s.isNullOrUndefined)(e)?i.push(t):t.required&&(e.required=t.required)})),e=t.prototype}var n;return{attributes:i}}const qt=[{name:"string",nature:"primitive"},{name:"number",nature:"primitive"},{name:"boolean",nature:"primitive"},{name:"reference",nature:"primitive"},{name:"set",nature:"primitive"}];function Wt(t,e){let i=t.find((t=>t.name===e));return(0,s.isNullOrUndefined)(i)&&(i=qt.find((t=>t.name===e))),i}const Zt=[],Xt={createModel(t,e){var i=Object.create(Ft,{schema:{value:(0,s.valOrDefault)(t,[])},environment:{value:e}});return Zt.push(i),i}};function Yt(t){const{type:e}=t;let i=this.concept||this.source;return"property"===e?(0,s.valOrDefault)(i.getProperty(t.name),""):"param"===e?this.getParam(t.name):t}const Gt={css:function(t,e){return(0,s.isIterable)(e)?(ee(t,e),t):t},ref:function(t,e){return(0,s.isIterable)(e)?(e.forEach((e=>{const{style:i={}}=(0,s.valOrDefault)(this.model.getStyleSchema(e),{});i.gss?Kt.call(this,t,i):Qt.call(this,t,i)})),t):t},gss:Qt,text:te,box:ae,html:function(t,e){return(0,s.isIterable)(e)?(e.forEach((e=>{let i=`style${(0,s.capitalizeFirstLetter)(e.name)}`;t.dataset[i]=Yt.call(this,e.value),"property"===e.value.type&&this.registerHandler("value.changed",(n=>{t.dataset[i]=Yt.call(this,e.value)}))})),t):t}},Jt={text:te,box:ae};function Kt(t,e){if(!(0,s.isObject)(e))return t;for(const i in e){const n=e[i];let a=Gt[i];(0,s.isFunction)(a)&&a.call(this,t,n)}return t}function Qt(t,e){if(!(0,s.isObject)(e))return t;for(const i in e){const n=e[i];let a=Jt[i];(0,s.isFunction)(a)&&a.call(this,t,n)}return t}function te(t,e){for(const i in e){const n=e[i];if(!1!==n)switch(i){case"bold":t.style.fontWeight=ne(n);break;case"italic":t.style.fontStyle="italic";break;case"underline":t.style.textDecoration="underline";break;case"strikethrough":t.style.textDecoration="line-through";break;case"color":t.style.color=ie(n);break;case"font":t.style.fontFamily=n.toString();break;case"size":t.style.fontSize=se(n);break;case"transform":t.style.textTransform=n}}return t}function ee(t,e){if(Array.isArray(e))t.classList.add(...e);else{let i=e.replace(/\s+/g," ").trim();(0,s.isNullOrWhitespace)(t.className)?t.className=i:ee(t,i.split(" "))}return t}function ie(t){if((0,s.isNullOrUndefined)(t))return"";const{type:e,value:i}=t;switch(e){case"rgb":return(0,s.isObject)(i)?`rgb(${i.red}, ${i.green}, ${i.blue})`:i;case"rgba":return(0,s.isObject)(i)?`rgba(${i.red}, ${i.green}, ${i.blue}, ${i.opacity/100})`:i;case"name":case"hexadecimal":return i;default:return i||t}}function ne(t){if((0,s.isNullOrUndefined)(t))return"";const{type:e,value:i}=t;return Number.isInteger(t)?`${t}`:"bold"}function se(t){if((0,s.isNullOrUndefined)(t))return"";const{value:e,unit:i}=t;return(0,s.isNullOrUndefined)(e)?"":`${e}${i}`}function ae(t,e){for(const i in e){const n=e[i];if(!1!==n)switch(i){case"inner":re.call(this,t,n,"padding");break;case"outer":re.call(this,t,n,"margin");break;case"border":ce.call(this,t,n);break;case"corner":he.call(this,t,n);break;case"background":oe.call(this,t,n);break;case"width":t.style.width=se.call(this,n);break;case"height":t.style.height=se.call(this,n);break;case"opacity":t.style.opacity=n/100;break;case"shadow":le.call(this,t,n,"shadow")}}return t}function re(t,e,i){if(!(0,s.isNullOrUndefined)(e))for(const n in e){const s=e[n];switch(n){case"all":t.style[`${[i]}`]=se.call(this,s);break;case"top":t.style[`${[i]}Top`]=se.call(this,s);break;case"right":t.style[`${[i]}Right`]=se.call(this,s);break;case"bottom":t.style[`${[i]}Bottom`]=se.call(this,s);break;case"left":t.style[`${[i]}Left`]=se.call(this,s)}}}function oe(t,e){if((0,s.isNullOrUndefined)(e))return;const{color:i,image:n}=e;i&&(t.style.backgroundColor=ie.call(this,i)),n&&(t.style.backgroundImage=`url(${n})`)}function le(t,e){if((0,s.isNullOrUndefined)(e))return null;const{offsetX:i,offsetY:n,blur:a,spread:r,inset:o=!1,color:l}=e;if((0,s.isNullOrUndefined)(i)||(0,s.isNullOrUndefined)(n))return null;let c=se.call(this,i),h=se.call(this,n),d=se.call(this,a),u=se.call(this,r),p=ie.call(this,l);t.style.boxShadow=o?`inset ${c} ${h} ${d} ${u} ${p}`.trim():`${c} ${h} ${d} ${u} ${p}`.trim()}function ce(t,e){if(!(0,s.isNullOrUndefined)(e))for(const i in e){const n=e[i];switch(i){case"all":t.style.borderStyle=(0,s.valOrDefault)(n.type,"solid"),t.style.borderWidth=se.call(this,n.width),t.style.borderColor=ie.call(this,n.color);break;case"top":t.style.borderTopStyle=(0,s.valOrDefault)(n.type,"solid"),t.style.borderTopWidth=se.call(this,n.width),t.style.borderTopColor=ie.call(this,n.color);break;case"right":t.style.borderRightStyle=(0,s.valOrDefault)(n.type,"solid"),t.style.borderRightWidth=se.call(this,n.width),t.style.borderRightColor=ie.call(this,n.color);break;case"bottom":t.style.borderBottomStyle=(0,s.valOrDefault)(n.type,"solid"),t.style.borderBottomWidth=se.call(this,n.width),t.style.borderBottomColor=ie.call(this,n.color);break;case"left":t.style.borderLeftStyle=(0,s.valOrDefault)(n.type,"solid"),t.style.borderLeftWidth=se.call(this,n.width),t.style.borderLeftColor=ie.call(this,n.color)}}}function he(t,e){if((0,s.isNullOrUndefined)(e))return null;for(const i in e){const n=e[i];switch(i){case"all":t.style.borderRadius=se.call(this,n);break;case"top-left":t.style.borderTopLeftRadius=se.call(this,n);break;case"top-right":t.style.borderTopRightRadius=se.call(this,n);break;case"bottom-right":t.style.borderBottomRightRadius=se.call(this,n);break;case"bottom-left":t.style.borderBottomLeftRadius=se.call(this,n)}}}const de={init(){throw new Error("This function has not been implemented")},element:null,statusElement:null,attached:null,children:null,readonly:!1,visible:!1,disabled:!1,active:!1,focused:!1,get hasError(){return this.source.hasError},get hasAttached(){return!(0,s.isEmpty)(this.attached)},attach(t,e){this.attached.push(t)},detach(t){this.attached.slice(this.attached.indexOf(t),1)},getAttached(t){return(0,s.isFunction)(t)?this.attached.filter((e=>t(e))):this.attached},show(){return(0,a.$Z)(this.element),this.visible=!0,this.active=!0,this},hide(){return(0,a.Cp)(this.element),this.visible=!1,this},toggle(){return(0,a.ZN)(this.container),this.visible=!this.visible,this},focus(t){return this.element.contentEditable=!1,this.element.focus(),this.focused=!0,this},getContainer(){return this.element},notify(t,e,i){(0,a.lL)(this.element),this.environment.notify(t,e)},append(t){if(!(0,s.isHTMLElement)(t))throw new TypeError("Bad argument: The 'element' argument must be an HTML Element");return this.element.append(t),this},_focusIn:t=>!1,enable(){return this.disabled=!1,this},disable(){return this.disabled=!0,this},clear:()=>!0,delete(){var t=this.source.delete();t.success?(this.clear(),(0,s.removeChildren)(this.element),this.element.remove()):(this.environment.notify(t.message),(0,a.lL)(this.element))},spaceHandler(t){return console.warn(`SPACE_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},_spaceHandler(t){return console.warn(`CTRL_SPACE_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},escapeHandler(t){return console.warn(`ESCAPE_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},enterHandler(t){this.focusOut()},deleteHandler(t){if(this.projection.element!==this)return(0,a.lL)(t),!1;if(!this.projection.optional)return(0,a.lL)(this.element),!1;let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex)),i=this.container.cloneNode(!0);this.source.hasParent()&&this.environment.save(this.source.getParent(),i),this.source.delete();let n=this.environment.resolveElement(e);return(0,s.isNullOrUndefined)(n)||n.focus(),!1},backspaceHandler(t){return console.warn(`BACKSPACE_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},arrowHandler(t,e){return console.warn(`ARROW_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},_arrowHandler(t,e){return console.warn(`CTRL_ARROW_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},clickHandler(t){return console.warn(`CLICK_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},controlHandler(t){this.toolbar&&this.toolbar.remove()},shiftHandler(t,e){return console.warn(`SHIFT_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1}},ue=Object.assign(de);function pe(t){if(!(0,s.isHTMLElement)(t))return!1;const{nature:e,id:i}=t.dataset;return"field-component"===e&&i===this.id}const me={init(){return this.elements=new Map,this},render(){const t=(0,s.createDocFragment)(),{content:e="Add",items:i}=this.schema;(0,s.isHTMLElement)(this.element)||(this.element=(0,s.createDiv)({id:this.id,class:["field","add-button"],tabindex:-1,dataset:{nature:"field",view:"list",id:this.id}}),this.readonly&&this.element.classList.add("readonly"),Kt.call(this.projection,this.element,this.schema.style));let n=(0,s.createButton)({class:["field-action","field--list__add"],tabindex:0,dataset:{nature:"field-component",view:"list",component:"action",id:this.id,action:"add"}});return(0,s.isNullOrUndefined)(i)||(this.item=i),n.append(e),t.appendChild(n),t.hasChildNodes()&&this.element.append(t),this.bindEvent(),this.element},focusIn(){},clickHandler(t){const e=(t=>pe.call(this,t)?t:(0,s.findAncestor)(t,(t=>pe.call(this,t)),5))(t);if((0,s.isNullOrUndefined)(e))return;const{action:i,index:n,name:a}=e.dataset;"add"===i?(this.parent.prio=this.element,this.createElement()):"remove"===i&&this.delete(e.parentElement),this.parent.prio=this.element},createElement(){this.source.createElement()},addItem(t){return this.parent.addItem(t,this),this},removeItem(t){this.parent.removeItem(t)},refresh(){this.element&&this.source.getValue().forEach((t=>{this.addItem(t)}))},focusOut(){},bindEvent(){this.projection.registerHandler("value.added",(t=>{this.addItem(t)})),this.projection.registerHandler("value.removed",(t=>{this.removeItem(t)}))}},ye=Object.assign(Object.create(ue),me);function ge(t,e){if(!Array.isArray(e))return!1;t.currentState=null;for(let i=0;i<e.length;i++){const n=e[i],{rule:a,result:r}=n;if((0,s.isNullOrUndefined)(a))return r;let o=!1,l=fe[a.type];if((0,s.isFunction)(l)&&(o=l.call(this,a[a.type])),o)return t.currentState=i,r}return null}const fe={ref:function(t){const{rule:e={}}=(0,s.valOrDefault)(this.model.getRuleSchema(t),{});let i=fe[e.type];return!!(0,s.isFunction)(i)&&i.call(this,e[e.type])},eq:function(t){if(!Array.isArray(t))throw new TypeError("Terms need to be an array");if(t.length<2)return null;return be.call(this,t[0])==be.call(this,t[1])},ne:function(t){if(!Array.isArray(t))throw new TypeError("Terms need to be an array");if(t.length<2)return null;return be.call(this,t[0])!=be.call(this,t[1])},lt:function(t){if(!Array.isArray(t))throw new TypeError("Terms need to be an array");if(t.length<2)return null;return be.call(this,t[0])<be.call(this,t[1])},le:function(t){if(!Array.isArray(t))throw new TypeError("Terms need to be an array");if(t.length<2)return null;return be.call(this,t[0])<=be.call(this,t[1])},gt:function(t){if(!Array.isArray(t))throw new TypeError("Terms need to be an array");if(t.length<2)return null;return be.call(this,t[0])>be.call(this,t[1])},ge:function(t){if(!Array.isArray(t))throw new TypeError("Terms need to be an array");if(t.length<2)return null;return be.call(this,t[0])>=be.call(this,t[1])},and:function(t){return ve.call(this,t[0])&&ve.call(this,t[1])},or:function(t){return ve.call(this,t[0])||ve.call(this,t[1])},not:function(t){return!ve.call(this,t[0])},no:function(t){let e=be.call(this,t);return(0,s.isIterable)(e)?(0,s.isEmpty)(e):(0,s.isNullOrUndefined)(e)}};function be(t,e){if(t&&"property"===t.type){const{name:e}=t;let i=`get${(0,s.pascalCase)(e)}`;return this[i]?this[i]():this[e]}if(t&&"param"===t.type){const{name:e}=t;return this.projection.getParam(e)}if((0,s.isObject)(t)){let e=`get${(0,s.pascalCase)(t.prop)}`;return this[e]?this[e]():this[t.prop]}return e||t}function ve(t){let e=fe[t.type];return(0,s.isFunction)(e)?e.call(this,t[t.type]):(0,s.toBoolean)(be.call(this,t))}function we(t){const{type:e}=t;return"property"===e?(this.hasProperty=!0,(0,s.valOrDefault)(this.source.getProperty(t.name),"")):"param"===e?this.projection.getParam(t.name):"html"===e?(0,s.htmlToElement)(t.html):"raw"===e?(0,s.htmlToElement)(t.raw):t}const xe={input:null,label:null,value:"",state:null,init(){const{focusable:t=!0}=this.schema;return this.focusable=t,this.children=[],this},refresh(){if((0,s.valOrDefault)(ge.call(this,this.schema,this.schema.state),this.schema),this.schema.state){let t=this.schema.state[this.getValue().toString()];if(t&&t.content){const{style:e,content:i,value:n}=t;let a=(0,s.createDocFragment)();i.forEach((t=>{a.append(Ys.call(this,t))})),(0,s.removeChildren)(this.label).append(a),Kt.call(this.projection,this.label,e)}}this.input.checked?this.element.dataset.state="on":this.element.dataset.state="off",this.hasError?(this.element.classList.add("error"),this.input.classList.add("error")):(this.element.classList.remove("error"),this.input.classList.remove("error"))},render(){const t=(0,s.createDocFragment)(),{checkbox:e}=this.schema;var i;if((0,s.isHTMLElement)(this.element)||(this.element=(i=this.id,(0,s.createDiv)({id:i,class:["field","field--binary"],tabindex:-1,dataset:{nature:"field",view:"binary",id:i}})),this.readonly&&this.element.classList.add("readonly"),Kt.call(this.projection,this.element,this.schema.style)),!(0,s.isHTMLElement)(this.input)){if(this.input=function(t){return(0,s.createInput)({id:`checkbox${t}`,type:"checkbox",class:["field--binary__input"],tabindex:0,dataset:{nature:"field-component",view:"binary",id:t}})}(this.id),this.input.checked=this.source.getValue(),this.value=this.input.checked,this.readonly&&(this.input.classList.add("readonly"),this.input.disabled=!0),e){const{style:t}=e;Kt.call(this.projection,this.input,t)}else(0,a.Cp)(this.input);t.append(this.input)}if(!(0,s.isHTMLElement)(this.label)){if(this.label=(0,s.createLabel)({class:["field--checkbox__label"],for:this.input.id,tabindex:0,dataset:{nature:"field-component",view:"binary",id:this.id}}),this.label.htmlFor=this.input.id,e&&e.label){const{content:t}=e.label;if(Array.isArray(t))t.forEach((t=>{let e=we.call(this,t),i=(0,s.createSpan)({class:["field--checkbox__label-content"],dataset:{ignore:"all"}},e);Kt.call(this.projection,i,t.style),this.label.append(i)}));else{let e=we.call(this,t);this.label.append(e)}Kt.call(this.projection,this.label,e.label.style)}t.append(this.label)}return t.hasChildNodes()&&(this.element.append(t),this.bindEvents()),this.refresh(),this.element},focusIn(){return this.focused=!0,this.value=this.input.checked,this.element.classList.add("active"),this},focusOut(){if(!this.readonly)return this.hasChanges()&&this.setValue(this.input.checked),this.messageElement&&((0,a.Cp)(this.messageElement),(0,s.removeChildren)(this.messageElement)),this.choice&&(0,a.Cp)(this.choice),this.input.blur(),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},hasChanges(){return this.value!==this.input.checked},hasValue(){return this.input.checked},getValue(){return this.input.checked},setValue(t,e=!1){var i;(i=e?this.source.setValue(t):{success:!0}).success||this.environment.notify(i.message,"error"),this.input.checked=t,this.value=t,this.refresh()},getCandidates(){return this.source.getCandidates()},enable(){this.input.disabled=!1,this.input.tabIndex=0,this.disabled=!1},disable(){this.input.disabled=!0,this.input.tabIndex=-1,this.disabled=!0},escapeHandler(t){let e=!0;if(this.messageElement&&!(0,a.xj)(this.messageElement)&&((0,a.Cp)(this.messageElement),e=!1),e){let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex));return this.environment.resolveElement(e).focus(e),!0}},backspaceHandler(t){return this.arrowHandler("left",t)},enterHandler(t){this.setValue(!this.input.checked,!0)},arrowHandler(t,e){return!!this.parent&&this.parent.arrowHandler(t,this.element)},bindEvents(){this.element.addEventListener("change",(t=>{this.setValue(this.getValue(),!0)})),this.projection.registerHandler("value.changed",(t=>{this.setValue(t)}))}},Ee=Object.assign(Object.create(ue),xe);function Ae(t){const e=t=>t.parentElement===this.choices;return e(t)?t:(0,s.findAncestor)(t,e,5)}function je(t){const{type:e}=t.dataset;return e}function Oe(t){const{type:e,value:i}=t.dataset;return"concept"===e?this.values.find((t=>t.id===i)).id:"meta-concept"===e?this.values.find((t=>t.name===i)).name:"value"===e?i:"placeholder"===e?null:i}const Ne=(t,e)=>"concept"===t.type?Ne(t.id,e):"concept"===e.type?Ne(t,e.id):"meta-concept"===t.type?Ne(t.name,e):"meta-concept"===e.type?Ne(t,e.name):t===e,ke={value:null,placeholder:null,expanded:null,values:null,choices:null,input:null,items:null,selection:null,selectList:null,selectListValue:null,icoToggle:null,init(t={}){Object.assign(this.schema,t);const{focusable:e=!0,placeholder:i=!1,expanded:n=!0}=this.schema;return this.items=new Map,this.focusable=e,this.expanded=n,this.placeholder=i,this.children=[],(0,s.hasOwn)(this.schema,"choice")||(this.schema.choice={}),(0,s.hasOwn)(this.schema.choice,"option")||(this.schema.choice.option={}),this},hasChanges(){return this.value!=this.source.getValue()},reset(){this.source.removeValue()},hasValue(){return!(0,s.isNullOrUndefined)(this.value)},getValue(){return this.selection},setValue(t,e=!1){var i=null;if(e)return(i=this.source.setValue(t)).success||this.environment.notify(i.message,a.k$.ERROR),!0;(0,s.isNullOrUndefined)(t)?(this.selection&&this.selection.classList.remove("selected"),this.expanded||(0,s.removeChildren)(this.selectListValue),this.selection=null):this.setChoice(t),(0,s.isNullOrUndefined)(t)?this.value=null:"concept"===t.type?this.value=t.id:"meta-concept"===t.type?this.value=t.name:this.value=t;const{template:n={}}=this.schema.choice.option;if(this.selection&&!this.expanded&&t)if((0,s.removeChildren)(this.selectListValue),"meta-concept"===t.type){let e=this.model.getProjectionSchema(t.concept,(0,s.valOrDefault)(n.tag))[0],i=e.type,a={type:i,[i]:e.content||e.projection},r=Ys.call(this,a,t.concept,{focusable:!1,meta:t.name});this.selectListValue.append(r)}else if("concept"===t.type){let e=this.model.createProjection(t,n.tag).init({focusable:!1});e.readonly=!0,e.focusable=!1,e.parent=this.projection,this.selectListValue.append(e.render())}else this.selectListValue.append(t.toString());this.refresh()},refresh(){return this.hasValue()?(this.element.classList.remove("empty"),this.element.dataset.value=this.value.name||this.value):(this.element.classList.add("empty"),this.element.dataset.value="",!this.expanded&&this.placeholder&&(0,s.removeChildren)(this.selectListValue).append(this.placeholder)),this.input&&(this.element.dataset.input=this.input.value),this.element.classList.remove("querying"),this.hasError?(this.element.classList.add("error"),this.input&&this.input.classList.add("error")):(this.element.classList.remove("error"),this.input&&this.input.classList.remove("error")),this},render(){const t=(0,s.createDocFragment)(),{choice:e,input:i,style:n}=this.schema;if((0,s.isHTMLElement)(this.element)||(this.element=(0,s.createDiv)({id:this.id,class:["field","field--choice"],tabindex:-1,dataset:{nature:"field",view:"choice",input:"",id:this.id}})),!(0,s.isHTMLElement)(this.input)&&i){const{placeholder:e="",type:n,style:a}=i;let r=qs.call(this,e);this.input=(0,s.createInput)({class:["field--choice__input"],type:(0,s.valOrDefault)(n,"text"),placeholder:r,title:r,dataset:{nature:"field-component",view:this.type,id:this.id}}),Kt.call(this,this.input,a),t.append(this.input)}if(!(0,s.isHTMLElement)(this.choices)){const{style:i}=e;this.choices=(0,s.createUnorderedList)({class:["bare-list","field--choice__choices"],tabindex:-1,dataset:{nature:"field-component",view:"choice",id:this.id}}),Kt.call(this,this.choices,i),t.append(this.choices)}if(!this.expanded){let e=(0,s.createDiv)({class:["field--choice__select-wrapper"],tabindex:-1,dataset:{nature:"field-component",view:"choice",id:this.id}});this.selectListValue=(0,s.createDiv)({class:["field--choice__select-value"],tabindex:-1,dataset:{nature:"field-component",view:"choice",id:this.id}}),this.icoToggle=(0,s.createI)({class:["field--choice__select-icon"],dataset:{nature:"field-component",view:"choice",id:this.id}}),e.append(this.selectListValue,this.icoToggle),this.selectList=(0,s.createDiv)({class:["field--choice__select-list","hidden"],dataset:{nature:"field-component",view:"choice",id:this.id}}),this.input&&this.selectList.append(this.input),this.selectList.append(this.choices),t.append(e),t.append(this.selectList)}if(Kt.call(this,this.element,n),t.hasChildNodes()&&(this.element.append(t),this.bindEvents()),(0,s.removeChildren)(this.choices),this.placeholder){const{style:t}=this.schema.choice.option;let e=(0,s.createListItem)({class:["field--choice__choice","field--choice__choice--placeholder"],tabindex:0,dataset:{nature:"field-component",view:"choice",id:this.id,type:"placeholder"}},this.placeholder);this.choices.append(e),Kt.call(this,e,t)}return this.values=this.source.getCandidates(),this.values.forEach((t=>{this.choices.append(this.createChoiceOption(t))})),this.source.hasValue()&&this.setValue(this.source.getValue()),this.refresh(),this.element},focus(t){if(this.expanded)if(this.choices.hasChildNodes()){let t=(0,a.sB)(this.choices);t&&t.focus()}else this.input&&!(0,a.xj)(this.input)?this.input.focus():this.selection&&this.selection.focus();else this.input&&!(0,a.xj)(this.input)?this.input.focus():this.selectListValue.focus();return this.element.classList.add("active"),this},navigate(t,e,i){let n=null;if("up"===t?n=(0,a.GV)(this.element):"down"===t?n=(0,a.Sd)(this.element):"left"===t?n=(0,a.GF)(this.element):"right"===t&&(n=(0,a.EE)(this.element)),(0,s.isNullOrUndefined)(n))return!1;n.focus()},focusIn(){this.focused=!0,this.element.classList.add("active");const t=(0,s.createDocFragment)();return this.source.getCandidates().filter((t=>!this.values.some((e=>Ne(e,t))))).forEach((e=>{t.append(this.createChoiceOption(e)),this.values.push(e)})),this.choices.append(t),this.expanded||((0,a.$Z)(this.selectList),this.selectList.dataset.state="open"),this},focusOut(){if(this.readonly)return;this.input&&(0,s.isNullOrWhitespace)(this.input.value)&&(this.input.value=""),this.messageElement&&((0,a.Cp)(this.messageElement),(0,s.removeChildren)(this.messageElement)),this.input&&this.input.blur(),this.element.classList.remove("active"),this.element.classList.remove("querying");const{children:t}=this.choices;for(let e=0;e<t.length;e++){const i=t[e];(0,a.$Z)(i),i.hidden=!1}return this.expanded||((0,a.Cp)(this.selectList),this.selectList.dataset.state="close"),this.focused=!1,this},showChoices(){const{children:t}=this.choices;for(let e=0;e<t.length;e++){const i=t[e];(0,a.$Z)(i),i.hidden=!1}},enable(){return this.input&&(this.input.disabled=!1,this.input.tabIndex=0),this.disabled=!1,this},disable(){return this.input&&(this.input.disabled=!0,this.input.tabIndex=-1),this.disabled=!0,this},filterChoice(t){const{children:e}=this.choices;if(this.element.dataset.input=t.trim(),(0,s.isNullOrWhitespace)(t)){for(let t=0;t<e.length;t++){const i=e[t];(0,a.$Z)(i),i.hidden=!1}return}this.element.classList.add("querying");let i=t.trim().toLowerCase().replace(/\s+/g," ").split(" ");for(let t=0;t<e.length;t++){const n=e[t];let s=n.textContent.toLowerCase(),r=s.replace(/[_-]+/g," ").replace(/\s+/g,"").trim();i.some((t=>s.includes(t)||r.includes(t)))?((0,a.$Z)(n),n.hidden=!1):((0,a.Cp)(n),n.hidden=!0)}return!0},createChoiceOption(t){const{template:e={},style:i}=this.schema.choice.option,n=(0,s.isObject)(t),a=(0,s.createListItem)({class:["field--choice__choice"],tabindex:0,dataset:{nature:"field-component",view:"choice",id:this.id,type:n?"concept":"value",value:n?t.id:t}});if(Kt.call(this,a,i),this.items.set(t.id,a),"meta-concept"===t.type){let i=this.model.getProjectionSchema(t.concept,(0,s.valOrDefault)(e.tag))[0],n=i.type,r={type:n,[n]:i.content||i.projection},o=Ys.call(this,r,t.concept,{focusable:!1,meta:t.name});a.dataset.type="meta-concept",a.dataset.value=t.name,a.append(o)}else if(n){if(!this.model.hasProjectionSchema(t,e.tag))return a;let i=this.model.createProjection(t,e.tag).init({focusable:!1});i.readonly=!0,i.focusable=!1,i.parent=this.projection,a.append(i.render())}else a.append(t.toString());return a},setChoice(t){const{children:e}=this.choices;let i=!1;for(let n=0;n<e.length;n++){const s=e[n];let r=Oe.call(this,s);r&&Ne(r,t)?(s.classList.add("selected"),s.dataset.selected="selected",this.selection=s,(0,a.$Z)(s),i=!0):(s.classList.remove("selected"),delete s.dataset.selected)}return this},delete(){if(this.hasValue())this.reset();else{let t=this.source.delete();t.success?(this.clear(),(0,s.removeChildren)(this.element),this.element.remove()):(this.environment.notify(t.message),(0,a.lL)(this.element))}},_spaceHandler(t){let e=this.source.getCandidates();if((0,s.isEmpty)(e))return void this.notify("No candidates found.",a.k$.INFO);const i=(0,s.createDocFragment)();if(e.forEach((t=>{i.append(this.createChoiceOption(t))})),(0,s.removeChildren)(this.choices),this.placeholder){const{style:t}=this.schema.choice.option;let e=(0,s.createListItem)({class:["field--choice__choice","field--choice__choice--placeholder"],tabindex:0,dataset:{nature:"field-component",view:"choice",id:this.id,type:"placeholder"}},this.placeholder);this.choices.append(e),Kt.call(this,e,t)}this.choices.append(i),this.filterChoice(this.input.value),(0,a.$Z)(this.choices),this.element.classList.add("querying")},escapeHandler(t){let e=!0;if(this.messageElement&&!(0,a.xj)(this.messageElement)&&((0,a.Cp)(this.messageElement),e=!1),!this.expanded&&"open"===this.selectList.dataset.state)return(0,a.Cp)(this.selectList),this.selectList.dataset.state="close",!0;if(e){let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex));return this.environment.resolveElement(e).focus(e),!0}this.focus()},enterHandler(t){const e=Ae.call(this,t);(0,s.isHTMLElement)(e)&&this.selection!==e&&("placeholder"===je(e)?this.source.removeValue():this.setValue(Oe.call(this,e),!0),this.expanded||((0,a.Cp)(this.selectList),this.selectList.dataset.state="close",this.focus()))},backspaceHandler(t){Ae.call(this,t)&&this.input&&this.input.focus()},clickHandler(t){const e=Ae.call(this,t);(0,s.isHTMLElement)(e)&&this.selection!==e?("placeholder"===je(e)?this.source.removeValue():this.setValue(Oe.call(this,e),!0),this.expanded||((0,a.Cp)(this.selectList),this.selectList.dataset.state="close")):t===this.selectListValue&&((0,a.$Z)(this.selectList),this.selectList.dataset.state="open")},arrowHandler(t,e){if(!(0,s.isHTMLElement)(e))return!1;const{parentElement:i}=e,n=()=>!!this.parent&&this.parent.arrowHandler(t,this.element);if(!this.expanded&&e===this.selectListValue)return this.arrowHandler(t,this.selectListValue.parentElement);let r=Ae.call(this,e);if(r){let e=(0,a.As)(r,t,this.choices,!1);return(0,s.isHTMLElement)(e)?(e.focus(),!0):this.arrowHandler(t,this.choices)}if(this.expanded&&i!==this.element)return n();let o=(0,a.As)(e,t,i,!1);return(0,s.isHTMLElement)(o)?(o===this.selectList&&(o=this.input||this.choices),o===this.choices&&this.choices.hasChildNodes()&&("up"===t?o=(0,a.GV)(this.choices):"down"===t?o=(0,a.Sd)(this.choices):"left"===t?o=(0,a.GF)(this.choices):"right"===t&&(o=(0,a.EE)(this.choices))),o.focus(),!0):n()},bindEvents(){(0,s.isHTMLElement)(this.input)&&this.element.addEventListener("input",(t=>{this.filterChoice(this.input.value)})),this.projection.registerHandler("value.changed",((t,e)=>{this.setValue(t)}))}},Le=Object.assign(Object.create(ue),ke),_e={init(){return this},render(){const t=(0,s.createDocFragment)(),{content:e,markers:i,marker:n,self:a}=this.schema;var r=new DOMParser;return(0,s.isHTMLElement)(this.element)||(this.element=(0,s.createDiv)({id:this.id,class:[],dataset:{nature:"field",view:"dynamic",id:this.id}})),(0,s.isHTMLElement)(this.content)||(this.content=r.parseFromString(e.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement,t.appendChild(this.content)),(0,s.isNullOrUndefined)(this.place)&&(this.place=this.content.querySelector("[data-"+n+"]")),(0,s.isNullOrUndefined)(this.markers)&&(this.markers=new Map,this.content.querySelectorAll("[data-"+n+"]").forEach((t=>{let e=t.getAttribute("data-"+n);(0,s.isNullOrUndefined)(this.markers.get(e))?this.markers.set(e,[t]):this.markers.set(e,this.markers.get(e).concat([t]))}))),(0,s.isNullOrUndefined)(this.aliases)&&(this.aliases=new Map,i.forEach((t=>{let e=[];t.aliases.forEach((t=>{let i=this.markers.get(t.mv);const n=[];i.forEach((e=>{const i={};i.target=e;let a=[];t.props.forEach((t=>{const i={};i.property=t.props,i.value=t.value,(0,s.isNullOrUndefined)(e.style)||(0,s.isNullOrUndefined)(e.style[t.props])?i.default=e[t.props]:i.default=e.style[t.props],a.push(i)})),i.impacts=a,n.push(i)})),e.push(n)})),this.aliases.set(t.mv,e)}))),(0,s.isNullOrUndefined)(this.self)&&!(0,s.isEmpty)(a)&&(this.self=[],a.forEach((t=>{const e={};e.property=t,(0,s.isNullOrUndefined)(this.place.style[t])?e.default=this.place[t]:e.default=this.place.style[t],this.self.push(e)}))),t.hasChildNodes()&&this.element.appendChild(t),this.update=this.refresh,this.clear=this.clean,this},refresh(t){let e=this.aliases.get(t.toString());(0,s.isNullOrUndefined)(e)||e.forEach((t=>{t.forEach((t=>{t.impacts.forEach((e=>{(0,s.isNullOrUndefined)(t.target[e.property])?t.target.style[e.property]=e.value:t.target[e.property]=e.value}))}))})),(0,s.isNullOrUndefined)(this.self)||this.self.forEach((e=>{(0,s.isNullOrUndefined)(this.place.style[e.property])?this.place[e.property]=t:this.place.style[e.property]=t}))},clean(t){let e=this.aliases.get(t);(0,s.isNullOrUndefined)(e)||e.forEach((t=>{t.forEach((t=>{t.impacts.forEach((e=>{(0,s.isNullOrUndefined)(t.target.style[e.property])?t.target[e.property]=e.default:t.target.style[e.property]=e.default}))}))})),(0,s.isNullOrUndefined)(this.self)||this.self.forEach((t=>{(0,s.isNullOrUndefined)(this.place.style[t.property])?this.place[t.property]=t.default:this.place.style[t.property]=t.default}))}},Ce=Object.assign(Object.create(ue),_e),Te={content:"",init(){return this},render(){const t=(0,s.createDocFragment)(),{content:e,marker:i,tag:n}=this.schema;var a=new DOMParser;return(0,s.isHTMLElement)(this.element)||(this.element=(0,s.createDiv)({id:this.id,class:[],dataset:{nature:"field",view:"interactive",id:this.id}})),(0,s.isHTMLElement)(this.content)||(this.content=a.parseFromString(e.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement,t.appendChild(this.content)),(0,s.isNullOrUndefined)(this.place)&&(this.place=this.content.querySelector("[data-"+i+"]")),(0,s.isHTMLElement)(this.field)||(0,s.isNullOrUndefined)(n)||(this.field=Ys.call(this,{type:"external",tag:n},null,this.args)),t.hasChildNodes()&&this.element.appendChild(t),this.initValue=this.update,this.bindEvents(),this.element},createForeign(){let t=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject"),i=this.place.getBBox(),n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("x",i.x),n.setAttribute("y",i.y),n.setAttribute("width",i.width),n.setAttribute("height",i.height),n.style.fill="red",e.setAttribute("width",i.width),e.setAttribute("height",i.height),t.setAttribute("width",i.width),t.setAttribute("height",i.height),t.append(e),e.append(this.field),this.place.replaceWith(t),t.setAttribute("x",120),t.setAttribute("y",50);let s=this.field.getBoundingClientRect();e.setAttribute("width",s.width),e.setAttribute("height",s.height),t.setAttribute("viewBox","0 0 "+s.width+" "+s.height)},selfUpdate(){let t;(0,s.isNullOrUndefined)(this.aliases)||(t=this.aliases.get(this.value)),(0,s.isNullOrUndefined)(t)||t.forEach((t=>{t.forEach((t=>{t.impacts.forEach((e=>{(0,s.isNullOrUndefined)(t.target[e.property])?t.target.style[e.property]=e.value:t.target[e.property]=e.value}))}))})),(0,s.isNullOrUndefined)(this.self)||this.self.forEach((t=>{(0,s.isNullOrUndefined)(this.place.style[t.property])?this.place[t.property]=this.value:this.place.style[t.property]=this.value}))},clear(){let t;(0,s.isNullOrUndefined)(this.aliases)||(t=this.aliases.get(this.value)),(0,s.isNullOrUndefined)(t)||t.forEach((t=>{t.forEach((t=>{t.impacts.forEach((e=>{(0,s.isNullOrUndefined)(t.target.style[e.property])?t.target[e.property]=e.default:t.target.style[e.property]=e.default}))}))})),(0,s.isNullOrUndefined)(this.self)||this.self.forEach((t=>{(0,s.isNullOrUndefined)(this.place.style[t.property])?this.place[t.property]=t.default:this.place.style[t.property]=t.default}))},updateStatics(){if(!(0,s.isNullOrUndefined)(this.sd)){let t=this.sd.get(this.value);(0,s.isNullOrUndefined)(t)||this.content.appendChild(t.content)}},clearStatics(){if(!(0,s.isNullOrUndefined)(this.sd)){let t=this.sd.get(this.value);(0,s.isNullOrUndefined)(t)||t.content.parentNode.removeChild(t.content)}},updateDynamics(t){(0,s.isNullOrUndefined)(this.dd)||this.dd.forEach((e=>{e.update(t)}))},clearDynamics(t){(0,s.isNullOrUndefined)(this.dd)||this.dd.forEach((e=>{e.clear(t)}))},update(t){(0,s.isNullOrUndefined)(this.value)||(this.clearStatics(),this.clearDynamics(this.value),this.clear()),""===t?this.value=this.attributeName:(0,s.isNullOrUndefined)(this.property)?this.value=t:this.value=this.translateProperty(t),this.selfUpdate(),this.updateDynamics(this.value),this.updateStatics()},bindEvents(){this.place.addEventListener("click",(t=>{(0,s.isNullOrUndefined)(this.foreign)?this.createForeign():(this.place.replaceWith(this.foreign),this.field.focus())}))},getContent(){return(0,s.isHTMLElement)(this.content)||(this.content=parser.parseFromString(content.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement),this.content},arrowHandler(t,e){return this.parent.arrowHandler(t,this)},focus(){this.focusIn()},focusIn(){this.place.replaceWith(this.foreign),this.field.focus()},focusOut(){this.foreign.replaceWith(this.place),""===this.field.value?this.update(this.attributeName):this.update(this.field.value)}},Se=Object.assign(Object.create(ue),Te),Me={content:[{type:"static",static:{type:"text",content:"+",focusable:!1}}]};function Ie(t){if(!(0,s.isHTMLElement)(t))return!1;const{nature:e,id:i}=t.dataset;return"field-component"===e&&i===this.id}function Ue(t){const e=t=>t.parentElement===this.list;return e(t)?t:(0,s.findAncestor)(t,e,3)}const De={list:null,items:null,elements:null,selection:null,content:null,init(t){const{focusable:e=!0}=this.schema;return this.items=new Map,this.elements=new Map,this.children=[],this.focusable=e,(0,s.hasOwn)(this.schema,"list")||(this.schema.list={item:{}}),this},hasChanges:()=>!1,hasValue(){return this.items.size>0},getValue(){return this.list.children},setValue(t,e=!1){e&&this.source.setValue(t),this.list&&((0,s.removeChildren)(this.list),t.forEach((t=>{var e=this.createItem(t);this.list.append(e)}))),this.refresh()},clear(){this.items.clear(),this.list&&(0,s.removeChildren)(this.list)},focus(t){if(this.hasValue()&&this.list)this.list.firstElementChild.focus();else{let t=(0,a.Sd)(this.element,(t=>t!==this.list));if(!(0,s.isHTMLElement)(t))return this;t.focus()}return this},navigate(t,e,i){let n=null;if("up"===t?n=(0,a.GV)(this.element,(t=>t!==this.notification&&t.hasChildNodes())):"down"===t?n=(0,a.Sd)(this.element,(t=>t!==this.notification&&t.hasChildNodes())):"left"===t?n=(0,a.GF)(this.element,(t=>t!==this.notification&&t.hasChildNodes())):"right"===t&&(n=(0,a.EE)(this.element,(t=>t!==this.notification&&t.hasChildNodes()))),!(0,s.isHTMLElement)(n))return!1;let r=this.environment.resolveElement(n);return!(0,s.isNullOrUndefined)(r)&&(r.focus(),!0)},focusIn(t){this.focused=!0,this.element.classList.add("active");const{component:e}=t.dataset},focusOut(){if(!this.readonly)return this.messageElement&&((0,a.Cp)(this.messageElement),(0,s.removeChildren)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},createElement(){return this.source.createElement()},getItem(t){return(0,s.isNullOrUndefined)(t)?null:(0,s.hasOwn)(t,"id")?this.items.get(t.id):this.items.get(t)},getItemIndex:t=>(0,s.isHTMLElement)(t)?t.dataset.index:null,createItem(t){const{template:e={},style:i}=this.schema.list.item;if(!this.model.hasProjectionSchema(t,e.tag))return"";let n=this.model.createProjection(t,e.tag);n.optional=!0,n.collapsible=!0,n.parent=this.projection;let s=n.init(e.options).render();return s.dataset.index=t.index,n.element.parent=this,n.registerHandler("view.changed",(t=>{Kt.call(this.projection,t,i)})),Kt.call(this.projection,s,i),this.items.set(t.id,s),s},addItem(t){if(!(0,s.isHTMLElement)(this.list))return;const e=this.createItem(t);t.index?this.list.children[t.index-1].after(e):this.list.append(e),this.refresh()},removeItem(t){this.hasList&&!(0,s.isNullOrUndefined)(t)&&(this.items.delete(t.id),this.items.forEach(((t,e)=>{let i=this.source.getElement(e);i&&(t.dataset.index=i.index)})),this.refresh())},moveItem(t,e,i=!1){return this.list.children[e].before(t),t.dataset.index=e,i&&this.source.swapElement(+this.getItemIndex(t),+e),this},swapItem(t,e,i=!1){const n=this.getItemIndex(t),s=this.getItemIndex(e);return this.moveItem(e,n),this.moveItem(t,s),i&&this.source.swapElement(+n,+s),this},delete(t){if(t===this.element)return this.environment.save(this.source.getParent()),void this.source.remove();const{index:e}=t.dataset;var i=this.source.removeElementAt(+e);if(i.success)if(this.hasValue()){let t=+e<this.list.childElementCount?+e:this.list.childElementCount-1;this.list.children[t].focus()}else this.focus();else this.environment.notify(`This element cannot be deleted: ${i.message}`),(0,a.lL)(t)},refresh(){this.hasValue()?(this.element.classList.remove("empty"),this.list&&this.list.classList.remove("empty")):(this.element.classList.add("empty"),this.list&&this.list.classList.add("empty")),this.elements.forEach(((t,e)=>{if(!Array.isArray(e.state))return;const{currentState:i}=e,n=ge.call(this,e,e.state);if(i===e.currentState)return;let a=e.content;n&&(a=n.content);let r=(0,s.createDocFragment)();a.forEach((t=>{let e=Ys.call(this,t,null,{focusable:!1});r.append(e)})),(0,s.removeChildren)(t).append(r)})),this.hasError?this.element.classList.add("error"):this.element.classList.remove("error")},render(){const t=(0,s.createDocFragment)(),{list:e,style:i,action:n={}}=this.schema;if((0,s.isHTMLElement)(this.element)||(this.element=(0,s.createDiv)({id:this.id,class:["field","field--list"],tabindex:-1,dataset:{nature:"field",view:"list",id:this.id}}),this.readonly&&this.element.classList.add("readonly"),Kt.call(this.projection,this.element,this.schema.style)),e&&!(0,s.isHTMLElement)(this.list)){const{style:i}=e;this.list=(0,s.createDiv)({class:["field--list__list"],dataset:{nature:"field-component",view:"list",id:this.id}}),this.source.hasValue()||this.list.classList.add("empty"),e.currentState=null,this.elements.set(e,this.list),Kt.call(this.projection,this.list,i),t.append(this.list)}let a=(0,s.valOrDefault)(n.add,Me);if(a){const{position:e="after",content:i,help:n,style:r}=a;let o=(0,s.createButton)({class:["field-action","field--list__add"],tabindex:0,title:n,dataset:{nature:"field-component",view:"list",component:"action",id:this.id,action:"add"}});i.forEach((t=>{let e=Ys.call(this,t,null,{focusable:!1});o.append(e)})),a.currentState=null,this.elements.set(a,o),Kt.call(this.projection,o,r),"before"===e&&this.list?this.list.before(o):t.append(o)}return this.list&&this.source.getValue().forEach((t=>{var e=this.createItem(t);this.list.append(e)})),Kt.call(this.projection,this.element,i),t.hasChildNodes()&&(this.element.append(t),this.bindEvents()),this.refresh(),this.element},_spaceHandler(t){this.notify(`Add or remove ${this.source.accept.name}`)},spaceHandler(t){return!!(0,s.isHTMLElement)(t)&&t.parentElement===this.list&&(this.createElement(),!0)},deleteHandler(t){return!(!Ie.call(this,t)||t.parentElement!==this.list||(this.delete(t),0))},escapeHandler(t){let e=!0;if(this.messageElement&&!(0,a.xj)(this.messageElement)&&((0,a.Cp)(this.messageElement),e=!1),e){let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex));return this.environment.resolveElement(e).focus(e),!0}return this.focus(),!1},enterHandler(t){const e=(t=>Ie.call(this,t)?t:(0,s.findAncestor)(t,(t=>Ie.call(this,t)),5))(t);if((0,s.isNullOrUndefined)(e))return this.focus(),!1;const{action:i,index:n,component:a}=e.dataset;return"add"===i?(this.createElement(),!0):"remove"===i&&(this.delete(e.parentElement),!0)},backspaceHandler:t=>!1,clickHandler(t){const e=(t=>Ie.call(this,t)?t:(0,s.findAncestor)(t,(t=>Ie.call(this,t)),5))(t);if((0,s.isNullOrUndefined)(e))return;const{action:i,index:n,name:a}=e.dataset;"add"===i?this.createElement():"remove"===i&&this.delete(e.parentElement)},_arrowHandler(t,e){if(!(0,s.isHTMLElement)(e))return!1;let i=Ue.call(this,e);if(i){let e=(0,a.As)(i,t,this.list);return!!(0,s.isHTMLElement)(e)&&(this.swapItem(i,e,!0),i.focus(),!0)}return!1},arrowHandler(t,e){if(!(0,s.isHTMLElement)(e))return!1;const{parentElement:i}=e,n=()=>!!this.parent&&this.parent.arrowHandler(t,this.element);if(i===this.list){let i=(0,a.As)(e,t,this.list);return(0,s.isHTMLElement)(i)?(this.environment.resolveElement(i).focus(),!0):this.arrowHandler(t,this.list)}if(i!==this.element)return n();let r=(0,a.As)(e,t,this.element);if(!(0,s.isHTMLElement)(r))return n();if(r===this.notification)return this.arrowHandler(t,r);if(r===this.list){if(!this.list.hasChildNodes())return n();"up"===t?r=(0,a.GV)(this.list):"down"===t?r=(0,a.Sd)(this.list):"left"===t?r=(0,a.GF)(this.list):"right"===t&&(r=(0,a.EE)(this.list))}return r.focus(),!0},bindEvents(){this.projection.registerHandler("value.added",(t=>{this.projection.listen&&!(0,s.isNullOrUndefined)(this.environment.activeReceiver)?this.environment.activeReceiver.addItem(t,this,this.schema.list.item.template.tag):this.addItem(t)})),this.projection.registerHandler("value.removed",(t=>{this.projection.listen&&!(0,s.isNullOrUndefined)(this.environment.activeReceiver)?this.environment.activeReceiver.removeItem(t):this.removeItem(t)})),this.projection.registerHandler("value.changed",(t=>{this.clear(),this.list&&this.source.getValue().forEach((t=>{let e=this.createItem(t);this.list.append(e)}))})),this.projection.registerHandler("value.swapped",(t=>{const[e,i]=t;let n=this.getItem(e),s=this.getItem(i),a=+this.getItemIndex(n);this.getItemIndex(s),a!==e.index&&this.swapItem(n,s)}))}},He=Object.assign(Object.create(ue),De);Object.defineProperty(He,"size",{get(){return this.items.size}}),Object.defineProperty(He,"hasList",{get(){return(0,s.isHTMLElement)(this.list)}});const Pe={init(){return this},render(){const t=(0,s.createDocFragment)(),{content:e,mv:i}=this.schema;var n=new DOMParser;return(0,s.isHTMLElement)(this.element)||(this.element=(0,s.createDiv)({id:this.id,class:[],dataset:{nature:"field",view:"static",id:this.id}})),(0,s.isHTMLElement)(this.content)||(this.content=n.parseFromString(e.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement,t.appendChild(this.content)),(0,s.isNullOrUndefined)(this.mv)&&(this.mv=i),t.hasChildNodes()&&this.element.appendChild(t),this}},Ve=Object.assign(Object.create(ue),Pe);var Be=0;const Re={content:{type:"static",static:{type:"text",content:"Add"}}},$e={content:{type:"static",static:{type:"text",content:"Remove"}}},Fe={table:null,header:null,body:null,footer:null,elements:null,contentElements:null,content:null,init(){const{content:t=[],template:e,focusable:i=!0}=this.schema;return this.elements=new Map,this.focusable=i,this.content=t,this.contentElements=new Map,this.template=this.model.getProjectionSchema(this.source.accept,e.tag)[0].projection,this},render(){const{content:t,action:e={}}=this.schema,{disposition:i}=this.template,n=(0,s.createDocFragment)();if(!Array.isArray(t))throw new Error("Empty content for listfield");if((0,s.isHTMLElement)(this.element)||(this.element=(0,s.createDiv)({class:["field","field--table"],id:this.id,tabindex:-1,dataset:{nature:"field",view:"table",id:this.id}}),this.readonly&&this.element.classList.add("readonly"),Kt.call(this.projection,this.element,this.schema.style)),t.forEach((t=>{if("table"===t.type){let e=(0,s.valOrDefault)(t.table,{});const{style:i,header:a,body:r={},footer:o}=e;if(this.table=(0,s.createTable)({class:["field--table__table"],tabindex:0,dataset:{nature:"field-component",view:"table",id:this.id}}),a){const{style:t}=a;this.header=(0,s.createTableHeader)({class:["field--table-header"],dataset:{nature:"field-component",view:"table",id:this.id}}),Kt.call(this.projection,this.header,t),this.table.append(this.header)}if(r){const{style:t}=r;this.body=(0,s.createTableBody)({class:["field--table-body"],dataset:{nature:"field-component",view:"table",id:this.id}}),Kt.call(this.projection,this.body,t),this.table.append(this.body)}if(o){const{style:t}=o;this.footer=(0,s.createTableFooter)({class:["field--table-footer"],dataset:{nature:"field-component",view:"table",id:this.id}}),Kt.call(this.projection,this.footer,t),this.table.append(this.footer)}e.currentState=null,this.contentElements.set(e,this.table),Kt.call(this.projection,this.table,i),n.append(this.table)}else if("action"===t.type){let e=(0,s.valOrDefault)(t,Re);const{content:i,style:a}=e;let r=Ys.call(this,i,null),o=(0,s.createButton)({class:["field-action","field--table__add"],tabindex:0,dataset:{nature:"field-component",view:"table",component:"action",id:this.id,action:"add"}},[r]);e.currentState=null,this.contentElements.set(e,o),Kt.call(this.projection,o,a),n.append(o)}else{let e=Ys.call(this,t);this.contentElements.set(t,e),n.append(e)}})),this.header){let t=(0,s.createTableRow)({class:["field--table-header-row"],tabindex:-1,dataset:{nature:"field-component",view:"table",id:this.id}});i.forEach((e=>{const{header:i}=e,{style:n,content:a}=i;var r=Ys.call(this,a),o=(0,s.createTableHeaderCell)({class:["field--table-header-cell"],dataset:{nature:"field-component",view:"table",id:this.id}},r);Kt.call(this.projection,o,n),t.append(o)}));let e=(0,s.createTableCell)({class:["field--table-header-cell","field--table-header-cell--action"]},"Action");t.append(e),this.header.append(t)}return this.source.hasValue()&&this.source.getValue().forEach((t=>{this.addRow(t)})),n.hasChildNodes()&&(this.element.append(n),this.bindEvents()),this.refresh(),this.element},hasChanges:()=>!1,hasValue(){return this.body.rows.length>0},getValue(){return this.body.rows},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){if(!this.readonly)return this.messageElement&&((0,a.Cp)(this.messageElement),(0,s.removeChildren)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){this.hasValue()?(this.element.classList.remove("empty"),this.table.classList.remove("empty")):(this.element.classList.add("empty"),this.table.classList.add("empty")),this.contentElements.forEach(((t,e)=>{if(!Array.isArray(e.state))return;const{currentState:i}=e,n=ge.call(this,e,e.state);if(i===e.currentState)return;let a=null;a=n?Ys.call(this,n.content,null):Ys.call(this,e.content,null),(0,s.removeChildren)(t).append(a)})),this.hasError?this.element.classList.add("error"):this.element.classList.remove("error")},createElement(){return this.source.createElement()},addRow(t){const{action:e={},before:i={},after:n={}}=this.schema,{disposition:a}=this.template,r=(0,s.valOrDefault)(t.index,this.table.rows.length),o="row"+Be++,l=(0,s.createTableRow)({class:["field--table-row"],tabindex:-1,dataset:{nature:"field-component",view:"table",id:this.id,index:r,elementId:o}});this.elements.set(o,l),a.forEach((e=>{const{body:i}=e,{style:n,content:a}=i;var r=Ys.call(this,a,t),o=(0,s.createTableCell)({class:["field--table-cell"],dataset:{nature:"field-component",view:"table",id:this.id}},r);Kt.call(this.projection,o,n),l.append(o)}));var c=(0,s.createTableCell)({class:["field--table__cell-action"]}),{content:h,style:d}=(0,s.valOrDefault)(e.remove,$e),u=Ys.call(this,h),p=(0,s.createButton)({class:["btn","field--table__button"],dataset:{nature:"field-component",view:"list",component:"action",id:this.id,action:"remove",rowId:o}},u),m=(0,s.createButton)({class:["btn","field--table__button"],dataset:{nature:"field-component",id:this.id,action:"move-up",rowId:o}},"Move up"),y=(0,s.createButton)({class:["btn","field--table__button"],dataset:{nature:"field-component",id:this.id,action:"move-down",rowId:o}},"Move down");Kt.call(this.projection,p,d),c.append(p,m,y),l.append(c),this.body.append(l),this.refresh()},removeRow(t){var e=this.body.rows.item(t.index);if(!(0,s.isHTMLElement)(e))throw new Error("Table error: Row not found");(0,s.removeChildren)(e),e.remove();for(let e=t.index;e<this.body.rows.length;e++){const t=this.body.rows.item(e),{index:i}=t.dataset;t.dataset.index=+i-1}this.refresh()},removeElement(t){return this.source.removeElement(t)},delete(t){if(t===this.element||t===this.table)return void this.source.delete();const{index:e}=t.dataset;this.source.removeElementAt(+e)||(this.environment.notify("This element cannot be deleted"),(0,a.lL)(t))},bindEvents(){this.element.addEventListener("click",(t=>{const{target:e}=t,i=function(t){const e="field-component";return t.dataset.nature===e?t:(0,s.findAncestor)(t,(t=>t.dataset.nature===e))}(e);if(!(0,s.isHTMLElement)(i))return;const{id:n,action:a}=i.dataset;if(n===this.id)if("add"===a)this.createElement();else if("remove"===a){const{rowId:t}=i.dataset;let e=this.elements.get(t);this.delete(e)}else if("move-up"===a){const{rowId:t}=i.dataset;let e=this.elements.get(t),n=e.previousElementSibling;n&&n.before(e)}else if("move-down"===a){const{rowId:t}=i.dataset;let e=this.elements.get(t),n=e.nextElementSibling;n&&n.after(e)}}),!0),this.projection.registerHandler("value.added",(t=>{this.addRow(t)})),this.projection.registerHandler("value.removed",(t=>{this.removeRow(t)})),this.projection.registerHandler("value.changed",(t=>{(0,s.removeChildren)(this.body),this.source.getValue().forEach((t=>{this.addRow(t)}))}))}},ze=Object.assign(Object.create(ue),Fe),qe=t=>(0,s.isHTMLElement)(t,["input","textarea"]),We="error";function Ze(){return(0,s.isHTMLElement)(this.choice)||(this.choice=(0,s.createUnorderedList)({class:["bare-list","field--textbox__choices"],dataset:{nature:"field-component",view:"text",component:"choice",id:this.id}}),this.append(this.choice)),this.choice}function Xe(t){return(0,s.createListItem)({class:["field--textbox__choice"],tabindex:0,dataset:{nature:"field-component",view:"text",component:"choice-item",value:t,id:this.id}},t)}function Ye(t){return t.parentElement===this.choice?t:(0,s.findAncestor)(t,(t=>t.parentElement===this.choice),3)}function Ge(t){const{placeholder:e="",type:i}=t;let n="";return n=this._placeholder?(0,s.valOrDefault)(qs.call(this,this._placeholder),""):(0,s.valOrDefault)(qs.call(this,e),""),this.readonly||this.resizable?(0,s.createSpan)({class:["field--textbox__input","field--textbox__input-pseudo"],editable:!this.readonly,title:n,dataset:{placeholder:n,nature:"field-component",view:this.type,id:this.id}}):this.multiline?(0,s.createTextArea)({class:["field--textbox__input"],placeholder:n,title:n,dataset:{nature:"field-component",view:this.type,id:this.id}}):(0,s.createInput)({class:["field--textbox__input"],type:(0,s.valOrDefault)(i,"text"),placeholder:n,title:n,dataset:{nature:"field-component",view:this.type,id:this.id}})}const Je={input:null,choice:null,value:"",placeholder:null,multiline:!1,resizable:!1,content:null,hasOwnSource:!1,init(t={}){Object.assign(this.schema,t);const{multiline:e=!1,placeholder:i="",resizable:n=!1,focusable:a=!0,source:r}=this.schema;if(this.multiline=e,this.focusable=a,this.resizable=n,this.children=[],this._placeholder=i,r){const t=this.projection.concept.getAttribute(r).getTarget();t.register(this),this.source=t,this.hasOwnSource=!0}return(0,s.hasOwn)(this.schema,"choice")||(this.schema.choice={}),this},focus(t){return this.input.focus(),this},focusIn(){return this.focused=!0,this.value=this.getValue(),this.element.classList.add("active"),this.element.classList.add("focus"),this},focusOut(){return this.hasChanges()&&this.setValue(this.getValue(),!0),(0,s.isNullOrWhitespace)(this.getValue())&&(this.input.textContent=""),this.messageElement&&((0,a.Cp)(this.messageElement),(0,s.removeChildren)(this.messageElement)),this.choice&&(0,a.Cp)(this.choice),this.input.blur(),this.element.classList.remove("active"),this.element.classList.remove("focus"),this.refresh(),this.focused=!1,this},hasChanges(){return this.value!=this.getValue()},hasValue(){return!(0,s.isEmpty)(this.getValue())},getValue(){return qe(this.input)?this.input.value:this.input.textContent},setValue(t,e=!1){var i;(i=e?this.source.setValue(t):{success:!0}).success||((0,a.lL)(this.element),this.environment.notify(i.message,"error")),this.setInputValue(t),this.value=t,this.refresh()},setInputValue(t){qe(this.input)?this.input.value=t:this.input.textContent=t},getCandidates(){let t=this.source.getCandidates();return Array.isArray(t)?t:[]},enable(){return this.input.disabled=!1,this.input.tabIndex=0,this.disabled=!1,this.element.classList.add("disabled"),this},disable(){return this.input.disabled=!0,this.input.tabIndex=-1,this.disabled=!0,this.element.classList.remove("disabled"),this},refresh(){ge.call(this,this.schema,this.schema.state),this.hasValue()?this.element.classList.remove("empty"):this.element.classList.add("empty"),this.element.dataset.value=this.value,this.hasError?(this.element.classList.add(We),this.input.classList.add(We)):(this.element.classList.remove(We),this.input.classList.remove(We)),this.choice&&this.filterChoice(this.getValue())},render(){const t=(0,s.createDocFragment)(),{container:e,input:i={},style:n}=this.schema;if((0,s.isHTMLElement)(this.element)||(this.element=(0,s.createDiv)({id:this.id,class:["field","text-field","field--textbox"],dataset:{nature:"field",view:"text",id:this.id,disabled:this.disabled,readonly:this.readonly,value:""}}),this.readonly&&this.element.classList.add("readonly"),this.disabled&&this.element.classList.add("disabled"),Kt.call(this.projection,this.element,this.schema.style)),e){const{content:i=[],style:n}=e;i.forEach((e=>{if("input"===e.type){const{style:i}=e.input;this.input=Ge.call(this,e.input),this.disabled&&(this.input.disabled=!0),this.focusable?this.input.tabIndex=0:this.input.dataset.ignore="all",Kt.call(this.projection,this.input,i),this.multiline&&this.input.classList.add("field--textbox__input--multiline"),t.append(this.input)}else{let i=Ys.call(this,e,null,{focusable:!1});t.append(i)}})),Kt.call(this.projection,this.element,n)}else{if(!(0,s.isHTMLElement)(this.input)){const{style:e}=i;this.input=Ge.call(this,i),this.disabled&&(this.input.disabled=!0),this.focusable?this.input.tabIndex=0:this.input.dataset.ignore="all",Kt.call(this,this.input,e),this.multiline&&this.input.classList.add("field--textbox__input--multiline"),t.append(this.input)}Kt.call(this.projection,this.element,n)}return t.hasChildNodes()&&(this.element.append(t),this.bindEvents()),this.source.hasValue()&&this.setValue(this.source.getValue()),this.refresh(),this.element},filterChoice(t){const{children:e}=this.choice;if((0,s.isNullOrWhitespace)(t)){for(let t=0;t<e.length;t++){const i=e[t];(0,a.$Z)(i),i.hidden=!1}return!0}let i=t.trim().toLowerCase().replace(/\s+/g," ").split(" ");for(let t=0;t<e.length;t++){const n=e[t],{value:s}=n.dataset;i.some((t=>s.toLowerCase().includes(t)))?((0,a.$Z)(n),n.hidden=!1):((0,a.Cp)(n),n.hidden=!0)}return!0},selectChoice(t){if(!(0,s.isHTMLElement)(t))return;const e=function(t){return t.dataset.value}(t);return this.setValue(e,!0),this.input.focus(),(0,a.Cp)(this.choice),this},update(t,e,i){"delete"!==t?"value.changed"===t&&this.setValue(e):this.delete()},_spaceHandler(t){const e=new Set(this.getCandidates());if(0===e.size)this.notify("Enter any text.",a.k$.INFO);else{Ze.call(this);const t=(0,s.createDocFragment)();e.forEach((e=>t.append(Xe.call(this,e)))),(0,s.removeChildren)(this.choice).append(t),this.filterChoice(this.getValue()),(0,a.$Z)(this.choice)}},escapeHandler(t){let e=!0;if(this.messageElement&&!(0,a.xj)(this.messageElement)&&((0,a.Cp)(this.messageElement),e=!1),this.choice&&!(0,a.xj)(this.choice)&&((0,a.Cp)(this.choice),e=!1),e){let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex)),i=this.environment.resolveElement(e);return i&&i.focus(e),!1}return this.input.focus(),!0},enterHandler(t){const e=Ye.call(this,t);return e?this.selectChoice(e):this.multiline||(t===this.input?this.setValue(this.getValue(),!0):this.focus()),!0},backspaceHandler(t){Ye.call(this,t)&&this.input.focus()},clickHandler(t){const e=Ye.call(this,t);(0,s.isHTMLElement)(e)&&this.selectChoice(e)},arrowHandler(t,e){if(!(0,s.isHTMLElement)(e))return!1;const{parentElement:i}=e,n=()=>!!this.parent&&this.parent.arrowHandler(t,this.element);let r=Ye.call(this,e);if((0,s.isHTMLElement)(r)){let e=(0,a.As)(r,t,this.choice);return(0,s.isHTMLElement)(e)?(e.focus(),!0):this.arrowHandler(t,this.choice)}if(i!==this.element)return n();let o=null;if("right"===t){if(e===this.input&&!(this.getValue().length<(0,a.qO)(this.input)+1))return!1;o=(0,a.As)(e,t,this.element,!1)}else if("left"===t){if(e===this.input&&0!==(0,a.qO)(this.input))return!1;o=(0,a.As)(e,t,this.element,!1)}else o=(0,a.As)(e,t,this.element,!1);return(0,s.isHTMLElement)(o)&&o.dataset.id===this.id?("up"===t?o=(0,a.GV)(this.choice):"down"===t?o=(0,a.Sd)(this.choice):"left"===t?o=(0,a.GF)(this.choice):"right"===t&&(o=(0,a.EE)(this.choice)),o.focus(),!0):n()},bindEvents(){this.element.addEventListener("input",(t=>{this.hasError&&this.source.setValue(this.getValue(),!0),this.refresh()})),this.hasOwnSource||this.projection.registerHandler("value.changed",(t=>{this.setValue(t)}))}},Ke=Object.assign(Object.create(ue),Je);var Qe=n(185);const ti={init(){const{arrowStyle:t=null,path:e,attach:i={}}=this.schema;return(0,s.isNullOrUndefined)(t)?this.arrowStyle={}:this.arrowStyle=t,e&&(this.meet=e.meet),i&&(this.attach=i.type),this},render(){const{reference:t,decorator:e=!1}=this.schema;if((0,s.isHTMLElement)(this.element)||(this.element=document.createElementNS("http://www.w3.org/2000/svg","path"),this.element.style.fill="transparent",this.element.id=this.id,this.element.classList.add("field"),this.element.tabindex=-1,this.element.dataset.nature="field",this.element.dataset.view="arrow",this.element.dataset.id=this.id),(0,s.isNullOrUndefined)(this.reference))switch(t.type){case"multiple":this.reference=this.source.getAttributeByName(t.listen).target,this.multiple=!0;break;case"duo":this.from=this.source.getAttributeByName(t.from).target,this.to=this.source.getAttributeByName(t.to).target,this.multiple=!1}return this.computeStyle(),this.bindEvent(),this.element},getStyle(){},signal(){(0,s.isNullOrUndefined)(this.valSource)||(0,s.isNullOrUndefined)(this.valTarget)||this.projection.parent.accept(this.valSource,this.valTarget,this)},computeStyle(){const{stroke:t="black",dasharray:e=null,width:i=1,linecap:n="butt",end:a=!1,start:r=!1}=this.arrowStyle;this.element.style.stroke=t,(0,s.isNullOrUndefined)(e)||(this.element.style["stroke-dasharray"]=e),this.element.style["stroke-width"]=(0,s.valOrDefault)(i,5),this.element.style["stroke-linecap"]=n,a&&this.createMarkerEnd()},createMarkerEnd(){(0,s.isNullOrUndefined)(this.definitions)&&(this.definitions=document.createElementNS("http://www.w3.org/2000/svg","defs")),this.end=document.createElementNS("http://www.w3.org/2000/svg","marker"),this.end.id="marker"+this.id,this.end.setAttribute("refY",5),this.end.setAttribute("refX",10),this.end.setAttribute("markerUnit","strokeWidth"),this.end.setAttribute("markerWidth",10),this.end.setAttribute("markerHeight",10),this.end.setAttribute("orient","auto"),this.end.classList.add("end");let t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),t.setAttribute("fill","black"),this.end.appendChild(t),this.definitions.appendChild(this.end),this.path.setAttribute("marker-end","url(#"+this.end.id+")")},createMarkerStart(){(0,s.isNullOrUndefined)(this.definitions)&&(this.definitions=document.createElementNS("http://www.w3.org/2000/svg","defs")),this.start=document.createElementNS("http://www.w3.org/2000/svg","marker"),this.start.id="marker"+this.id,this.start.setAttribute("refY",5),this.start.setAttribute("refX",1),this.start.setAttribute("markerUnit","strokeWidth"),this.start.setAttribute("markerWidth",10),this.start.setAttribute("markerHeight",10),this.start.setAttribute("orient","auto"),this.start.classList.add("start");let t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),t.setAttribute("fill","black"),this.start.appendChild(t),this.definitions.appendChild(this.end),this.element.setAttribute("marker-start","url(#"+this.end.id+")")},setValues(){(0,s.isNullOrUndefined)(this.source.getAttributeByName("target").target.value)||(this.valTarget=this.source.getAttributeByName("target").target.value),(0,s.isNullOrUndefined)(this.source.getAttributeByName("source").target.value)||(this.valSource=this.source.getAttributeByName("source").target.value)},refresh(){this.setValues(),this.updateRegister(),this.signal()},deleteRef(t,e){this.valTarget!==t.id&&this.valSource!==t.id||this.projection.parent.removeArrow(this,e)},setLine(t,e){this.element.setAttribute("d","M "+t.x+", "+t.y+"L "+e.x+", "+e.y)},setPath(t){this.element.setAttribute("d",t)},updateRegister(){for(let t=0;t<this.registered.length;t++)this.registered[t]={name:this.registered[t].name,value:this.source.getAttributeByName(this.registered[t].name).target.value}},register(t){(0,s.isNullOrUndefined)(this.getAttribute)&&(this.registered.push({name:t,value:this.source.getAttributeByName(t).target.value}),this.source.getAttributeByName(t).target.register(this.projection),this.projection.registerHandler("value.added",(t=>{this.refresh()})))},get(t){for(let e=0;e<this.registered.length;e++)if(this.registered[e].name===t)return this.registered[e].value},registerValue(t){(0,s.isNullOrUndefined)(this.registered)&&(this.registered=[]),t.register(this),this.registered.push({concept:t,currentVal:t.value})},update(t,e){switch(t){case"value.changed":this.updatePath(e)}},updatePath(){this.lineUpdate(),this.parent.container.append(this.element)},updatePathDuo(){switch(this.attach){case"anchor":this.anchorAttach()}},anchorAttach(){this.occupied&&Qe.AnchorHandler.freeOccupation(this),this.occupant&&this.occupant.removeAnchor(this);let t=this.parent.container.querySelector('[data-concept="'+this.valueF+'"]'),e=this.parent.container.querySelector('[data-concept="'+this.valueT+'"]'),i=Qe.AnchorHandler.findCommonIndex(t.dataset.id,e.dataset.id,this.occupant,this),n=Qe.AnchorHandler.getAnchorAt(t.dataset.id,i),s=Qe.AnchorHandler.getAnchorAt(e.dataset.id,i),a=t.getBoundingClientRect(),r=this.parent.container.createSVGPoint();r.x=a.x+n.x,r.y=a.y+n.y;let o=r.matrixTransform(this.parent.container.getScreenCTM().inverse());a=e.getBoundingClientRect(),r.x=a.x+s.x,r.y=a.y+s.y;let l=r.matrixTransform(this.parent.container.getScreenCTM().inverse());this.setPath("M "+o.x+" "+o.y+" L "+l.x+" "+l.y),this.parent.container.append(this.element),this.occupant&&this.occupant.accept(this,o,l,i),Qe.AnchorHandler.registerOccupation(this,i,t.dataset.id,e.dataset.id),this.occupied=!0},forceAnchor(t){let e=this.parent.container.querySelector('[data-concept="'+this.valueF+'"]'),i=this.parent.container.querySelector('[data-concept="'+this.valueT+'"]'),n=Qe.AnchorHandler.getAnchorAt(e.dataset.id,t),s=Qe.AnchorHandler.getAnchorAt(i.dataset.id,t),a=e.getBoundingClientRect(),r=this.parent.container.createSVGPoint();r.x=a.x+n.x,r.y=a.y+n.y;let o=r.matrixTransform(this.parent.container.getScreenCTM().inverse());a=i.getBoundingClientRect(),r.x=a.x+s.x,r.y=a.y+s.y;let l=r.matrixTransform(this.parent.container.getScreenCTM().inverse());return this.setPath("M "+o.x+" "+o.y+" L "+l.x+" "+l.y),this.parent.container.append(this.element),this.occupant&&this.occupant.accept(this,o,l,t),Qe.AnchorHandler.registerOccupation(this,t,e.dataset.id,i.dataset.id),this.occupied=!0,{e:this,from:e.dataset.id,to:i.dataset.id,index:t}},lineUpdate(){let t=this.targetInformations();switch(this.meet){case"minY":let e=t[0].y,i=t[0];for(let n=1;n<t.length;n++){let s=t[n].y;s<e&&(e=s,i=t[n])}this.computeLineMin(t,t[0],i)}},computeLineMin(t,e,i,n){let a=e.x,r=i.x,o=e.y,l=(o-i.y)/(a-r),c=o-l*a;(0,s.isNullOrUndefined)(n)||(c-=n);for(let n=0;n<t.length;n++){let s=l*t[n].x+c;if(s>t[n].y)return this.computeLineMin(t,e,i,s-t[n].y)}let h="M "+(a-.5)+" "+(r*l+c)+" L "+(t[t.length-1].x+.5)+" "+(r*l+c);this.setPath(h),(0,s.isNullOrUndefined)(this.subPath)&&(this.subPath=[]),(0,s.isEmpty)(this.subPath)||(this.subPath.forEach((t=>{t.remove()})),this.subPath=[]);let d=r*l+c;for(let e=0;e<t.length;e++)if(t[e].y>d){let i=document.createElementNS("http://www.w3.org/2000/svg","line");i.classList.add("subPath"),this.subPath.push(i),i.setAttribute("x1",t[e].x),i.setAttribute("x2",t[e].x),i.setAttribute("y1",t[e].y),i.setAttribute("y2",d),this.parent.container.append(i),i.style["stroke-width"]=.75,i.setAttribute("stroke","black")}},targetInformations(){let t=[],e=!1;return this.registered.forEach((i=>{let n=i.concept.value;if((0,s.isNullOrUndefined)(n))return void(e=!0);let a=this.parent.container.querySelector('[data-concept="'+n+'"]'),r=this.projection.resolveElement(a),o=this.parent.container.createSVGPoint(),l=a.getBoundingClientRect();o.x=l.x,o.y=l.y;let c=o.matrixTransform(this.parent.container.getScreenCTM().inverse());(0,s.isNullOrUndefined)(r.schema.arrowAnchor)||(c.x+=r.schema.arrowAnchor.x,c.y+=r.schema.arrowAnchor.y),t.push({x:c.x,y:c.y})})),!e&&t},duoUpdate(){this.valueF=this.from.value,this.valueT=this.to.value,(0,s.isNullOrUndefined)(this.valueF)||(0,s.isNullOrUndefined)(this.valueT)||this.updatePathDuo()},updatePosition(t){let e=this.projection.resolveElement(this.projection.parent.findItem(t.id).render),i=this.projection.resolveElement(this.projection.parent.findAncestor(this.bind.container).render),n=i.findAnchorIndex(this.bind.container),s=e.findAnchor(n),a=i.findAnchor(n);const r=Number(i.container.getAttribute("x"))+a.x,o=Number(i.container.getAttribute("y"))+a.y,l=Number(e.container.getAttribute("x"))+s.x,c=Number(e.container.getAttribute("y"))+s.y;this.element.setAttribute("d","M "+r+" "+o+" L "+l+" "+c),this.projection.parent.container.append(this.element)},bindProj(t){this.bind=t;const e=this.schema.reference.target;this.objectiv=this.source.getAttributeByName(e).target,this.objectiv.register(this.projection),this.projection.registerHandler("value.changed",(t=>{this.updatePosition(t)}))},bindEvent(){switch(this.schema.reference.type){case"duo":this.from.register(this.projection),this.to.register(this.projection),this.projection.registerHandler("value.changed",(t=>{this.duoUpdate()}));break;case"multiple":this.reference.register(this.projection),this.projection.registerHandler("value.added",(t=>{this.registerValue(t)}))}}},ei=Object.assign(Object.create(ue),ti),ii={init(t){if(!(0,s.isNullOrUndefined)(t)){const{focusable:e=!1}=t;this.focusable=e}return this},render(){const{placeholder:t,style:e,readonly:i,breakDown:n=!1}=this.schema;return(0,s.isNullOrUndefined)(this.element)&&(this.element=document.createElementNS("http://www.w3.org/2000/svg","text"),this.element.id=this.id,this.element.classList.add("field"),this.element.tabindex=-1,this.element.dataset.nature="field",this.element.dataset.view="svg",this.element.style["dominant-baseline"]="hanging",this.element.dataset.id=this.id,this.element.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")),this.source.hasValue()?this.content=this.source.getValue().toString():this.content=t,n&&(this.breakDown=n),this.breakDown?this.element.textContent=this.content.substring(0,n):this.element.textContent=this.content,this.caps=!1,this.readonly=i,this.bindEvents(),this.style(),this.element},registerDimensionsObserver(t){(0,s.isNullOrUndefined)(this.observers)&&(this.observers=[]),this.observers.push(t)},setActiveChar(t,e,i){let{target:n,end:s=!1}=this.findChar(e,i);this.index=n,this.end=s,this.char=s?this.element.getEndPositionOfChar(n):this.element.getStartPositionOfChar(n),this.createCursor(),this.switchOn(),this.addListeners()},style(){const{font:t,size:e,anchor:i="left",weight:n,baseline:s}=this.schema.style;this.element.setAttribute("text-anchor",i),this.element.setAttribute("font-family",t),this.element.setAttribute("font-size",e),this.element.style["dominant-baseline"]=s,n&&this.element.setAttribute("font-weight",n),this.baseline=s,this.size=e},setValue(){"number"===this.source.name?this.source.setValue(Number(this.content)):this.source.setValue(this.content)},addListeners(){this.element.addEventListener("keydown",(t=>{let e=t.keyCode;if(27===e)return""===this.content&&(this.content=this.schema.placeholder,this.element.textContent=this.content),this.setValue(this.content),void this.switchOff();if(t.stopPropagation(),e!==this.lastKey||!this.repeat){switch(e){case 8:0===this.index&&this.end&&""!==this.content&&(this.content="",this.element.textContent=""),this.index>0&&(this.end?(this.content=this.content.slice(0,this.index),this.element.textContent=this.content):(this.content=this.content.slice(0,this.index-1)+this.content.slice(this.index),this.element.textContent=this.content),this.index--);break;case 46:this.index<this.content.length-1&&!this.end&&(this.content=this.content.slice(0,this.index)+this.content.slice(this.index+1),this.element.textContent=this.content),this.index!==this.content.length-1||this.end||(this.content=this.content.slice(0,this.index),this.element.textContent=this.content,this.end=!0,this.index--),0===this.index&&1===this.content.length&&(this.content="",this.element.textContent=this.content);break;case 20:this.caps=!this.caps;break;case 32:t.preventDefault(),this.end?(this.content+=" ",this.element.textContent=this.content):(this.content=this.content.slice(0,this.index)+" "+this.content.slice(this.index),this.element.textContent=this.content),this.index++}"number"!==this.source.name&&(e>=65&&e<=90||e>=48&&e<=57||e>=90&&e<=105)&&(this.caps?this.end?this.content=this.content+String.fromCharCode(t.keyCode):this.content=this.content.slice(0,this.index)+String.fromCharCode(t.keyCode)+this.content.slice(this.index):this.end?this.content=this.content+String.fromCharCode(t.keyCode).toLowerCase():this.content=this.content.slice(0,this.index)+String.fromCharCode(t.keyCode).toLowerCase()+this.content.slice(this.index),this.element.textContent=this.content,this.index++),"number"===this.source.name&&(e>=48&&e<=57||e>=96&&e<=105)&&(e>=96&&e<=105&&(e-=48),this.end?this.content=this.content+String.fromCharCode(e):this.content=this.content.slice(0,this.index)+String.fromCharCode(e)+this.content.slice(this.index),this.element.textContent=this.content,this.index++),this.lastKey=t.keyCode,this.repeat=!0,setTimeout((()=>{this.repeat=!1}),50),this.updateCursor(),this.setValue(this.content)}}))},switchOn(){this.on=!0,this.element.parentNode.append(this.cursor),(0,s.isNullOrUndefined)(this.interval)||clearInterval(this.interval),this.interval=setInterval((()=>{this.on?(this.cursor.remove(),this.on=!1):(this.element.parentNode.append(this.cursor),this.on=!0)}),1e3)},switchOff(){this.on=!1,(0,s.isNullOrUndefined)(this.cursor)||this.cursor.remove(),clearInterval(this.interval)},createCursor(){(0,s.isNullOrUndefined)(this.cursor)||this.cursor.remove();let t=this.element.getBBox();switch(s.isNullOrUndefined&&(this.cursor=document.createElementNS("http://www.w3.org/2000/svg","rect")),this.cursor.setAttribute("x",this.char.x),this.baseline){case"middle":case"auto":this.cursor.setAttribute("y",Number(this.element.getAttribute("y"))-t.height/2);break;case"hanging":this.cursor.setAttribute("y",this.element.getAttribute("y"))}this.cursor.setAttribute("width",1),this.cursor.setAttribute("height",t.height)},updateCursor(){if(""!==this.content){if(this.end)return this.char=this.element.getEndPositionOfChar(this.content.length-1),void this.cursor.setAttribute("x",this.char.x);this.char=this.element.getStartPositionOfChar(this.index),this.cursor.setAttribute("x",this.char.x)}else this.cursor.setAttribute("x",Number(this.element.getAttribute("x")))},findChar(t,e){let i=0,n=this.element.getStartPositionOfChar(0),s=n.x,a=this.element.getBoundingClientRect().x,r=(t-a)*(t-a);for(let e=1;e<this.element.getNumberOfChars();e++){let n=t-(a-s+this.element.getStartPositionOfChar(e).x);if(!(r>n*n))return{target:e,end:!1};r=n*n,i=e}n=this.element.getEndPositionOfChar(this.element.getNumberOfChars()-1);let o=t-(a-s+n.x);return o*o<r?{target:this.element.getNumberOfChars()-1,end:!0}:{target:this.element.getNumberOfChars()-1,end:!1}},findCharRelative(t){let e,i=0,n=this.element.getStartPositionOfChar(0),s=t.x-n.x,a=t.y-n.y,r=Math.sqrt(s*s+a*a),o=r;for(e=1;e<this.element.getNumberOfChars();e++){if(n=this.element.getStartPositionOfChar(e),s=t.x-n.x,a=t.y-n.y,r=Math.sqrt(s*s+a*a),!(r<o))return{target:i,start:!0};o=r,i=e}return n=this.element.getEndPositionOfChar(e-1),s=t.x-n.x,a=t.y-n.y,r=Math.sqrt(s*s+a*a),r<o?{target:e-1,start:!1,end:!0}:{target:i,start:!0}},focusIn(){},focusOut(){console.log("SwitchOff"),this.readonly||(console.log("SwitchOff"),this.switchOff(),this.setValue(this.content))},bindEvents(){this.readonly||this.element.addEventListener("click",(t=>{this.setActiveChar(t.target,t.clientX,t.clientY)})),this.projection.registerHandler("value.changed",(t=>{this.content=t.toString(),this.breakDown&&t.length>this.breakDown?this.element.textContent=this.content.substring(0,this.breakDown):this.element.textContent=this.content}))}},ni=Object.assign(Object.create(ue),ii),si={createHolder(t){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");return e.append(i),i.append(t),e},analysePos(t,e){console.log("Analysing"),console.log(e);let i=e.coordinates;const n={};switch(n.type=i.type,n.render=t,console.log(i.type),i.type){case"delegate":n.await=!1;break;default:n.anchor=i.anchor,n.x=i.x,n.y=i.y,n.await=!0}return console.log(n),n},positionElement(t,e){switch(t.anchor){case"middle":return e.setAttribute("x",t.x-Number(e.getAttribute("width"))/2),void e.setAttribute("y",t.y);case"right":return e.setAttribute("x",t.x-Number(e.getAttribute("width"))),void e.setAttribute("y",t.y);case"center":return e.setAttribute("x",t.x-Number(e.getAttribute("width"))/2),void e.setAttribute("y",t.x-Number(e.getAttribute("height"))/2);default:console.log("Undefined"),console.log(e),e.setAttribute("x",t.x),e.setAttribute("y",t.y)}},analyseDim(t,e){let i=e.dimension;const n={};switch(n.type=i.type,n.item=t,i.type){case"fixed":n.value=i.value,n.holder=this.createHolder(t),n.await=!0;break;case"absolute":n.width=i.width,n.height=i.height,n.holder=this.createHolder(t),n.await=!0;break;case"ratio":n.ratio=i.ratio,n.holder=this.createHolder(t),n.await=!0;break;case"pure":n.await=!1}return n},setDimensions(t){switch(t.type){case"fixed":this.adaptFixed(t.item,t.value);break;case"absolute":this.adaptAbsolute(t.item,t.width,t.height);break;case"ratio":this.adaptRatio(t.item,t.ratio)}},adaptFixed(t,e){let i=t.parentNode,n=i.parentNode,s=t.getBoundingClientRect();i.setAttribute("width",s.width),i.setAttribute("height",s.height),n.setAttribute("width",e),n.setAttribute("height",e*s.height/s.width),n.setAttribute("viewBox","0 0 "+s.width+" "+s.height)},adaptAbsolute(t,e,i){let n=t.parentNode,s=n.parentNode;n.setAttribute("width",e),n.setAttribute("height",i),s.setAttribute("width",e),s.setAttribute("height",i)},adaptRatio(t,e){let i=Number(t.getAttribute("width")),n=Number(t.getAttribute("height")),s=t.parentNode,a=s.parentNode;s.setAttribute("width",i),s.setAttribute("height",n),a.setAttribute("width",i*e),a.setAttribute("height",n*e),a.setAttribute("viewBox","0 0 "+i+" "+n)}},{createDocFragment:ai,isNullOrUndefined:ri,createI:oi,createArticle:li,findAncestor:ci,removeChildren:hi,windowWidth:di,isObject:ui,valOrDefault:pi}=n(835);function mi(t){const{type:e,value:i}=t.dataset;return"concept"===e?this.candidates.find((t=>t.id===i)).id:"meta-concept"===e?this.candidates.find((t=>t.name===i)).name:"value"===e?i:"placeholder"===e?null:i}const yi={init(){return this.width=0,this.height=0,this.items=new Map,this},render(){const{selection:t,dimensions:e,openSelection:i}=this.schema;if(ri(this.element)&&(this.element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.element.dataset.id=this.id,this.element.dataset.nature="field",this.element.dataset.view="svg-choice",this.element.id=this.id,this.element.classList.add("field"),this.element.classList.add("field--svg_choice")),e?(this.element.setAttribute("width",e.width),this.element.setAttribute("height",e.height)):this.element.style.overflow="visible",this.candidates=this.source.getCandidates(),ri(this.selection)&&(this.createSelection(t),this.element.append(this.selection)),i&&ri(this.openSelection)){const t=new DOMParser;this.openSelection=t.parseFromString(i.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement,this.element.append(this.openSelection),this.openSelection.addEventListener("click",(()=>{if(this.open)return this.selection.remove(),void(this.open=!1);this.element.append(this.selection),this.open=!0}))}return this.open=!0,this.bindEvents(),this.element},setValue(t){this.source.setValue(t)},createSelection(t){const{item:e,breakPoint:i=!1,direction:n,close:s}=t;this.selection=document.createElementNS("http://www.w3.org/2000/svg","svg");let a=0;this.candidates.forEach((t=>{const s=ui(t),{dimension:r,tag:o}=e;let{holder:l,foreign:c}=this.createChoiceContainer(r);if(this.items.set(t.id,l),"meta-concept"===t.type){let e=this.model.getProjectionSchema(t.concept,pi(o))[0],i=e.type,n={type:i,[i]:e.content||e.projection},s=Ys.call(this,n,t.concept,{focusable:!1,meta:t.name});l.dataset.type="meta-concept",l.dataset.value=t.name,s.style.position="fixed",c.append(s)}else if(s){if(!this.model.hasProjectionSchema(t,o))return container;let e=this.model.createProjection(t,o).init({focusable:!1});e.readonly=!0,e.focusable=!1,e.parent=this.projection,c.append(e.render()),c.childNodes[0].style.position="fixed",l.dataset.type="concept",l.dataset.value=t.id}else c.append(t.toString());switch(n){case"horizontal":i?(l.setAttribute("y",~~(a/i)*r.height),l.setAttribute("x",a%i*r.width),this.width=i*r.width,this.height=(1+~~(a/i))*r.height):(l.setAttribute("x",a*r.width),this.width=(a+1)*r.width,this.height=r.height);break;case"vertical":i?(l.setAttribute("x",~~(a/i)*r.width),l.setAttribute("y",a%i*r.height)):l.setAttribute("y",a*r.height)}this.bindEvent(l),this.selection.append(l),l.style.border="dotted black",a++}))},registerDimensionsObserver(t){ri(this.observers)&&(this.observers=[]),this.observers.push(t)},notifyDimObservers(){ri(this.observers)||this.observers.forEach((t=>{t.analyseContentDim()}))},bindEvent(t){t.addEventListener("click",(()=>{this.setValue(mi.call(this,t)),this.schema.selection.close&&(this.open=!1,this.selection.remove(),this.width=0,this.height=0,this.notifyDimObservers())}))},bindEvents(){this.projection.registerHandler("displayed",(()=>{this.displayed||(this.displayed=!0,this.items.forEach(((t,e)=>{const i=t.childNodes[0].childNodes[0];this.projection.resolveElement(i).projection.update("displayed")})))})),this.projection.registerHandler("value.changed",(()=>{this.schema.selection.close&&(this.open=!1,this.selection.remove(),this.width=0,this.height=0,this.notifyDimObservers())}))},createChoiceContainer(t){const{width:e,height:i}=t;let n=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");return n.setAttribute("width",e),n.setAttribute("height",i),s.setAttribute("width",e),s.setAttribute("height",i),n.append(s),{holder:n,foreign:s}},focusIn(){},focusOut(){}},gi=Object.assign(Object.create(ue),yi),{createDocFragment:fi,isNullOrUndefined:bi,createI:vi,createArticle:wi,findAncestor:xi,removeChildren:Ei,windowWidth:Ai,isObject:ji,valOrDefault:Oi}=n(835);function Ni(t){const{type:e,value:i}=t.dataset;return"concept"===e?this.candidates.find((t=>t.id===i)).id:"meta-concept"===e?this.candidates.find((t=>t.name===i)).name:"value"===e?i:"placeholder"===e?null:i}const ki={init(){return this.width=0,this.height=0,this.items=new Map,this},render(){const{selection:t,dimensions:e,open:i,overflow:n=!1}=this.schema;if(bi(this.element)&&(this.element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.element.dataset.id=this.id,this.element.dataset.nature="field",this.element.dataset.view="svg-placeholder",this.element.id=this.id,this.element.classList.add("field"),this.element.classList.add("field--svg_choice")),n&&(this.element.style.overflow="visible"),e&&(this.element.setAttribute("width",e.width),this.element.setAttribute("height",e.height)),bi(this.openBack)){const{render:t,coordinates:e,dimensions:n}=i;console.log("rendering open-back"),console.log(i),this.openBack=Ys.call(this,Object.assign(t,{action:{type:"OPEN",target:this}})),this.openBack.setAttribute("x",Oi(e.x,0)),this.openBack.setAttribute("y",Oi(e.y,0))}return this.candidates=this.source.getCandidates(),bi(this.selection)&&(this.createSelection(t),this.element.append(this.selection)),bi(this.source.value)?this.opened=!0:(this.opened=!1,this.element.append(this.openBack)),this.element},clickHandler(t){},setValue(t){this.source.setValue(t),this.element.append(this.openBack),this.opened=!1},open(){this.opened=!0,this.element.append(this.selection),this.openBack.remove(),this.source.removeValue()},createSelection(t){const{item:e,breakPoint:i=!1,direction:n,close:s}=t;this.selection=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.candidates.forEach((t=>{const i=ji(t),{tag:n}=e;if("meta-concept"===t.type){let e=this.model.getProjectionSchema(t.concept,Oi(n))[0],i=e.type,s={type:i,[i]:e.content||e.projection},a=Ys.call(this,s,t.concept,{focusable:!1,meta:t.name});a.dataset.type="meta-concept",a.dataset.value=t.name;const r=this.projection.resolveElement(a).schema.coordinates;a.setAttribute("x",r.x),a.setAttribute("y",r.y),this.bindEvent(a),this.selection.append(a),this.items.set(t.id,a)}else if(i){if(!this.model.hasProjectionSchema(t,n))return container;let e=this.model.createProjection(t,n).init({focusable:!1});e.readonly=!0,e.focusable=!1,e.parent=this.projection;let i=e.render();const s=e.element.schema.coordinates;i.setAttribute("x",s.x),i.setAttribute("y",s.y),this.bindEvent(i),this.selection.append(i),this.items.set(t.id,i)}}))},focusIn(){this.opened||this.element.append(this.openBack)},focusOut(){this.opened||this.openBack.remove()},registerDimensionsObserver(t){bi(this.observers)&&(this.observers=[]),this.observers.push(t)},notifyDimObservers(){bi(this.observers)||this.observers.forEach((t=>{t.analyseContentDim()}))},bindEvent(t){t.addEventListener("click",(()=>{const e=Ni.call(this,t);this.setValue(e),this.selection.remove(),this.element.append(this.openBack)}))}},Li=Object.assign(Object.create(ue),ki),{isNull:_i,isNullOrUndefined:Ci}=n(835),Ti={init(){return this},render(){const{order:t,dimensions:e=!1}=this.schema;if(Ci(this.element)&&(this.element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.element.dataset.id=this.id,this.element.dataset.nature="field",this.element.dataset.view="svg-switch",this.element.id=this.id,this.element.classList.add("field"),this.element.classList.add("field--svg_choice")),e&&(this.element.setAttribute("width",e.width),this.element.setAttribute("height",e.height)),Ci(this.index)&&(this.index=0),this.order=t,this.source.hasValue())for(let t=0;t<this.order.length;t++)if(this.order[t]===this.source.value){this.index=t;break}return this.bindEvents(),this.element},clickHandler(){this.index=(this.index+1)%this.order.length,this.source.setValue(this.order[this.index])},registerDimensionsObserver(t){},focusIn(){},focusOut(){},bindEvents(){}},Si=Object.assign(Object.create(ue),Ti),Mi={binary:(t,e,i)=>Object.create(Ee,{object:{value:"field"},name:{value:"binary-field"},type:{value:"binary"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),choice:(t,e,i)=>Object.create(Le,{object:{value:"field"},name:{value:"choice-field"},type:{value:"choice"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),list:(t,e,i)=>Object.create(He,{object:{value:"field"},name:{value:"list-field"},type:{value:"list"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),table:(t,e,i)=>Object.create(ze,{object:{value:"field"},name:{value:"table-field"},type:{value:"table"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),text:(t,e,i)=>Object.create(Ke,{object:{value:"field"},name:{value:"text-field"},type:{value:"text"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),interactive:(t,e,i)=>Object.create(Se,{object:{value:"field"},name:{value:"interactive-field"},type:{value:"interactive"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),static:(t,e,i)=>Object.create(Ve,{object:{value:"field"},name:{value:"static-field"},type:{value:"static"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),dynamic:(t,e,i)=>Object.create(Ce,{object:{value:"field"},name:{value:"dynamic-field"},type:{value:"dynamic"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),add:(t,e,i)=>Object.create(ye,{object:{value:"field"},name:{value:"add-field"},type:{value:"add"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),arrow:(t,e,i)=>Object.create(ei,{object:{value:"field"},name:{value:"arrow"},type:{value:"arrow"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),svg:(t,e,i)=>Object.create(ni,{object:{value:"field"},name:{value:"svg"},type:{value:"svg"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),"svg-choice":(t,e,i)=>Object.create(gi,{object:{value:"field"},name:{value:"switch"},type:{value:"switch"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),"svg-placeholder":(t,e,i)=>Object.create(Li,{object:{value:"field"},name:{value:"switch"},type:{value:"switch"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}}),"svg-switch":(t,e,i)=>Object.create(Si,{object:{value:"field"},name:{value:"switch"},type:{value:"switch"},id:{value:Ui()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept}})};var Ii=0;const Ui=()=>"field"+Ii++,Di={createField(t,e,i){const{type:n}=e,a=Mi[n];if((0,s.isNullOrUndefined)(a))throw new Error(`Missing handler: The '${n}' field could not be handled`);var r=a(t,e,i);if((0,s.isNullOrUndefined)(r))throw new Error(`Bad request: The '${n}' field could not be created`);return r.errors=[],r.readonly=(0,s.valOrDefault)(e.readonly,!1),(0,s.isNullOrUndefined)(r.id)&&(r.id=Ui()),r}},Hi={init(){throw new Error("This function has not been implemented")},element:null,children:null,statusElement:null,attached:null,readonly:!1,visible:!1,disabled:!1,active:!1,focused:!1,get hasAttached(){return!(0,s.isEmpty)(this.attached)},attach(t,e){this.attached.push(t)},detach(t){this.attached.slice(this.attached.indexOf(t),1)},getAttached(t){return(0,s.isFunction)(t)?this.attached.filter((e=>t(e))):this.attached},show(){return(0,a.$Z)(this.element),this.visible=!0,this.active=!0,this},hide(){return(0,a.Cp)(this.element),this.visible=!1,this},toggle(){return(0,a.ZN)(this.container),this.visible=!this.visible,this},focus(){return this.element.focus(),this.focused=!0,this.active=!0,this},_focusIn:t=>!1,navigate(t,e,i){return this.focusable?(this.element.focus(),!0):this.parent.arrowHandler(t,this.element)},clear:()=>!0,delete(){this.environment.notify("This element cannot be removed",a.k$.WARNING,1500),(0,a.lL)(this.element)},spaceHandler(t){return this.arrowHandler("right",t)},_spaceHandler(t){return this.environment.notify("Nothing do here.",a.k$.NORMAL,1500),!1},escapeHandler(t){let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex));return this.projection.resolveElement(e).focus(e),!0},enterHandler(t){this.element.click()},deleteHandler(t){return this.environment.notify("This element cannot be removed",a.k$.WARNING,1500),(0,a.lL)(this.element),!1},backspaceHandler(t){return this.arrowHandler("left",t)},arrowHandler(t,e){return!!this.parent&&this.parent.arrowHandler(t,e)},clickHandler:t=>(console.warn("CLICK_HANDLER NOT IMPLEMENTED"),!1),controlHandler:t=>(console.warn("CONTROL NOT IMPLEMENTED"),!1)},Pi=Object.assign(Hi),Vi={init(){return this.children=[],this},render(){const t=(0,s.createDocFragment)(),{help:e,style:i,content:n}=this.schema;return(0,s.isHTMLElement)(this.element)||(this.element=(0,s.createAudio)({class:["static","audio-static"],src:n,dataset:{nature:"static",static:"audio",id:this.id,ignore:"all"}})),(0,s.isNullOrUndefined)(e)||(this.element.title=e),Kt.call(this.projection,this.element,i),t.hasChildNodes()&&(this.element.append(t),this.bindEvents()),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,a.Cp)(this.messageElement),(0,s.removeChildren)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return this},bindEvents(){}},Bi=Object.assign(Object.create(Pi),Vi);function Ri(t,e){let i=t.param.find((t=>t.name===e));if((0,s.isNullOrUndefined)(i))return;const{type:n="string",value:a}=i;let r=(0,s.valOrDefault)(a,i.default);return(0,s.isNullOrUndefined)(r)?null:"string"===n?r.toString():"number"===n?+r:void 0}function $i(t){if((0,s.isNullOrUndefined)(t))return"";const{type:e}=t;return"property"===e?(this.hasProperty=!0,(0,s.valOrDefault)(this.source.getProperty(t.name),"")):"param"===e?Ri.call(this,this.schema.template,t.name):"raw"===e?(0,s.htmlToElement)(t.raw):t}function Fi(t){return(0,s.isNullOrWhitespace)(t)?"":t.startsWith("http://")||t.startsWith("https://")?new URL(t).href:Fi(`https://${t}`)}const zi={url:null,alt:null,width:null,height:null,init(){const{url:t,width:e,height:i,alt:n}=this.schema;return this.width=e,this.height=i,this.alt=n,this},render(){let t=!1;const{help:e,style:i,url:n}=this.schema;return this.url=Fi($i.call(this,n)),(0,s.isHTMLElement)(this.element)||(this.element=(0,s.createImage)({class:["static","image-static"],src:this.url,alt:this.alt,dataset:{nature:"static",static:"image",id:this.id,ignore:"all"}}),t=!0),(0,s.isNullOrUndefined)(this.width)||isNaN(this.width)||(this.element.width=this.width),(0,s.isNullOrUndefined)(this.height)||isNaN(this.height)||(this.element.height=this.height),(0,s.isNullOrUndefined)(e)||(this.element.title=e),Kt.call(this.projection,this.element,i),t&&this.bindEvents(),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,a.Cp)(this.messageElement),(0,s.removeChildren)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return(0,s.isNullOrWhitespace)(this.url)?this.element.classList.add("empty"):this.element.classList.remove("empty"),this},update(){const{url:t}=this.schema;return this.url=Fi($i.call(this,t)),this.element.src=this.url,this.refresh(),this},bindEvents(){this.hasProperty&&(this.projection.registerHandler("value.changed",(t=>{this.update()})),this.projection.registerHandler("value.added",(t=>{this.update()})),this.projection.registerHandler("value.removed",(t=>{this.update()})))}},qi=Object.assign(Object.create(Pi),zi),Wi={email:t=>`mailto:${t}`,phone:t=>`tel:${t}`,link:t=>`${t}`,url:t=>`${t}`};function Zi(t,e){let i=t.param.find((t=>t.name===e));if((0,s.isNullOrUndefined)(i))return;const{type:n="string",value:a}=i;let r=(0,s.valOrDefault)(a,i.default);return(0,s.isNullOrUndefined)(r)?null:"string"===n?r.toString():"number"===n?+r:void 0}function Xi(t){if((0,s.isNullOrUndefined)(t))return"";const{type:e}=t;return"property"===e?(this.hasProperty=!0,(0,s.valOrDefault)(this.source.getProperty(t.name),"")):"param"===e?Zi.call(this,this.schema.template,t.name):"raw"===e?(0,s.htmlToElement)(t.raw):t}const Yi={url:null,urlType:null,href:null,hrefHandler:null,content:null,init(){const{content:t=[],urlType:e="link"}=this.schema;if(this.content=t,this.urlType=e,this.children=[],this.hrefHandler=Wi[this.urlType],!(0,s.isFunction)(this.hrefHandler))throw new TypeError("type not handled");return this},render(){let t=!1;const e=(0,s.createDocFragment)(),{help:i,style:n,url:a}=this.schema;return this.href=this.hrefHandler(Xi.call(this,a)),(0,s.isHTMLElement)(this.element)||(this.element=(0,s.createAnchor)({class:["static","link"],href:this.href,dataset:{nature:"static",static:"link",id:this.id,ignore:"all"}}),"link"===this.urlType&&(this.element.target="_blank"),t=!0),this.content.forEach((t=>{let i=Ys.call(this,t,this.projection.concept,{focusable:!1});e.append(i)})),(0,s.isNullOrUndefined)(i)||(this.element.title=i),Kt.call(this.projection,this.element,n),e.hasChildNodes()&&this.element.append(e),t&&this.bindEvents(),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,a.Cp)(this.messageElement),(0,s.removeChildren)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return this},update(){const{url:t}=this.schema;return this.element.href=this.hrefHandler(Xi.call(this,t)),(0,s.removeChildren)(this.element),this.content.forEach((t=>{this.element.append(Ys.call(this,t,this.projection.concept,{focusable:!1}))})),this},bindEvents(){this.hasProperty&&(this.projection.registerHandler("value.changed",(t=>{this.update()})),this.projection.registerHandler("value.added",(t=>{this.update()})),this.projection.registerHandler("value.removed",(t=>{this.update()})))}},Gi=Object.assign(Object.create(Pi),Yi);function Ji(t,e){let i=t.param.find((t=>t.name===e));if((0,s.isNullOrUndefined)(i))return;const{type:n="string",value:a}=i;let r=(0,s.valOrDefault)(a,i.default);return(0,s.isNullOrUndefined)(r)?null:"string"===n?r.toString():"number"===n?+r:void 0}function Ki(t){if((0,s.isNullOrUndefined)(t))return"";const{type:e}=t;return"property"===e?(this.hasProperty=!0,(0,s.valOrDefault)(this.source.getProperty(t.name),"")):"param"===e?Ji.call(this,this.schema.template,t.name):"html"===e?(0,s.htmlToElement)(t.html):"raw"===e?(0,s.htmlToElement)(t.raw):t}const Qi={editable:null,focusable:null,hasProperty:!1,asHTML:!1,init(t={}){Object.assign(this.schema,t);const{content:e,editable:i=!1,focusable:n=!1}=this.schema;return this.children=[],this._content=e,this.editable=i,this.focusable=n,this},render(){let t=!1;const{content:e,help:i,style:n}=this.schema;if(!(0,s.isHTMLElement)(this.element)){if(this.element=(0,s.createSpan)({class:["text","static","text-static"],editable:this.editable,dataset:{nature:"static",view:"text",static:"text",id:this.id,ignore:"all"}}),this.focusable&&(this.element.tabIndex=0),Array.isArray(e))e.forEach((t=>{let e=Ki.call(this,t),i=(0,s.createSpan)({class:["text","static","text-static"],dataset:{nature:"static-component",view:"text",static:"text",content:e,id:this.id,ignore:"all"}},e);Kt.call(this.projection,i,t.style),this.element.append(i)}));else{let t=Ki.call(this,e);this.element.append(t),this.element.content=t}t=!0}return(0,s.isNullOrUndefined)(i)||(this.element.title=i),Kt.call(this.projection,this.element,n),t&&this.bindEvents(),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,a.Cp)(this.messageElement),(0,s.removeChildren)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},getLength(){return this.element.textContent.length},backspaceHandler(t){return this.arrowHandler("left",t)},arrowHandler(t,e){if(!this.editable&&this.parent)return this.parent.arrowHandler(t,e);if("right"===t){if(this.getLength()<(0,a.qO)(this.element)+1&&this.parent)return this.parent.arrowHandler(t,e)}else if("left"===t){if(0===(0,a.qO)(this.element)&&this.parent)return this.parent.arrowHandler(t,e)}else if(this.parent)return this.parent.arrowHandler(t,e);return!1},escapeHandler(t){let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex));this.projection.resolveElement(e).focus(e)},update(){const{content:t}=this.schema;return(0,s.removeChildren)(this.element),Array.isArray(t)?t.forEach((t=>{this.element.append((0,s.createSpan)({class:["text","static","text-static"],dataset:{nature:"static-component",view:"text",static:"text",id:this.id,ignore:"all"}},Ki.call(this,t)))})):this.element.append(Ki.call(this,t)),this},refresh(){return this},bindEvents(){this.hasProperty&&(this.projection.registerHandler("value.changed",(t=>{this.update()})),this.projection.registerHandler("value.added",(t=>{this.update()})),this.projection.registerHandler("value.removed",(t=>{this.update()})))}},tn=Object.assign(Object.create(Pi),Qi),en={contentType:null,editable:null,focusable:null,init(t={}){Object.assign(this.schema,t);const{focusable:e=!0}=this.schema;return this.children=[],this.focusable=e,this},render(){const t=(0,s.createDocFragment)(),{help:e,style:i,content:n}=this.schema;return(0,s.isHTMLElement)(this.element)||(this.element=(0,s.createButton)({class:["btn","static"],dataset:{nature:"static",view:"plink",static:"plink",id:this.id,ignore:"all"}}),this.focusable&&(this.element.tabIndex=0)),n.forEach((e=>{let i=Ys.call(this,e,this.projection.concept,{focusable:!1});t.append(i)})),(0,s.isNullOrUndefined)(e)||(this.element.title=e),Kt.call(this.projection,this.element,i),t.hasChildNodes()&&(this.element.append(t),this.bindEvents()),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,a.Cp)(this.messageElement),(0,s.removeChildren)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},arrowHandler(t,e){return(!this.editable&&this.parent||!!this.parent)&&this.parent.arrowHandler(t,e)},escapeHandler(t){let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex));this.environment.resolveElement(e).focus(e)},enterHandler(t){const e=this.projection.schema.findIndex((t=>t.tags.includes(this.schema.tag)));return this.projection.changeView(e),!1},clickHandler(t){let e=this.projection.findView(this.schema.tag);return-1===e||this.projection.changeView(e),!1},refresh(){return this},bindEvents(){}},nn=Object.assign(Object.create(Pi),en),sn={template:null,selector:null,content:null,init(){return this.selector=this.schema.selector,this.template=(0,s.getTemplate)(this.selector),this},render(){const{style:t,content:e}=this.schema;return(0,s.isNode)(this.element)||(this.element=(0,s.cloneTemplate)(this.template)),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return this}},an=Object.assign(Object.create(Pi),sn);function rn(t,e){let i=t.param.find((t=>t.name===e));if((0,s.isNullOrUndefined)(i))return;const{type:n="string",value:a}=i;let r=(0,s.valOrDefault)(a,i.default);return(0,s.isNullOrUndefined)(r)?null:"string"===n?r.toString():"number"===n?+r:void 0}const on={contentType:null,editable:null,focusable:null,disabled:null,init(t={}){Object.assign(this.schema,t);const{focusable:e=!0,disabled:i=!1}=this.schema;return this.children=[],this.focusable=e,this.disabled=i,this},render(){const t=(0,s.createDocFragment)(),{help:e,style:i,content:n}=this.schema;return(0,s.isHTMLElement)(this.element)||(this.element=(0,s.createButton)({class:["btn","static"],dataset:{nature:"static",view:"button",static:"button",id:this.id,ignore:"all"}}),this.focusable&&(this.element.tabIndex=0)),n.forEach((e=>{let i=Ys.call(this,e,this.projection.concept,{template:this.schema.template,focusable:!1});t.append(i)})),(0,s.isNullOrUndefined)(e)||(this.element.title=e),Kt.call(this.projection,this.element,i),t.hasChildNodes()&&(this.element.append(t),this.bindEvents()),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,a.Cp)(this.messageElement),(0,s.removeChildren)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},arrowHandler(t,e){return(!this.editable&&this.parent||!!this.parent)&&this.parent.arrowHandler(t,e)},escapeHandler(t){let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex));this.environment.resolveElement(e).focus(e)},enterHandler(t){const e=this.projection.schema.findIndex((t=>t.tags.includes(this.schema.tag)));return this.projection.changeView(e),!1},clickHandler(t){let e=this.source;if(this.schema.bind&&(e=this.source.getValue(!0)),this.schema.action){const{type:t,value:i,target:n}=this.schema.action;switch(t){case"CREATE":if((0,s.isNullOrUndefined)(n)&&e.createElement(),(0,s.isObject)(i))for(const t in i){const e=i[t];"param"===e.type&&(i[t]=rn.call(this,this.schema.template,e.name))}"attribute"===n.type&&e.getAttribute(n.name).target.createElement({value:i});break;case"SELECT":if((0,s.isNullOrUndefined)(n)&&e.createElement(),(0,s.isObject)(i))for(const t in i){const e=i[t];"param"===e.type&&(i[t]=rn.call(this,this.schema.template,e.name))}"attribute"===n.type&&e.getAttribute(n.name).target.setValue((0,s.valOrDefault)(i.name,i)),"bind"===n.type&&e.setValue((0,s.valOrDefault)(i.name,i));break;case"CREATES":if((0,s.isNullOrUndefined)(n)&&e.createElement(),(0,s.isObject)(i))for(const t in i){const e=i[t];"param"===e.type&&(i[t]=rn.call(this,this.schema.template,e.name))}"attribute"===n.type&&e.getAttribute(n.name).target.createElement().getAttribute(n.attribute).target.setValue((0,s.valOrDefault)(i.name,i));break;case"SIDE":let t=this.environment.createProjection(e,n),a=this.environment.findWindow("side-instance");(0,s.isNullOrUndefined)(a)&&(a=this.environment.createWindow("side-instance"),a.container.classList.add("model-projection-sideview")),a.instances.size>0&&Array.from(a.instances)[0].delete();let r=this.environment.createInstance(e,t,{type:"projection",close:"DELETE-PROJECTION"});a.addInstance(r)}return"attribute"===n.type&&(console.log(i),e.getAttribute(n.name).target.createElement({value:i})),!1}return this.environment.triggerEvent({name:this.schema.trigger,args:[e]}),!1},refresh(){return this},bindEvents(){}},ln=Object.assign(Object.create(Pi),on),cn={editable:null,focusable:null,init(t={}){Object.assign(this.schema,t);const{focusable:e=!0}=this.schema;return this.focusable=e,this},render(){(0,s.createDocFragment)();const{help:t,style:e,content:i,external:n=!0,tag:a}=this.schema,r=new DOMParser;return(0,s.isHTMLElement)(this.element)||(this.element=r.parseFromString(i.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement,this.element.classList.add(["btn","static"]),this.element.dataset.nature="static",this.element.dataset.view="svg-alt",this.element.dataset.id=this.id,this.element.dataset.ignore="all",this.focusable&&(this.element.tabIndex=0)),(0,s.isNullOrUndefined)(t)||(this.element.title=t),this.refresh(),this.bindEvents(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,a.Cp)(this.messageElement),(0,s.removeChildren)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},arrowHandler(t,e){return(!this.editable&&this.parent||!!this.parent)&&this.parent.arrowHandler(t,e)},escapeHandler(t){let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex));this.environment.resolveElement(e).focus(e)},enterHandler(t){const e=this.projection.schema.findIndex((t=>t.tags.includes(this.schema.tag)));return this.projection.changeView(e),!1},clickHandler(t){},refresh(){return this},bindEvents(){this.element.addEventListener("click",(()=>{let t=this.source,e=this.environment.createProjection(t,this.schema.tag),i=this.environment.findWindow("side-instance");(0,s.isNullOrUndefined)(i)&&(i=this.environment.createWindow("side-instance"),i.container.classList.add("model-projection-sideview")),i.instances.size>0&&Array.from(i.instances)[0].delete();let n=this.environment.createInstance(t,e,{type:"projection",close:"DELETE-PROJECTION"});i.addInstance(n)}))}},hn=Object.assign(Object.create(Pi),cn),dn={CREATE:function(t,e){this.source.createElement(e)},DELETE:un,EXTRACT:function(t,e){let i=this.projection.environment.actions.get("extract-instance")("graphical").getAttribute("shape").target.getAttribute("elements").target.createElement();i.setValue(this.source.name),pn.call(this,i.getValue(!0)),mn.call(this,i.getValue(!0)),un.call(this)},SIDE:function(t,e){let i=this.environment.createProjection(this.source,t),n=this.environment.findWindow("side-instance");(0,s.isNullOrUndefined)(n)&&(n=this.environment.createWindow("side-instance"),n.container.classList.add("model-projection-sideview")),n.instances.size>0&&Array.from(n.instances)[0].delete();let a=this.environment.createInstance(this.source,i,{type:"projection",close:"DELETE-PROJECTION"});n.addInstance(a)},OPEN:function(t){(0,s.isNullOrUndefined)(this.target)&&(this.target=t),this.target.open()}};function un(t,e){"prototype"!==this.source.parent.schema.nature?this.source.delete():this.source.parent.delete()}function pn(t){switch(this.source.name){case"circle":t.getAttributeByName("cx").target.setValue(this.source.getAttributeByName("cx").target.value),t.getAttributeByName("cy").target.setValue(this.source.getAttributeByName("cy").target.value),t.getAttributeByName("r").target.setValue(this.source.getAttributeByName("r").target.value);break;case"ellipse":t.getAttributeByName("cx").target.setValue(this.source.getAttributeByName("cx").target.value),t.getAttributeByName("cy").target.setValue(this.source.getAttributeByName("cy").target.value),t.getAttributeByName("rx").target.setValue(this.source.getAttributeByName("rx").target.value),t.getAttributeByName("ry").target.setValue(this.source.getAttributeByName("ry").target.value);break;case"rectangle":t.getAttributeByName("x").target.setValue(this.source.getAttributeByName("x").target.value),t.getAttributeByName("y").target.setValue(this.source.getAttributeByName("y").target.value),t.getAttributeByName("width").target.setValue(this.source.getAttributeByName("width").target.value),t.getAttributeByName("height").target.setValue(this.source.getAttributeByName("height").target.value);break;case"polygon":t.getAttributeByName("points").target.setValue(this.source.getAttributeByName("points").target.value);break;case"path":t.getAttributeByName("d").target.setValue(this.source.getAttributeByName("d").target.value)}}function mn(t){const e=t.getAttributeByName("style").target,i=this.source.getAttributeByName("style").target;e.getAttributeByName("fill").target.setValue(i.getAttributeByName("fill").target.value),e.getAttributeByName("stroke").target.setValue(i.getAttributeByName("stroke").target.value),e.getAttributeByName("s-width").target.setValue(i.getAttributeByName("s-width").target.value),e.getAttributeByName("s-dash").target.setValue(i.getAttributeByName("s-dash").target.value),e.getAttributeByName("rx").target.setValue(i.getAttributeByName("rx").target.value),e.getAttributeByName("ry").target.setValue(i.getAttributeByName("ry").target.value)}const yn={init(){return this},render(){const{action:t,content:e}=this.schema;if((0,s.isNullOrUndefined)(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.classList.add("algorithm-container"),this.container.dataset.nature="static",this.container.dataset.algorithm="button",this.container.dataset.id=this.id),e&&(0,s.isNullOrUndefined)(this.content)&&this.createContent(e),this.schema.dimensions){const{width:t,height:e}=this.schema.dimensions;this.container.setAttribute("width",t),this.container.setAttribute("height",e)}return this.container.style.width="fit-content",this.container},createContent(t){const e=new DOMParser;this.content=e.parseFromString(t.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement,this.container.append(this.content),this.content.addEventListener("click",(()=>{const{type:t,target:e,value:i}=this.schema.action;console.log("target"),console.log(e),console.log(this.schema.action),dn[t].call(this,e,i)}))},focusIn(){},focusOut(){}},gn=Object.assign({},Pi,yn),fn={init(){return this},render(){const t=new DOMParser,{content:e}=this.schema;return(0,s.isNullOrUndefined)(this.element)&&(this.element=t.parseFromString(e.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement),this.element},focusIn(){},focusOut(){},clickHandler(t){}},bn=Object.assign(Object.create(Pi),fn),vn={init(){return this},render(){new DOMParser;const{content:t,style:e}=this.schema;return(0,s.isNullOrUndefined)(this.element)&&(this.element=document.createElementNS("http://www.w3.org/2000/svg","text"),this.element.textContent=t),this.style(),this.element},style(){const{font:t,size:e,anchor:i="left",weight:n,baseline:s}=this.schema.style;this.element.setAttribute("text-anchor",i),this.element.setAttribute("font-family",t),this.element.setAttribute("font-size",e),this.element.style["dominant-baseline"]=s,n&&this.element.setAttribute("font-weight",n)},focusIn(){},focusOut(){},clickHandler(t){}},wn=Object.assign(Object.create(Pi),vn);var xn=0;const En=()=>"static"+xn++,An={audio:(t,e,i)=>Object.create(Bi,{object:{value:"static"},name:{value:"audio-static"},type:{value:"audio"},id:{value:En()},model:{value:t},schema:{value:e},projection:{value:i}}),plink:(t,e,i)=>Object.create(nn,{object:{value:"static"},name:{value:"plink-static"},type:{value:"plink"},id:{value:En()},model:{value:t},schema:{value:e},projection:{value:i}}),image:(t,e,i)=>Object.create(qi,{object:{value:"static"},name:{value:"image-static"},type:{value:"image"},id:{value:En()},model:{value:t},schema:{value:e},projection:{value:i}}),link:(t,e,i)=>Object.create(Gi,{object:{value:"field"},name:{value:"link-static"},type:{value:"link"},id:{value:En()},model:{value:t},schema:{value:e},projection:{value:i}}),text:(t,e,i)=>Object.create(tn,{object:{value:"static"},name:{value:"text-static"},type:{value:"text"},id:{value:En()},model:{value:t},schema:{value:e},projection:{value:i}}),html:(t,e,i)=>Object.create(an,{object:{value:"static"},name:{value:"html-static"},type:{value:"html"},id:{value:En()},model:{value:t},schema:{value:e},projection:{value:i}}),button:(t,e,i)=>Object.create(ln,{object:{value:"static"},name:{value:"button-static"},type:{value:"button"},id:{value:En()},model:{value:t},schema:{value:e},projection:{value:i}}),"svg-alt":(t,e,i)=>Object.create(hn,{object:{value:"static"},name:{value:"svg-static"},type:{value:"svgAlt"},id:{value:En()},model:{value:t},schema:{value:e},projection:{value:i}}),"svg-button":(t,e,i)=>Object.create(gn,{object:{value:"static"},name:{value:"svg-button"},type:{value:"svgButton"},id:{value:En()},model:{value:t},schema:{value:e},projection:{value:i}}),svg:(t,e,i)=>Object.create(bn,{object:{value:"static"},name:{value:"svg-static"},type:{value:"svg"},id:{value:En()},model:{value:t},schema:{value:e},projection:{value:i}}),"svg-text":(t,e,i)=>Object.create(wn,{object:{value:"static"},name:{value:"svgText-static"},type:{value:"svgText"},id:{value:En()},model:{value:t},schema:{value:e},projection:{value:i}})},jn={createStatic(t,e,i){const{type:n}=e,a=An[n];if((0,s.isNullOrUndefined)(a))throw new Error(`Missing handler: The '${n}' static could not be handled`);var r=a(t,e,i);if((0,s.isNullOrUndefined)(r))throw new Error(`Bad request: The '${n}' static could not be created`);return(0,s.isNullOrUndefined)(r.id)&&(r.id=En()),r}},On={focusable:null,readonly:!1,visible:!1,editable:!1,active:!1,container:null,elements:null,children:null,editing:!1,getStyle(){return this.schema.style},setStyle(t){return this.schema.style=t,Kt.call(this.projection,this.container,t),this.refresh(),!0},getContainer(){return this.container},isRoot(){return(0,s.isNullOrUndefined)(this.parent)},getField(t){return this.projection.getField(t)},getStatic(t){return this.projection.getStatic(t)},getLayout(t){return this.environment.getLayout(t)},show(){return(0,a.$Z)(this.element),this.visible=!0,this.active=!0,this},hide(){return(0,a.Cp)(this.element),this.visible=!1,this},toggle(){return(0,a.ZN)(this.container),this.visible=!this.visible,this},_focusIn:t=>!1,spaceHandler(t){return t===this.container&&!(0,s.isNullOrUndefined)(this.parent)&&this.parent.spaceHandler(this.container)},_spaceHandler(t){return console.warn(`CTRL_SPACE_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},escapeHandler(t){if(this.isRoot())return!1;let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex)),i=this.environment.resolveElement(e);return!(0,s.isNullOrUndefined)(i)&&(i.focus(e),!0)},enterHandler(t){let e=(0,s.getElement)('[tabindex]:not([tabindex="-1"])',this.container),i=this.environment.resolveElement(e);return!(0,s.isNullOrUndefined)(i)&&(i.focus(),!0)},delete(){var t=this.source.delete();t.success||this.environment.notify(t.message)},deleteHandler(t){if(this.projection.element!==this)return!1;if(!this.projection.optional)return(0,a.lL)(this.container),!1;let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex)),i=this.container.cloneNode(!0);this.source.hasParent()&&this.environment.save(this.source.getParent(),i),this.source.delete();let n=this.environment.resolveElement(e);return(0,s.isNullOrUndefined)(n)||n.focus(),!1},backspaceHandler(t){return console.warn(`BACKSPACE_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},arrowHandler(t,e){if(e===this.container)return!(0,s.isNullOrUndefined)(this.parent)&&this.parent.arrowHandler(t,this.container);let i=(0,a.As)(e,t,this.container);if(!(0,s.isHTMLElement)(i))return!(0,s.isNullOrUndefined)(this.parent)&&"layout"===this.parent.object&&this.parent.arrowHandler(t,this.container);let n=this.environment.resolveElement(i);return n&&((0,s.isFunction)(n.navigate)?n.navigate(t):n.focus()),!0},shiftHandler(t,e){if("up"===t){let t=(0,a.a2)(window.getComputedStyle(this.container).marginTop);this.container.style.marginTop=`${t+1}px`}return!0},_arrowHandler(t,e){return console.warn(`CTRL_ARROW_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},clickHandler(t){return console.warn(`CLICK_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},controlHandler(t){this.toolbar&&this.toolbar.remove()}},Nn={ROW:"row",COLUMN:"column"},kn={start:"flex-start",end:"flex-end","flex-start":"flex-start","flex-end":"flex-end",center:"center",stretch:"stretch",baseline:"baseline"},Ln={start:"flex-start",end:"flex-end","flex-start":"flex-start","flex-end":"flex-end",center:"center","space-between":"space-between","space-around":"space-around","space-evenly":"space-evenly"};var _n=0;function Cn(t,e,i){return Object.create(Sn,{object:{value:"layout"},name:{value:"flex-layout"},type:{value:"flex"},id:{value:"layout"+_n++},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}})}const Tn={orientation:null,wrappable:null,alignItems:null,justifyContent:null,args:null,init(t={}){const{editable:e=!0,focusable:i=!1}=this.schema,{orientation:n=Nn.ROW,wrappable:s=!0,alignItems:a,justifyContent:r}=this.schema.layout;return this.orientation=n,this.wrappable=s,this.alignItems=a,this.justifyContent=r,this.focusable=i,this.editable=e,this.elements=[],this.children=[],this.args=t,Object.assign(this,t),this},getOrientation(){return this.orientation},setOrientation(t){(0,s.hasOwn)(Nn,t)&&(this.orientation=t,this.refresh())},collapse(t=!1){if(!this.collapsed||t)return this.collapseContainer=(0,s.createDiv)({class:"layout-container-collapse"},this.elements),this.btnCollapse.after(this.collapseContainer),this.collapsed=!0,this.refresh(),this},expand(t=!1){if(!this.collapsed&&!t)return;let e=(0,s.createDocFragment)(Array.from(this.collapseContainer.children));return this.btnCollapse.after(e),this.collapseContainer.remove(),this.collapsed=!1,this.refresh(),this},render(){const{label:t,content:e,style:i,help:n}=this.schema,a=(0,s.createDocFragment)();(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["layout-container"],dataset:{nature:"layout",layout:"flex",id:this.id}})),n&&(this.container.title=n);for(let t=0;t<e.length;t++){let i=Ys.call(this,e[t],null,this.args),n=this.environment.resolveElement(i);n&&(n.parent=this),this.elements.push(i),a.append(i)}return this.focusable?this.container.tabIndex=0:this.container.dataset.ignore="all",Kt.call(this.projection,this.container,i),a.hasChildNodes()&&(this.container.append(a),this.bindEvents()),this.collapsed&&this.collapse(!0),this.container.style.display="flex",this.refresh(),this.container},refresh(){return this.container.style.flexDirection=this.orientation,this.container.style.justifyContent=Ln[this.justifyContent],this.container.style.alignItems=kn[this.alignItems],this.wrappable?this.container.style.flexWrap="wrap":this.container.style.flexWrap="nowrap",this},focus(t){if(this.focusable)this.container.focus();else{let t=(0,s.getElement)('[tabindex]:not([tabindex="-1"])',this.container);if((0,s.isNullOrUndefined)(t))return!1;let e=this.environment.resolveElement(t);e&&e.focus(t)}},focusIn(){return this.focused=!0,this.container.classList.add("active"),this.container.classList.add("focus"),this},focusOut(){return this.container.classList.remove("active"),this.container.classList.remove("focus"),this.focused=!1,this},bindEvents(){this.container.addEventListener("change",(t=>{const{target:e}=t,{prop:i}=e.dataset;"orientation"===i&&this.setOrientation(e.value)})),this.projection.registerHandler("view.changed",((t,e)=>{e&&e.parent===this.projection&&(t.parent=this)})),this.btnCollapse&&this.btnCollapse.addEventListener("click",(t=>{this.collapsed?this.expand():this.collapse()}))}},Sn=Object.assign({},On,Tn),Mn={clickHandler(t){return console.warn(`CLICK_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},getContainer(){return this.container},getWidth(){return this.width},getHeight(){return this.height},setViewBox(t){this.container.setAttribute("viewBox",t),this.notifyObsevers()},setWidth(t){this.width=t,this.container.setAttribute("width",t),this.notifyObsevers()},setWidth(t){this.height=t,this.container.setAttribute("height",t),this.notifyObsevers()},notifyDimObservers(){(0,s.isNullOrUndefined)(this.observers)||this.observers.forEach((t=>{t.analyseContentDim()}))},registerDimensionsObserver(t){(0,s.isNullOrUndefined)(this.observers)&&(this.observers=[]),this.observers.push(t)},setInteraction(t){(0,s.isNullOrUndefined)(this.items)||((0,s.isNullOrUndefined)(this.warnings)&&(this.warnings=[]),this.warnings.push(t),this.items.forEach((e=>{this.projection.resolveElement(e.render).warn(t)})))},checkAugment(t,e){if(!(0,s.isNullOrUndefined)(this.background))if(t.x+Number(e.getAttribute("x"))>Number(this.background.getAttribute("x"))+Number(this.background.getAttribute("width"))||t.y+Number(e.getAttribute("y"))>Number(this.background.getAttribute("y"))+Number(this.background.getAttribute("height"))){let i=this.background.querySelector("[data-augment]");const n=Number(i.getAttribute("y")),s=t.y+Number(e.getAttribute("y"));i.setAttribute("height",s-n)}else if(t.y+Number(e.getAttribute("y"))<Number(this.background.getAttribute("y"))+Number(this.background.getAttribute("height"))){let i=this.background.querySelector("[data-augment]");const n=Number(i.getAttribute("y")),s=t.y+Number(e.getAttribute("y"));i.setAttribute("height",s-n)}},createDelete(){const{type:t}=this.schema.rmv;switch(t){case"bind":this.deleteMap=new Map;let t=0;this.schema.rmv.bind.forEach((e=>{t++;const{alias:i,focus:n,coordinates:s,content:a}=e;let r=(new DOMParser).parseFromString(a.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement;r.dataset.nature="static",r.dataset.algorithm="button",r.setAttribute("x",s.x),r.setAttribute("y",s.y),r.addEventListener("click",(()=>{this.source.delete()})),this.deleteMap.set(i,r)})),this.projection.registerHandler("value.changed",(t=>{(0,s.isNullOrUndefined)(this.deleteElem)||this.deleteElem.remove(),this.deleteMap.get("default").remove();const e=t.name||t;let i=this.deleteMap.get(e);if(!i.dataset.focusable||this.focused)return(0,s.isNullOrUndefined)(i)?(this.container.append(this.deleteMap.get("default")),void(this.deleteElem=this.deleteMap.get("default"))):(this.container.append(i),void(this.deleteElem=i));this.deleteElem=i})),this.source.hasValue()?(this.container.append(this.deleteMap.get(this.source.value)),this.deleteElem=this.deleteMap.get(this.source.value)):(this.container.append(this.deleteMap.get("default")),this.deleteElem=this.deleteMap.get("default"));break;default:const{focus:e,coordinates:i,dimensions:n,render:a}=this.schema.rmv;let r=Ys.call(this,a);r.setAttribute("x",i.x),r.setAttribute("y",i.y),this.container.append(r),r.addEventListener("click",(()=>{this.source.delete()})),e&&(this.rmv=r)}},findItem(t){for(let e=0;e<this.items.length;e++)if(this.items[e].render.dataset.concept===t)return this.items[e]},findAncestor(t){for(let e=0;e<this.items.length;e++)if(this.items[e].render.contains(t))return this.items[e]},findAnchorIndex(t){for(let e=0;e<this.items.length;e++)if(this.items[e].render===t)return this.items[e].index},findAnchorIndex(t){return this.anchors.indexes[t]}},In={init(){const{dimensions:t={}}=this.schema;return this.ratio=.4,this.width=(0,s.valOrDefault)(t.width,500),this.height=(0,s.valOrDefault)(t.height,500),this.buttons=[],this.dummies=[],this.transLink=[],this.transLinkId=[],this.arrowInventory=[],this.linkInventory=new Map,this},render(){const{dimensions:t,style:e}=this.schema,i=(0,s.createDocFragment)();return(0,s.isNullOrUndefined)(this.instances)&&(this.instances=new Map),(0,s.isNullOrUndefined)(this.holders)&&(this.holders=new Map),(0,s.isHTMLElement)(this.container)||(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.classList.add("algorithm-container"),this.container.dataset.nature="algorithm",this.container.dataset.algorithm="force",this.container.dataset.id=this.id,this.container.tabindex=1,this.container.id=this.id),t&&(this.container.setAttribute("width",t.width),this.container.setAttribute("height",t.height)),this.focusable=!0,(0,s.isHTMLElement)(this.ids)||(this.ids=[]),i.hasChildNodes()&&this.container.append(i),e&&(this.container.style=e),(0,s.isNullOrUndefined)(this.content)&&(this.content=[]),this.bindEvents(),this.container},setUpForce(){const{intensity:t,linkval:e}=this.schema.force;this.force=d3.layout.force().size([this.width,this.height]).nodes([]).links([]).linkDistance(e).charge(t).on("tick",this.ticked.bind(this));var i=d3.select("#"+this.id);this.nodes=this.force.nodes(),this.node=i.selectAll("svg"),this.links=this.force.links(),this.link=i.selectAll(".link"+this.id),this.force.start()},restart(){let t=d3.select("#"+this.id);this.node=t.selectAll(".node"+this.id).data(this.nodes),(0,s.isNullOrUndefined)(this.links)||(this.link=t.selectAll(".link"+this.id).data(this.links)),this.force.start()},addItem(t){(0,s.isNullOrUndefined)(this.force)&&this.setUpForce(this.width,this.height,this.intensity,this.direction),"prototype"===t.schema.nature&&(t.register(this.projection),this.projection.registerHandler("value.changed",(e=>{if(t.hasValue())for(let e=0;e<this.nodes.length;e++)this.nodes[e].concept===t.id&&(this.nodes[e].meta=this.nodes[e].concept,this.nodes[e].concept=t.getValue(!0).id)})));let e=this.createItem(t,this.schema.tag);e.classList.add("node"+this.id),this.container.append(e);let i=this.projection.resolveElement(e);if(i.projection.update("displayed"),i.registerDimensionsObserver(this),this.content.push(i),"prototype"===t.schema.nature)if(t.force)t.force.index=this.nodes.length,t.force.id=i.id,this.nodes.push(t.force),t.force=this.nodes[this.nodes.length-1];else{const e={nbLink:0,points:[],width:i.width,height:i.height,id:i.id,concept:t.id};this.nodes.push(e),t.force=e}else if(t.force)t.force.index=this.nodes.length,t.force.id=i.id,this.nodes.push(t.force),t.force=this.nodes[this.nodes.length-1];else{const n={nbLink:0,points:[],width:i.width,height:i.height,id:i.id,concept:t.id,shape:this.computeShape(e)};this.nodes.push(n),t.force=n}e.getBoundingClientRect(),this.restart()},checkForContent(t,e){const i=this.findIndex(t),n=this.findIndex(e);return i>=0&&n>=0},addArrow(t,e,i){if((0,s.isNullOrUndefined)(this.force)&&this.setUpForce(),(0,s.isNullOrUndefined)(this.links)&&(this.links=this.force.links()),this.containsArrow(t,e,i))return;this.containsTransArrow(t,e,i),this.force.stop();const n=e.id||e,a=i.id||i,r=this.findIndex(n),o=this.findIndex(a);if(r<0||o<0){let n=this.environment.getReceivers(this.projection.rtag);for(let s=0;s<n.length;s++)if(n[s].checkForContent(e,i))return t.projection.parent=n[s],void n[s].addArrow(t,e,i);return this.environment.getRootReceiver(this.projection.rtag).addTransLink(t,e,i),void this.restart()}let l=this.linkInventory.get(r+","+o);(0,s.isNullOrUndefined)(l)?(this.linkInventory.set(r+","+o,{length:1}),this.links.push({source:r,target:o,id:t.id,indexL:1})):(l.length++,this.links.push({source:r,target:o,id:t.id,indexL:l.length})),t.path.classList.add("link"+this.id),this.container.append(t.path),t.definitions&&this.container.append(t.definitions),this.addDummy(t,t.decorator,this.links.length-1),this.restart()},addDummy(t,e=!1,i){if((0,s.isNullOrUndefined)(e)){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList.add("node"+this.id),t.classList.add("dummy"),this.container.append(t)}else this.container.append(e),e.classList.add("node"+this.id),e.classList.add("dummy");const n=e.getBBox();this.nodes.push({dummy:!0,ref:i,fixed:!0,width:n.width,height:n.height})},addTransLink(t,e,i){t.projection.parent=this,(0,s.isNullOrUndefined)(this.transLinks)&&(this.transLinks=[]),this.transLinks.push({id:t.id,from:e.id||e,to:i.id||i,arrow:t}),this.container.append(t.path),t.definitions&&this.container.append(t.definitions),this.restart()},containsTransArrow(t,e,i){if(!(0,s.isNullOrUndefined)(this.transLinks))for(let e=0;e<this.transLinks.length;e++)if(this.transLinks[e].id===t.id)return void this.transLinks.splice(e,1)},containsArrow(t,e,i){for(let n=0;n<this.links.length;n++)if(this.links[n].id===t.id){const a=e.id||e,r=i.id||i,o=this.findIndex(a),l=this.findIndex(r);if(o<0||l<0)this.removeArrow(t,n),this.addTransLink(t,e,i);else{let t=this.links[n].source.index,e=this.links[n].target.index;if(!(0,s.isNullOrUndefined)(this.linkInventory.get(t+","+e))){let i=this.linkInventory.get(t+","+e);i.length--,i.length<=0&&this.linkInventory.delete(t+","+e)}this.links[n].source=o,this.links[n].target=l,(0,s.isNullOrUndefined)(this.linkInventory.get(o+","+l))?this.linkInventory.set(o+","+l,{length:1}):this.linkInventory.get(o+","+l).length++}return this.restart(),!0}return!1},removeArrow(t,e=-1,i,n){if((0,s.isNullOrUndefined)(this.links))return;let a=0;if(e>=0){if(!(0,s.isNullOrUndefined)(this.linkInventory.get(this.links[e].source.index+","+this.links[e].target.index))){let t=this.linkInventory.get(this.links[e].source.index+","+this.links[e].target.index);t.length--,0===t.length&&this.linkInventory.delete(this.links[e].source.index+","+this.links[e].target.index)}return this.links.splice(e,1),t.decorator&&(a=this.removeDummy(e),t.decorator.remove()),t.path.remove(),this.restart(),a}for(let e=0;e<this.links.length;e++)if(this.links[e].id===t.id){if(!(0,s.isNullOrUndefined)(this.linkInventory.get(this.links[e].source.index+","+this.links[e].target.index))){let t=this.linkInventory.get(this.links[e].source.index+","+this.links[e].target.index);t.length--,0===t.length&&this.linkInventory.delete(this.links[e].source.index+","+this.links[e].target.index)}return t.decorator&&(a=this.removeDummy(e),t.decorator.remove()),this.links.splice(e,1),t.path.remove(),void this.restart()}},findIndex(t){for(let e=0;e<this.nodes.length;e++)if(this.nodes[e].concept===t)return e;return-1},createItem(t,e){e.item;const i=this.schema.item;let n=this.model.createProjection(t,i);n.optional=!0,n.parent=this.projection;let s=n.init().render();return this.instances.set(n.element.source.id,s),s},removeItem(t){let e;for(this.force.stop(),e=0;e<this.nodes.length&&this.nodes[e].meta!==t.id&&this.nodes[e].concept!==t.id;e++);if((0,s.isNullOrUndefined)(this.links)||(0,s.isEmpty)(this.links))return this.nodes.splice(e,1),void this.restart();for(let t=0;t<this.links.length;t++){let i;if(this.links[t].source.index===e||this.links[t].target.index===e){let n=this.projection.model.getArrow(this.links[t].id);i=this.removeArrow(n,t,null,e),t--}(0,s.isNullOrUndefined)(this.links[t])||(this.links[t].source.index>e&&this.links[t].source.index--,this.links[t].target.index>e&&this.links[t].target.index--)}this.nodes.splice(e,1),this.restart()},removeDummy(t){for(let e=0;e<this.nodes.length;e++)this.nodes[e].ref===t&&(this.nodes.splice(e,1),e--),this.nodes[e].ref>t&&this.nodes[e].ref--},ticked(){let t=!0;for(;t&&!(0,s.isEmpty)(this.nodes);)this.nodes.forEach((e=>{this.nodes.forEach((i=>{t=this.collide(e,i)}))}));let e=this.links,i=this.container,n=this.linkInventory;const a=this.width,r=this.height;(0,s.isNullOrUndefined)(this.link)||this.link.attr("d",(function(t){if(t.source===t.target)return;const e=Un.computeBorder(t.source,t.target),i=Un.computeBorder(t.target,t.source);let s=i.x-e.x,a=i.y-e.y,r=Math.sqrt(s*s+a*a);t.dr=r,t.s=e,t.t=i;let o=n.get(t.source.index+","+t.target.index);return o.length>1&&(r/=1+1/o.length*(t.indexL-1)),"M"+i.x+","+i.y+"A"+r+","+r+" 0 0 1,"+e.x+","+e.y+"A"+r+","+r+" 0 0 0,"+i.x+","+i.y})),(0,s.isNullOrUndefined)(this.transLinks)||this.transLinks.forEach((t=>{const{arrow:e,id:n,from:a,to:r}=t,o=this.container.getBoundingClientRect();let l=this.container.querySelector("[data-concept='"+a+"']");(0,s.isNullOrUndefined)(l)&&(l=document.querySelector("[data-concept='"+a+"']"));let c=this.container.querySelector("[data-concept='"+r+"']");(0,s.isNullOrUndefined)(c)&&(c=document.querySelector("[data-concept='"+r+"']"));const h=l.getBoundingClientRect(),d=c.getBoundingClientRect(),u={x:h.x+h.width/2-o.x,y:h.y+h.height/2-o.y},p={x:d.x+d.width/2-o.x,y:d.y+d.height/2-o.y};u.shape=this.computeRelativeShape(i,l),p.shape=this.computeRelativeShape(i,c);const m=Un.computeBorder(u,p),y=Un.computeBorder(p,u),g=y.x-m.x,f=y.y-m.y,b=Math.sqrt(g*g+f*f);e.setPath("M"+y.x+","+y.y+"A"+b+","+b+" 0 0 1,"+m.x+","+m.y+"A"+b+","+b+" 0 0 0,"+y.x+","+y.y)})),this.node.attr("x",(function(t){if(!(0,s.isNullOrUndefined)(t.ref)){let a=e[t.ref].dr,r=n.get(e[t.ref].source.index+","+e[t.ref].target.index);r.length>1&&(a/=1+1/r.length*(e[t.ref].indexL-1));let o=Un.getEllipseCenter(a,e[t.ref].s,e[t.ref].t,i),l=Un.getPerpendicularLine(e[t.ref].s,e[t.ref].t),c=Un.getPointConstructedEllipse(l,a,a,o),h=Un.getCloserBorder(c,e[t.ref].t);return t.fx=h.x,(0,s.isNullOrUndefined)(t.width)?h.x:(t.fx=h.x-t.width/2,h.x-t.width/2)}return(t.x=Math.max(t.width/2,Math.min(a-t.width/2,t.x)))-t.width/2})).attr("y",(function(t){if(!(0,s.isNullOrUndefined)(t.ref)){let a=e[t.ref].dr,r=n.get(e[t.ref].source.index+","+e[t.ref].target.index);r.length>1&&(a/=1+1/r.length*(e[t.ref].indexL-1));let o=Un.getEllipseCenter(a,e[t.ref].s,e[t.ref].t,i),l=Un.getPerpendicularLine(e[t.ref].s,e[t.ref].t),c=Un.getPointConstructedEllipse(l,a,a,o),h=Un.getCloserBorder(c,e[t.ref].t);return t.fy=h.y,(0,s.isNullOrUndefined)(t.height)?h.y:h.y-t.height/2}return(t.y=Math.max(t.height/2,Math.min(r-t.height/2,t.y)))-t.height/2}))},analyseContentDim(){this.content.forEach((t=>{for(let e=0;e<this.nodes.length;e++)if(this.nodes[e].id===t.id){this.nodes[e].width=t.width,this.nodes[e].height=t.height,this.nodes[e].shape=this.computeShape(t.container||t.element);break}})),this.force.start()},computeRelativeShape(t,e){const i=e.querySelector("[data-shape]");if((0,s.isUndefined)(i))return;const n=t.getBoundingClientRect(),a=i.getBoundingClientRect(),r=e.getBoundingClientRect(),o=Number(t.getAttribute("width")),l=Number(t.getAttribute("height")),c={};c.width=o*a.width/n.width,c.height=l*a.height/n.height;const h=t.createSVGPoint();h.x=a.x,h.y=a.y;const d=h.matrixTransform(t.getScreenCTM().inverse());c.x=d.x,c.y=d.y;const u={};u.width=o*r.width/n.width,u.height=l*r.height/n.height;const p=t.createSVGPoint();p.x=a.x,p.y=a.y;const m=p.matrixTransform(t.getScreenCTM().inverse());let y;switch(u.x=m.x,u.y=m.y,i.tagName){case"circle":return{type:"circle",r:c.width/2};case"ellipse":return y=Number(i.getAttribute("width"))/a.width,r.width,y=Number(i.getAttribute("height"))/a.height,r.height,{type:"ellipse",rx:c.width/2,ry:c.height/2};default:y=Number(i.getAttribute("width"))/a.width;const t=r.width*y;return y=Number(i.getAttribute("height"))/a.height,{type:"rect",w:t,h:r.height*y}}},computeShape(t){const e=t.querySelector("[data-shape]");if((0,s.isNullOrUndefined)(e))return;const i=e.getBoundingClientRect(),n=t.getBoundingClientRect();let a;switch(e.tagName){case"circle":return a=Number(e.getAttribute("r"))/(i.width/2),{type:"circle",r:n.width*a/2};case"ellipse":a=Number(e.getAttribute("width"))/i.width;const t=n.width*a;return a=Number(e.getAttribute("height"))/i.height,{type:"ellipse",rx:t,ry:n.height*a};case"polygon":let s=e.getAttribute("data-points").split(" "),r=[];for(let t=0;t<s.length;t++)r.push({x:Number(s[t].split(",")[0])/i.width,y:Number(s[t].split(",")[1])/i.height});return{type:"polygon",points:r};default:a=Number(e.getAttribute("width"))/i.width;const o=n.width*a;return a=Number(e.getAttribute("height"))/i.height,{type:"rect",w:o,h:n.height*a}}},collide(t,e){let i=!1;const n=this.width,a=this.height;if(!(0,s.isNullOrUndefined)(t.ref)&&!(0,s.isNullOrUndefined)(e.ref))return i;if(!(0,s.isNullOrUndefined)(t.ref)){if(t.fx<e.x&&t.fy<e.y&&t.fx+t.width/2>e.x-e.width/2&&t.fy+t.height>e.x-e.height/2){let i=t.fx+t.width/2-(e.x-e.width/2),n=1.1*(t.fy+t.height/2-(e.y-e.height/2));switch(Math.min(i,n)){case i:e.x+=i;break;case n:e.y+=n}}else if(t.fx>e.x&&t.fy<e.y&&e.x+e.width/2>t.fx-t.width/2&&t.fy+t.height/2>e.y-e.height/2){let i=e.x+e.width/2-(t.fx-t.width/2),n=1.1*(t.fy+t.height/2-(e.y-e.height/2));switch(Math.min(i,n)){case i:e.x-=i;break;case n:e.y+=n}}else if(t.fx>e.x&&t.fy>e.y&&e.x+e.width/2>t.fx-t.width/2&&e.y+e.height/2>t.fy-t.height){let i=e.x+e.width/2-(t.fx-t.width/2),n=1.1*(e.y+e.height/2-(t.fy-t.height/2));switch(Math.min(i,n)){case i:e.x-=i;break;case n:e.y-=n}}else if(t.fx<e.x&&t.fy>e.y&&t.fx+t.width/2>e.x-e.width/2&&t.fy-t.height<e.y+e.height/2){let i=t.x+t.width-(e.x-e.width/2),n=1.1*(e.y+e.height/2-(t.y-t.height/2));switch(Math.min(i,n)){case i:e.x+=i;break;case n:e.y-=n}}return i}if(!(0,s.isNullOrUndefined)(e.ref)){if(t.x<e.fx&&t.y<e.fy&&t.x+t.width/2>e.fx-e.width/2&&t.y+t.height/2>e.fx-e.height/2){let i=t.x+t.width/2-(e.fx-e.width/2),n=1.1*(t.y+t.height/2-(e.fy-e.height/2));switch(Math.min(i,n)){case i:t.x-=i;break;case n:t.y-=n}}else if(t.x>e.fx&&t.y<e.fy&&e.fx+e.width/2>t.x-t.width/2&&t.y+t.height/2>e.fy-e.height/2){let i=e.fx+e.width/2-(t.x-t.width/2),n=1.1*(t.y+t.height/2-(e.fy-e.height/2));switch(Math.min(i,n)){case i:t.x+=i;break;case n:t.y-=n}}else if(t.x>e.fx&&t.y>e.fy&&e.fx+e.width/2>t.x-t.width/2&&e.fy+e.height/2>t.y-t.height/2){let i=e.fx+e.width/2-(t.x-t.width/2),n=1.1*(e.fy+e.height/2-(t.y-t.height/2));switch(Math.min(i,n)){case i:t.x+=i;break;case n:t.y+=n}}else if(t.x<e.fx&&t.y>e.fy&&t.x+t.width/2>e.fx-e.width/2&&t.y-t.height/2<e.fy+e.height/2){let i=t.x+t.width/2-(e.fx-e.width/2),n=1.1*(e.fy+e.height/2-(t.y-t.height/2));switch(Math.min(i,n)){case i:t.x-=i;break;case n:t.y+=n}}return i}if(e&&e!==t)if(t.x<=e.x&&t.y<=e.y&&t.x+t.width/2>=e.x-e.width/2&&t.y+t.height/2>=e.y-e.height/2){let i=t.x+t.width/2-(e.x-e.width/2),s=1.1*(t.y+t.height/2-(e.y-e.height/2));switch(Math.min(i,s)){case i:if(t.x-i/2<0){e.x+=i;break}if(e.x+i/2>n){t.x-=i;break}t.x-=i/2,e.x+=i/2;break;case s:if(t.y-s/2<0){e.x+=s;break}if(e.y+s/2>a){t.x-=s;break}t.y-=s/2,e.y+=s/2}}else if(t.x>e.x&&t.y<e.y&&e.x+e.width/2>t.x-t.width/2&&t.y+t.height/2>e.y-e.height/2){let i=e.x+e.width/2-(t.x-t.width/2),s=1.1*(t.y+t.height/2-(e.y-e.height/2));switch(Math.min(i,s)){case i:if(t.x+i/2>n){e.x-=i;break}if(e.x-i/2<0){t.x+=i;break}t.x+=i/2,e.x-=i/2;break;case s:if(t.y-s/2<0){e.x+=s;break}if(e.y+s/2>a){t.x-=s;break}t.y-=s/2,e.y+=s/2}}else if(t.x>e.x&&t.y>e.y&&e.x+e.width/2>t.x-t.width/2&&e.y+e.height/2>t.y-t.height/2){let i=e.x+e.width/2-(t.x-t.width/2),s=1.1*(e.y+e.height/2-(t.y-t.height/2));switch(Math.min(i,s)){case i:if(t.x+i/2>n){e.x-=i;break}if(e.x-i/2<0){t.x+=i;break}t.x+=i/2,e.x-=i/2;break;case s:if(t.y+s/2>a){e.y-=s;break}if(e.y-s/2<0){t.y+=s;break}t.y+=s/2,e.y-=s/2}}else if(t.x<e.x&&t.y>e.y&&t.x+t.width/2>e.x-e.width/2&&t.y-t.height/2<e.y+e.height/2){let i=t.x+t.width/2-(e.x-e.width/2),s=1.1*(e.y+e.height/2-(t.y-t.height/2));switch(Math.min(i,s)){case i:if(t.x-i/2<0){e.x+=i;break}if(e.x+i/2>n){t.x-=i;break}t.x-=i/2,e.x+=i/2;break;case s:if(t.y+s/2>a){e.y-=s;break}if(e.y-s/2<0){t.y+=s;break}t.y+=s/2,e.y-=s/2}}return i},focus(){return this.container.focus(),this},focusIn(){return this.focused=!0,this.container.classList.add("active"),this.container.classList.add("focus"),this.container.focus(),this},focusOut(){return this.focused=!1,this.container.classList.remove("active"),this.container.classList.remove("focus"),this},bindEvents(){this.projection.registerHandler("value.added",(t=>{this.addItem(t)})),this.projection.registerHandler("value.removed",(t=>{this.removeItem(t)})),this.projection.registerHandler("displayed",(()=>{(0,s.isEmpty)(this.source.value)||this.source.values.forEach((t=>{this.addItem(t),"prototype"===value.schema.nature&&(this.nodes[this.nodes.length-1].meta=this.nodes[i].concept,this.nodes[this.nodes.length-1].concept=value.getValue(!0).id)}))}))}},Un={getPointEllipse(t,e,i){const n=i.rx/2,s=i.ry/2,a=t.x,r=t.y,o=this.getDeq(t,e);let l=s*s+n*n*o.a*o.a,c=2*n*n*o.a*o.b-2*a*s*s-2*r*o.a*n*n,h=c*c-4*l*(a*a*s*s+n*n*r*r+n*n*o.b*o.b-2*r*n*n*o.b-n*n*s*s);if(h>=0){let t=(-c-Math.sqrt(h))/(2*l),e=t*o.a+o.b,i=(-c+Math.sqrt(h))/(2*l);return{x1:{x:t,y:e},x2:{x:i,y:i*o.a+o.b}}}},getPointConstructedEllipse(t,e,i,n){const s=e,a=i,r=n.x,o=n.y;let l=a*a+s*s*t.a*t.a,c=2*s*s*t.a*t.b-2*r*a*a-2*o*t.a*s*s,h=c*c-4*l*(r*r*a*a+s*s*o*o+s*s*t.b*t.b-2*o*s*s*t.b-s*s*a*a);if(h>=0){let e=(-c-Math.sqrt(h))/(2*l),i=e*t.a+t.b,n=(-c+Math.sqrt(h))/(2*l);return[{x:e,y:i},{x:n,y:n*t.a+t.b}]}},getEllipseCenter(t,e,i,n){let s=(e.x-i.x)/2,a=(e.y-i.y)/2,r=-Math.sqrt((t*t*(t*t)-t*t*(a*a)-t*t*(s*s))/(t*t*(a*a)+t*t*s*s)),o=r*(-t*s/t);return{x:r*(t*a/t)+(e.x+i.x)/2,y:o+(e.y+i.y)/2}},getPerpendicularLine(t,e){let i=(t.x+e.x)/2,n=(t.y+e.y)/2,s=-1/Un.getDeq(t,e).a;return{a:s,b:n-s*i}},getSelfPointEllipse(t){let e={x:t.x-t.ellipse.rx/2,y:t.y},i={x:t.x+t.ellipse.rx/2,y:t.y},n={x:t.x,y:t.y-t.ellipse.ry/2},s={x:t.x,y:t.y-t.ellipse.ry/2},a=0,r=0,o=0,l=0;switch(t.points.forEach((t=>{a+=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),r+=Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)),o+=Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y)),l+=Math.sqrt((t.x-s.x)*(t.x-s.x)+(t.y-s.y)*(t.y-s.y))})),Math.max(a,r,o,l)){case o:return{x:n.x,y:n.y,direction:"top"};case r:return{x:i.x,y:i.y,direction:"right"};case l:return{x:s.x,y:s.y,direction:"bot"};default:return{x:e.x,y:e.y,direction:"left"}}},getPointPolygon(t,e,i){let n=[];i.points.forEach((e=>{n.push({x:e.x*t.width+t.x-t.width/2,y:e.y*t.height+t.y-t.height/2})}));let s=n[0].x-e.x,a=n[0].y-e.y,r=Math.sqrt(s*s+a*a),o=r,l=0;for(let t=1;t<n.length;t++)s=n[t].x-e.x,a=n[t].y-e.y,r=Math.sqrt(s*s+a*a),r<o&&(o=r,l=t);return n[l]},getDeq(t,e){let i=(e.y-t.y)/(e.x-t.x);return{a:i,b:t.y-i*t.x}},getCloserBorder(t,e){let i=Math.sqrt((t[0].x-e.x)*(t[0].x-e.x)+(t[0].y-e.y)*(t[0].y-e.y));return Math.sqrt((t[1].x-e.x)*(t[1].x-e.x)+(t[1].y-e.y)*(t[1].y-e.y))<i?t[1]:t[0]},getPointRect(t,e,i){let n=t.x-i.w/2,s=t.y-i.h/2,a=t.x+i.w/2,r=t.y-i.h/2,o=t.y+i.h/2,l=Un.getDeq({x:t.x,y:t.y},{x:e.x,y:e.y}),c=Un.getDeq({x:n,y:s},{x:a,y:r}),h=Un.getLineIntersection(l,c);return h&&h.x>n&&h.x<a?[h,{x:(o-l.b)/l.a,y:o}]:[{x:a,y:l.a*a+l.b},{x:n,y:l.a*n+l.b}]},getLineIntersection(t,e){if(t.a===e.a)return!1;let i=t.a-e.a,n=e.b-t.b;return{x:n/i,y:t.a*(n/i)+t.b}},getPointCircle(t,e,i){let n=Un.getDeq({x:t.x,y:t.y},{x:e.x,y:e.y}),s=n.a*n.a+1,a=2*n.a*n.b-2*n.a*t.y-2*t.x,r=a*a-4*s*(n.b*n.b-n.b*t.y*2+t.y*t.y+t.x*t.x-i.r*i.r);if(r>0){let t=(-a+Math.sqrt(r))/(2*s),e=(-a-Math.sqrt(r))/(2*s);return[{x:t,y:n.a*t+n.b},{x:e,y:n.a*e+n.b}]}},computeBorder(t,e){let i={},n={};switch(t.shape.type){case"rect":return i=Un.getPointRect(t,e,t.shape),n=Un.getCloserBorder(i,e),n;case"circle":return i=Un.getPointCircle(t,e,t.shape),n=Un.getCloserBorder(i,e),n;case"ellipse":return i=Un.getPointEllipse(t,e,t.shape),n=Un.getCloserBorder(i,e),n;case"polygon":return i=Un.getPointPolygon(t,e,t.shape),i}}},Dn=Object.assign({},Mn,In),Hn={init(){const{dimensions:t}=this.schema;return this.dimensions=t,this},render(){(0,s.createDocFragment)();const{dimensions:t,saturation:e,overflow:i=!1,create:n,add:a,style:r}=this.schema;if(this.focusable=!0,(0,s.isNullOrUndefined)(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),t&&(this.container.setAttribute("width",t.width),this.container.setAttribute("height",t.height)),this.container.classList.add("algorithm-container"),this.container.dataset.nature="algorithm",this.container.dataset.algorithm="pattern",this.container.dataset.id=this.id,this.container.dataset.click="container",this.container.tabIndex=0),i&&(this.container.style.overflow="visible"),e&&(this.saturation=e.value,this.satTarget=e.target,(0,s.isNullOrUndefined)(e.satParams)||(this.satParams=e.satParams),(0,s.isNullOrUndefined)(e.acceptTarget)||(this.acceptTarget=e.acceptTarget)),(0,s.isNullOrUndefined)(this.anchors)&&this.setUpAnchors(),a&&(0,s.isNullOrUndefined)(this.add)){const{coordinates:t=!1,render:e}=a;this.add=Ys.call(this,e),t?(this.add.setAttribute("x",t.x),this.add.setAttribute("y",t.y)):(this.add.setAttribute("x",this.anchors.current.x),this.add.setAttribute("y",this.anchors.current.y)),this.container.append(this.add),this.add.style.overflow="visible",this.add.addEventListener("click",(()=>{}))}return this.displayed=!1,r&&(this.container.style=r),this.bindEvents(),n&&this.source.createElement(),r&&(this.container.style=r),this.container},checkDim(t,e,i){e+20+Number(i.getAttribute("y"))>Number(this.items[0].render.getAttribute("height"))&&this.items.forEach((t=>{this.projection.resolveElement(t.render).augment()}))},checkSpeDim(t,e,i){for(;e+20+Number(i.getAttribute("y"))>Number(this.items[this.items.length-1].render.getAttribute("height"));)this.projection.resolveElement(this.items[this.items.length-1].render).augment()},createItem(t){const{tag:e}=this.schema.pattern;let i=this.model.createProjection(t,e);return i.optional=!0,i.parent=this.projection,{render:i.init().render(),projection:i}},addItem(t){if(console.log("Saturation test"),console.log(this),console.log(this.count),console.log(this.saturation),this.saturation&&((0,s.isNullOrUndefined)(this.count)&&(this.count=0),this.count>=this.saturation))return console.log(this.satTarget),this.environment.getActiveReceiver(this.satTarget).source.createElement(),void this.saturate(t);let{render:e,projection:i}=this.createItem(t);(0,s.isNullOrUndefined)(this.dimSchema)&&(this.dimSchema=new Map),this.dimSchema.set(e.dataset.id,si.analyseDim(e,this.schema.pattern)),this.container.append(e);let n=this.anchors.current;(0,s.isNullOrUndefined)(this.items)&&(this.items=[]),this.items.push({render:e,position:n,index:this.anchorIndex,id:t.id}),this.displayed?(si.setDimensions(this.dimSchema.get(e.dataset.id)),i.update("displayed",e.dataset.id)):((0,s.isNullOrUndefined)(this.waiting)&&(this.waiting=[]),this.waiting.push({render:e,projection:i})),(0,s.isNullOrUndefined)(this.anchors)&&this.setUpAnchors(),si.positionElement(n,e),this.nextAnchor(!0),this.count++,this.warnings&&this.warnings.forEach((t=>{i.warn(t)}))},placeAdd(){this.add.setAttribute("x",this.anchors.current.x),this.add.setAttribute("y",this.anchors.current.y)},setUpAnchors(){const{first:t,next:e}=this.schema.pattern;this.anchors={},this.anchors.current=t,this.anchors.next=e,this.anchors.indexes=[t],this.anchorIndex=0},saturate(t){let e=this.environment.projectionModel.createProjection(this.projection.concept,this.projection.tag).init();e.render(),console.log("SATPARAMS"),console.log(this.satParams),console.log(this.satParams.coordinates),this.environment.getActiveReceiver("solo").accept(e.element.container,this.satParams.dimension,this.satParams.coordinates),e.element.addItem(t),this.full=!0,this.saturated=!0},accept(t,e=!1){const{render:i,params:n}=t;if(e){let t=this.projection.resolveElement(i);return t.parent=this,void(t.definitions&&this.container.append(t.definitions))}this.container.append(i)},acceptAnchor(t){console.log("AcceptingAnchor"),this.container.append(t);let e=this.anchors.current;this.items.push({render:t,anchor:e,index:this.anchorIndex,id:t.id}),si.positionElement(e,t),this.nextAnchor(!0),this.count++,this.count>=this.saturation&&(this.full=!0)},nextAnchor(t=!1){let{x:e,y:i}=this.anchors.current,n=this.anchors.next.x,a=this.anchors.next.y;this.anchors.current={x:e+n,y:i+a},t&&this.anchorModel&&Qe.AnchorHandler.nextAnchor(this.schema.handler.id,this.id),(0,s.isNullOrUndefined)(this.add)||this.schema.add.coordinates||this.placeAdd(),this.anchors.indexes.push({x:e+n,y:i+a}),this.anchorIndex++,(0,s.isNullOrUndefined)(this.parent)||this.parent.checkAugment(this.anchors.current,this.container)},createHolder(t){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");return i.append(t),e.append(i),e},adapt(t,e){let i,n=t.parentNode.parentNode,s=t.parentNode;switch(e.type){case"fixed":n.setAttribute("width",e.value),s.setAttribute("width",e.value),i=t.getBoundingClientRect(),s.setAttribute("height",i.height),s.setAttribute("width",i.width),n.setAttribute("height",i.height*e.value/i.width),n.setAttribute("viewBox","0 0 "+i.width+" "+i.height)}},transmitFirst(){const{render:t,position:e,index:i,id:n}=this.items[0];return console.log("Transmitting"),console.log(t),this.removeItem({id:n}),console.log("Removed"),t},removeItem(t){let e,i;for(i=0;i<this.items.length;i++)if(this.items[i].id===t.id){const{position:t}=this.items[i];e=t;break}if(console.log("Value"),console.log(t),console.log(i),i>=this.items.length||(0,s.isNullOrUndefined)(this.items[i]))return;const n=this.items[i].index;for(this.items.splice(i,1),i>this.items.length&&i--;i<this.items.length;){let t=this.items[i].position;this.items[i].position=e,this.items[i].render.setAttribute("x",e.x),this.items[i].render.setAttribute("y",e.y),this.items[i].index--,e=t,i++}this.anchors.indexes.splice(this.anchors.indexes.length-1,1),this.anchors.current=this.anchors.indexes[this.anchors.indexes.length-1],(0,s.isNullOrUndefined)(this.add)||this.schema.add.coordinates||this.placeAdd(),(0,s.isNullOrUndefined)(this.parent)||this.parent.checkAugment(this.anchors.current,this.container),this.anchorModel&&Qe.AnchorHandler.deleteItem(this.schema.handler.id,this.id,n),(0,s.isNullOrUndefined)(this.count)||(this.count--,this.full&&(this.full=!1,this.environment.saturationRevolved(this,this.projection.rtag),this.saturated=!0),this.count)},removeAnchor(t){if(!(0,s.isNullOrUndefined)(this.items))for(let e=0;e<this.items.length;e++)this.items[e].index>t&&(this.items[e].position.x-=this.anchors.next.x,this.items[e].position.y-=this.anchors.next.y,this.items[e].render.setAttribute("x",this.items[e].position.x),this.items[e].render.setAttribute("y",this.items[e].position.y),this.items[e].index--);this.anchors.indexes.splice(this.anchors.indexes.length-1,1),this.anchors.current=this.anchors.indexes[this.anchors.indexes.length-1],(0,s.isNullOrUndefined)(this.add)||this.schema.add.coordinates||this.placeAdd(),(0,s.isNullOrUndefined)(this.parent)||this.parent.checkAugment(this.anchors.current,this.container)},moveElemToAnchor(t,e){this.anchors.indexes.length<=t+1&&(this.nextAnchor(!0),(0,s.isNullOrUndefined)(this.add)||this.schema.add.coordinates||this.placeAdd());let i=this.anchors.indexes[t];this.items[e].position=i,this.items[e].index=t;let n=this.items[e].render;return n.setAttribute("x",i.x),n.setAttribute("y",i.y),n},increaseAnchors(t,e,i,n){e>this.anchors.indexes.length&&this.nextAnchor(!0),(0,s.isNullOrUndefined)(this.items)||this.items.forEach((s=>{s.render!==i&&s.index>=t&&s.index<=e&&(s.index++,n.includes(s.index)?this.projection.resolveElement(s.render).increaseAnchor():(s.position=this.anchors.indexes[s.index],s.render.setAttribute("x",s.position.x),s.render.setAttribute("y",s.position.y)))}))},decreaseAnchors(t,e,i,n){(0,s.isNullOrUndefined)(this.items)||this.items.forEach((s=>{s.render!==i&&s.index>=t&&s.index<=e&&(s.index--,n.includes(s.index)?this.projection.resolveElement(s.render).decreaseAnchor():(s.position=this.anchors.indexes[s.index],s.render.setAttribute("x",s.position.x),s.render.setAttribute("y",s.position.y)))}))},clickHandler(t){},focusIn(){return this.add&&this.container.append(this.add),this.focused=!0,this.container.classList.add("active"),this.container.classList.add("focus"),this},focusOut(){return this.hide&&this.add&&this.add.remove(),this.container.classList.remove("active"),this.container.classList.remove("focus"),this.focused=!1,this},bindEvents(){this.projection.registerHandler("displayed",(t=>{this.displayed||(this.displayed=!0,(0,s.isNullOrUndefined)(this.waiting)||this.waiting.forEach((t=>{let{render:e,projection:i}=t;si.setDimensions(this.dimSchema.get(e.dataset.id)),i.update("displayed")}))),this.schema.handler&&(this.anchorModel=Qe.AnchorHandler.create(this,this.schema.handler))})),this.projection.registerHandler("value.added",(t=>{this.full?this.saturated||this.saturate():this.addItem(t)})),this.projection.registerHandler("value.removed",(t=>{this.removeItem(t)}))}},Pn=Object.assign({},Mn,Hn),{isHTMLElement:Vn,createDiv:Bn,isNullOrUndefined:Rn,createDocFragment:$n,isEmpty:Fn,isNull:zn,valOrDefault:qn,isUndefined:Wn}=n(835),Zn={init(){return this},render(){const{content:t=[],coordinates:e=!1,overflow:i=!1,background:n,data:s=!1,reference:a=!1,dimensions:r=!1,style:o,rmv:l=!1,anchor:c=!1}=this.schema,h=$n(),d=new DOMParser;if(Rn(this.container)){if(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),n&&(this.background=d.parseFromString(n.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement,this.container.append(this.background),this.container.setAttribute("width",this.background.getAttribute("width")),this.container.setAttribute("height",this.background.getAttribute("height")),this.width=Number(this.background.getAttribute("width")),this.height=Number(this.background.getAttribute("height")),this.fixed=!0),r){const{width:t,height:e,viewBox:i=!1}=r;this.container.setAttribute("width",t),this.container.setAttribute("height",e),this.width=r.width,this.height=r.height,this.fixed=!0,i&&this.container.setAttribute("viewBox",i.minX+" "+i.minY+" "+i.width+" "+i.height)}if(i&&(this.container.style.overflow="visible"),n||r||(this.container.style.overflow="visible"),e){const{x:t,y:i}=e;this.container.setAttribute("x",t),this.container.setAttribute("y",i)}this.container.classList.add("algorithm-container"),this.container.dataset.nature="algorithm",this.container.dataset.algorithm="decoration",this.container.dataset.id=this.id,a&&(this.container.dataset.reference=!0)}return s&&this.container.setAttribute("data-shape",s),c&&(this.attachPoint=c),Rn(this.content)&&!Fn(t)&&(this.waiting=[],this.positioning=[],this.itemsPos=new Map,this.itemsDim=new Map,this.content=[],t.forEach((t=>{let e=Ys.call(this,t.render),i=si.analyseDim(e,t);this.itemsDim.set(e.dataset.id,i);let n=this.projection.resolveElement(e);Rn(n)?this.waitingRendered=!0:this.content.push(n),i.await&&this.waiting.push(e.dataset.id);let s=si.analysePos(e,t);this.itemsPos.set(e.dataset.id,s),s.await&&this.positioning.push(s),Rn(i.holder)?this.container.append(i.item):this.container.append(i.holder)}))),h.hasChildNodes()&&this.container.append(h),o&&(this.container.style=o),this.displayed=!1,this.bindEvents(),this.container},focus(t){this.container.focus()},focusIn(){return!Rn(this.deleteElem)&&this.deleteElem.dataset.focusable&&this.container.append(this.deleteElem),Rn(this.focusedElement)||this.focusedElement.forEach((t=>{this.container.append(t)})),Rn(this.content)||this.content.forEach((t=>{t.focusIn()})),this.focused=!0,this.container.classList.add("active"),this.container.classList.add("focus"),this.rmv&&this.container.append(this.rmv),this},focusOut(){return!Rn(this.deleteElem)&&this.deleteElem.dataset.focusable&&this.deleteElem.remove(),Rn(this.focusedElement)||this.focusedElement.forEach((t=>{t.remove()})),Rn(this.content)||this.content.forEach((t=>{t.focusOut()})),this.container.classList.remove("active"),this.container.classList.remove("focus"),this.focused=!1,this.rmv&&this.rmv.remove(),this},notify(t){this.updateContentDim(t.id)},augment(){let t=this.container.querySelector("[data-augment]");t.setAttribute("height",Number(t.getAttribute("height"))+30),Rn(this.container.getAttribute("height"))||this.container.setAttribute("height",Number(this.container.getAttribute("height"))+30),zn(this.background)||this.background.setAttribute("height",Number(this.background.getAttribute("height"))+30)},updateContentDim(t){let e=this.itemsDim.get(t),i=this.itemsPos.get(t);"ratio"===e.type&&(si.adaptRatio(e.item,e.ratio),si.positionElement(i,e.holder))},accept(t,e,i){console.log("Accepting"),console.log(i);let n=si.analyseDim(t,{dimension:e}),s=si.analysePos(t,{coordinates:i});Rn(this.itemsDim)&&(this.itemsDim=new Map),this.itemsDim.set(t.dataset.id,n),Rn(this.itemsPos)&&(this.itemsPos=new Map),this.itemsPos.set(t.dataset.id,s),this.displayed?(si.setDimensions(n),Rn(n.holder)?si.positionElement(s,t):si.positionElement(s,n.holder)):(Rn(this.content)&&(this.content=[],this.waiting=[],this.positioning=[]),this.content.push(this.projection.resolveElement(t)),n.await&&this.waiting.push(t.dataset.id),s.await&&this.positioning.push(s)),Rn(n.holder)?this.container.append(n.item):this.container.append(n.holder)},analyseContentDim(){if(this.fixed)return;let t=0;if(0===this.content.length)return;for(;t<this.content.length&&Rn(this.content[t]);)t++;if(t>this.content.length)return;let e=this.itemsDim.get(this.content[t].id);if("pure"===e.type){let e,i,n,s;Rn(this.content[t].container)?(e=Number(this.content[t].element.getAttribute("x")),i=Number(this.content[t].element.getAttribute("y")),n=Number(this.content[t].width),s=Number(this.content[t].height)):(e=Number(this.content[t].container.getAttribute("x")),i=Number(this.content[t].container.getAttribute("y")),n=Number(this.content[t].width),s=Number(this.content[t].height)),this.width=e+n,this.height=i+s}for(let i=t+1;i<this.content.length;i++)if(!Rn(this.content[i])&&(e=this.itemsDim.get(this.content[i].id),"pure"===e.type)){let t,e,n,s;Rn(this.content[i].container)?(t=Number(this.content[i].element.getAttribute("x")),e=Number(this.content[i].element.getAttribute("y")),n=Number(this.content[i].width),s=Number(this.content[i].height)):(t=Number(this.content[i].container.getAttribute("x")),e=Number(this.content[i].container.getAttribute("y")),n=Number(this.content[i].width),s=Number(this.content[i].height)),(Rn(this.width)||this.width<t+n)&&(this.width=t+n),(Rn(this.height)||this.height<e+s)&&(this.height=e+s)}this.notifyDimObservers()},notifyDim(t,e,i){if(this.fixed)return;this.analyseContentDim();let n=Number(i.getAttribute("x")),s=Number(i.getAttribute("y"));(Rn(this.width)||this.width<n+t)&&(this.width=n+t),(Rn(this.height)||this.height<s+e)&&(this.height=s+e)},clickHandler(t){if(this.container.contains(t)){for(;t!==this.container&&Rn(t.dataset.nature);)t=t.parentNode;t!==this.container&&this.projection.resolveElement(t).clickHandler(t)}return!1},bindEvents(){Rn(this.content)||this.content.forEach((t=>{Rn(t)||"static"===t.object||"simulation"===t.object||t.registerDimensionsObserver(this)})),this.projection.registerHandler("displayed",(t=>{this.displayed||(this.displayed=!0,Rn(this.waiting)||this.waiting.forEach((t=>{si.setDimensions(this.itemsDim.get(t))})),Rn(this.positioning)||this.positioning.forEach((t=>{let e=this.itemsDim.get(t.render.dataset.id);e.holder?si.positionElement(t,e.holder):si.positionElement(t,t.render)})),Rn(this.content)||this.content.forEach((t=>{Rn(t)||t.projection.update("displayed",t.id)})),Rn(this.width)&&this.analyseContentDim(),Rn(this.parent)||Vn(this.parent.element)||Vn(this.parent.container)||this.parent.notifyDim(this.width,this.height,this.container))})),this.waitingRendered&&this.projection.registerHandler("binding",(t=>{this.itemsDim.set(t.dataset.id,{await:!1,item:t,type:"pure"}),this.content.push(this.projection.resolveElement(t)),this.analyseContentDim()}))}},Xn=Object.assign({},Mn,Zn),Yn={init(){return this},render(){const{interaction:t,algorithm:e}=this.schema,i=(0,s.createDocFragment)();if((0,s.isNullOrUndefined)(this.container)&&(this.container=(0,s.createDiv)({id:this.id,class:["algorithm","algorithm--holder"],tabindex:-1,dataset:{nature:"algorithm",view:"holder",id:this.id}})),(0,s.isNullOrUndefined)(this.interactionArea)&&(this.interactionArea=Ys.call(this,t),i.append(this.interactionArea)),(0,s.isNullOrUndefined)(this.svgArea)){let t=this.source.getAttributeByName(e.name).target,n=this.environment.projectionModel.createProjection(t,e.tag);this.svgArea=n.init().render(),i.append(this.svgArea)}return i.hasChildNodes()&&this.container.append(i),this.container}},Gn=Object.assign({},Mn,Yn),{createDocFragment:Jn,isNullOrUndefined:Kn,isEmpty:Qn,isNull:ts}=n(835),{AnchorHandler:es}=n(185),is={init(){return this},render(){const{dimensions:t,overflow:e=!1,contains:i,reserve:n,model:s,style:a,offset:r,zindex:o,content:l=[]}=this.schema;if(Kn(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.classList.add("algorithm-container"),this.container.dataset.nature="algorithm",this.container.dataset.algorithm="anchor",this.container.dataset.id=this.id),e&&(this.container.style.overflow="visible"),t){const{width:e,height:i}=t;this.container.setAttribute("width",e),this.container.setAttribute("height",i)}return!Qn(l)&&Kn(this.items)&&(this.items=[],l.forEach((t=>{const{coordinates:e,render:i,dimension:n}=t;let s=Ys.call(this,i);s.setAttribute("x",e.x),s.setAttribute("y",e.y),this.container.append(s),this.items.push(s)}))),s&&(es.createSubModel(s,this),this.anchorModel=s),this.bindEvents(),a&&this.createStyleMimic(a),this.container},focusIn(){},focusOut(){},increaseSize(){const t=Number(this.container.getAttribute("height"));this.container.setAttribute("height",t+this.anchors.y),this.mimic.setAttribute("height",t+this.anchors.y)},decreaseSize(){const t=Number(this.container.getAttribute("height"));this.container.setAttribute("height",t-this.anchors.y),this.mimic.setAttribute("height",t-this.anchors.y)},increaseAnchor(){const t=Number(this.container.getAttribute("y"));this.container.setAttribute("y",t+this.anchors.y)},decreaseAnchor(){const t=Number(this.container.getAttribute("y"));this.container.setAttribute("y",t-this.anchors.y)},createStyleMimic(t){this.mimic=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.mimic.setAttribute("width",this.container.getAttribute("width")),this.mimic.setAttribute("height",this.container.getAttribute("height")),this.mimic.style=t,this.container.prepend(this.mimic)},checkCover(){let t,e;for(let i=0;i<this.covering.length;i++)Kn(t)?(t=Math.min(this.covering[i].from.x,this.covering[i].to.x),e=Math.max(this.covering[i].from.x,this.covering[i].to.x)):(t>Math.min(this.covering[i].from.x,this.covering[i].to.x)&&(t=Math.min(this.covering[i].from.x,this.covering[i].to.x)),e<Math.max(this.covering[i].from.x,this.covering[i].to.x)&&(e=Math.max(this.covering[i].from.x,this.covering[i].to.x)));const i=Number(this.container.getAttribute("x"));i<t?(this.container.setAttribute("width",e-t+2*this.schema.offset.x+(t-i)),this.mimic.setAttribute("width",e-t+2*this.schema.offset.x+(t-i))):(this.container.setAttribute("width",e-t+2*this.schema.offset.x),this.mimic.setAttribute("width",e-t+2*this.schema.offset.x))},bindEvents(){this.projection.registerHandler("displayed",(()=>{let t=es.estimatePositionCondamn(this.anchorModel,this);const{offset:e=!1}=this.schema;e&&(this.container.setAttribute("x",t.x-e.x),this.container.setAttribute("y",t.y-e.y)),this.anchors=t.anchors,this.rtag=this.environment.getActiveReceiver(this.schema.rtag),this.rtag.container.prepend(this.container)})),this.projection.registerHandler("accept",(t=>{es.registerSubModel(this.anchorModel,this,t)})),this.projection.registerHandler("cover",(t=>{Kn(this.rtag)&&(this.rtag=this.findActiveReceiver(this.schema.rtag));const e=es.estimatePosition(t.calcS),i=es.estimatePosition(t.calcT);Kn(this.covering)&&(this.covering=[]),this.setCovering(t,e,i),this.checkCover()}))},setCovering(t,e,i){for(let n=0;n<this.covering.length;n++)if(this.covering[n].item===t)return this.covering[n].from=e,void(this.covering[n].to=i);this.covering.push({item:t,from:e,to:i})}},ns=Object.assign({},Mn,is),ss={init(){return this},render(){const{button:t,view:e}=this.schema;if((0,s.isNullOrUndefined)(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.classList.add("algorithm-container"),this.container.dataset.nature="algorithm",this.container.dataset.algorithm="decoration",this.container.dataset.id=this.id),(0,s.isNullOrUndefined)(this.button)){const e=new DOMParser,{content:i,coordinates:n}=t;this.button=e.parseFromString(parseFromString(i.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement),this.button.setAttribute("x",n.x),this.button.setAttribute("y",n.y),this.container.append(t)}return this.bindEvents(),this.container},bindEvents(){}},as=Object.assign({},Mn,ss),{isHTMLElement:rs,createDiv:os,isNullOrUndefined:ls,createDocFragment:cs,isEmpty:hs,isNull:ds,valOrDefault:us}=n(835),ps={init(){return this},render(){const{content:t,dimensions:e}=this.schema;return ls(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","text"),this.container.classList.add("algorithm-container"),this.container.dataset.nature="algorithm",this.container.dataset.algorithm="add",this.container.dataset.id=this.id,this.container.setAttribute("font-size",12),this.container.style["dominant-baseline"]="hanging"),this.container.textContent=t,this.container},focusIn(){},focusOut(){},clickHandler(){this.source.createElement()},bindEvents(){this.container.addEventListener("click",(()=>{this.source.createElement()}))}},ms=Object.assign({},Mn,ps),ys={init(){return this},render(){const{action:t,content:e,background:i}=this.schema;if((0,s.isNullOrUndefined)(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.classList.add("algorithm-container"),this.container.dataset.nature="algorithm",this.container.dataset.algorithm="button",this.container.dataset.id=this.id),e&&(0,s.isNullOrUndefined)(this.content)&&this.createContent(e),i){const t=new DOMParser;this.background=t.parseFromString(i.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement,this.container.append(this.background)}return this.container},createContent(t){switch(t.type){case"text":this.content=document.createElementNS("http://www.w3.org/2000/svg","text");const{placeholder:e,font:i,size:n,anchor:s}=t.text;this.content.setAttribute("font-family",i),this.content.setAttribute("font-size",n),this.content.setAttribute("text-anchor",s),this.content.style["dominant-baseline"]="hanging",this.content.textContent=e,this.container.append(this.content)}},focusIn(){},focusOut(){}},gs=Object.assign({},Mn,ys);var fs=0;const bs=()=>"algo"+fs++,vs={force:(t,e,i)=>Object.create(Dn,{object:{value:"algorithm"},name:{value:"force-algorithm"},type:{value:"force"},id:{value:bs()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),pattern:(t,e,i)=>Object.create(Pn,{object:{value:"algorithm"},name:{value:"pattern-algorithm"},type:{value:"pattern"},id:{value:bs()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),decoration:(t,e,i)=>Object.create(Xn,{object:{value:"algorithm"},name:{value:"decoration-algorithm"},type:{value:"decoration"},id:{value:bs()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),holder:(t,e,i)=>Object.create(Gn,{object:{value:"algorithm"},name:{value:"holder-algorithm"},type:{value:"holder"},id:{value:bs()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),anchor:(t,e,i)=>Object.create(ns,{object:{value:"algorithm"},name:{value:"anchor-algorithm"},type:{value:"anchor"},id:{value:bs()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),"alt-view":(t,e,i)=>Object.create(as,{object:{value:"algorithm"},name:{value:"alt-view"},type:{value:"alt-view"},id:{value:bs()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),add:(t,e,i)=>Object.create(ms,{object:{value:"algorithm"},name:{value:"add"},type:{value:"add"},id:{value:bs()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),button:(t,e,i)=>Object.create(gs,{object:{value:"algorithm"},name:{value:"svg-button"},type:{value:"button"},id:{value:bs()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}})},ws={createAlgo(t,e,i){const{type:n}=e,a=vs[n];if((0,s.isNullOrUndefined)(a))throw new TypeError(`Missing handler: The '${n}' algo could not be handled`);const r=a(t,e,i);if((0,s.isNullOrUndefined)(r))throw new Error(`Bad request: The '${n}' algo could not be created`);return r.createAlgo=this.createAlgo,(0,s.isNullOrUndefined)(r.id)&&(r.id=bs()),r}},xs={notifyDimObservers(){isNullOrUndefined(this.observers)||this.observers.forEach((t=>{t.analyseContentDim()}))}},Es={init(){return this.width=700,this.height=700,this},render(){(0,s.isNullOrUndefined)(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.setAttribute("width",350),this.container.setAttribute("height",350),this.container.classList.add("simulation-container"),this.container.dataset.nature="simulation",this.container.dataset.shape="force",this.container.dataset.id=this.id,this.simulationArea=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.simulationArea.setAttribute("width",350),this.simulationArea.setAttribute("height",350),this.simulationArea.setAttribute("viewBox","0 0 700 700"),this.simulationArea.setAttribute("preserveAspectRatio","xMidYMid meet"),this.simulationArea.id=this.id,this.settingArea=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.settingArea.setAttribute("x",0),this.settingArea.setAttribute("y",0),this.container.append(this.settingArea),this.container.append(this.simulationArea)),(0,s.isNullOrUndefined)(this.circleRadiusTxt)&&(this.circleRadiusTxt=document.createElementNS("http://www.w3.org/2000/svg","text"),this.circleRadiusTxt.textContent="Radius:",this.circleRadiusTxt.setAttribute("x",5),this.circleRadiusTxt.setAttribute("y",30),this.circleRadiusTxt.setAttribute("font-size",8),this.circleRadiusTxt.setAttribute("font-weight",500),this.circleRadiusTxt.setAttribute("font-family","Segoe UI"),this.settingArea.append(this.circleRadiusTxt)),(0,s.isNullOrUndefined)(this.radiusTxt)&&(this.radiusTxt=Ys.call(this,{type:"attribute",name:"radius",tag:"simulation"}),this.radiusTxt.setAttribute("x",37),this.radiusTxt.setAttribute("y",30),this.settingArea.append(this.radiusTxt)),(0,s.isNullOrUndefined)(this.widthTxt)&&(this.widthTxt=document.createElementNS("http://www.w3.org/2000/svg","text"),this.widthTxt.textContent="Width:",this.widthTxt.setAttribute("x",5),this.widthTxt.setAttribute("y",40),this.widthTxt.setAttribute("font-size",8),this.widthTxt.setAttribute("font-weight",500),this.widthTxt.setAttribute("font-family","Segoe UI"),this.settingArea.append(this.widthTxt)),(0,s.isNullOrUndefined)(this.wTxt)&&(this.wTxt=Ys.call(this,{type:"attribute",name:"width",tag:"simulation"}),this.wTxt.setAttribute("x",37),this.wTxt.setAttribute("y",40),this.settingArea.append(this.wTxt)),(0,s.isNullOrUndefined)(this.heightTxt)&&(this.heightTxt=document.createElementNS("http://www.w3.org/2000/svg","text"),this.heightTxt.textContent="Height",this.heightTxt.setAttribute("x",5),this.heightTxt.setAttribute("y",50),this.heightTxt.setAttribute("font-size",8),this.heightTxt.setAttribute("font-weight",500),this.heightTxt.setAttribute("font-family","Segoe UI"),this.settingArea.append(this.heightTxt)),(0,s.isNullOrUndefined)(this.hTxt)&&(this.hTxt=Ys.call(this,{type:"attribute",name:"height",tag:"simulation"}),this.hTxt.setAttribute("x",37),this.hTxt.setAttribute("y",50),this.settingArea.append(this.hTxt)),this.button=document.createElementNS("http://www.w3.org/2000/svg","text"),this.button.textContent="Simulate",this.settingArea.append(this.button),this.button.addEventListener("click",(()=>{this.setUpForce()})),this.button.setAttribute("x",5),this.button.setAttribute("y",12),this.button.setAttribute("font-size",12),this.button.setAttribute("font-weight",500),this.button.setAttribute("font-family","Segoe UI");let t=document.createElementNS("http://www.w3.org/2000/svg","path");t.classList.add("linkSimulation"),t.id="linkSimulation"+this.id,t.setAttribute("stroke","black"),this.simulationArea.append(t),this.svgNode=[];for(let t=0;t<3;t++){let t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.style.fill="red",t.style.stroke="black",t.setAttribute("r",50),t.classList.add("nodeSimulation"),t.classList.add("hidden"),this.svgNode.push(t),this.simulationArea.append(t)}let e=document.createElementNS("http://www.w3.org/2000/svg","circle");return e.classList.add("nodeSimulation"),e.classList.add("hidden"),this.svgNode.push(e),this.simulationArea.append(e),this.bindEvents(),this.intensity=Number(this.intensityAttr.value),this.linkVal=Number(this.linkDistAttr.value),this.container},branch(){this.setUpForce()},setUpForce(){if((0,s.isNullOrUndefined)(this.force)){this.svgNode.forEach((t=>{t.classList.remove("hidden")})),this.source.getAttributeByName("intensity").target.value;const e=Number(this.source.getAttributeByName("linkVal").target.value);this.force=d3.layout.force().size([this.width,this.height]).nodes([]).links([{source:0,target:1}]).linkDistance(e).charge(-500).on("tick",this.tick.bind(this));var t=d3.select("#"+this.id);this.nodes=this.force.nodes(),this.nodes.push({x:25,y:25}),this.nodes.push({x:325,y:25}),this.nodes.push({x:175,y:75}),this.nodes.push({ref:!0}),this.node=t.selectAll("circle").data(this.nodes),this.links=this.force.links(),this.link=t.selectAll("path").data(this.links)}this.force.start()},clickHandler(){},tick(){let t=this.nodes;this.node.attr("cx",(function(e){if(e.ref){As.getMediatrice(t[0],t[1]);let e={x:(t[0].x+t[1].x)/2,y:(t[0].y+t[1].y)/2};return t[0].x,t[1].x,t[0].x,t[1].x,t[0].y,t[1].y,t[0].y,t[1].y,e.x}return e.x})).attr("cy",(function(e){if(e.ref){As.getMediatrice(t[0],t[1]);let e={x:(t[0].x+t[1].x)/2,y:(t[0].y+t[1].y)/2};return t[0].x,t[1].x,t[0].x,t[1].x,t[0].y,t[1].y,t[0].y,t[1].y,e.y}return e.y})),this.link.attr("d",(function(t){return"M"+t.target.x+","+t.target.y+"A1,1 0 0 1,"+t.source.x+","+t.source.y+"A1,1 0 0 0,"+t.target.x+","+t.target.y}))},updateClean(){this.height=this.heightAttr.value,this.width=this.widthAttr.value,this.height>0&&this.width>0&&this.simulationArea.setAttribute("viewBox","0 0 "+this.width+" "+this.height);for(let t=0;t<3;t++)this.radius.value>0&&this.svgNode[t].setAttribute("r",this.radius.value)},focusIn(){},focusOut(){},updateParams(){if((0,s.isNullOrUndefined)(this.force))this.updateClean();else{this.force.stop(),this.intensity=Math.min(-1*Number(this.intensityAttr.value),-1*Number(this.intensityAttr.value)),this.linkVal=Number(this.linkDistAttr.value);for(let t=0;t<3;t++)this.radius.value>0&&this.svgNode[t].setAttribute("r",this.radius.value);this.height=this.heightAttr.value,this.width=this.widthAttr.value,this.height>0&&this.width>0&&(this.simulationArea.setAttribute("viewBox","0 0 "+this.width+" "+this.height),this.force.size([this.width,this.height])),this.force.linkDistance(this.linkVal).charge(this.intensity),this.force.start()}},bindEvents(){this.intensityAttr=this.source.getAttributeByName("intensity").target,this.linkDistAttr=this.source.getAttributeByName("linkVal").target,this.widthAttr=this.source.getAttributeByName("width").target,this.heightAttr=this.source.getAttributeByName("height").target,this.radius=this.source.getAttributeByName("radius").target,this.intensityAttr.register(this.projection),this.linkDistAttr.register(this.projection),this.widthAttr.register(this.projection),this.heightAttr.register(this.projection),this.radius.register(this.projection),this.projection.registerHandler("value.changed",(()=>{this.updateParams()}))}},As={getMediatrice(t,e){let i=(t.x+e.x)/2,n=(t.y+e.y)/2,s=(e.y-t.y)/(e.x-t.x);return{k:-1/s,h:n+-1/s*i}},findPoint(t,e,i){let n=1-t.k*t.k,s=2*e.y*t.k-2-2*t.k*t.h,a=s*s-4*n*(e.x*e.x-e.y*e.y-t.h*t.h+2*e.y*t.h-i);if(a>0)return(-s-Math.sqrt(a))/(2*n);console.log(a),console.log("Not Found")}},js=Object.assign(Object.create(xs),Es),Os={init(){return this.width=350,this.height=100,this},focusIn(){},focusOut(){},render(){return(0,s.isNullOrUndefined)(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.setAttribute("width",300),this.container.setAttribute("height",50),this.container.setAttribute("x",100),this.container.setAttribute("y",0),this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.setAttribute("d","M 0 25 L 200 25"),this.container.classList.add("simulation-container"),this.container.dataset.nature="simulation",this.container.dataset.shape="force",this.container.dataset.id=this.id,this.container.id=this.id,this.path.id="path"+this.id,this.container.append(this.path)),this.markerStart=Ys.call(this,{type:"attribute",name:"start",placeholder:!1,tag:"simulation-start"}),this.markerEnd=Ys.call(this,{type:"attribute",name:"end",placeholder:!1,tag:"simulation-end"}),this.container.append(this.markerStart),this.container.append(this.markerEnd),this.bindEvents(),this.container},applyStyle(){this.stroke.hasValue()&&this.path.setAttribute("stroke",this.stroke.value),this.width.hasValue()&&this.path.setAttribute("stroke-width",this.width.value),this.dasharray.hasValue()&&this.path.setAttribute("stroke-dasharray",this.dasharray.value),this.linecap.hasValue()&&this.path.setAttribute("stroke-linecap",this.linecap.value)},bindEvents(){this.stroke=this.source.getAttributeByName("stroke").target,this.stroke.register(this.projection),this.path.setAttribute("stroke","black"),this.width=this.source.getAttributeByName("width").target,this.width.register(this.projection),this.width.hasValue()&&this.path.setAttribute("stroke-width",this.width.value),this.dasharray=this.source.getAttributeByName("dasharray").target,this.dasharray.register(this.projection),this.dasharray.hasValue()&&this.path.setAttribute("stroke-dasharray",this.dasharray.value),this.linecap=this.source.getAttributeByName("linecap").target,this.linecap.register(this.projection),this.linecap.hasValue()&&this.path.setAttribute("stroke-linecap",this.linecap.value),this.projection.registerHandler("value.changed",(()=>{this.applyStyle()}))}},Ns=Object.assign(Object.create(xs),Os),ks={init(){return this.width=350,this.height=100,this},render(){return(0,s.isNullOrUndefined)(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.setAttribute("width",200),this.container.setAttribute("height",200),this.container.setAttribute("viewBox","0 0 50 50"),this.text=document.createElementNS("http://www.w3.org/2000/svg","text"),this.text.setAttribute("x",25),this.text.setAttribute("y",25),this.text.textContent="Element",this.heightTxt=document.createElementNS("http://www.w3.org/2000/svg","text"),this.heightTxt.setAttribute("x",2),this.heightTxt.setAttribute("y",45),this.heightTxt.setAttribute("font-size",2),this.heightTxt.textContent="dimensions: 50x50",this.xyText=document.createElementNS("http://www.w3.org/2000/svg","text"),this.xyText.setAttribute("x",2),this.xyText.setAttribute("y",47),this.xyText.setAttribute("font-size",2),this.xyText.textContent="x,y: 25, 25",this.container.append(this.text),this.container.append(this.widthTxt),this.container.append(this.heightTxt),this.container.append(this.xyText),this.container.classList.add("simulation-container"),this.container.dataset.nature="simulation",this.container.dataset.shape="text",this.container.dataset.id=this.id,this.container.style="border:solid rgb(135, 161, 255); border-radius:10%;",this.container.id=this.id),this.bindEvents(),this.container},applyStyle(){this.font.hasValue()&&this.text.setAttribute("font-family",this.font.value),this.size.hasValue()&&this.text.setAttribute("font-size",this.size.value),this.anchor.hasValue()&&this.text.setAttribute("text-anchor",this.anchor.value),this.weight.hasValue()&&this.text.setAttribute("font-weight",this.weight.value),this.baseline.hasValue()&&(this.text.style["dominant-baseline"]=this.baseline.value)},bindEvents(){this.font=this.source.getAttributeByName("font").target,this.font.register(this.projection),this.text.setAttribute("font-family","Verdana"),this.size=this.source.getAttributeByName("size").target,this.size.register(this.projection),this.size.hasValue()&&this.text.setAttribute("font-size",this.size.value),this.weight=this.source.getAttributeByName("weight").target,this.weight.register(this.projection),this.weight.hasValue()&&this.text.setAttribute("font-weight",this.weight.value),this.anchor=this.source.getAttributeByName("anchor").target,this.anchor.register(this.projection),this.anchor.hasValue()&&this.text.setAttribute("text-anchor",this.anchor.value),this.baseline=this.source.getAttributeByName("baseline").target,this.baseline.register(this.projection),this.baseline.hasValue()&&this.text.setAttribute("dominant-baseline",this.anchor.value),this.projection.registerHandler("value.changed",(()=>{this.applyStyle()}))}},Ls=Object.assign(Object.create(xs),ks),_s={init(){return this.width=400,this.height=200,this},render(){return(0,s.isNullOrUndefined)(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.setAttribute("width",200),this.container.setAttribute("height",200),this.container.setAttribute("viewBox","0 0 400 400"),this.container.classList.add("simulation-container"),this.container.dataset.nature="simulation",this.container.dataset.simulation="selection",this.container.dataset.id=this.id,this.container.style="border:solid rgb(135, 161, 255); border-radius:10%;",this.container.id=this.id),this.bindEvents(),this.setUpSimulation(),this.container},bindEvents(){this.nbItem=this.source.getAttributeByName("nbItem").target,this.orientation=this.source.getAttributeByName("orientation").target,this.break=this.source.getAttributeByName("break").target,this.itemW=this.source.getAttributeByName("dimensions").target.getAttributeByName("width").target,this.itemH=this.source.getAttributeByName("dimensions").target.getAttributeByName("height").target,this.nbItem.register(this.projection),this.orientation.register(this.projection),this.break.register(this.projection),this.itemW.register(this.projection),this.itemH.register(this.projection),this.projection.registerHandler("value.changed",(()=>{this.setUpSimulation()}))},setUpSimulation(){this.baseLetter=65,(0,s.isNullOrUndefined)(this.selection)||this.selection.remove(),this.selection=document.createElementNS("http://www.w3.org/2000/svg","svg");for(let t=0;t<this.nbItem.value;t++){let e=this.createItem();this.place(e,t),this.baseLetter++}this.center(),this.container.append(this.selection)},focusIn(){},focusOut(){},place(t,e){const i=(0,s.valOrDefault)(this.itemW.value,50),n=(0,s.valOrDefault)(this.itemH.value,50),a=this.break.value;switch(this.orientation.value){case"horizontal":a>0?(t.setAttribute("x",e%a*i),t.setAttribute("y",~~(e/a)*n)):t.setAttribute("x",e*i);break;case"vertical":a>0?(t.setAttribute("x",~~(e/a)*n),t.setAttribute("y",e%a*i)):t.setAttribute("y",e*n)}},createItem(){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");const e=(0,s.valOrDefault)(this.itemW.value,50),i=(0,s.valOrDefault)(this.itemH.value,50);this.break.value,t.setAttribute("width",e),t.setAttribute("height",i);let n=document.createElementNS("http://www.w3.org/2000/svg","text");return n.textContent=String.fromCharCode(this.baseLetter),n.setAttribute("x",e/2),n.setAttribute("y",i/2),n.setAttribute("text-anchor","middle"),n.setAttribute("font-size",i/2),n.setAttribute("font-family","Segoe UI"),n.setAttribute("font-weight",500),t.append(n),this.selection.append(t),t},center(){const t=this.orientation.value,e=this.break.value,i=(0,s.valOrDefault)(this.itemW.value,50),n=(0,s.valOrDefault)(this.itemH.value,50),a=this.nbItem.value;switch(t){case"horizontal":e>0&&a>e?(this.selection.setAttribute("x",200-e*i/2),this.selection.setAttribute("y",200-Math.ceil(a/e)*n/2)):(this.selection.setAttribute("x",200-a*i/2),this.selection.setAttribute("y",200-n/2));break;case"vertical":e>0&&a>e?(this.selection.setAttribute("y",200-e*n/2),this.selection.setAttribute("x",200-Math.ceil(a/e)*i/2)):(this.selection.setAttribute("y",200-a*n/2),this.selection.setAttribute("x",200-i/2))}}},Cs=Object.assign(Object.create(xs),_s),Ts={init(){return this},focusIn(){},focusOut(){},render(){return(0,s.isNullOrUndefined)(this.def)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.def=document.createElementNS("http://www.w3.org/2000/svg","defs"),this.marker=document.createElementNS("http://www.w3.org/2000/svg","marker"),this.marker.setAttribute("orient","auto"),this.marker.setAttribute("markerUnit","strokeWidth"),this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.container.classList.add("simulation-container"),this.container.dataset.nature="simulation",this.container.dataset.shape="marker",this.container.dataset.id=this.id,this.def.append(this.marker),this.marker.append(this.path),this.container.append(this.def)),this.bindEvents(),this.container},focus(){},updateParams(){(0,s.isNullOrUndefined)(this.idAttr.value)||(this.marker.setAttribute("id",this.idAttr.value),this.user=this.container.parentNode.getElementById("path"+this.container.parentNode.id),this.user.setAttribute("marker-"+(this.schema.start?"start":"end"),"url(#"+this.idAttr.value+")")),(0,s.isNullOrUndefined)(this.minX.value)||(0,s.isNullOrUndefined)(this.minY.value)||(0,s.isNullOrUndefined)(this.width.value)||(0,s.isNullOrUndefined)(this.height.value)||this.marker.setAttribute("viewBox",this.minX.value+" "+this.minY.value+" "+this.width.value+" "+this.height.value),(0,s.isNullOrUndefined)(this.refX.value)||this.marker.setAttribute("refX",this.refX.value),(0,s.isNullOrUndefined)(this.refY.value)||this.marker.setAttribute("refY",this.refY.value),(0,s.isNullOrUndefined)(this.markerWidth.value)||this.marker.setAttribute("markerWidth",this.markerWidth.value),(0,s.isNullOrUndefined)(this.markerHeight.value)||this.marker.setAttribute("markerHeight",this.markerHeight.value),(0,s.isNullOrUndefined)(this.d.value)||this.path.setAttribute("d",this.d.value)},bindEvents(){this.idAttr=this.source.getAttributeByName("id").target,this.idAttr.register(this.projection),this.minX=this.source.getAttributeByName("minX").target,this.minX.register(this.projection),this.minY=this.source.getAttributeByName("minY").target,this.minY.register(this.projection),this.width=this.source.getAttributeByName("width").target,this.width.register(this.projection),this.height=this.source.getAttributeByName("height").target,this.height.register(this.projection),this.refX=this.source.getAttributeByName("refX").target,this.refX.register(this.projection),this.refY=this.source.getAttributeByName("refY").target,this.refY.register(this.projection),this.markerWidth=this.source.getAttributeByName("markerWidth").target,this.markerWidth.register(this.projection),this.markerHeight=this.source.getAttributeByName("markerHeight").target,this.markerHeight.register(this.projection),this.d=this.source.getAttributeByName("d").target,this.d.register(this.projection),this.projection.registerHandler("value.changed",(()=>{this.updateParams()}))}},Ss=Object.assign(Object.create(xs),Ts),Ms={init(){return this.width=350,this.height=350,this},render(){return(0,s.isNullOrUndefined)(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.classList.add("simulation-container"),this.container.dataset.nature="simulation",this.container.dataset.shape="content",this.container.dataset.id=this.id,this.container.setAttribute("width",300),this.container.setAttribute("height",300),this.holder=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.append(this.holder)),this.bindEvent(),this.container},focusIn(){},focusOut(){},scale(){const t=this.content.width.baseVal.value,e=this.content.height.baseVal.value;let i=Math.max(t,e)/100;this.holder.setAttribute("viewBox","0 0 "+t+" "+e),this.holder.setAttribute("width",t/i),this.holder.setAttribute("height",e/i),this.holder.setAttribute("x",100),this.holder.setAttribute("y",100)},bindEvent(){const t=new DOMParser;this.projection.registerHandler("value.changed",(e=>{(0,s.isNullOrUndefined)(this.content)||this.content.remove(),this.content=t.parseFromString(e.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement,this.holder.append(this.content),this.scale()})),this.source.hasValue()&&(this.content=t.parseFromString(this.source.value.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement,this.holder.append(this.content),this.scale())}},Is=Object.assign(Object.create(xs),Ms),Us={init(){return this.width=350,this.height=350,this},render(){return(0,s.isNullOrUndefined)(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.setAttribute("width",400),this.container.setAttribute("height",400),this.container.classList.add("simulation-container"),this.container.dataset.nature="simulation",this.container.dataset.shape="pattern",this.container.dataset.id=this.id),(0,s.isNullOrUndefined)(this.visualization)&&(this.visualization=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.visualization.setAttribute("viewBox","0 0 400 400"),this.visualization.setAttribute("width",400),this.visualization.setAttribute("height",400),this.visualization.setAttribute("preserveAspectRatio","xMidYMid meet"),this.container.append(this.visualization)),(0,s.isNullOrUndefined)(this.interaction)&&(this.interaction=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.interaction.setAttribute("viewBox","0 0 400 400"),this.interaction.setAttribute("width",400),this.interaction.setAttribute("height",400),this.container.append(this.interaction)),(0,s.isNullOrUndefined)(this.firstX)&&(this.firstX=this.source.getAttributeByName("first").target.getAttributeByName("x").target,this.firstY=this.source.getAttributeByName("first").target.getAttributeByName("y").target),(0,s.isNullOrUndefined)(this.nextX)&&(this.nextX=this.source.getAttributeByName("next").target.getAttributeByName("x").target,this.nextY=this.source.getAttributeByName("next").target.getAttributeByName("y").target),(0,s.isNullOrUndefined)(this.itemWidth)&&(this.itemWidth=this.source.getAttributeByName("itemWidth").target,this.itemWidthTextual=Ys.call(this,{type:"attribute",name:"itemWidth",tag:"simulation-large"}),this.itemWidthTextual.setAttribute("x",57),this.itemWidthTextual.setAttribute("y",30),this.itemWidthStatic=Ys.call(this,{kind:"static",type:"svg-text",content:"ItemWidth:",style:{font:"Segoe UI",size:11,anchor:"end",baseline:"auto",color:"black",weight:500}}),this.itemWidthStatic.setAttribute("x",56),this.itemWidthStatic.setAttribute("y",30),this.interaction.append(this.itemWidthTextual),this.interaction.append(this.itemWidthStatic)),(0,s.isNullOrUndefined)(this.widthTextual)&&(this.widthAttr=this.source.getAttributeByName("width").target,this.widthTextual=Ys.call(this,{type:"attribute",name:"width",tag:"simulation-large"}),this.widthTextual.setAttribute("x",34),this.widthTextual.setAttribute("y",45),this.widthStatic=Ys.call(this,{kind:"static",type:"svg-text",content:"Width:",style:{font:"Segoe UI",size:11,anchor:"end",baseline:"auto",color:"black",weight:500}}),this.widthStatic.setAttribute("x",33),this.widthStatic.setAttribute("y",45),this.interaction.append(this.widthTextual),this.interaction.append(this.widthStatic)),(0,s.isNullOrUndefined)(this.heightTextual)&&(this.heightAttr=this.source.getAttributeByName("height").target,this.heightTextual=Ys.call(this,{type:"attribute",name:"height",tag:"simulation-large"}),this.heightTextual.setAttribute("x",38),this.heightTextual.setAttribute("y",60),this.heightStatic=Ys.call(this,{kind:"static",type:"svg-text",content:"Height:",style:{font:"Segoe UI",size:11,anchor:"end",baseline:"auto",color:"black",weight:500}}),this.heightStatic.setAttribute("x",37),this.heightStatic.setAttribute("y",60),this.interaction.append(this.heightTextual),this.interaction.append(this.heightStatic)),(0,s.isNullOrUndefined)(this.nbItem)&&(this.nbItem=this.source.getAttributeByName("nbItem").target,this.nbItemText=Ys.call(this,{type:"attribute",name:"nbItem",tag:"simulation-large"}),this.nbItemStatic=Ys.call(this,{kind:"static",type:"svg-text",content:"nbItem:",style:{font:"Segoe UI",size:11,anchor:"end",baseline:"auto",color:"black",weight:500}}),this.nbItemText.setAttribute("x",26),this.nbItemText.setAttribute("y",15),this.nbItemStatic.setAttribute("x",25),this.nbItemStatic.setAttribute("y",15),this.interaction.append(this.nbItemStatic),this.interaction.append(this.nbItemText),this.setUpItems()),this.bindEvents(),this.container},setUpItems(){let t=this.nbItem.value;this.items=[];for(let e=0;e<t;e++){let t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("width",this.itemWidth.value),t.setAttribute("height",this.itemWidth.value),t.setAttribute("fill","white"),t.setAttribute("stroke","#738CFF"),t.setAttribute("stroke-width",5),t.setAttribute("x",e*this.nextX.value+this.firstX.value),t.setAttribute("y",e*this.nextY.value+this.firstY.value),this.visualization.append(t),this.items.push(t)}},updateContainer(){(0,s.isNullOrUndefined)(this.widthAttr.value)||(0,s.isNullOrUndefined)(this.heightAttr.value)||this.visualization.setAttribute("viewBox","0 0 "+this.widthAttr.value+" "+this.heightAttr.value)},updateItems(){let t=this.nbItem.value;if(!(0,s.isNullOrUndefined)(t)){if(this.items.length>t){for(let e=t;e<this.items.length;e++)this.items[e].remove();this.items.splice(t,this.items.length-t)}if(this.items.length<t)for(let e=this.items.length;e<t;e++){let t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("fill","white"),t.setAttribute("stroke","#738CFF"),t.setAttribute("stroke-width",5),this.visualization.append(t),this.items.push(t)}for(let t=0;t<this.items.length;t++)this.items[t].setAttribute("width",(0,s.valOrDefault)(this.itemWidth.value,50)),this.items[t].setAttribute("height",(0,s.valOrDefault)(this.itemWidth.value,50)),this.items[t].setAttribute("x",t*this.nextX.value+this.firstX.value),this.items[t].setAttribute("y",t*this.nextY.value+this.firstY.value)}},bindEvents(){this.nbItem.register(this.projection),this.firstX.register(this.projection),this.firstY.register(this.projection),this.nextX.register(this.projection),this.nextY.register(this.projection),this.itemWidth.register(this.projection),this.widthAttr.register(this.projection),this.heightAttr.register(this.projection),this.projection.registerHandler("value.changed",(()=>{this.updateContainer(),this.updateItems()}))}},Ds=Object.assign(Object.create(xs),Us),Hs={init(){return this.width=460,this.height=220,this},render(){if((0,s.isNullOrUndefined)(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.classList.add("simulation-container"),this.container.dataset.nature="simulation",this.container.dataset.shape="force",this.container.dataset.id=this.id,this.container.setAttribute("width",this.width),this.container.setAttribute("height",this.height)),(0,s.isNullOrUndefined)(this.nodes)){this.nodes=[];for(let t=0;t<3;t++){let t=Ys.call(this,{kind:"static",type:"svg",content:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10" width="10" height="10" version="1"><circle r="5" cx="5" cy="5"></circle></svg>'});this.container.append(t),this.nodes.push(t)}this.nodes[0].setAttribute("x",50),this.nodes[0].setAttribute("y",110),this.nodes[1].setAttribute("x",225),this.nodes[1].setAttribute("y",35),this.nodes[2].setAttribute("x",400),this.nodes[2].setAttribute("y",190)}return(0,s.isNullOrUndefined)(this.path)&&(this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.setAttribute("stroke","black"),this.path.setAttribute("fill","transparent"),this.container.append(this.path)),this.sp=Ys.call(this,{type:"attribute",name:"sub-paths",tag:"simulation"}),this.container.append(this.sp),this.subPaths=this.projection.resolveElement(this.sp),this.bindEvents(),this.bindStyle(),this.bindSubPath(),this.bindSubStyle(),this.setPath(),this.container},setPath(){let t=this.meet.value;switch(t){case"free":this.path.setAttribute("d","M 55 115 L 230 40 L 405 195");break;case"minX":this.path.setAttribute("d","M 55 40 L 55 195");break;case"maxX":this.path.setAttribute("d","M 405 40 L 405 195");break;case"minY":this.path.setAttribute("d","M 55 40 L 405 40");break;case"maxY":this.path.setAttribute("d","M 55 195 L 405 195")}this.style(),this.subPaths.setPath(t,{x:0,y:0})},bindEvents(){this.meet=this.source.getAttributeByName("meet").target,this.meet.register(this.projection),this.projection.registerHandler("value.changed",(()=>{this.setPath()}))},style(){this.path.setAttribute("stroke",this.stroke.value),this.path.setAttribute("stroke-width",this.width.value),this.path.setAttribute("stroke-linecap",this.linecap.value),(0,s.isNullOrUndefined)(this.dasharray.value)||(this.path.style["stroke-dasharray"]=this.dasharray.value)},bindStyle(){const t=this.source.getAttributeByName("arrow-style").target;this.dasharray=t.getAttributeByName("dasharray").target,this.dasharray.register(this.projection),this.stroke=t.getAttributeByName("stroke").target.getAttributeByName("value").target,this.stroke.register(this.projection),this.width=t.getAttributeByName("width").target,this.width.register(this.projection),this.linecap=t.getAttributeByName("linecap").target,this.linecap.register(this.projection),console.log(this)},bindSubPath(){},bindSubStyle(){}},Ps=Object.assign(Object.create(xs),Hs),Vs={init(){return this.width=460,this.height=220,this},render(){if((0,s.isNullOrUndefined)(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.classList.add("simulation-container"),this.container.dataset.nature="simulation",this.container.dataset.shape="force",this.container.dataset.id=this.id,this.container.setAttribute("width",this.width),this.container.setAttribute("height",this.height)),(0,s.isNullOrUndefined)(this.paths)){this.paths=[];for(let t=0;t<3;t++){let t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("stroke","black"),t.setAttribute("fill","transparent"),console.log(t),this.container.append(t),this.paths.push(t)}}return this.bindEvents(),this.bindStyle(),console.log("Returning this"),console.log(this.container),this.container},setPath(t,e){if((0,s.isNullOrUndefined)(t)||(this.meet=t),(0,s.isNullOrUndefined)(e)||(this.offset=e),"free"===this.meet)return this.paths[0].remove(),this.paths[1].remove(),this.paths[2].remove(),void this.style();switch(this.container.append(this.paths[0]),this.container.append(this.paths[1]),this.container.append(this.paths[2]),this.meet){case"minX":this.paths[0].setAttribute("d","M "+(55+this.offset.x)+" 110 L 60 110"),this.paths[1].setAttribute("d","M "+(55+this.offset.x)+" 40 L 230 40"),this.paths[2].setAttribute("d","M "+(55+this.offset.x)+" 195 L 405 195");break;case"maxX":this.paths[0].setAttribute("d","M "+(405+this.offset.x)+" 110 L 60 110"),this.paths[1].setAttribute("d","M "+(405+this.offset.x)+" 35 L 230 110"),this.paths[2].setAttribute("d","M "+(405+this.offset.x)+" 190 L 405 190");break;case"minY":this.paths[0].setAttribute("d","M 110 "+(35+this.offset.y)+" 110 L 60 110"),this.paths[1].setAttribute("d","M 35 "+(35+this.offset.y)+" 35 L 230 110"),this.paths[2].setAttribute("d","M 190 "+(35+this.offset.y)+" 190 L 405 190");break;case"maxY":this.paths[0].setAttribute("d","M 110 "+(190+this.offset.y)+" 110 L 60 110"),this.paths[1].setAttribute("d","M 35 "+(190+this.offset.y)+" 35 L 230 110"),this.paths[2].setAttribute("d","M 190 "+(190+this.offset.y)+" 190 L 405 190")}this.style()},bindEvents(){this.projection.registerHandler("value.changed",(()=>{this.setPath()}))},style(){for(let t=0;t<3;t++)this.paths[t].setAttribute("stroke",this.stroke.value),this.paths[t].setAttribute("stroke-width",this.width.value),this.paths[t].setAttribute("stroke-linecap",this.linecap.value),(0,s.isNullOrUndefined)(this.dasharray.value)||(this.path.style["stroke-dasharray"]=this.dasharray.value)},bindStyle(){const t=this.source.getAttributeByName("arrow-style").target;this.dasharray=t.getAttributeByName("dasharray").target,this.dasharray.register(this.projection),this.stroke=t.getAttributeByName("stroke").target.getAttributeByName("value").target,this.stroke.register(this.projection),this.width=t.getAttributeByName("width").target,this.width.register(this.projection),this.linecap=t.getAttributeByName("linecap").target,this.linecap.register(this.projection),console.log(this)}},Bs=Object.assign(Object.create(xs),Vs);var Rs=0;const $s=()=>"algo"+Rs++,Fs={force:(t,e,i)=>Object.create(js,{object:{value:"simulation"},name:{value:"force-simulation"},type:{value:"force"},id:{value:$s()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),arrow:(t,e,i)=>Object.create(Ns,{object:{value:"simulation"},name:{value:"arrow-simulation"},type:{value:"arrow"},id:{value:$s()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),text:(t,e,i)=>Object.create(Ls,{object:{value:"simulation"},name:{value:"text-simulation"},type:{value:"text"},id:{value:$s()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),selection:(t,e,i)=>Object.create(Cs,{object:{value:"simulation"},name:{value:"selection-simulation"},type:{value:"selection"},id:{value:$s()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),marker:(t,e,i)=>Object.create(Ss,{object:{value:"simulation"},name:{value:"marker-simulation"},type:{value:"marker"},id:{value:$s()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),content:(t,e,i)=>Object.create(Is,{object:{value:"simulation"},name:{value:"content-simulation"},type:{value:"content"},id:{value:$s()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),pattern:(t,e,i)=>Object.create(Ds,{object:{value:"simulation"},name:{value:"pattern-simulation"},type:{value:"pattern"},id:{value:$s()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),multi:(t,e,i)=>Object.create(Ps,{object:{value:"simulation"},name:{value:"multi-simulation"},type:{value:"multi"},id:{value:$s()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),"sub-path":(t,e,i)=>Object.create(Bs,{object:{value:"simulation"},name:{value:"subPath-simulation"},type:{value:"subPath"},id:{value:$s()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}})},zs={createSimulation(t,e,i){console.log(e);const{type:n}=e,a=Fs[n];if((0,s.isNullOrUndefined)(a))throw new TypeError(`Missing handler: The '${n}' simulation could not be handled`);const r=a(t,e,i);if((0,s.isNullOrUndefined)(r))throw new Error(`Bad request: The '${n}' simulation could not be created`);return r.createSimulation=this.createSimulation,(0,s.isNullOrUndefined)(r.id)&&(r.id=$s()),console.log("About to return simu"),console.log(r),r}};function qs(t){return"property"===t.type?this.projection.concept.getProperty(t.name):t}function Ws(t,e,i){const{tag:n,placeholder:r={},style:o,options:l,listen:c}=e;if(!i.hasAttribute(t)){let e=`Attribute '${t}' does not exist in the concept '${i.name}'`;return this.environment.notify(e,a.k$.ERROR),this.environment.addError({source:"projection",code:"attribute_not_found",message:e}),(0,s.createI)({hidden:!0},t)}(0,s.valOrDefault)(e.required,i.isAttributeRequired(t))&&!i.isAttributeCreated(t)&&i.createAttribute(t);const h={name:t,get created(){return i.isAttributeCreated(t)},schema:e,placeholder:(0,s.createI)({class:["projection-element"],hidden:!0},t),parent:this,projection:this.projection,element:null};if(this.projection.attributes.push(h),!h.created){const{content:e}=r;return h.placeholder=e?Ys.call(this,e,i,{focusable:!0}):(0,s.createI)({class:["projection-element","projection-element--placeholder"],tabindex:0,dataset:{object:"attribute",id:t}},`Add ${t}`),h.placeholder.addEventListener("click",(e=>{i.createAttribute(t),this.projection.resolveElement(h.element).focus()})),h.placeholder}{const{target:e,schema:a}=i.getAttributeByName(t);let r=this.projection.model.createProjection(e,n).init(l);if(c&&(r.listen=!0),r.parent=this.projection,r._style=o,h.element=r.render(),(0,s.isNullOrUndefined)(h.element))return(0,s.createI)({hidden:!0},t);r.element.parent=this}return h.element}function Zs(t,e){const{value:i,placement:n}=t,{target:a,description:r}=e.getAttributeByName(i);let o=this.projection.model.createProjection(a,n.tag).init();o.parent=this.projection,o.render(),(0,s.isNullOrUndefined)(a.value)||o.element.initValue(a.value),o.element.parent=this;let l=i[0].toUpperCase()+i.substring(1);return o.element.attributeName=l,o.element}function Xs(t,e){let i=this.projection.model.createProjection(e,t).init();return i.parent=this.projection,i.render(),i.element.parent=this,i.element.container}function Ys(t,e,i={}){if(t.kind)return Gs.call(this,t,e,i);const n=(0,s.valOrDefault)(e,this.projection.concept);if("container"===t.type){let e=Cn(this.model,t,this.projection);return e.source=n,e.parent=this,e.init(i),this.model.registerLayout(e),e.render()}if("layout"===t.type){let e=ja.createLayout(this.model,t.layout,this.projection);return e.source=n,e.parent=this,e.init(i),this.model.registerLayout(e),e.render()}if("field"===t.type){let e=Di.createField(this.model,t.field,this.projection);return e.parent=this,e.init(i),this.model.registerField(e),e.render()}if("static"===t.type){let e=jn.createStatic(this.model,t.static,this.projection);return e.source=n,e.parent=this,e.init(i),this.model.registerStatic(e),e.render()}if("algorithm"===t.type){let e=ws.createAlgo(this.model,t.algorithm,this.projection);return e.init(),this.model.registerAlgorithm(e),e.render()}if("simulation"===t.type){let e=zs.createSimulation(this.model,t.simulation,this.projection);return e.init(),this.model.registerSimulation(e),e.render()}if("dynamic"===t.type)return Ys.call(this,t.dynamic,e,i);if("attribute"===t.type)return Ws.call(this,t.name,t,n);if("svg-attribute"===t.type)return Zs.call(this,t,n);if("external"===t.type)return Xs.call(this,t.tag,n);if("g-fragment"===t.type){let e=t.name,i=this.model.getGFragmentSchema(e.toLowerCase());return(new DOMParser).parseFromString(i.content.content.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement}if("template"===t.type){let n=t.name;"param"===n.type&&(n=this.projection.getParam(n.name)),console.log(t);let a=this.model.getTemplateSchema(n);a.param&&(t.param&&a.param.forEach((e=>{Object.assign(e,t.param.find((t=>t.name===e.name)))})),this.projection.addParam(a.param));const r=(0,s.createDocFragment)();let o,l=Object.assign({template:a},i),c=!1;return a.content.forEach((t=>{r.append(Ys.call(this,t,e,l))})),c?o:r}if("projection"===t.type){const{tag:e,style:i,src:a,required:r=!1}=t;if(a&&"attribute"===a.type)return Ws.call(this,a.name,t,n);const o={schema:t,placeholder:(0,s.createI)({class:["projection-element"],hidden:!0}),parent:this,projection:this.projection,element:null};return o.update=function(t,a,r){if(o.element&&(o.element.remove(),o.element=null),n.hasValue()){let t=n.getValue(!0),a=this.projection.model.createProjection(t,e).init();a.placeholder=o.placeholder,a.parent=this.projection,o.element=a.render(),o.placeholder&&o.placeholder.after(o.element),(0,s.isHTMLElement)(o.element)&&Kt.call(this.projection,o.element,i),a.element.parent=this.projection.element,a.update("displayed"),this.projection.update("binding",a.element.container||a.element.element)}},n.register(o),o.update(),o.element||o.placeholder}if("property"===t.type){const{name:e}=t;return this.projection.concept.getProperty(e)}if("html"===t.type){const{html:e}=t;return(0,s.htmlToElement)(e)}if("raw"===t.type){const{raw:e}=t;return e}if("state"===t.type){let n={},s=ge.call(this,n,t.state);return Ys.call(this,s.content,e,i)}throw console.error(t),new TypeError("Bad argument: The type is not recognized")}function Gs(t,e,i={}){const n=(0,s.valOrDefault)(e,this.projection.concept),{kind:a}=t;if("container"===a){let e=Cn(this.model,t,this.projection);return e.source=n,e.parent=this,e.init(i),this.model.registerLayout(e),e.render()}if("layout"===a){let e=ja.createLayout(this.model,t,this.projection);return e.source=n,e.parent=this,e.init(i),this.model.registerLayout(e),e.render()}if("field"===a){let e=Di.createField(this.model,t,this.projection);return e.parent=this,e.init(i),this.model.registerField(e),e.render()}if("static"===a){let e=jn.createStatic(this.model,t,this.projection);return e.source=n,e.parent=this,e.init(i),this.model.registerStatic(e),e.render()}if("attribute"===a||"dynamic"===a)return Ws.call(this,t.name,t,n);if("template"===a){let n=t.name;"param"===n.type&&(n=this.projection.getParam(n.name));let a=this.model.getTemplateSchema(n);a.param&&(t.param&&a.param.forEach((e=>{Object.assign(e,t.param.find((t=>t.name===e.name)))})),this.projection.addParam(a.param));const r=(0,s.createDocFragment)();return a.content.forEach((t=>{r.append(Ys.call(this,t,e,i))})),r}if("projection"===a){const{tag:e,style:i,required:a=!1}=t,r={schema:t,placeholder:(0,s.createI)({class:["projection-element"],hidden:!0}),parent:this,projection:this.projection,element:null};return r.update=function(t,a,o){if(r.element&&(r.element.remove(),r.element=null),n.hasValue()){let t=n.getValue(!0),a=this.projection.model.createProjection(t,e).init();a.placeholder=r.placeholder,a.parent=this.projection,r.element=a.render(),r.placeholder&&r.placeholder.after(r.element),(0,s.isHTMLElement)(r.element)&&Kt.call(this.projection,r.element,i),a.element.parent=this.projection.element}},n.register(r),r.update(),r.element||r.placeholder}if("property"===a){const{name:e}=t;return this.projection.concept.getProperty(e)}if("html"===a){const{html:e}=t;return(0,s.htmlToElement)(e)}if("raw"===a){const{raw:e}=t;return e}if("state"===a){let n={},s=ge.call(this,n,t.state);return Ys.call(this,s.content,e,i)}throw console.error(t),new TypeError("Bad argument: The type is not recognized")}const Js={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Ks=[{concept:{name:"stack-layout"},type:"layout",tags:[],projection:{type:"stack",orientation:"vertical",disposition:[{type:"attribute",name:"orientation"}]}}],Qs={orientation:null,args:null,init(t={}){const{orientation:e=Js.HORIZONTAL,editable:i=!0,focusable:n=!1}=this.schema;return this.orientation=e,this.focusable=n,this.editable=i,this.elements=[],this.children=[],this.args=t,Object.assign(this,t),this},getOrientation(){return this.orientation},setOrientation(t){this.orientation=t,this.refresh()},render(){const{disposition:t,style:e,help:i}=this.schema;if(!Array.isArray(t))throw new SyntaxError("Bad disposition");const n=(0,s.createDocFragment)();(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["layout-container","stack-layout"],title:i,dataset:{nature:"layout",layout:"stack",id:this.id}}));for(let e=0;e<t.length;e++){let i=Ys.call(this,t[e],null,this.args),s=this.environment.resolveElement(i);s&&(s.parent=this),this.elements.push(i),n.append(i)}return this.focusable?this.container.tabIndex=0:this.container.dataset.ignore="all",Kt.call(this.projection,this.container,e),n.hasChildNodes()&&(this.container.append(n),this.bindEvents()),this.container.style.display="flex",this.container.style.flexWrap="nowrap",this.refresh(),this.container},design(){return{concept:[{name:"stack-layout",nature:"concrete",attributes:[{name:"orientation",target:{name:"string",default:this.orientation,constraint:{values:["horizontal","vertical"]}}}]}],projection:Ks,handlers:{orientation:(t,e)=>{this.setOrientation(e)}}}},refresh(){return this.orientation===Js.VERTICAL?this.container.style.flexDirection="column":this.orientation===Js.HORIZONTAL&&(this.container.style.flexDirection="row"),this},focus(t){if(this.focusable)this.container.focus();else{let t=(0,s.getElement)('[tabindex]:not([tabindex="-1"])',this.container);if((0,s.isNullOrUndefined)(t))return!1;let e=this.environment.resolveElement(t);e&&e.focus(t)}},focusIn(){return this.focused=!0,this.container.classList.add("active"),this.container.classList.add("focus"),this},focusOut(){return this.container.classList.remove("active"),this.container.classList.remove("focus"),this.focused=!1,this},bindEvents(){this.container.addEventListener("change",(t=>{const{target:e}=t,{prop:i}=e.dataset;"orientation"===i&&this.setOrientation(e.value)})),this.projection.registerHandler("view.changed",((t,e)=>{e&&e.parent===this.projection&&(t.parent=this)}))}},ta=Object.assign({},On,Qs),ea={args:null,init(t={}){const{editable:e=!0,focusable:i=!1}=this.schema;return this.focusable=i,this.editable=e,this.elements=[],this.children=[],this.args=t,Object.assign(this,t),this},render(){const{disposition:t,style:e,help:i}=this.schema;if(!Array.isArray(t))throw new SyntaxError("Bad disposition");const n=(0,s.createDocFragment)();(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["layout-container"],title:i,dataset:{nature:"layout",layout:"wrap",id:this.id}}));for(let e=0;e<t.length;e++){let i=Ys.call(this,t[e],this.source,this.args),s=this.environment.resolveElement(i);s&&(s.parent=this),this.elements.push(i),n.append(i)}return this.focusable?this.container.tabIndex=0:this.container.dataset.ignore="all",Kt.call(this.projection,this.container,e),n.hasChildNodes()&&(this.container.append(n),this.bindEvents()),this.collapsed&&this.collapse(!0),this.container.style.display="inline-flex",this.container.style.alignItems="baseline",this.refresh(),this.container},refresh(){return this.collapsed?this.container.classList.add("collapsed"):this.container.classList.remove("collapsed"),this},focusIn(){return this.focused=!0,this.container.classList.add("active"),this.container.classList.add("focus"),this},focusOut(){return this.container.classList.remove("active"),this.container.classList.remove("focus"),this.focused=!1,this},focus(t){if(this.focusable)this.container.focus();else{let t=(0,s.getElement)('[tabindex]:not([tabindex="-1"])',this.container);if((0,s.isNullOrUndefined)(t))return!1;let e=this.environment.resolveElement(t);e&&e.focus(t)}},bindEvents(){this.projection.registerHandler("view.changed",((t,e)=>{e&&e.parent===this.projection&&(t.parent=this)}))}},ia=Object.assign({},On,ea),na={elements:null,edit:!1,btnEdit:!1,btnCollapse:!1,menu:!1,collapsed:!1,init(t={}){const{editable:e=!0,collapsible:i=!1,focusable:n=!1}=this.schema;return this.focusable=n,this.collapsible=i,this.editable=e,this.elements=[],this.children=[],Object.assign(this,t),this},collapse(t){if(!this.collapsed)return this.collapseContainer=(0,s.createDiv)({class:"layout-container-collapse"},this.elements),this.btnCollapse.after(this.collapseContainer),this.collapsed=!0,this.refresh(),this},expand(t){if(!this.collapsed)return;let e=(0,s.createDocFragment)(Array.from(this.collapseContainer.children));return this.btnCollapse.after(e),this.collapseContainer.remove(),this.collapsed=!0,this.refresh(),this},refresh(){return this.collapsed?this.container.classList.add("collapsed"):this.container.classList.remove("collapsed"),this},render(){const{disposition:t,style:e,help:i}=this.schema;if(!Array.isArray(t))throw new SyntaxError("Bad disposition");const n=(0,s.createDocFragment)();(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["layout-container"],dataset:{nature:"layout",layout:"table"}})),this.focusable?this.container.tabIndex=-1:this.container.dataset.ignore="all";for(let e=0;e<t.length;e++){let i=t[e],a=(0,s.createDiv)({class:["table-row"]});a.style.display="table-row";for(let t=0;t<i.length;t++){const e=i[t];let n=(0,s.createDiv)({class:["table-cell"]},Ys.call(this,e.content));n.style.display="table-cell",Kt.call(this.projection,n,e.style),a.append(n)}n.append(a)}return Kt.call(this.projection,this.container,e),n.hasChildNodes()&&(this.container.append(n),this.bindEvents()),this.container.style.display="table",this.refresh(),this.container},bindEvents(){this.projection.registerHandler("view.changed",((t,e)=>{e&&e.parent===this.projection&&(t.parent=this)})),this.btnCollapse&&this.btnCollapse.addEventListener("click",(t=>{this.collapsed?this.expand():this.collapse()}))}},sa=Object.assign({},On,na),aa={ROW:"row",COLUMN:"column"},ra={start:"flex-start",end:"flex-end","flex-start":"flex-start","flex-end":"flex-end",center:"center",stretch:"stretch",baseline:"baseline"},oa={start:"flex-start",end:"flex-end","flex-start":"flex-start","flex-end":"flex-end",center:"center","space-between":"space-between","space-around":"space-around","space-evenly":"space-evenly"},la={orientation:null,wrappable:null,alignItems:null,justifyContent:null,args:null,init(t={}){const{orientation:e=aa.ROW,wrappable:i=!0,alignItems:n,justifyContent:s,editable:a=!0,focusable:r=!1}=this.schema;return this.orientation=e,this.wrappable=i,this.alignItems=n,this.justifyContent=s,this.focusable=r,this.editable=a,this.elements=[],this.children=[],this.args=t,Object.assign(this,t),this},getOrientation(){return this.orientation},setOrientation(t){(0,s.hasOwn)(aa,t)&&(this.orientation=t,this.refresh())},collapse(t=!1){if(!this.collapsed||t)return this.collapseContainer=(0,s.createDiv)({class:"layout-container-collapse"},this.elements),this.btnCollapse.after(this.collapseContainer),this.collapsed=!0,this.refresh(),this},expand(t=!1){if(!this.collapsed&&!t)return;let e=(0,s.createDocFragment)(Array.from(this.collapseContainer.children));return this.btnCollapse.after(e),this.collapseContainer.remove(),this.collapsed=!1,this.refresh(),this},render(){const{disposition:t,style:e,help:i}=this.schema;if(!Array.isArray(t))throw new SyntaxError("Bad disposition");const n=(0,s.createDocFragment)();(0,s.isHTMLElement)(this.container)||(this.container=(0,s.createDiv)({class:["layout-container"],dataset:{nature:"layout",layout:"flex",id:this.id}})),i&&(this.container.title=i);for(let e=0;e<t.length;e++){let i=Ys.call(this,t[e],null,this.args),s=this.environment.resolveElement(i);s&&(s.parent=this),this.elements.push(i),n.append(i)}return this.focusable?this.container.tabIndex=0:this.container.dataset.ignore="all",Kt.call(this.projection,this.container,e),n.hasChildNodes()&&(this.container.append(n),this.bindEvents()),this.collapsed&&this.collapse(!0),this.container.style.display="flex",this.refresh(),this.container},refresh(){return this.container.style.flexDirection=this.orientation,this.container.style.justifyContent=oa[this.justifyContent],this.container.style.alignItems=ra[this.alignItems],this.wrappable?this.container.style.flexWrap="wrap":this.container.style.flexWrap="nowrap",this},focus(t){if(this.focusable)this.container.focus();else{let t=(0,s.getElement)('[tabindex]:not([tabindex="-1"])',this.container);if((0,s.isNullOrUndefined)(t))return!1;let e=this.environment.resolveElement(t);e&&e.focus(t)}},focusIn(){return this.focused=!0,this.container.classList.add("active"),this.container.classList.add("focus"),this},focusOut(){return this.container.classList.remove("active"),this.container.classList.remove("focus"),this.focused=!1,this},bindEvents(){this.container.addEventListener("change",(t=>{const{target:e}=t,{prop:i}=e.dataset;"orientation"===i&&this.setOrientation(e.value)})),this.projection.registerHandler("view.changed",((t,e)=>{e&&e.parent===this.projection&&(t.parent=this)})),this.btnCollapse&&this.btnCollapse.addEventListener("click",(t=>{this.collapsed?this.expand():this.collapse()}))}},ca=Object.assign({},On,la),ha={content:"",init(){return this},render(){const t=(0,s.createDocFragment)(),{content:e,attributes:i=[],link:n,dimensions:a={}}=this.schema;var r=new DOMParser;return(0,s.isHTMLElement)(this.element)||(this.element=(0,s.createDiv)({id:this.id,class:[],dataset:{nature:"layout",view:"svg",id:this.id}})),this.element.setAttribute("tabIndex",0),this.focusable=!0,!(0,s.isHTMLElement)(this.content)&&e?(this.content=r.parseFromString(e.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement,t.appendChild(this.content)):(0,s.isHTMLElement)(this.content)||(this.content=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.appendChild(this.content)),(0,s.isEmpty)(i)||i.forEach((t=>{let e=Ys.call(this,t.attribute);this.environment.resolveElement(e),t.marker?this.content.querySelector("[data-"+t.marker+"]").append(e):this.content.append(e)})),a.type&&(this.dimensions=a),t.hasChildNodes()&&this.element.appendChild(t),this.element},getWidth(){return Number(this.content.getAttribute("width"))},getHeight(){return Number(this.content.getAttribute("height"))},registerDimObsever(t){(0,s.isNullOrUndefined)(this.observers)&&(this.observers=[]),this.observers.push(t)},attributeHandler(t,e){switch(t.type){case"interactive":this.content.querySelector("[data-"+e+"]").append(t.content);break;case"text-svg":case"choice":break;default:let i=this.content.querySelector("[data-"+e+"]");t.element.append(t.element);let n=this.createHolder(t.element);i.append(n),this.adapt(t.element,t.ratio)}},createHolder(t){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","foreign");i.append(t),e.append(i)},adapt(t,e){let i=t.getBoundingClientRect();t.parentNode.setAttribute("width",i.width),t.parentNode.setAttribute("height",i.height);let n=t.parentNode.parentNode;if(!(0,s.isNullOrUndefined)(e)){let t=this.content.width.baseVal.value;this.content.height.baseVal.value,n.setAttribute("width",t*e),n.setAttribute("height",t*e)}},_attributeHandler(t){let e=[];return t.forEach((t=>{switch(t.placement.type){case"in-place":let i=this.content.querySelector("[data-"+t.placement.marker+"]");t.type="svg-attribute";let n=Ys.call(this,t,null,this.args);(0,s.isNullOrUndefined)(t.property)||(n.property=propertyHandler(t.property)),e.push(n),i.appendChild(n.content);break;case"link-place":let{type:a,sd:r=[],dd:o=[]}=t.placement;(0,s.isNullOrUndefined)(this.linkAttr)&&(this.linkAttr=[]);let l={};l.name=t.value,l.field=this.informations.get(t.value),"list"===l.field.type?l.value=l.field.items:l.value=l.field.value,(0,s.isNullOrUndefined)(t.property)||(l.property=propertyHandler(t.property)),(0,s.isEmpty)(r)||(l.sd=new Map,r.forEach((t=>{t.type="template";const e={};var i=Ys.call(this,t,null,this.args);e.render=i,e.parent=this.content.querySelector("[data-"+t.marker+"]"),l.sd.set(i.mv,e)}))),!(0,s.isNullOrUndefined)(this.dd)||(0,s.isEmpty)(o)||(0,s.isNullOrUndefined)(o)||(l.dd=[],o.forEach((t=>{t.type="template";var e=Ys.call(this,t,null,this.args);l.dd.push(e),e.property=l.property;var i=this.content.querySelector("[data-"+t.marker+"]");(0,s.isNullOrUndefined)(i)?"before"===this.content.getAttribute("data-"+t.marker)?this.content.prepend(e.content):this.content.appendChild(e.content):"before"===i.getAttribute("data-"+t.marker)?i.prepend(e.content):i.appendChild(e.content)}))),this.linkAttr.push(l)}})),e},update(){(0,s.isNullOrUndefined)(this.linkAttr)||this.linkAttr.forEach((t=>{this.clearStatics(t.sd,t.value),(0,s.isNullOrUndefined)(t.property)?this.clearDynamics(t.dd,t.value):this.clearDynamics(t.dd,this.translateProperty(t.value,t.property)),"list"===t.field.type?t.value=t.field.items:t.value=t.field.value,(0,s.isNullOrUndefined)(t.property)?this.updateDynamics(t.dd,t.value):this.updateDynamics(t.dd,this.translateProperty(t.value,t.property)),this.updateStatics(t.sd,t.value)})),(0,s.isNullOrUndefined)(this.deciders)||(0,s.isEmpty)(this.deciders)||this.deciders.forEach((t=>{t.update(t.field.value)}))},clearDynamics(t,e){(0,s.isNullOrUndefined)(t)||t.forEach((t=>{t.clear(e)}))},updateDynamics(t,e){(0,s.isNullOrUndefined)(t)||t.forEach((t=>{t.update(e)}))},clearStatics(t,e){if(!(0,s.isNullOrUndefined)(t)){let i=t.get(e);(0,s.isNullOrUndefined)(i)||i.parent.removeChild(i.render.content)}},updateStatics(t,e){if(!(0,s.isNullOrUndefined)(t)){let i=t.get(e);(0,s.isNullOrUndefined)(i)||i.parent.appendChild(i.render.content)}},focus(){return this.element.focus(),this.focused=!0,(0,s.isNullOrUndefined)(this.deciders)||this.deciders.forEach((t=>{t.focusOut()})),this},focusIn(){return this.focus(),this},focusOut(){return this.focused=!1,this},arrowHandler(t,e){if(e===this.element)return!(0,s.isNullOrUndefined)(this.parent)&&this.parent.arrowHandler(t,this.element);let i=getClosestSVG(e.foreign,t,this,!1);return!(0,s.isNullOrUndefined)(i)&&(e.focusOut(),i.focus(),!0)},enterHandler(t){this.index=0,this.deciders[0].focusIn()},escapeHandler(t){if(t!==this.element)return this.focus();let e=(0,s.findAncestor)(t,(t=>0===t.tabIndex)),i=this.environment.resolveElement(e);return i&&i.focus(e),!1},getDimensions(){switch(this.dimensions.type){case"absolute":return{height:this.dimensions.height,width:this.dimensions.width}}},setIndex(t){let e=0;this.deciders.forEach((i=>{i.id!==t.id?e++:this.index=e}))}},da=Object.assign(Object.create(On),ha);function ua(t){const{placeholder:e="",type:i}=t;let n=qs.call(this,e);return this.readonly||this.resizable?(0,s.createSpan)({class:["field--textbox__input","field--textbox__input-pseudo"],editable:!this.readonly,title:n,dataset:{placeholder:n,nature:"field-component",view:this.type,id:this.id}}):this.multiline?(0,s.createTextArea)({class:["field--textbox__input"],placeholder:n,title:n,dataset:{nature:"field-component",view:this.type,id:this.id}}):(0,s.createInput)({class:["field--textbox__input"],type:(0,s.valOrDefault)(i,"text"),placeholder:n,title:n,dataset:{nature:"field-component",view:this.type,id:this.id}})}const pa={init(){return this},render(){const t=(0,s.createDocFragment)(),{current:e={},root:i}=this.schema;this.isRoot=i;var n=new DOMParser;if((0,s.isHTMLElement)(this.element)||(this.element=(0,s.createDiv)({id:this.id,dataset:{nature:"layout",view:"visualizer",id:this.id}})),!(0,s.isHTMLElement)(this.content)&&(this.svg=this.source.value,!(0,s.isNullOrUndefined)(this.svg))){if(this.content=n.parseFromString(this.svg.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement,"svg"!==this.content.tagName){let t=n.parseFromString('<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"/>',"image/svg+xml").documentElement;t.appendChild(this.content),this.content=t}t.appendChild(this.content)}if(!(0,s.isHTMLElement)(this.input)){const{placeholder:i="",type:n,style:s}=e;this.input=ua.call(this,e),this.disabled&&(this.input.disabled=!0),this.focusable?this.input.tabIndex=0:this.input.dataset.ignore="all",Kt.call(this,this.input,s),this.multiline&&this.input.classList.add("field--textbox__input--multiline"),t.append(this.input)}if(i&&(0,s.isNullOrUndefined)(this.buttons)){this.buttons=[];const e={type:"static",static:{type:"button",trigger:"make interactive",content:[{type:"static",static:{type:"text",content:"Interactive",focusable:!0}}]}};this.mkeInteractive=Ys.call(this,e,null,this.args);let i=this.environment.resolveElement(this.mkeInteractive);i.parent=this,i.visualizer=this,this.buttons.push(i),t.append(this.mkeInteractive);const n={type:"static",static:{type:"button",trigger:"make dynamic",content:[{type:"static",static:{type:"text",content:"Dynamic",focusable:!0}}]}};this.mkeDynamic=Ys.call(this,n,null,this.args),i=this.environment.resolveElement(this.mkeDynamic),i.visualizer=this,i.parent=this,this.buttons.push(i),t.append(this.mkeDynamic);const s={type:"static",static:{type:"button",trigger:"make static",content:[{type:"static",static:{type:"text",content:"Static",focusable:!0}}]}};this.mkeStatic=Ys.call(this,s,null,this.args),i=this.environment.resolveElement(this.mkeStatic),i.visualizer=this,i.parent=this,this.buttons.push(i),t.append(this.mkeStatic)}return t.hasChildNodes()&&this.element.appendChild(t),this.bindEvent(),this.element},focusIn(t){return this.input.focus()},focusOut(){},createProj(){let t=this.current;"tspan"===t.tagName.toLowerCase()&&(t=t.parentNode);let e=new XMLSerializer;return this.cleanInput(),this.updateInput(e.serializeToString(this.content)),'<g xmlns="http://www.w3.org/2000/svg">'+e.serializeToString(t)+"</g>"},cleanInput(){this.input.value="",this.current.parentNode.removeChild(this.current)},updateInput(t){this.source.setValue(t)},bindEvent(){this.content.addEventListener("click",(t=>{var e=new XMLSerializer;let i=t.target;"tspan"===i.tagName.toLowerCase()&&(i=i.parentNode);var n=e.serializeToString(i);this.input.value=n,this.current=i})),this.input.addEventListener("keydown",(t=>{if(""!==this.input.value&&!(0,s.isNullOrUndefined)(this.current)&&"Enter"===t.key){var e=(new DOMParser).parseFromString(this.input.value.replace(/\&nbsp;/g,""),"image/svg+xml").documentElement;this.current!==this.content?this.current.replaceWith(e):this.content=e,this.current=e;var i=new XMLSerializer;this.isRoot?this.updateInput(i.serializeToString(this.content)):this.updateInput(i.serializeToString(this.content.childNodes[0]))}}))}},ma=Object.assign(Object.create(On),pa),{createDocFragment:ya,isNullOrUndefined:ga,isEmpty:fa,isHTMLElement:ba}=n(835),va={init(){const{coordinates:t=null,dimensions:e=null}=this.schema;return this.coordinates=t,this.dimensions=e,this},render(){const{content:t}=this.schema,e=ya();return ga(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.classList.add("layout-container"),this.container.dataset.nature="layout",this.container.dataset.layout="holder",this.container.dataset.id=this.id),ga(this.foreign)&&(this.foreign=document.createElementNS("http://www.w3.org/2000/svg","foreignObject"),e.append(this.foreign)),ga(this.content)&&!fa(t)&&(this.content=new Map,t.forEach((t=>{switch(t.type){case"projection":let e=this.projection.model.createProjection(this.projection.concept.getValue(!0),t.tag).init().render(),i=this.projection.resolveElement(e);this.element=e,this.foreign.append(e),this.content.set(t.correspondance,{render:e,projection:i});break;case"attribute":this.container.append(Ys.call(this,t))}}))),e.hasChildNodes()&&this.container.append(e),this.bindEvents(),this.container},registerRelative(t){switch(this.apply=t.apply,this.relative=!0,t.listen.type){case"duo":this.from=this.source.getValue(!0).getAttributeByName(t.listen.from).target,this.from.register(this.projection),this.to=this.source.getValue(!0).getAttributeByName(t.listen.to).target,this.to.register(this.projection),this.rtag=this.environment.getActiveReceiver(t.rtag)}},adapt(){},getDimensions(){return{width:this.dimensions.width,height:this.dimensions.height}},placeItem(t){switch(this.coordinates.type){case"delegate":this.container.setAttribute("x",t.schema.coordinates.x),this.container.setAttribute("y",t.schema.coordinates.y)}},setDimensions(){if(this.relative){let t=this.rtag.container.querySelector('[data-concept="'+this.from.value+'"]'),e=this.rtag.container.querySelector('[data-concept="'+this.to.value+'"]'),i=this.rtag.container.createSVGPoint(),n=t.getBoundingClientRect();i.x=n.x,i.y=n.y;let s=i.matrixTransform(this.rtag.container.getScreenCTM().inverse());n=e.getBoundingClientRect(),i.x=n.x,i.y=n.y;let a=i.matrixTransform(this.rtag.container.getScreenCTM().inverse()),r=s.x-a.x,o=s.y-a.y,l=Math.sqrt(r*r+o+o);this.width=l,this.container.setAttribute("width",this.width),this.container.setAttribute("height",30),this.foreign.setAttribute("width",this.width),this.foreign.setAttribute("height",30),this.container.setAttribute("x",s.x),this.container.setAttribute("y",s.y),this.projection.resolveElement(this.element).setDimensions(this.width)}else this.adapt(),this.parent.notify(this.container)},setHolder(t,e){this.container.setAttribute("width",t),ga(e)?this.container.setAttribute("height",t*this.height/this.width):this.container.setAttribute("height",e)},bindEvents(){this.projection.registerHandler("value.changed",(t=>{})),this.projection.registerHandler("displayed",(t=>{let{render:e,projection:i}=this.content.get(this.source.value);this.element=e,this.foreign.append(this.element),this.setDimensions(),this.coordinates&&this.placeItem(i)}))}},wa=Object.assign(Object.create(On),va);var xa=0;const Ea=()=>"layout"+xa++,Aa={stack:(t,e,i)=>Object.create(ta,{object:{value:"layout"},name:{value:"stack-layout"},type:{value:"stack"},id:{value:Ea()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),wrap:(t,e,i)=>Object.create(ia,{object:{value:"layout"},name:{value:"wrap-layout"},type:{value:"wrap"},id:{value:Ea()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),table:(t,e,i)=>Object.create(sa,{object:{value:"layout"},name:{value:"table-layout"},type:{value:"table"},id:{value:Ea()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),flex:(t,e,i)=>Object.create(ca,{object:{value:"layout"},name:{value:"flex-layout"},type:{value:"flex"},id:{value:Ea()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),svg:(t,e,i)=>Object.create(da,{object:{value:"layout"},name:{value:"svg-layout"},type:{value:"svg"},id:{value:Ea()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),visualizer:(t,e,i)=>Object.create(ma,{object:{value:"layout"},name:{value:"svg-layout"},type:{value:"svg"},id:{value:Ea()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),holder:(t,e,i)=>Object.create(wa,{object:{value:"layout"},name:{value:"holder-layout"},type:{value:"holder"},id:{value:Ea()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}})},ja={createLayout(t,e,i){const{type:n}=e,a=Aa[n];if((0,s.isNullOrUndefined)(a))throw new TypeError(`Missing handler: The '${n}' layout could not be handled`);const r=a(t,e,i);if((0,s.isNullOrUndefined)(r))throw new Error(`Bad request: The '${n}' layout could not be created`);return r.createLayout=this.createLayout,(0,s.isNullOrUndefined)(r.id)&&(r.id=Ea()),r}},Oa={stylePath(t){const{stroke:e="black",dasharray:i=null,width:n=1,linecap:a="butt",end:r=!1,start:o=!1}=t;this.path.style.stroke=e,(0,s.isNullOrUndefined)(i)||(this.path.style["stroke-dasharray"]=i),this.path.style["stroke-width"]=(0,s.valOrDefault)(n,5),this.path.style["stroke-linecap"]=a,r&&this.createMarkerEnd()},styleSubPath(t,e){const{stroke:i="black",dasharray:n=null,width:a=1,linecap:r="butt",end:o=!1,start:l=!1}=t;e.style.stroke=i,(0,s.isNullOrUndefined)(n)||(e.style["stroke-dasharray"]=n),e.style["stroke-width"]=(0,s.valOrDefault)(a,5),e.style["stroke-linecap"]=r},createMarkerEnd(){(0,s.isNullOrUndefined)(this.definitions)&&(this.definitions=document.createElementNS("http://www.w3.org/2000/svg","defs")),this.end=document.createElementNS("http://www.w3.org/2000/svg","marker"),this.end.id="marker"+this.id,this.end.setAttribute("refY",5),this.end.setAttribute("refX",10),this.end.setAttribute("markerUnit","strokeWidth"),this.end.setAttribute("markerWidth",10),this.end.setAttribute("markerHeight",10),this.end.setAttribute("orient","auto"),this.end.classList.add("end");let t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),t.setAttribute("fill","black"),this.end.appendChild(t),this.definitions.appendChild(this.end),this.path.setAttribute("marker-end","url(#"+this.end.id+")")},setPath(t){this.path.setAttribute("d",t)}},Na={init(){return this},render(){const{aiming:t,model:e,move:i,decorator:n=!1,style:a}=this.schema;return(0,s.isNullOrUndefined)(this.path)&&(this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.classList.add("arrow-path"),this.path.dataset.nature="arrow",this.path.dataset.algorithm="anchor",this.path.dataset.id=this.id),(0,s.isNullOrUndefined)(this.aiming)&&(this.aiming=this.source.getAttributeByName(t.name).target),(0,s.isNullOrUndefined)(this.anchorModel)&&(this.anchorModel=e,Qe.AnchorHandler.registerListener(e,this)),i&&(this.movingPiece=this.source.getAttributeByName(i.name).target,this.movingPiece.register(this)),n&&(0,s.isNullOrUndefined)(this.decorator)&&this.createDecorator(n),this.bind=this.projection.bind,this.bindEvents(),this.stylePath(a),this.path},update(){if(!(0,s.isNullOrUndefined)(this.movingPiece)&&this.movingPiece.hasValue()){let t=this.movingPiece.getValue();(0,s.isString)(t)&&(t=this.movingPiece.getValue(!0)),t.notify("accept",this.bind),(0,s.isNullOrUndefined)(this.path.parenNode)||t.notify("cover",this)}},deleteFromView(){Qe.AnchorHandler.unregister(this.anchorModel,this),this.movingPiece=null,this.path.remove(),this.decorator.remove()},createDecorator(t){this.decorator=Ys.call(this,t.render)},updateValue(){if(!this.aiming.hasValue())return this.path.remove(),this.decorator.remove(),void this.definitions.remove();let t=this.aiming.value.id||this.aiming.value,e=Qe.AnchorHandler.findSource(this.anchorModel,this.bind.element||this.bind.container),i=Qe.AnchorHandler.findTarget(this.anchorModel,t,e.index);if(this.schema.offset&&(e.x+=this.schema.offset.x,e.y+=this.schema.offset.y,i.x+=this.schema.offset.x,i.y+=this.schema.offset.y),this.decorator){const{origin:t,x:n,y:s}=this.schema.decorator.coordinates;switch(t){case"source":this.decorator.setAttribute("x",e.x+n),this.decorator.setAttribute("y",e.y+s),this.projection.parent.container.append(this.decorator);break;case"target":this.decorator.setAttribute("x",i.x+n),this.decorator.setAttribute("y",i.y+s),this.projection.parent.container.append(this.decorator);break;case"minX":e.x<i.x?(this.decorator.setAttribute("x",e.x+n),this.decorator.setAttribute("y",e.y+s)):(this.decorator.setAttribute("x",i.x+n),this.decorator.setAttribute("y",i.y+s)),this.projection.parent.container.append(this.decorator);break;case"minY":e.y<i.y?(this.decorator.setAttribute("x",e.x+n),this.decorator.setAttribute("y",e.y+s)):(this.decorator.setAttribute("x",i.x+n),this.decorator.setAttribute("y",i.y+s)),this.projection.parent.container.append(this.decorator);break;case"maxX":e.x>i.x?(this.decorator.setAttribute("x",e.x+n),this.decorator.setAttribute("y",e.y+s)):(this.decorator.setAttribute("x",i.x+n),this.decorator.setAttribute("y",i.y+s)),this.projection.parent.container.append(this.decorator);break;case"maxY":e.y>i.y?(this.decorator.setAttribute("x",e.x+n),this.decorator.setAttribute("y",e.y+s)):(this.decorator.setAttribute("x",i.x+n),this.decorator.setAttribute("y",i.y+s)),this.projection.parent.container.append(this.decorator)}}if(e.x===i.x&&e.y===i.y?this.setSelfPath(e):this.setPath("M "+e.x+" "+e.y+" L "+i.x+" "+i.y),this.definitions&&this.projection.parent.container.append(this.definitions),this.projection.parent.container.prepend(this.path),this.decorator&&this.environment.resolveElement(this.decorator).projection.update("displayed"),this.calcS=e.calc,this.calcT=i.calc,this.movingPiece&&this.movingPiece.hasValue()){let t=this.movingPiece.value;(0,s.isString)(t)&&(t=this.movingPiece.getValue(!0)),t.notify("cover",this)}},setSelfPath(t){const e=this.schema.self.points;let i={x:t.x,y:t.y},n="M "+t.x+" "+t.y+" ";for(let t=0;t<e.length;t++){const{x:s,y:a}=e[t];n+=" L "+(i.x+s)+" "+(i.y+a)+" ",i.x+=s,i.y+=a}this.path.setAttribute("d",n),this.path.setAttribute("fill","transparent")},bindEvents(){this.aiming.register(this.projection),this.projection.registerHandler("value.changed",(t=>{this.updateValue(t)}))}},ka=Object.assign({},Oa,Na),La={init(){return this},render(){const{style:t,from:e,to:i,decorator:n}=this.schema;return(0,s.isNullOrUndefined)(this.path)&&(this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.classList.add("arrow-path"),this.path.dataset.nature="arrow",this.path.dataset.algorithm="force",this.path.dataset.id=this.id),(0,s.isNullOrUndefined)(this.from)&&this.registerAttribute(e,!0),(0,s.isNullOrUndefined)(this.to)&&this.registerAttribute(i),t&&this.stylePath(t),n&&(0,s.isNullOrUndefined)(this.decorator)&&(this.decorator=Ys.call(this,n)),this.bindEvents(),this.path},registerAttribute(t,e=!1){const{name:i}=t;e?this.from=this.source.getAttributeByName(i).target:this.to=this.source.getAttributeByName(i).target},updateValue(){this.fromVal=this.from.value,this.toVal=this.to.value,(0,s.isNullOrUndefined)(this.fromVal)||(0,s.isNullOrUndefined)(this.toVal)?(0,s.isNullOrUndefined)(this.path.parentNode)||this.projection.parent.removeArrow(this,-1,this.decorator):this.projection.parent.addArrow(this,this.fromVal,this.toVal,this.decorator)},setPath(t){this.path.setAttribute("d",t)},bindEvents(){this.from.register(this.projection),this.to.register(this.projection),this.projection.registerHandler("value.changed",(()=>{this.updateValue()}))}},_a=Object.assign({},Oa,La),Ca={minY:function(t){let e=t[0].y,i=t[0].x,n=t[0].x;for(let s=0;s<t.length;s++){const{x:a,y:r}=t[s];a<i&&(i=a),a>n&&(n=a),r<e&&(e=r)}this.setPath("M "+i+" "+e+" L "+n+" "+e),this.drawSupPath(t,e,!1)}},Ta={init(){return this.subPath=[],this.targets=[],this.elements=[],this},render(){const{style:t}=this.schema;return(0,s.isNullOrUndefined)(this.path)&&(this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.classList.add("arrow-path"),this.path.dataset.nature="arrow",this.path.dataset.algorithm="multi",this.path.dataset.id=this.id),this.bindEvents(),this.stylePath(t),this.path},addTarget(t){this.targets=[],this.elements.forEach((t=>{t.hasValue()&&this.targets.push(t.getValue())})),this.targets.length>1&&(this.drawPath(),this.projection.parent.container.append(this.path),this.subPath.forEach((t=>{this.projection.parent.container.append(t)})))},drawSupPath(t,e,i){(0,s.isEmpty)(this.subPath)||(this.subPath.forEach((t=>{t.remove()})),this.subPath=[]),t.forEach((t=>{if(t.y===e&&!i)return;if(t.x===e&&i)return;let n=document.createElementNS("http://www.w3.org/2000/svg","path");this.path.classList.add("arrow-subpath"),this.path.dataset.nature="arrow",this.path.dataset.algorithm="multi",this.path.dataset.id=this.id,i||n.setAttribute("d","M "+t.x+" "+e+" L "+t.x+" "+t.y),this.styleSubPath(this.schema.subpath.style,n),this.subPath.push(n)}))},drawPath(){const t=this.projection.parent.container;let e=[];for(let i=0;i<this.targets.length;i++){const n=this.targets[i];let a=t.querySelector("[data-concept='"+n+"']"),r=this.projection.resolveElement(a);if((0,s.isNullOrUndefined)(a))return;e.push({item:a,proj:r})}let i=[];for(let n=0;n<e.length;n++){let a=e[n].item.getBoundingClientRect();const r=t.createSVGPoint();r.x=a.x,r.y=a.y;const o=r.matrixTransform(t.getScreenCTM().inverse());(0,s.isNullOrUndefined)(e[n].proj.attachPoint)?i.push({x:o.x,y:o.y}):i.push({x:o.x+e[n].proj.attachPoint.x,y:o.y+e[n].proj.attachPoint.y})}Ca[this.schema.meet].call(this,i)},removeTarget(t){(0,s.isNullOrUndefined)(this.targets)},registerElem(t){(0,s.isNullOrUndefined)(this.elements)&&(this.elements=[]),this.elements.push(t),t.register(this.projection)},unregisterElem(t){for(let e=0;e<this.elements.length;e++)if(this.elements[e]===t){this.elements[e].unregister(this.projection),this.elements.splice(e,1);break}this.elements.length>1?this.addTarget():(this.path.remove(),(0,s.isEmpty)(this.subPath)||this.subPath.forEach((t=>{t.remove()})))},deletePaths(){this.path.remove(),(0,s.isEmpty)(this.subPath)||this.subPath.forEach((t=>{t.remove()}))},bindEvents(){this.projection.registerHandler("value.added",(t=>{this.registerElem(t)})),this.projection.registerHandler("value.removed",(t=>{this.unregisterElem(t)})),this.projection.registerHandler("value.changed",(t=>{this.addTarget(t)}))}},Sa=Object.assign({},Oa,Ta);var Ma=0;const Ia=()=>"algo"+Ma++,Ua={force:(t,e,i)=>Object.create(_a,{object:{value:"arrow"},name:{value:"force-arrow"},type:{value:"force"},id:{value:Ia()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),anchor:(t,e,i)=>Object.create(ka,{object:{value:"arrow"},name:{value:"anchor-arrow"},type:{value:"anchor"},id:{value:Ia()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),multi:(t,e,i)=>Object.create(Sa,{object:{value:"arrow"},name:{value:"multi-arrow"},type:{value:"multi"},id:{value:Ia()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}})},Da={createArrow(t,e,i){const{type:n}=e,a=Ua[n];if((0,s.isNullOrUndefined)(a))throw new TypeError(`Missing handler: The '${n}' arrow could not be handled`);const r=a(t,e,i);if((0,s.isNullOrUndefined)(r))throw new Error(`Bad request: The '${n}' arrow could not be created`);return r.createArrow=this.createArrow,(0,s.isNullOrUndefined)(r.id)&&(r.id=Ia()),r}},Ha={},{isNullOrUndefined:Pa,valOrDefault:Va}=n(835),Ba={init(){return this},render(){const{content:t}=this.schema;return Pa(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.classList.add("shape-container"),this.container.dataset.nature="shape",this.container.dataset.shape="canas",this.container.dataset.id=this.id),Pa(t)||t.forEach((t=>{this.container.append(Ys.call(this,t))})),this.w=this.source.getAttributeByName("width").target,this.h=this.source.getAttributeByName("height").target,this.minX=this.source.getAttributeByName("minX").target,this.minY=this.source.getAttributeByName("minY").target,this.windowW=this.source.getAttributeByName("windowW").target,this.windowH=this.source.getAttributeByName("windowH").target,this.container.style.border="solid #87a1ff",this.refresh(),this.bindEvents(),this.container},refresh(){this.container.setAttribute("width",this.w.value),this.container.setAttribute("height",this.h.value);const t=Va(this.windowW.value,this.w.value),e=Va(this.windowH.value,this.h.value);this.container.setAttribute("viewBox",this.minX.value+" "+this.minY.value+" "+t+" "+e)},update(){this.refresh()},bindEvents(){this.w.register(this),this.h.register(this),this.minX.register(this),this.minY.register(this),this.windowW.register(this),this.windowH.register(this),this.container.addEventListener("click",(t=>{const e=t.target,{concept:i=null,nature:n=null,shape:s=null}=e.dataset;Pa(n)||"shape"!==n||"canvas"===s||this.source.getAttributeByName("current").setValue(i)}))},focusIn(){},focusOut(){},clickHandler(t){}},Ra=Object.assign(Object.create(Ha),Ba),{isNullOrUndefined:$a,isEmpty:Fa}=n(835),za={init(){return this.items=[],this},render(){const{add:t}=this.schema;return $a(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","g"),this.container.classList.add("shape-container"),this.container.dataset.nature="shape",this.container.dataset.shape="group",this.container.dataset.id=this.id),t&&(this.addButton=Ys.call(this,{kind:"static",type:"svg-button",action:{type:"CREATE"},content:'<svg style="overflow:visible" xmlns="http://www.w3.org/2000/svg" version="1.0"><text style="dominant-baseline:hanging;" font-family="Segoe UI" font-size="16">+</text></svg>'}),this.container.append(this.addButton)),Fa(this.source)||this.reconstruct(),this.bindEvents(),this.container},reconstruct(){let t=this.source.value;for(let e=0;e<t.length;e++){let i=this.projection.environment.conceptModel.getConcept(t[e]).getValue(!0),n=this.model.createProjection(i,"shape");n.parent=this.projection;let s=n.init().render();this.items.push({concept:n.concept,projection:s,centered:!0}),n.concept.register(this.projection),this.container.append(s),this.blur()}},createItem(t){let e=this.model.createProjection(t,"shape");e.parent=this.projection;let i=e.init().render();return this.items.push({concept:e.concept,projection:i,centered:!1}),e.concept.register(this.projection),this.blur(),i},addItem(t){let e=this.createItem(t);this.container.append(e)},removeItem(t){for(let e=0;e<this.items.length;e++)if(this.items[e].concept.id===t.id)return this.items[e].projection.remove(),$a(this.items[e].container)||this.items[e].container.remove(),void this.items.splice(e,1)},update(){for(let t=0;t<this.items.length;t++)this.items[t].centered||this.center(this.items[t]),this.items[t].centered=!0},center(t){const e=t.concept.getValue(!0),i=this.getWindow();switch(e.name){case"circle":e.getAttributeByName("cx").setValue((i.minX+i.vW)/2),e.getAttributeByName("cy").setValue((i.minY+i.vH)/2),e.getAttributeByName("r").setValue(20*i.vW/i.width);break;case"rectangle":const t=40*i.vW/i.width,n=30*i.vH/i.height;e.getAttributeByName("x").setValue((i.minX+i.vW)/2-t/2),e.getAttributeByName("y").setValue((i.minY+i.vH)/2-n/2),e.getAttributeByName("width").setValue(t),e.getAttributeByName("height").setValue(n);break;case"ellipse":const s=40*i.vW/(2*i.width),a=30*i.vH/(2*i.height);e.getAttributeByName("cx").setValue((i.minX+i.vW)/2),e.getAttributeByName("cy").setValue((i.minY+i.vH)/2),e.getAttributeByName("rx").setValue(s),e.getAttributeByName("ry").setValue(a);break;case"polygon":const r=40*i.vW/(2*i.width),o=30*i.vH/(2*i.height),l=(i.minX+i.vW)/2,c=(i.minY+i.vH)/2,h={x:l-r/4,y:c-o/2},d={x:l+r/4,y:c-o/2},u={x:l+r/2,y:c-o/4},p={x:l+r/2,y:c+o/4},m={x:l+r/4,y:c+o/2},y={x:l-r/4,y:c+o/2},g={x:l-r/2,y:c+o/4},f={x:l-r/2,y:c-o/4};e.getAttributeByName("points").setValue(h.x+" "+h.y+", "+d.x+" "+d.y+", "+u.x+" "+u.y+", "+p.x+" "+p.y+", "+m.x+" "+m.y+", "+y.x+" "+y.y+", "+g.x+" "+g.y+", "+f.x+" "+f.y);break;case"path":const b=40*i.vW/(2*i.width),v=(i.vH,i.height,(i.minX+i.vW)/2),w=(i.minY+i.vH)/2;e.getAttributeByName("d").setValue("M "+(v-b/2)+" "+w+" L "+(v+b/2)+" "+w)}let n=this.model.createProjection(e,"shape");n.parent=this.projection;let s=n.init().render();this.container.append(s),t.container=s},focusIn(){},focusOut(){},blur(){},getWindow(){const t=this.container.parentNode,e=t.viewBox.baseVal;return{width:Number(t.getAttribute("width")),height:Number(t.getAttribute("height")),vW:e.width,vH:e.height,minX:e.x,minY:e.y}},bindEvents(){this.projection.registerHandler("value.added",(t=>{this.addItem(t)})),this.projection.registerHandler("value.changed",(t=>{this.update()})),this.projection.registerHandler("value.removed",(t=>{this.removeItem(t)}))}},qa=Object.assign(Object.create(Ha),za),{isNullOrUndefined:Wa}=n(835),Za={init(){return this},render(){return Wa(this.element)&&(this.element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.element.classList.add("shape-container"),this.element.dataset.nature="shape",this.element.dataset.shape="circle",this.element.dataset.id=this.id),this.cx=this.source.getAttributeByName("cx").target,this.cy=this.source.getAttributeByName("cy").target,this.r=this.source.getAttributeByName("r").target,this.refresh(),this.bindEvents(),this.bindStyle(),this.element},refresh(){this.element.setAttribute("cx",this.cx.value),this.element.setAttribute("cy",this.cy.value),this.element.setAttribute("r",this.r.value)},bindEvents(){this.cx.register(this),this.cy.register(this),this.r.register(this),this.element.addEventListener("click",(()=>{this.source.notify("current.updated",this.source)}))},bindStyle(){const t=this.source.getAttributeByName("style").target;this.fill=t.getAttributeByName("fill").target,this.stroke=t.getAttributeByName("stroke").target,this.width=t.getAttributeByName("s-width").target,this.dash=t.getAttributeByName("s-dash").target,this.fill.register(this),this.stroke.register(this),this.width.register(this),this.dash.register(this)},update(t){this.refresh(),Wa(this.fill.value)||this.element.setAttribute("fill",this.fill.value),Wa(this.stroke.value)||this.element.setAttribute("stroke",this.stroke.value),Wa(this.width.value)||(this.element.style["stroke-width"]=this.width.value),Wa(this.dash.value)||(this.element.style["stroke-dasharray"]=this.dash.value)},focusIn(){},focusOut(){}},Xa=Object.assign(Object.create(Ha),Za),{isNullOrUndefined:Ya}=n(835),Ga={init(){return this},render(){return Ya(this.container)&&(this.container=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.classList.add("shape-container"),this.container.dataset.nature="shape",this.container.dataset.shape="group",this.container.dataset.id=this.id),this.bindEvents(),this.container.style.overflow="visible",this.container},bindEvents(){this.projection.registerHandler("value.changed",(t=>{let e=this.model.createProjection(this.source.getValue(!0),"shape");e.parent=this.projection;let i=e.init().render();this.container.append(i)}))}},Ja=Object.assign(Object.create(Ha),Ga),{isNullOrUndefined:Ka}=n(835),Qa={init(){return this},render(){return Ka(this.element)&&(this.element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.element.classList.add("shape-container"),this.element.dataset.nature="shape",this.element.dataset.shape="circle",this.element.dataset.id=this.id),this.x=this.source.getAttributeByName("x").target,this.y=this.source.getAttributeByName("y").target,this.width=this.source.getAttributeByName("width").target,this.height=this.source.getAttributeByName("height").target,this.refresh(),this.bindEvents(),this.bindStyle(),this.element},refresh(){this.element.setAttribute("x",this.x.value),this.element.setAttribute("y",this.y.value),this.element.setAttribute("height",this.height.value),this.element.setAttribute("width",this.width.value)},bindStyle(){const t=this.source.getAttributeByName("style").target;this.fill=t.getAttributeByName("fill").target,this.stroke=t.getAttributeByName("stroke").target,this.widthS=t.getAttributeByName("s-width").target,this.dash=t.getAttributeByName("s-dash").target,this.rx=t.getAttributeByName("rx").target,this.ry=t.getAttributeByName("ry").target,this.fill.register(this),this.stroke.register(this),this.widthS.register(this),this.dash.register(this),this.rx.register(this),this.ry.register(this)},update(t){this.refresh(),Ka(this.fill.value)||this.element.setAttribute("fill",this.fill.value),Ka(this.stroke.value)||(this.element.style.stroke=this.stroke.value),Ka(this.widthS.value)||(this.element.style["stroke-width"]=this.widthS.value),Ka(this.dash.value)||(this.element.style["stroke-dasharray"]=this.dash.value),Ka(this.rx.value)||this.element.setAttribute("rx",this.rx.value),Ka(this.ry.value)||this.element.setAttribute("ry",this.ry.value)},bindEvents(){this.x.register(this),this.y.register(this),this.width.register(this),this.height.register(this)}},tr=Object.assign(Object.create(Ha),Qa),{isNullOrUndefined:er}=n(835),ir={init(){return this},render(){return er(this.element)&&(this.element=document.createElementNS("http://www.w3.org/2000/svg","ellipse"),this.element.classList.add("shape-container"),this.element.dataset.nature="shape",this.element.dataset.shape="ellipse",this.element.dataset.id=this.id),this.cx=this.source.getAttributeByName("cx").target,this.cy=this.source.getAttributeByName("cy").target,this.rx=this.source.getAttributeByName("rx").target,this.ry=this.source.getAttributeByName("ry").target,this.refresh(),this.bindEvents(),this.bindStyle(),this.element},refresh(){this.element.setAttribute("cx",this.cx.value),this.element.setAttribute("cy",this.cy.value),this.element.setAttribute("ry",this.ry.value),this.element.setAttribute("rx",this.rx.value)},bindStyle(){const t=this.source.getAttributeByName("style").target;this.fill=t.getAttributeByName("fill").target,this.stroke=t.getAttributeByName("stroke").target,this.width=t.getAttributeByName("s-width").target,this.dash=t.getAttributeByName("s-dash").target,this.fill.register(this),this.stroke.register(this),this.width.register(this),this.dash.register(this)},update(t){this.refresh(),er(this.fill.value)||this.element.setAttribute("fill",this.fill.value),er(this.stroke.value)||(this.element.style.stroke=this.stroke.value),er(this.width.value)||(this.element.style["stroke-width"]=this.width.value),er(this.dash.value)||(this.element.style["stroke-dasharray"]=this.dash.value)},bindEvents(){this.cx.register(this),this.cy.register(this),this.rx.register(this),this.ry.register(this)}},nr=Object.assign(Object.create(Ha),ir),{isNullOrUndefined:sr}=n(835),ar={init(){return this},render(){return sr(this.element)&&(this.element=document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.element.classList.add("shape-container"),this.element.dataset.nature="shape",this.element.dataset.shape="polygon",this.element.dataset.id=this.id),this.points=this.source.getAttributeByName("points").target,this.refresh(),this.bindEvents(),this.element},refresh(){this.element.setAttribute("points",this.points.value)},update(t){this.refresh()},bindEvents(){this.points.register(this)}},rr=Object.assign(Object.create(Ha),ar),{isNullOrUndefined:or}=n(835),lr={init(){return this},render(){return or(this.element)&&(this.element=document.createElementNS("http://www.w3.org/2000/svg","path"),this.element.classList.add("shape-container"),this.element.dataset.nature="shape",this.element.dataset.shape="path",this.element.dataset.id=this.id),this.d=this.source.getAttributeByName("d").target,this.element.style["stroke-width"]=5,this.element.style.stroke="black",this.source.getAttributeByName("style").target.getAttributeByName("s-width").setValue(5),this.refresh(),this.bindEvents(),this.bindStyle(),this.element},refresh(){this.element.setAttribute("d",this.d.value)},bindEvents(){this.d.register(this)},bindStyle(){},update(t){this.refresh(),or(this.stroke.value)||this.element.setAttribute("fill",this.fill.value),or(this.stroke.value)||(this.element.style.stroke=this.stroke.value),or(this.width.value)||(this.element.style["stroke-width"]=this.width.value),or(this.dash.value)||(this.element.style["stroke-dasharray"]=this.dash.value)},bindStyle(){const t=this.source.getAttributeByName("style").target;this.fill=t.getAttributeByName("fill").target,this.stroke=t.getAttributeByName("stroke").target,this.width=t.getAttributeByName("s-width").target,this.dash=t.getAttributeByName("s-dash").target,this.fill.register(this),this.stroke.register(this),this.width.register(this),this.dash.register(this)},focusIn(){},focusOut(){}},cr=Object.assign(Object.create(Ha),lr);var hr=0;const dr=()=>"algo"+hr++,ur={canvas:(t,e,i)=>Object.create(Ra,{object:{value:"shape"},name:{value:"canvas-shape"},type:{value:"canvas"},id:{value:dr()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),group:(t,e,i)=>Object.create(qa,{object:{value:"shape"},name:{value:"group-shape"},type:{value:"group"},id:{value:dr()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),circle:(t,e,i)=>Object.create(Xa,{object:{value:"shape"},name:{value:"circle-shape"},type:{value:"circle"},id:{value:dr()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),holder:(t,e,i)=>Object.create(Ja,{object:{value:"shape"},name:{value:"holder-shape"},type:{value:"holder"},id:{value:dr()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),rectangle:(t,e,i)=>Object.create(tr,{object:{value:"shape"},name:{value:"rectangle-shape"},type:{value:"rectangle"},id:{value:dr()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),ellipse:(t,e,i)=>Object.create(nr,{object:{value:"shape"},name:{value:"ellipse-shape"},type:{value:"ellipse"},id:{value:dr()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),polygon:(t,e,i)=>Object.create(rr,{object:{value:"shape"},name:{value:"polygon-shape"},type:{value:"polygon"},id:{value:dr()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}}),path:(t,e,i)=>Object.create(cr,{object:{value:"shape"},name:{value:"path-shape"},type:{value:"path"},id:{value:dr()},model:{value:t},schema:{value:e},projection:{value:i},source:{value:i.concept,writable:!0}})},pr={createShape(t,e,i){const{type:n}=e,a=ur[n];if((0,s.isNullOrUndefined)(a))throw new TypeError(`Missing handler: The '${n}' shape could not be handled`);const r=a(t,e,i);if((0,s.isNullOrUndefined)(r))throw new Error(`Bad request: The '${n}' shape could not be created`);return r.createShape=this.createShape,(0,s.isNullOrUndefined)(r.id)&&(r.id=dr()),r}};var mr=0;const yr={createProjection(t,e,i,n){var a=Object.create(gr,{id:{value:(0,s.valOrDefault)(e.id,"projection"+mr++)},model:{value:t},schema:{value:e,writable:!0},environment:{value:n}});return a.concept=i,a}},gr={handlers:null,init(t={}){return this.containers=new Map,this.attributes=[],this.params=[],this.templates=[],this.handlers={},this.args=t,this.concept.register(this),this},schema:null,concept:null,environment:null,parent:null,containers:null,placeholder:null,element:null,attributes:null,params:null,index:0,editing:!1,optional:!1,collapsible:!1,searchable:!1,focusable:!0,get hasMultipleViews(){return this.schema.length>1},get isReadOnly(){return(0,s.valOrDefault)(this.getSchema().readonly,!1)},isRoot(){return(0,s.isNullOrUndefined)(this.parent)},getSchema(t){return this.schema[(0,s.valOrDefault)(t,this.index)]},hasSchema(t){return-1!==this.schema.findIndex((e=>e.tags.includes(t)))},getContainer(t){return this.containers.get((0,s.valOrDefault)(t,this.index))},getStyle(){const{style:t}=this.getSchema();return t},addTemplate(t){this.templates.push(t)},addParam(t){this.params.push(...Array.isArray(t)?t:[t])},getParam(t,e){let i=this.params.find((e=>e.name===t));if((0,s.isNullOrUndefined)(i))return;const{type:n="string",value:a}=i;let r=(0,s.valOrDefault)(a,i.default);return(0,s.isNullOrUndefined)(r)?null:"string"===n?r.toString():"number"===n?+r:"boolean"===n?(0,s.toBoolean)(r):void 0},getParent(){return this.isRoot()?null:this.parent},getAttributes(t){return this.attributes.filter((e=>e.name===t))},getField(t){return this.environment.getField(t)},getStatic(t){return this.environment.getStatic(t)},getLayout(t){return this.environment.getLayout(t)},resolveElement(t){return this.environment.resolveElement(t)},getHandlers(t){return(0,s.valOrDefault)(this.handlers[t],[])},update(t,e,i){if((0,s.isEmpty)(this.containers))return;if("delete"===t&&i.parent!==this.concept)return void this.delete();const n=this.getHandlers(t);switch((0,s.isEmpty)(n)||n.forEach((t=>{t(e,i)})),t){case"attribute.added":return void this.getAttributes(e.name).forEach((t=>{const{schema:i}=t,n=this.model.createProjection(e.target,i.tag).init();n.parent=this,n.optional=!0;const s=n.render();Kt.call(this,s,i.style),n.element.parent=t.parent,t.element=s,t.placeholder&&(t.placeholder.after(s),(0,a.Cp)(t.placeholder))}));case"attribute.removed":return void this.getAttributes(e.name).forEach((t=>{t.element&&((0,s.removeChildren)(t.element).remove(),t.element=null),t.placeholder&&(0,a.$Z)(t.placeholder)}))}},delete(){return this.concept&&this.concept.unregister(this),this.placeholder&&this.getContainer().after(this.placeholder),this.containers.forEach((t=>{if((0,s.removeChildren)(t),(0,s.isHTMLElement)(t)&&t.remove(),"path"===t.tagName){if("force"===t.dataset.algorithm){let e=this.environment.resolveElement(t);e.projection.parent.removeArrow(e)}"anchor"===t.dataset.algorithm&&this.environment.resolveElement(t).deleteFromView(),"multi"===t.dataset.algorithm&&this.environment.resolveElement(t).deletePaths()}["svg","text"].includes(t.tagName)&&t.remove(),this.sibling&&this.sibling.delete()})),this.model.removeProjection(this.id),!0},registerHandler(t,e){return Array.isArray(this.handlers[t])||(this.handlers[t]=[]),this.handlers[t].push(e),!0},unregisterHandler(t,e){if(!(0,s.hasOwn)(this.handlers,t))return!1;for(let i=0;i<this.handlers[t].length;i++)if(this.handlers[t][i]===e)return this.handlers[t].splice(i,1),!0;return!1},focus(){this.element.focus()},render(){const t=this.getSchema();if((0,s.isNullOrUndefined)(t))return null;const{type:e,projection:i,content:n,kind:a,sibling:r,rtag:o,ratio:l}=t;var c=null;if("layout"===e||"layout"===a)this.element=ja.createLayout(this.model,(0,s.valOrDefault)(i,n),this).init(this.args),this.model.registerLayout(this.element);else if("field"===e||"field"===a){let e=(0,s.hasOwn)(t,"field")?t.field:(0,s.valOrDefault)(i,n);this.element=Di.createField(this.model,e,this).init(this.args),this.model.registerField(this.element)}else"static"===e||"static"===a?(this.element=jn.createStatic(this.model,(0,s.valOrDefault)(i,n),this).init(this.args),this.element.source=this.concept,this.model.registerStatic(this.element)):"dynamic"===e||"dynamic"===a?(this.element=jn.createStatic(this.model,(0,s.valOrDefault)(i,n),this).init(this.args),this.model.registerStatic(this.element)):"algorithm"===e?(this.element=ws.createAlgo(this.model,(0,s.valOrDefault)(i,n),this).init(this.args),this.model.registerAlgorithm(this.element)):"arrow"===e?(this.element=Da.createArrow(this.model,(0,s.valOrDefault)(i,n),this).init(this.args),this.model.registerArrow(this.element)):"shape"===e?(this.element=pr.createShape(this.model,(0,s.valOrDefault)(i,n),this).init(this.args),this.model.registerShape(this.element)):"simulation"===e?(this.element=zs.createSimulation(this.model,(0,s.valOrDefault)(i,n),this).init(this.args),this.model.registerSimulation(this.element)):(this.element=Cn(this.model,t.container,this).init(this.args),this.model.registerLayout(this.element));if(this.isRoot()&&(this.element.focusable=!0),this.focusable||(this.element.focusable=!1),this.readonly&&(this.element.readonly=!0),c=this.element.render(),this.element.focusable||(c.tabIndex=-1),!(0,s.isNode)(c))throw new Error("Projection element container could not be created");if(c.classList.add("projection"),Object.assign(c.dataset,{projection:this.id,concept:this.concept.id,object:this.concept.object}),this.optional)if(this.element.schema.rmv)this.element.createDelete(),c.dataset.deletable=!0;else{let t=(0,s.createButton)({class:["btn","structure__btn-delete","projection__btn-delete"],title:`Delete ${this.concept.name}`,tabindex:-1,dataset:{action:"delete",projection:this.id}});t.addEventListener("click",(t=>{let e=this.getContainer(),i=(0,s.findAncestor)(e,(t=>0===t.tabIndex));this.environment.save(this.concept.getParent(),e.cloneNode(!0)),this.concept.delete();let n=this.environment.resolveElement(i);(0,s.isNullOrUndefined)(n)||n.focus()})),c.dataset.deletable=!0,c.prepend(t)}if(this.collapsible){let t=(0,s.createButton)({class:["btn","projection__btn-collapse"],title:`Collapse ${this.concept.name}`,tabindex:-1,dataset:{action:"collapse",projection:this.id}});t.addEventListener("click",(t=>{this.getContainer().classList.toggle("collapsed")})),c.dataset.collapsible=!0,c.prepend(t)}return this._style&&Kt.call(this,c,this._style),this.containers.set(this.index,c),r&&this.createSibling(this.concept,r,this.element),o&&(this.rtag=o,this.environment.registerReceiver(this.element,o)),c},refresh(){this.editing?this.containers.forEach((t=>{t.tabIndex=0})):this.containers.forEach((t=>{t.tabIndex=null}))},createSibling(t,e){const{render:i,params:n=!1,bind:a}=e,{tag:r,rtag:o}=i;if(this.checkForAliveSibling(t.id,r,o))return;let l=this.model.createProjection(t,r).init();a&&(l.bind=this.element);let c=l.render();if(n){const{coordinates:t,dimension:e}=n;c.setAttribute("x",t.x),c.setAttribute("y",t.y)}let h=this.environment.getActiveReceiver(o);l.parent=h,(0,s.isNullOrUndefined)(l.element.path)&&h.container.append(l.element.element||l.element.container),this.sibling=l},checkForAliveSibling(t,e,i){if((0,s.isNullOrUndefined)(this.environment.siblingModel)&&(this.environment.siblingModel=new Map),(0,s.isNullOrUndefined)(this.environment.siblingModel.get(t)))return this.environment.siblingModel.set(t,[{tag:e,rtag:i}]),!1;let n=this.environment.siblingModel.get(t);for(let t=0;t<n.length;t++)if(n[t].rtag===i&&n[t].tag===e)return!0;return n.push([{tag:e,rtag:i}]),this.environment.siblingModel.set(t,n),!1},changeView(t){if(!this.hasMultipleViews)return void this.environment.notify("There is no alternative projection for this concept");let e=this.getContainer();this.index=(0,s.valOrDefault)(t,(this.index+1)%this.schema.length);let i=this.getContainer();(0,s.isHTMLElement)(i)||(this.params=[],i=this.render()),e.replaceWith(i),this.element=this.resolveElement(i),"svg"===this.element.type&&this.element.update();const n=this.getHandlers("view.changed");return(0,s.isEmpty)(n)||n.forEach((t=>t(i))),this.focus(),this},findView(t){if(!this.hasSchema(t)){if(!this.model.hasProjectionSchema(this.concept,t))return-1;let e=this.model.getProjectionSchema(this.concept,t);this.schema.push(...e)}return this.schema.findIndex((e=>e.tags.includes(t)))},export(){return{id:this.id,root:this.isRoot(),concept:{id:this.concept.id,name:this.concept.name}}},bindEvents(){}},fr=[{concept:{name:"set"},type:"field",tags:[],content:{type:"list"}},{concept:{name:"boolean"},type:"field",tags:[],content:{type:"binary"}},{concept:{name:"string"},type:"field",tags:[],content:{type:"text"}},{concept:{name:"number"},type:"field",tags:[],content:{type:"text",input:{type:"number"}}},{concept:{name:"reference"},type:"field",tags:[],content:{type:"choice"}}];function br(t,e){return Object.create(vr,{schema:{value:(0,s.valOrDefault)(t,{projection:[],algorithm:[],template:[],style:[]}),writable:!0},editor:{value:e},environment:{value:e}})}const vr={projections:null,fields:null,statics:null,layouts:null,algos:null,init(t){return this.projections=[],this.fields=new Map,this.statics=new Map,this.layouts=new Map,this.algos=new Map,this.arrows=new Map,this.shapes=new Map,this.simulations=new Map,this},addSchema(t){return Array.isArray(t.projection)&&this.schema.projection.push(...t.projection),Array.isArray(t.template)&&this.schema.template.push(...t.template),Array.isArray(t.style)&&this.schema.style.push(...t.style),this.environment.update("projection-model.updated"),!0},setSchema(t){return this.schema=[...t,...fr],this.environment.update("projection-model.updated"),this},done(){for(;!(0,s.isEmpty)(this.projections);)this.projections[0].delete();return this.projections=[],this.fields.clear(),this.layouts.clear(),this.statics.clear(),this},createProjection(t,e){const i=this.getProjectionSchema(t,e);(0,s.isEmpty)(i)&&this.environment.notify(`Missing projection (#${e}) for ${t.name}`,a.k$.WARNING);const n=yr.createProjection(this,i,t,this.environment);return n.tag=e,this.addProjection(n),n},getProjections(){return this.projections.slice()},getProjection(t){return Number.isInteger(t)?this.projections[t]:this.projections.find((e=>e.id===t))},addProjection(t){if((0,s.isNullOrUndefined)(t))throw new TypeError("Bad request: The 'projection' argument must be a Projection");return this.projections.push(t),this},removeProjection(t){var e=this.projections.findIndex((e=>e.id===t));return-1!==e&&(this.projections.splice(e,1),!0)},registerField(t){return t.environment=this.environment,t.editor=this.environment,this.fields.set(t.id,t),this},unregisterField(t){var e=this.fields.get(t.id);return e&&(e.environment=null,this.fields.delete(e.id)),this},getField(t){return this.fields.get(t)},registerStatic(t){return t.environment=this.environment,t.editor=this.environment,this.statics.set(t.id,t),this},unregisterStatic(t){var e=this.statics.get(t.id);return e&&(e.environment=null,this.statics.delete(e.id)),this},getStatic(t){return this.statics.get(t)},registerLayout(t){return t.environment=this.environment,t.editor=this.environment,this.layouts.set(t.id,t),this},unregisterLayout(t){var e=this.layouts.get(t.id);return e&&(e.environment=null,this.layouts.delete(e.id)),this},getLayout(t){return this.layouts.get(t)},registerArrow(t){return t.environment=this.environment,this.arrows.set(t.id,t),this},unregisterArrow(t){var e=this.arrows.get(t.id);return e&&(e.environment=null,this._arrow.delete(e.id)),this},getArrow(t){return this.arrows.get(t)},registerShape(t){return t.environment=this.environment,this.shapes.set(t.id,t),this},registerSimulation(t){return t.environment=this.environment,this.simulations.set(t.id,t),this},unregisterArrow(t){var e=this.shapes.get(t.id);return e&&(e.environment=null,this._shape.delete(e.id)),this},getArrow(t){return this.shapes.get(t)},registerAlgorithm(t){return t.environment=this.environment,this.algos.set(t.id,t),this},unregisterAlgorithm(t){var e=this.algos.get(t.id);return e&&(e.environment=null,this.algos.delete(e.id)),this},getAlgo(t){return this.algos.get(t)},getSimulation(t){return this.simulations.get(t)},getArrow(t){return this.arrows.get(t)},getMetadata(t){let e=this.schema.find((e=>e.id===t));return e?e.metadata:null},hasConceptProjection(t,e){let i=null;return i=(0,s.isString)(t)?this.schema.projection.filter((e=>e.concept.name===t)):this.schema.projection.filter((e=>{return(e=>e&&(e===t.name||t.schema&&e===t.schema.base))(e.concept.name)||(i=e.concept.prototype,!(0,s.isNullOrUndefined)(i)&&"prototype"!==t.nature&&t.hasPrototype(i));var i})),(0,s.isIterable)(e)&&!(0,s.isEmpty)(e)?-1!==i.findIndex((t=>(t=>Array.isArray(t.tags)&&t.tags.includes(e))(t))):!(0,s.isEmpty)(i)},getSchema(){return this.schema},getProjectionSchema(t,e){if((0,s.isNullOrUndefined)(t))throw new TypeError("Bad parameter: concept");var i=null;return i=(0,s.isString)(t)?this.schema.projection.filter((e=>e.concept.name===t)):this.schema.projection.filter((e=>{return(e=>e&&(e===t.name||t.schema&&e===t.schema.base))(e.concept.name)||(i=e.concept.prototype,!(0,s.isNullOrUndefined)(i)&&"prototype"!==t.nature&&t.hasPrototype(i));var i})),(0,s.isIterable)(e)&&!(0,s.isEmpty)(e)?i.filter((t=>t.tags&&t.tags.includes(e))):i},getTemplateSchema(t){let e=this.schema.template.find((e=>e.name===t));return(0,s.isNullOrUndefined)(e)?null:(0,a.p$)(e)},getGFragmentSchema(t){let e=this.schema.find((e=>"g-fragment"===e.type&&e.name===t));return(0,s.isNullOrUndefined)(e)?null:(0,a.p$)(e)},getRuleSchema(t){let e=this.schema.find((e=>"rule"===e.type&&e.name===t));return(0,s.isNullOrUndefined)(e)?null:(0,a.p$)(e)},getStyleSchema(t){let e=this.schema.style.find((e=>e.name===t));return(0,s.isNullOrUndefined)(e)?null:(0,a.p$)(e)},hasProjectionSchema(t,e){if((0,s.isNullOrUndefined)(t))throw new TypeError("Bad parameter: concept");let i=[];return i=(0,s.isString)(t)?this.schema.projection.filter((e=>e.concept.name===t)):this.schema.projection.filter((e=>{return(e=>e&&(e===t.name||t.schema&&e===t.schema.base))(e.concept.name)||(i=e.concept.prototype,!(0,s.isNullOrUndefined)(i)&&"prototype"!==t.nature&&t.hasPrototype&&t.hasPrototype(i));var i})),(0,s.isIterable)(e)&&!(0,s.isEmpty)(e)?i.some((t=>t.tags&&t.tags.includes(e))):!(0,s.isEmpty)(i)},export(){const t=[];return this.getProjections().forEach((e=>{t.push(e.export())})),t}},wr={unloadAllConcept(){return this.hasConceptModel&&(this.conceptModel.done(),this.conceptModel=null,this.refresh()),this.triggerEvent({name:"editor.unload-concept@post"}),this},unloadAllProjection(){return this.hasProjectionModel&&(this.projectionModel.done(),this.projectionModel=null,this.refresh()),this.triggerEvent({name:"editor.unload-projection@post"}),this},loadSession(){this.conceptModel.getRootConcepts().forEach((t=>{this.createInstance(t)}))},loadConcept(t,e){let i=t.concept||t,n=t.values;return Array.isArray(i)?(0,s.isEmpty)(i)?(this.notify("The concept schema is empty",a.k$.ERROR),!1):((0,s.isNullOrUndefined)(this.conceptModel)&&(this.conceptModel=Xt.createModel(null,this).init()),this.conceptModel.addConceptSchema(i),this.conceptModel.init(n),this.triggerEvent({name:"editor.load-concept@post",args:[e,JSON.stringify(t)]}),this.refresh(),this):(this.notify("Invalid concept schema",a.k$.ERROR),!1)},loadValues(t,e){let i=t;if(!(0,s.isNullOrUndefined)(this.conceptModel))return this.conceptModel.initValue(i),this.loadSession(),this.triggerEvent({name:"editor.load-values@post",args:[e,JSON.stringify(i)]}),this.refresh(),this;console.error("concept model not found")},loadConcepts(t){return Array.isArray(t)?(0,s.isEmpty)(t)?(this.notify("The concept schema is empty",a.k$.ERROR),!1):((0,s.isNullOrUndefined)(this.conceptModel)&&(this.conceptModel=Xt.createModel(null,this).init()),t.forEach((t=>{this.conceptModel.addConceptSchema(t)})),this.refresh(),this):(this.notify("Invalid concept schema",a.k$.ERROR),!1)},loadProjection(t,e){return this.activeElement=null,this.activeInstance=null,this.activeConcept=null,this.activeProjection=null,(0,s.isNullOrUndefined)(this.projectionModel)&&(this.projectionModel=br(t,this).init()),this.projectionModel.addSchema(t),(0,s.isNullOrUndefined)(this.projectionModel),this.instances.forEach((t=>{t.projection=this.projectionModel.createProjection(t.concept).init(),t.render()})),this.triggerEvent({name:"editor.load-projection@post",args:[e,JSON.stringify(t)]}),this.refresh(),this},loadProjections(t){return Array.isArray(t)?(0,s.isEmpty)(t)?(this.notify("The concept schema is empty",a.k$.ERROR),!1):(this.activeElement=null,this.activeInstance=null,this.activeConcept=null,this.activeProjection=null,(0,s.isNullOrUndefined)(this.projectionModel)&&(this.projectionModel=br(null,this).init()),t.forEach((t=>{this.projectionModel.addSchema(t)})),this.refresh(),this):(this.notify("Invalid concept schema",a.k$.ERROR),!1)},load(t,e){let i=t.type;if((0,s.isNullOrWhitespace)(i)){let e=t.name.indexOf(".")+1;i=t.name.substring(e)}else i=a.D3[i];"jsoncp"===i&&"json"===i||this.addResource(t,e);let n=new FileReader;return n.onload=t=>{const i=JSON.parse(n.result),{type:s}=i;"concept"===s?this.loadConcept(i,e):"projection"===s?this.loadProjection(i,e):"model"===s&&(this.loadConcept(i.concept,"model"),this.loadValues(i.values))},n.readAsText(t),!0},unload(){return this.unloadAllConcept(),this.unloadAllProjection(),this.clear(),this}},xr={getField(t){if(!(0,s.isHTMLElement)(t)&&"path"!==t.tagName&&"text"!==t.tagName&&"svg"!==t.tagName)return console.warn("Field error: Bad argument"),null;const{id:e,nature:i}=t.dataset;return(0,s.isNullOrUndefined)(e)?(console.warn("Field error: Missing id attribute on field"),null):["field","field-component"].includes(i)?this.projectionModel.getField(e):(console.warn("Field error: Unknown nature attribute on field"),null)},getStatic(t){if(!(0,s.isHTMLElement)(t)&&"svg"!==t.tagName)return console.warn("Static error: Bad argument"),null;const{id:e,nature:i}=t.dataset;return(0,s.isNullOrUndefined)(e)?(console.warn("Static error: Missing id attribute on field"),null):["static","static-component"].includes(i)?this.projectionModel.getStatic(e):(console.warn("Static error: Unknown nature attribute on field"),null)},getLayout(t){if(!(0,s.isHTMLElement)(t)&&"svg"!==t.tagName)return console.warn("Layout error: Bad argument"),null;const{id:e,nature:i}=t.dataset;return(0,s.isNullOrUndefined)(e)?(console.warn("Layout error: Missing id attribute on field"),null):["layout","layout-component"].includes(i)?this.projectionModel.getLayout(e):(console.warn("Layout error: Unknown nature attribute on field"),null)},getAlgo(t){if(!(0,s.isHTMLElement)(t)&&"svg"!==t.tagName&&"text"!==t.tagName)return console.warn("Algo error: Bad argument"),null;const{id:e,nature:i}=t.dataset;return(0,s.isNullOrUndefined)(e)?(console.warn("Algo error: Missing id attribute on field"),null):["algorithm"].includes(i)?this.projectionModel.getAlgo(e):(console.warn("algo error: Unknown nature attribute on field"),null)},getSimulation(t){if(!(0,s.isHTMLElement)(t)&&"svg"!==t.tagName&&"text"!==t.tagName)return console.warn("Simulation error: Bad argument"),null;const{id:e,nature:i}=t.dataset;return(0,s.isNullOrUndefined)(e)?(console.warn("Simulation error: Missing id attribute on Simulation"),null):["simulation"].includes(i)?this.projectionModel.getSimulation(e):(console.warn("Simulation error: Unknown nature attribute on Simulation"),null)},getArrow(t){if("path"!==t.tagName)return console.warn("Arrow error: Bad argument"),null;const{id:e,nature:i}=t.dataset;return(0,s.isNullOrUndefined)(e)?(console.warn("Arrow error: Missing id attribute on field"),null):["arrow","arrow-path"].includes(i)?this.projectionModel.getArrow(e):(console.warn("Layout error: Unknown nature attribute on field"),null)},resolveElement(t){if(t instanceof SVGElement){let e=t;for(;!(0,s.isNullOrUndefined)(e.parentNode)&&(0,s.isNullOrUndefined)(e.dataset);)e=e.parentNode;(0,s.isNullOrUndefined)(e.dataset.nature)||(t=e)}if(!(0,s.isHTMLElement)(t)&&"path"!==t.tagName&&"svg"!==t.tagName&&"text"!==t.tagName)return null;const{nature:e}=t.dataset;if((0,s.isNullOrUndefined)(e))return null;let i=null;switch(e){case"field":case"field-component":i=this.getField(t);break;case"layout":case"layout-component":i=this.getLayout(t);break;case"static":case"static-component":i=this.getStatic(t);break;case"algorithm":i=this.getAlgo(t);break;case"simulation":i=this.getSimulation(t);break;case"arrow":i=this.getArrow(t)}return i&&(i.environment=this),i}};var Er=0;const Ar={createState(t,e){const{id:i,name:n}=t;let a="value"+Er++,r=JSON.stringify(t.clone()),o=((0,s.formatDate)(new Date,"hh:dd"),(0,s.createI)({class:["ico","ico-delete"]},"✖")),l=(0,s.createButton)({class:["btn","btn-delete"],title:`Delete ${n} state`},o),c=(0,s.createDiv)({class:["model-state-preview"],title:`Preview ${n}`},e),h=(0,s.createSpan)({class:["model-state-content","fit-content"]},`${t.getName()}`),d=(0,s.createListItem)({class:["model-state"],title:`Restore ${n} state`,dataset:{id:a,concept:i}},[l,h,c]);d.addEventListener("click",(t=>{let e=function(t){const e=t=>t===d||t===l;return e(t)?t:(0,s.findAncestor)(t,(t=>e(t)),5)}(t.target);if(this.unhighlight(),e===l)this.removeState(a);else{let t=this.restore(r);this.removeState(a);let e=(0,s.getElement)(`.projection[data-concept="${t.id}"]`,this.body);e&&e.focus()}}));let u=`.projection[data-concept="${i}"]`;if(d.addEventListener("mouseenter",(t=>{let e=(0,s.getElement)(u,this.body);e&&this.highlight(e)})),d.addEventListener("mouseleave",(t=>{this.unhighlight()})),this.states.length>8){let{id:t}=this.stateList.lastChild.dataset;this.removeValue(t)}let p=Object.create({},{id:{value:a},object:{value:"value"},type:{value:"state"},element:{value:d},concept:{value:t},value:{value:r}});return this.addState(p),p},getState(t){if(!(0,s.isNullOrUndefined)(t)&&!(0,s.isEmpty)(this.states))return this.states[t]},addState(t){return this.stateList.append(t.element),this.states.push(t),this.refresh(),t},removeState(t){if((0,s.isNullOrUndefined)(t))return;const e=this.states.findIndex((e=>e.id===t));if(-1===e)return null;let i=this.states.splice(e,1)[0],{element:n}=i;return(0,s.removeChildren)(n).remove(),this.refresh(),this}};var jr=0;const Or={conceptModel:null,projectionModel:null,concept:null,activeConcept:null,activeProjection:null,activeReceiver:null,activeInstance:null,container:null,header:null,body:null,instanceSection:null,designSection:null,navigationSection:null,valueWindow:null,valueList:null,breadcrumb:null,filter:null,home:null,exporter:null,style:null,logs:null,status:null,group:null,input:null,copyValue:null,states:null,activeElement:null,decoratedElements:null,config:null,active:!1,visible:!1,frozen:!1,handlers:null,actions:null,attached:null,instances:null,windows:null,values:null,resources:null,models:null,errors:null,init(t={}){const{conceptModel:e,projectionModel:i,toolbar:n=[],config:s={},handlers:a={},actions:r={}}=t;this.config=Object.assign({},s),this.handlers=new Map,this.actions=new Map,this.attached=[],this.instances=new Map,this.windows=new Map,this.values=new Map,this.resources=new Map,this.models=new Map,this.errors=[],Object.assign(this,L,T),this.states=[],this.decoratedElements=new Set;for(const t in a){const e=a[t];this.registerHandler(t,e)}return this.header=D.call(this).init(),this.home=P.call(this).init(),this.breadcrumb=H.call(this).init(),this.logs=B.call(this).init(),this.status=V.call(this).init(),this.exporter=R.call(this).init(),this.render(),Array.isArray(e)?this.loadConcepts(e):e&&this.loadConcept(e),Array.isArray(i)?this.loadProjections(i):i&&this.loadProjection(i),this.isReady?(this.conceptModel.getRootConcepts().forEach((t=>{this.createInstance(t)})),this.open()):(this.home.open(),this.refresh()),this},setConfig(t){return!(0,s.isNullOrUndefined)(t)&&(this.config=t,this.refresh(),this)},getConfig(t){return(0,s.isNullOrUndefined)(t)?this.config:this.config[t]},getName(){return(0,s.valOrDefault)(this.config.name,`editor${(new Date).getTime()}`)},createConcept(t){if((0,s.isNullOrUndefined)(t))throw new TypeError("Missing argument: The 'name' is required to create a concept");return this.conceptModel.isConcept(t)?this.conceptModel.createConcept(t):(this.notify(`The concept '${t}' is not defined in the model`,a.k$.ERROR),!1)},addConcept(t){let e=t.concept||t;Array.isArray(e)?this.conceptModel.schema.push(...e):this.conceptModel.schema.push(e),this.refresh()},createProjection(t,e){if((0,s.isNullOrUndefined)(t))throw new TypeError("Missing argument: The 'concept' is required to create a projection");return this.projectionModel.hasConceptProjection(t,e)?this.projectionModel.createProjection(t,e).init():(this.notify(`The projection for the concept '${t.name}' is not defined in the model`,a.k$.ERROR),!1)},addProjection(t){Array.isArray(t)?this.projectionModel.schema.projection.push(...t):this.projectionModel.addSchema(t),this.refresh()},download(t,e,i){const n=a.n_[i.toUpperCase()].type;window.URL=window.webkitURL||window.URL;var r=(0,s.createAnchor)({class:["bare-link","download-item__link"]},"Download");(0,s.isNullOrWhitespace)(r.href)||window.URL.revokeObjectURL(r.href);var o=new Blob([t],{type:n});return Object.assign(r,{download:e,href:window.URL.createObjectURL(o)}),r.dataset.downloadurl=[n,r.download,r.href].join(":"),r.click(),setTimeout((()=>{window.URL.revokeObjectURL(r.href),r.remove()}),1500),t},save(t,e){(0,s.isNullOrUndefined)(t)||(this.createState(t,e),this.refresh())},restore(t){let e=JSON.parse(t),i=this.conceptModel.getConcept(e.id);return i.restore(e),this.refresh(),i},undo(){if((0,s.isEmpty)(this.states))return void this.notify("There are no previous state",a.k$.NORMAL,2e3);let t=(0,s.last)(this.states);this.restore(t.value),this.removeState(t.id)},notify(t,e,i=4500){let n=(0,s.createParagraph)({class:["notify"],html:t});const a="open";e&&n.classList.add(e),this.container.append(n),setTimeout((()=>{n.classList.add(a)}),50),setTimeout((()=>{n.classList.remove(a),setTimeout((()=>{n.remove()}),500)}),i)},addResource(t,e){let i=(0,s.valOrDefault)(e,t.name.split(".")[0]);this.resources.set(i,t);let n=new FileReader;return n.onload=t=>{const e=JSON.parse(n.result);console.log("Resulting Schema"),console.log(e),this.addModel(i,e)},n.readAsText(t),this.refresh(),t},getResource(t){return this.resources.get(t)},hasResource(t){return this.resources.has(t)},removeResource(t){return this.resources.delete(t),this.triggerEvent({name:"resource.removed"}),this.refresh(),!0},addError(t){return this.errors.push(t),this.refresh(),(0,a.lL)(this.status.editorstatusBadge),t},removeError(t){return this.errors.pop(),this.refresh(),!0},clearError(t){return this.errors=[],this.refresh(),!0},getModel(t){let e=this.models.get(t);return(0,s.isNullOrUndefined)(e)?null:JSON.parse(e)},addModel(t,e){this.models.set(t,e)},removeModel(t){return this.triggerEvent({name:"model.remove@pre",args:[t]},(()=>{this.models.delete(t),this.refresh(),this.triggerEvent({name:"model.remove@post"})}),!1),!0},hasModel(t){return this.models.has(t)},getValue(t){if(this.values.has(t))return this.values.get(t)},addValue(t){let e="value"+jr++,i=(0,s.createI)({class:["ico","ico-copy"]}),n=(0,s.createI)({class:["ico","ico-delete"]},"✖"),a=(0,s.createButton)({class:["btn","btn-copy","fit-content"],title:`Copy ${t.name}`},[i,t.name]),r=(0,s.createButton)({class:["btn","btn-delete"]},n),o=(0,s.createListItem)({class:["model-value"],dataset:{id:e}},[a,r]);if(a.addEventListener("click",(e=>{this.copy(t)})),r.addEventListener("click",(t=>{this.removeValue(e)})),this.values.size>5){let{id:t}=this.valueList.lastChild.dataset;this.removeValue(t)}return this.valueList.prepend(o),this.values.set(e,{element:o,value:t}),this.refresh(),t},removeValue(t){if((0,s.isNullOrUndefined)(t)||!this.values.has(t))return;let{element:e}=this.values.get(t);return(0,s.removeChildren)(e).remove(),this.values.delete(t),this.refresh(),this},copy(t,e=!1){return(0,s.isNullOrUndefined)(t)||(this.copyValue=t,(0,s.copytoClipboard)(JSON.stringify(t)),e&&this.addValue(t),this.notify(`${t.name} copied`,a.k$.NORMAL)),this},paste(t,e){let i=(0,s.valOrDefault)(e,this.copyValue);if(!(0,s.isNullOrUndefined)(i)){if((0,s.isNullOrUndefined)(t)){let t=this.createConcept(i.name).init();t.setValue(i),this.createInstance(t)}else"prototype"===i.nature?t.setValue(i.value):t.setValue(i);return this}},show(){return this.triggerEvent({name:"editor.show@pre"},(()=>{(0,a.$Z)(this.container),this.attached.forEach((t=>t.show())),this.visible=!0,this.triggerEvent({name:"editor.show@post"})}),!1),this},hide(){return this.triggerEvent({name:"editor.hide@pre"},(()=>{(0,a.Cp)(this.container),this.attached.forEach((t=>t.hide())),this.visible=!1,this.triggerEvent({name:"editor.hide@post"})}),!1),this},toggle(){return this.triggerEvent({name:"editor.toggle@pre"},(()=>{(0,a.ZN)(this.container),this.visible=!this.visible,this.triggerEvent({name:"editor.toggle@post"})}),!1),this},open(){return this.triggerEvent({name:"editor.open@pre"},(()=>{this.show(),this.active=!0,this.isReady&&this.home.close(),this.triggerEvent({name:"editor.open@post"})}),!1),this},close(){return this.triggerEvent({name:"editor.close@pre"},(()=>{this.hide(),this.active=!1,this.done(),this.clear(),this.triggerEvent({name:"editor.close@post"})}),!1),this},destroy(){return this.triggerEvent({name:"editor.destroy@pre"},(()=>{this.hide(),this.done(),this.instances.forEach((t=>t.delete())),(0,s.removeChildren)(this.container).remove()}),!1),!0},freeze(){return this.triggerEvent({name:"editor.freeze@pre"},(()=>{this.frozen=!0,this.refresh(),this.triggerEvent({name:"editor.freeze@post"})}),!1),this},unfreeze(){return this.frozen=!1,this.refresh(),this},done(){return this.conceptModel&&this.conceptModel.done(),this.projectionModel&&this.projectionModel.done(),this},highlight(t){return(0,s.isHTMLElement)(t)?((0,a.CH)(t),this.decoratedElements.add(t),this):this},unhighlight(t){return(0,s.isHTMLElement)(t)?((0,a.HW)(t),this.decoratedElements.delete(t),this):(this.decoratedElements.forEach((t=>(0,a.HW)(t))),this.decoratedElements.clear(),this)},createWindow(){let t=(0,s.createDiv)({class:["editor-window"],tabindex:0});this.body.append(t)},clear(){return this.triggerEvent({name:"editor.clear@pre"},(()=>{this.instances.forEach((t=>t.delete())),this.instances.clear(),this.resources.clear(),this.models.clear(),this.states.forEach((t=>t.element.remove())),this.states=[],this.activeElement=null,this.activeInstance=null,this.activeConcept=null,this.activeProjection=null,this.refresh(),this.triggerEvent({name:"editor.clear@post"})}),!1),this},update(t,e,i){this.triggerEvent({name:t})},attach(t){this.attached.push(t)},detach(t){let e=this.attached.findIndex((e=>e===t));if(-1===e)return null;this.attached.splice(e,1)},render(t){const e=(0,s.createDocFragment)();if(this.home.isRendered||e.append(this.home.render()),this.header.isRendered||e.append(this.header.render()),this.exporter.isRendered||e.append(this.exporter.render()),(0,s.isHTMLElement)(this.navigationSection)||(this.navigationSection=(0,s.createSection)({class:["model-navigation-section"]}),this.viewSection=(0,s.createAside)({class:["model-view-section"]}),this.navigationSection.append(this.viewSection),e.append(this.navigationSection)),!(0,s.isHTMLElement)(this.body)){this.body=(0,s.createDiv)({class:["editor-body"],tabindex:0});let t=(0,s.createDiv)({class:["editor-body-main"],tabindex:0});this.instanceSection=(0,s.createSection)({class:["model-concept-section"]}),t.append(this.instanceSection),this.body.append(t),e.append(this.body)}return(0,s.isHTMLElement)(this.timeline)||(this.timeline=(0,s.createDiv)({class:["editor-timeline"]}),this.stateList=(0,s.createUnorderedList)({class:["bare-list","model-state-list"]}),this.timeline.append(this.stateList),e.append(this.timeline)),this.logs.isRendered||e.append(this.logs.render()),this.breadcrumb.isRendered||this.navigationSection.append(this.breadcrumb.render()),(0,s.isHTMLElement)(this.valueSection)||(this.valueSection=(0,s.createDiv)({class:["model-value-window"]}),this.valueList=(0,s.createUnorderedList)({class:["bare-list","model-value-list"]}),this.valueSection.append(this.valueList),this.navigationSection.append(this.valueSection)),this.status.isRendered||e.append(this.status.render()),(0,s.isHTMLElement)(this.input)||(this.input=(0,s.createInput)({type:"file",class:["hidden"],accept:".json,.jsoncp"}),e.append(this.input)),e.hasChildNodes()&&(this.container.append(e),this.bindEvents()),(0,s.isHTMLElement)(t)&&t.append(this.container),this.refresh(),this.container},refresh(t=!1){return this.frozen&&!t||(this.home.isOpen?this.container.classList.add("unfocus"):this.container.classList.remove("unfocus"),this.hasValues?(0,a.$Z)(this.valueWindow):(0,a.Cp)(this.valueWindow),this.header.refresh(),this.breadcrumb.refresh(),this.home.refresh(),this.logs.refresh(),this.status.refresh(),this.instanceSection.dataset.view=this.status.view,["grid"].includes(this.status.view)?(0,a.Cp)(this.viewSection):["tab"].includes(this.status.view)&&(0,a.$Z)(this.viewSection),(0,s.isEmpty)(this.states)?(0,a.Cp)(this.timeline):((0,a.$Z)(this.timeline),this.states.forEach((t=>{this.conceptModel.hasConcept(t.concept.id)?this.hasActiveConcept&&this.activeConcept===t.concept?t.element.classList.add("active"):t.element.classList.remove("active"):this.removeState(t.id)})))),this},updateActiveElement(t){return this.activeElement&&this.activeElement===t||(this.activeElement=t,this.triggerEvent({name:"editor.element@active:updated"})),this},updateActiveConcept(t){return this.hasActiveConcept&&this.activeConcept===t||(this.activeConcept=t,this.triggerEvent({name:"editor.concept@active:updated"}),this.refresh()),this},updateActiveProjection(t){if(this.activeProjection&&this.activeProjection===t)return this;let e=(0,s.getElements)(".active-parent",this.body);for(let t=0;t<e.length;t++)e[t].classList.remove("active-parent");this.activeProjection=t;let i=this.activeProjection.parent;for(;i;)i.getContainer().classList.add("active-parent"),i=i.parent;return this.triggerEvent({name:"editor.projection@active:updated"}),this.refresh(),this},updateActiveInstance(t){if(this.activeInstance){if(this.activeInstance===t)return this;this.activeInstance,this.activeInstance.container.classList.remove("active")}return this.activeInstance=t,this.activeInstance.container.classList.add("active"),this.triggerEvent({name:"editor.instance@active:updated"}),this.refresh(),this},registerReceiver(t,e){(0,s.isNullOrUndefined)(this.receivers)&&(this.receivers={}),(0,s.isNullOrUndefined)(this.receivers[e])?this.receivers[e]={root:t,projections:[t]}:this.receivers[e].projections.push(t),this.setActiveReceiver(t,e)},setActiveReceiver(t,e){(0,s.isNullOrUndefined)(this.activeReceiver)&&(this.activeReceiver={}),this.activeReceiver[e]=t},getActiveReceiver(t){return this.activeReceiver[t]},getReceivers(t){return this.receivers[t].projections},getRootReceiver(t){return this.receivers[t].root},bindEvents(){var t=null,e=null;const i={open:t=>{const{context:e}=t.dataset;e?this[e].open():this.open()},close:t=>{const{context:e,id:i,type:n}=t.dataset;e?this[e].close():this.close()},collapse:t=>{const{rel:e,target:i}=t.dataset;if("parent"===e){let e=(0,s.findAncestor)(t,(t=>t.dataset.name===i));if((0,s.isHTMLElement)(e)){const{alias:i=""}=e.dataset;e.classList.toggle("collapsed");let n=e.classList.contains("collapsed");t.dataset.state=n?"ON":"OFF",t.title=n?`Expand ${i.toLowerCase()}`:`Collapse ${i.toLowerCase()}`}}},delete:t=>{const{target:e}=t.dataset;if("parent"===e){let e=t.parentElement;(0,s.removeChildren)(e),e.remove()}},"delete:value":t=>{const{id:e}=t.dataset;this.conceptModel.removeValue(e),this.header._valueSelector.update()},"delete:resource":t=>{const{id:e}=t.dataset;this.removeResource(e)},"change-view":t=>{const{value:e}=t.dataset;this.status.changeView(e)},"add-group":t=>{this.status.addGroup()},style:t=>{this.style.toggle()},home:t=>{this.home.toggle()},logs:t=>{this.logs.toggle()},export:t=>{this.export()},"export--copy":t=>{this.export(!0)},"create-instance":t=>{const{concept:e}=t.dataset;let i=this.createConcept(e);this.createInstance(i)},"create-instance:value":t=>{const{id:e}=t.dataset;let i=this.conceptModel.getValue(e),n=this.createConcept(i.name);n.initValue(i),this.createInstance(n)},"copy:value":t=>{const{id:e}=t.dataset;let i=this.conceptModel.getValue(e);this.copy(i)},save:t=>{this.save()},undo:t=>{this.undo()},load:t=>{let e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});this.input.dispatchEvent(e)},unload:t=>{this.unload()},"load-concept":t=>{let e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});this.input.dispatchEvent(e)},"unload-concept":t=>{this.unloadAllConcept()},"download-concept":t=>{const{schema:e,values:i}=this.conceptModel;let n=this.getName().toLowerCase().replace(/\s+/g," ").replace(" ","_");this.download({concept:e},`${n}_model`)},"load-projection":t=>{let e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});this.input.dispatchEvent(e)},"unload-projection":t=>{this.unloadAllProjection()},"download-projection":t=>{const{schema:e,views:i}=this.projectionModel;let n=this.getName().toLowerCase().replace(/\s+/g," ").replace(" ","_");this.download({projection:e},`${n}_projection`)}},n={[a.sr.up_arrow]:"up",[a.sr.right_arrow]:"right",[a.sr.down_arrow]:"down",[a.sr.left_arrow]:"left"};this.container.addEventListener("click",(t=>{var e=(0,a.NI)(t.target);const{action:n,context:r,id:o}=e.dataset;if("instance"===r)return void this.getInstance(o).actionHandler(n);if("menu"===r)return void this.home.actionHandler(n,e);if(this.activeElement&&this.activeElement.clickHandler(e),(0,s.isNullOrUndefined)(n))return;if(this.actions.has(n))return console.warn(n),this.actions.get(n).call(this,e),void e.blur();const l=i[n];(0,s.isFunction)(l)?(l(e),e.blur()):n&&this.triggerEvent({name:n})}),!0),this.input.addEventListener("change",(t=>{let i=this.input.files[0];this.load(i,e),this.input.value=""})),this.body.addEventListener("copy",(t=>{if(!(0,a.QE)(t.target)){let e=this.activeConcept.copy(!1);this.copy(e,!0),t.preventDefault()}})),this.body.addEventListener("keydown",(e=>{const{target:i}=e,{nature:r}=i.dataset;var o=!1;switch(e.key){case a.sr.backspace:this.activeElement&&t!==a.sr.ctrl&&!0===this.activeElement.backspaceHandler(i)&&e.preventDefault();break;case a.sr.ctrl:case a.sr.shift:e.preventDefault(),o=!0;break;case a.sr.delete:this.activeElement&&t!==a.sr.ctrl&&!(0,a.QE)(i)&&this.activeElement.deleteHandler(i)&&e.preventDefault();break;case a.sr.spacebar:this.activeElement&&t!==a.sr.ctrl&&this.activeElement.spaceHandler(i)&&e.preventDefault();break;case a.sr.alt:e.preventDefault();break;case a.sr.enter:this.activeElement?!0===this.activeElement.enterHandler(i)&&e.preventDefault():"concept-container"===r?this.activeInstance.projection.focus():"editable"===r?i.blur():"BUTTON"===i.tagName?(i.click(),e.preventDefault()):e.preventDefault();break;case a.sr.escape:this.activeElement&&(!0===this.activeElement.escapeHandler(i)?e.preventDefault():(0,s.findAncestor)(i,(t=>0===t.tabIndex)).focus());break;case a.sr.insert:this.activeElement&&e.preventDefault();break;case a.sr.up_arrow:case a.sr.right_arrow:case a.sr.down_arrow:case a.sr.left_arrow:if(this.activeElement&&![a.sr.ctrl,a.sr.shift,a.sr.alt].includes(t))!0===this.activeElement.arrowHandler(n[e.key],i)&&e.preventDefault();else if("concept-container"===r&&![a.sr.ctrl,a.sr.shift,a.sr.alt].includes(t)){let t=(0,a.As)(i,n[e.key],this.instanceSection);if(!(0,s.isHTMLElement)(t))return!1;t.focus()}break;case"s":t===a.sr.ctrl&&(this.activeConcept.copy(),this.header.valueCount++,this.refresh(),e.preventDefault());break;case"c":if(t===a.sr.ctrl){let t=new ClipboardEvent("copy");this.body.dispatchEvent(t)}break;case"v":if(t===a.sr.ctrl){if((0,a.QE)(i))return;this.paste(this.activeConcept,this.copyValue)}break;case"e":t===a.sr.ctrl&&this.activeConcept&&(this.createInstance(this.activeConcept,this.activeProjection,{type:"projection",close:"DELETE-PROJECTION"}),e.preventDefault());break;case"f":break;case"z":t===a.sr.ctrl&&((0,a.QE)(i)||(this.undo(),e.preventDefault()))}o&&(t=e.key)}),!1),this.body.addEventListener("keyup",(e=>{var i=e.target;const{nature:r}=i.dataset;switch(e.key){case a.sr.spacebar:this.activeElement&&t===a.sr.ctrl&&this.activeElement._spaceHandler(i);break;case a.sr.delete:this.activeElement&&t===a.sr.ctrl&&this.activeElement.delete(i);break;case a.sr.alt:break;case a.sr.up_arrow:case a.sr.down_arrow:case a.sr.right_arrow:case a.sr.left_arrow:if(this.activeElement&&t===a.sr.ctrl)!0===this.activeElement._arrowHandler(n[e.key],i)&&e.preventDefault();else if("concept-container"===r&&t===a.sr.ctrl){let r=(0,a.As)(i,n[e.key],this.instanceSection);if(!(0,s.isHTMLElement)(r))return!1;this.swapInstance(i,r,!0),i.focus(),t=a.sr.ctrl}}t===e.key&&(t=-1)}),!1),this.body.addEventListener("focusin",(e=>{const{target:i}=e,n=this.resolveElement(i);if(t=-1,n?(this.activeElement&&this.activeElement!==n&&(this.activeElement.focusOut(),this.activeElement=null),this.updateActiveElement(n),this.activeElement.focusIn(i)):(this.activeElement&&this.activeElement.focusOut(i),this.activeElement=null),this.activeElement){let t=this.activeElement.projection;this.updateActiveProjection(t),this.updateActiveConcept(t.concept)}else this.activeConcept=null,this.activeProjection=null;this.refresh()})),this.registerHandler("value.changed",(()=>this.refresh())),this.registerHandler("value.added",(()=>this.refresh())),this.registerHandler("value.removed",(()=>this.refresh())),this.registerHandler("load-resource",(t=>{let i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e=t[0],this.input.dispatchEvent(i)}))}},Nr=Object.assign(Ar,wr,xr,$,Or);Object.defineProperty(Nr,"hasConceptModel",{get(){return!(0,s.isNullOrUndefined)(this.conceptModel)}}),Object.defineProperty(Nr,"hasProjectionModel",{get(){return!(0,s.isNullOrUndefined)(this.projectionModel)}}),Object.defineProperty(Nr,"hasInstances",{get(){return this.instances.size>0}}),Object.defineProperty(Nr,"hasWindows",{get(){return this.windows.size>0}}),Object.defineProperty(Nr,"hasValues",{get(){return this.values.size>0}}),Object.defineProperty(Nr,"isReady",{get(){return this.hasConceptModel&&this.hasProjectionModel}}),Object.defineProperty(Nr,"hasActiveConcept",{get(){return!(0,s.isNullOrUndefined)(this.activeConcept)}}),Object.defineProperty(Nr,"hasActiveProjection",{get(){return!(0,s.isNullOrUndefined)(this.activeProjection)}}),Object.defineProperty(Nr,"hasActiveInstance",{get(){return!(0,s.isNullOrUndefined)(this.activeInstance)}}),Object.defineProperty(Nr,"hasError",{get(){return!(0,s.isEmpty)(this.errors)}});const kr="editor";function Lr(t){let e=(0,a.fP)(t);return(0,s.isHTMLElement)(t)||(e=(0,s.createDiv)({tabindex:-1})),e.classList.add("gentleman-editor"),e.dataset.gentleman=kr,Object.create(Nr,{object:{value:"environment"},type:{value:kr},name:{value:"gentleman editor"},container:{value:e}})}},185:(t,e,i)=>{"use strict";i.r(e),i.d(e,{AnchorHandler:()=>s});var n=i(835);const s={models:null,init(){this.models=new Map},create(t,e){return(0,n.isNullOrUndefined)(this.models)&&this.init(),(0,n.isNullOrUndefined)(this.models.get(e.id))?this.createModel(e.id,e.rtag,t):this.register(e.id,e.rtag,t),this.models.get(e.id)},createModel(t,e,i){const n=i.projection.environment.getActiveReceiver(e);let s=[];for(let e=0;e<n.items.length;e++)if(n.items[e].render.contains(i.container))return s.push({id:i.id,pId:n.items[e].render.dataset.id,holder:n.items[e].render,elem:i}),void this.models.set(t,{items:s,index:0})},register(t,e,i){let n=this.models.get(t);const s=i.projection.environment.getActiveReceiver(e);for(let t=0;t<s.items.length;t++)if(s.items[t].render.contains(i.container)){n.items.push({id:i.id,pId:s.items[t].render.dataset.id,holder:s.items[t].render,elem:i});break}for(let t=0;t<n.index;t++)i.nextAnchor(!1)},nextAnchor(t,e){let i=this.models.get(t);for(let t=0;t<i.items.length;t++){let n=i.items[t];n.id!==e&&n.elem.nextAnchor(!1)}i.index++},findSource(t,e){const i=this.models.get(t).items,s={};let a,r;for(a=0;a<i.length;a++){const t=i[a].elem,o=t.items;if(!(0,n.isNullOrUndefined)(o))for(r=0;r<o.length;r++)if(o[r].render.contains(e)){s.x=Number(o[r].render.getAttribute("x"))+Number(i[a].holder.getAttribute("x"))+Number((t.container||t.element).getAttribute("x")),s.y=Number(o[r].render.getAttribute("y"))+Number(i[a].holder.getAttribute("y"))+Number((t.container||t.element).getAttribute("y")),s.calc={projItems:{x:Number(o[r].render.getAttribute("x")),y:Number(o[r].render.getAttribute("y"))},holder:i[a].holder,proj:t};break}if(!(0,n.isNullOrUndefined)(s.x))break}let o=i[a].elem.anchors.indexes;const l=Number(i[a].elem.items[r].render.getAttribute("x")),c=Number(i[a].elem.items[r].render.getAttribute("y"));for(let t=0;t<o.length;t++)if(o[t].x===l&&o[t].y===c)return s.index=t,s},unregister(t,e){let i=this.models.get(t).listeners;for(let t=0;t<i.length;t++)if(i[t]===e)return void i.splice(t,1)},createSubModel(t,e){let i=this.models.get(t);(0,n.isNullOrUndefined)(i.subModels)&&(i.subModels=[]),i.subModels.push({elem:e,size:1})},registerSubModel(t,e,i){let s,a=this.models.get(t);for(let t=0;t<a.subModels.length;t++)a.subModels[t].elem===e&&(s=a.subModels[t]);(0,n.isNullOrUndefined)(s.start)&&(s.start=this.estimateStart(a,s.elem));const r=a.items;let o;for(let t=0;t<r.length;t++){const e=r[t].elem,s=e.items;if(!(0,n.isNullOrUndefined)(e.items)){for(let t=0;t<s.length;t++)if(s[t].render.contains(i.container||i.element)){o={},o.j=t,o.index=s[t].index;break}if(!(0,n.isNullOrUndefined)(o)){o.i=t;break}}}if(o.index>s.start+s.size){const t=r[o.i].elem.moveElemToAnchor(s.start+s.size,o.j);r.forEach((e=>{e.elem.increaseAnchors(s.start+s.size,o.index,t,a.forbiden)}))}else if(o.index<s.start+s.size){const t=r[o.i].elem.moveElemToAnchor(s.start+s.size-1,o.j);r.forEach((e=>{e.elem.decreaseAnchors(o.index,s.start+s.size,t,a.forbiden)})),s.start--}s.elem.increaseSize(),s.size++,(0,n.isNullOrUndefined)(a.listeners)||a.listeners.forEach((t=>{t.updateValue()}))},estimateStart(t,e){const i=t.items;for(let t=0;t<i.length;t++){const n=i[t].elem.items;for(let t=0;t<n.length;t++)if(n[t].render.contains(e.container))return t}},findTarget(t,e,i){const n=this.models.get(t).items;for(let t=0;t<n.length;t++){const s=n[t].elem,a=n[t].holder,r=s.anchors.indexes;if(a.dataset.concept===e)return{x:r[i].x+Number(a.getAttribute("x"))+Number((s.container||s.element).getAttribute("x")),y:r[i].y+Number(a.getAttribute("y"))+Number((s.container||s.element).getAttribute("y")),calc:{projItems:r[i],holder:a,proj:s}}}},estimatePositionCondamn(t,e){const i=this.models.get(t),s=i.items;for(let t=0;t<s.length;t++){const a=s[t].elem,r=a.items;if(!(0,n.isNullOrUndefined)(r))for(let o=0;o<r.length;o++)if(r[o].render.contains(e.container))return(0,n.isNullOrUndefined)(this.condamn)&&(i.condamn=[],i.forbiden=[]),i.condamn.push({index:o,elem:e}),i.forbiden.push(o),i.subModels.forEach((t=>{t.elem.container===e.container&&(t.start=r[o].index)})),{x:Number(r[o].render.getAttribute("x"))+Number(s[t].holder.getAttribute("x"))+Number((a.container||a.element).getAttribute("x")),y:Number(r[o].render.getAttribute("y"))+Number(s[t].holder.getAttribute("y"))+Number((a.container||a.element).getAttribute("y")),anchors:a.anchors.next}}},estimatePosition(t){const{projItems:e,holder:i,proj:n}=t;return{x:e.x+Number(i.getAttribute("x"))+Number((n.container||n.element).getAttribute("x")),y:e.y+Number(i.getAttribute("y"))+Number((n.container||n.element).getAttribute("y"))}},registerListener(t,e){let i=this.models.get(t);(0,n.isNullOrUndefined)(i.listeners)&&(i.listeners=[]),i.listeners.push(e)},deleteItem(t,e,i){const s=this.models.get(t);if(s.items.forEach((t=>{t.id!==e&&t.elem.removeAnchor(i)})),!(0,n.isNullOrUndefined)(s.condamn)){for(let t=0;t<s.subModels.length;t++)s.subModels[t].start<i&&s.subModels[t].start+s.subModels[t].size>i&&(s.subModels[t].size--,s.subModels[t].elem.decreaseSize());for(let t=0;t<s.condamn.length;t++){if(s.condamn[t].index>i){s.condamn[t].index--,s.condamn[t].elem.decreaseAnchor();for(let t=0;t<s.subModels.length;t++)s.subModels[t].elem===s.elem&&s.subModels[t].start--}s.condamn[t].index===i&&(s.condamn.splice(t,1),t--)}for(let t=0;t<s.forbiden.length;t++)s.forbiden[t]===i&&(s.forbiden.splice(t,1),t--)}s.index--,(0,n.isNullOrUndefined)(s.listeners)||s.listeners.forEach((t=>{t.updateValue()}))}}},241:(t,e,i)=>{"use strict";function n(t){let e=0;if(L(t))return t.selectionStart;if(0!==window.getSelection().rangeCount){const i=window.getSelection().getRangeAt(0),n=i.cloneRange();n.selectNodeContents(t),n.setEnd(i.endContainer,i.endOffset),e=n.toString().length}return e}i.d(e,{D3:()=>O,n_:()=>j,sr:()=>x,hi:()=>A,k$:()=>E,WV:()=>w,_b:()=>F,wo:()=>b,p$:()=>z,jn:()=>v,GV:()=>B,qO:()=>n,As:()=>D,NI:()=>N,EE:()=>P,GF:()=>V,Sd:()=>H,sB:()=>U,Cp:()=>d,CH:()=>m,xj:()=>k,u7:()=>L,QE:()=>_,n2:()=>$,a2:()=>C,fP:()=>R,Ys:()=>g,lL:()=>p,$Z:()=>h,ZN:()=>u,HW:()=>y,hF:()=>f});var s=i(835);const a="hidden",r="collapsed",o="highlighted",l="shake",c="selected";function h(t){return(0,s.isHTMLElement)(t)?(t.classList.remove(a),t):t}function d(t){return(0,s.isHTMLElement)(t)?(t.classList.add(a),t):t}function u(t){return(0,s.isHTMLElement)(t)?(t.classList.toggle(a),t):t}function p(t){t.classList.contains(l)||(t.classList.add(l),setTimeout((()=>{t.classList.remove(l)}),1e3))}function m(t){return(0,s.isHTMLElement)(t)?(t.classList.add(o),t):t}function y(t){return(0,s.isHTMLElement)(t)?(t.classList.remove(o),t):t}function g(t){return(0,s.isHTMLElement)(t)?(t.classList.add(c),t):t}function f(t){return(0,s.isHTMLElement)(t)?(t.classList.remove(c),t):t}function b(t){return(0,s.isHTMLElement)(t)&&t.classList.add(r),t}function v(t){return(0,s.isHTMLElement)(t)&&t.classList.remove(r),t}const w={STRING:"string",NUMBER:"number",BOOLEAN:"boolean",REFERENCE:"reference",SET:"set",list(){return[this.STRING,this.NUMBER,this.BOOLEAN,this.REFERENCE,this.SET]}},x={backspace:"Backspace",tab:"Tab",enter:"Enter",ctrl:"Control",shift:"Shift",alt:"Alt",escape:"Escape",spacebar:" ",page_up:"PageUp",page_down:"PageDown",insert:"Insert",end:"End",home:"Home",left_arrow:"ArrowLeft",up_arrow:"ArrowUp",right_arrow:"ArrowRight",down_arrow:"ArrowDown",delete:"Delete",period:"."},E={NORMAL:"normal",WARNING:"warning",SUCCESS:"success",ERROR:"error"},A={NORMAL:"normal",WARNING:"warning",SUCCESS:"success",ERROR:"error"},j={AAC:{type:"audio/aac",extension:"aac"},BIN:{type:"application/octet-stream",extension:"bin"},JPEG:{type:"image/jpeg",extension:"jpeg"},JSON:{type:"application/json",extension:"json"},JSONCP:{type:"application/json",extension:"jsoncp"},MP3:{type:"audio/mpeg",extension:"mp3"},PDF:{type:"application/pdf",extension:"pdf"},SVG:{type:"image/svg+xml",extension:"svg"},TEXT:{type:"text/plain",extension:"txt"},XML:{type:"text/xml",extension:"xml"},ZIP:{type:"application/zip",extension:"zip"}},O={"audio/aac":"aac","application/octet-stream":"bin","image/jpeg":"jpeg","application/json":"json","audio/mpeg":"mp3","application/pdf":"pdf","image/svg+xml":"svg","text/plain":"txt","text/xml":"xml","application/zip":"zip"};function N(t){const e=t=>!(0,s.hasOwn)(t.dataset,"ignore");return e(t)?t:(0,s.findAncestor)(t,e,10)}function k(t){if(!s.isHTMLElement)throw new TypeError("Bad parameter");return t.hidden||"none"===window.getComputedStyle(t).display}const L=t=>(0,s.isHTMLElement)(t,["input","textarea"]),_=t=>L(t)||"true"===t.contentEditable,C=t=>+t.substring(0,t.indexOf("px")),T={top:t=>t.marginTop,right:t=>t.marginRight,bottom:t=>t.marginBottom,left:t=>t.marginLeft},S={top:t=>t.paddingTop,right:t=>t.paddingRight,bottom:t=>t.paddingBottom,left:t=>t.paddingLeft},M={top:t=>t.borderTopWidth,right:t=>t.borderRightWidth,bottom:t=>t.borderBottomWidth,left:t=>t.borderLeftWidth};function I(t,e,i){const n=window.getComputedStyle(t),s=window.getComputedStyle(e),a=T[i](n),r=S[i](s),o=M[i](s);return l=t.getBoundingClientRect()[i]+C(a),c=e.getBoundingClientRect()[i]-C(r)-C(o),Math.abs(l-c)<2;var l,c}function U(t){for(let e=0;e<t.children.length;e++){const i=t.children[e];if(!k(i))return i}return null}function D(t,e,i,n){return"up"===e?function(t,e,i=!0){const n=e.children,{top:s,left:a}=t.getBoundingClientRect();if(i&&I(t,e,"top"))return null;let r=null,o=99999,l=99999;for(let e=0;e<n.length;e++){const i=n[e];if(k(i)||i.classList.contains("badge")||i===t)continue;const{bottom:c,left:h}=i.getBoundingClientRect();let d=Math.abs(s-c),u=Math.abs(a-h);s>=c-1&&(d<o||d===o&&u<l)&&(r=i,o=d,l=u)}return r}(t,i,n):"down"===e?function(t,e,i=!0){const n=e.children,{bottom:s,left:a}=t.getBoundingClientRect();if(i&&I(t,e,"bottom"))return null;let r=null,o=99999,l=99999;for(let e=0;e<n.length;e++){const i=n[e];if(k(i)||i.classList.contains("badge")||i===t)continue;const{top:c,left:h}=i.getBoundingClientRect();let d=Math.abs(s-c),u=Math.abs(a-h);s<=c+1&&(d<o||d===o&&u<l)&&(r=i,o=d,l=u)}return r}(t,i,n):"left"===e?function(t,e,i=!0){const n=e.children,{top:s,left:a}=t.getBoundingClientRect();if(i&&I(t,e,"left"))return null;let r=null,o=99999,l=99999;for(let e=0;e<n.length;e++){const i=n[e];if(k(i)||i.classList.contains("badge")||i===t)continue;const{top:c,right:h}=i.getBoundingClientRect();let d=Math.abs(s-c),u=Math.abs(a-h);a>=h-1&&(u<l||u===l&&d<o)&&(r=i,o=d,l=u)}return r}(t,i,n):"right"===e?function(t,e,i=!0){const n=e.children,{top:s,right:a}=t.getBoundingClientRect();if(i&&I(t,e,"right"))return null;let r=null,o=99999,l=99999;for(let e=0;e<n.length;e++){const i=n[e];if(k(i)||i.classList.contains("badge")||i===t)continue;const{top:c,left:h}=i.getBoundingClientRect();let d=Math.abs(s-c),u=Math.abs(a-h);a<=h+1&&(u<l||u===l&&d<o)&&(r=i,o=d,l=u)}return r}(t,i,n):(console.error("unknown direction",e),null)}function H(t,e){const i=t.children,{top:n,left:a}=t.getBoundingClientRect();if(0===i.length)return null;const r=(0,s.isFunction)(e);let o=null,l=99999,c=99999;for(let t=0;t<i.length;t++){const s=i[t];if(r&&!e(s))continue;if(k(s)||s.classList.contains("badge"))continue;const{top:h,left:d}=s.getBoundingClientRect();let u=Math.abs(n-h),p=Math.abs(a-d);n<=h+1&&(u<l||u===l&&p<c)&&(o=s,l=u,c=p)}return o}function P(t,e){const i=t.children,{top:n,left:a}=t.getBoundingClientRect();if(0===i.length)return null;const r=(0,s.isFunction)(e);let o=null,l=99999,c=99999;for(let t=0;t<i.length;t++){const s=i[t];if(r&&!e(s))continue;if(k(s)||s.classList.contains("badge"))continue;const{top:h,left:d}=s.getBoundingClientRect();let u=Math.abs(n-h),p=Math.abs(a-d);a<=d+1&&(p<c||p===c&&u<l)&&(o=s,l=u,c=p)}return o}function V(t,e){const i=t.children,{top:n,right:a}=t.getBoundingClientRect();if(0===i.length)return null;const r=(0,s.isFunction)(e);let o=null,l=99999,c=99999;for(let t=0;t<i.length;t++){const s=i[t];if(r&&!e(s))continue;if(k(s)||s.classList.contains("badge"))continue;const{top:h,right:d}=s.getBoundingClientRect();let u=Math.abs(n-h),p=Math.abs(a-d);a>=d-1&&(p<c||p===c&&u<l)&&(o=s,l=u,c=p)}return o}function B(t,e){const i=t.children,{bottom:n,left:a}=t.getBoundingClientRect();if(0===i.length)return null;const r=(0,s.isFunction)(e);let o=null,l=99999,c=99999;for(let t=0;t<i.length;t++){const s=i[t];if(r&&!e(s))continue;if(k(s)||s.classList.contains("badge"))continue;const{bottom:h,left:d}=s.getBoundingClientRect();let u=Math.abs(n-h),p=Math.abs(a-d);n>=h-1&&(u<l||u===l&&p<c)&&(o=s,l=u,c=p)}return o}function R(t){return(0,s.isHTMLElement)(t)?t:(0,s.isString)(t)&&!(0,s.isNullOrWhitespace)(t)?(0,s.getElement)(t):null}function $(t,e={}){const i=R(t);if(!(0,s.isHTMLElement)(i))return null;const n=Object.assign({horizontal:!0,vertical:!0,minWidth:60,minHeight:60},e),a=function(){let t=(0,s.createDiv)({class:["resizers"]});return["horizontal","vertical"].forEach((e=>{t.append((0,s.createDiv)({class:["resizer",`${e}`],dataset:{dir:e}}))})),t}();i.prepend(a),n.horizontal&&n.vertical?i.dataset.resizable="both":n.horizontal?i.dataset.resizable="horizontal":n.vertical&&(i.dataset.resizable="vertical");const{minWidth:r,minHeight:o}=getComputedStyle(i),l=(0,s.valOrDefault)(C(r),n.minWidth),c=(0,s.valOrDefault)(C(o),n.minHeight);let h=0,d=null;function u(t){const{dir:e}=d.dataset,{width:n,height:s}=getComputedStyle(i);let a="horizontal"===e?t.pageX:t.pageY;if("horizontal"===e){const t=C(n)+(a-h);t>l&&(i.style.width=`${t}px`)}else if("vertical"===e){const t=C(s)+(a-h);t>c&&(i.style.height=`${t}px`)}h=a}for(let t=0;t<a.childElementCount;t++){const e=a.children[t];e.addEventListener("mousedown",(function(t){t.preventDefault(),d=e;const{dir:i}=d.dataset;h="horizontal"===i?t.pageX:t.pageY,document.body.addEventListener("mousemove",u),document.body.addEventListener("mouseup",(()=>{document.body.removeEventListener("mousemove",u)}))}))}return i}const F=t=>(0,s.createStrong)({class:["text-bf"]},t).outerHTML,z=t=>JSON.parse(JSON.stringify(t));i(914)},914:(t,e,i)=>{"use strict";i.d(e,{h:()=>n});const n=function(){var t={},e=[];for(let t=0;t<256;t++)e[t]=t<16?"0"+t.toString(16):t.toString(16);return t.generate=function(){var t=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,s=4294967296*Math.random()>>>0;return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&i]+e[i>>8&255]+"-"+e[i>>16&15|64]+e[i>>24&255]+"-"+e[63&n|128]+e[n>>8&255]+"-"+e[n>>16&255]+e[n>>24&255]+e[255&s]+e[s>>8&255]+e[s>>16&255]+e[s>>24&255]},t}()}},e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const{App:t}=n(684),{Preview:e}=n(839),i=localStorage.getItem("gentleman.preview");i?(e.init(i),localStorage.removeItem("gentleman.preview")):t.init()})()})();