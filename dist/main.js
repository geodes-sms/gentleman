!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return o}),n.d(t,"e",function(){return l}),n.d(t,"g",function(){return c});const r={PROD:"prod",TEST:"test"},i={ID:"ID",IDREF:"IDREF",boolean:"boolean",integer:"integer",real:"real",string:"string"},a={CHANGE:"change",CLICK:"click",FOCUSIN:"focusin",FOCUSOUT:"focusout",KEYDOWN:"keydown",KEYUP:"keyup"},s={Optional:"optional",Type:"type",Name:"name",Path:"path",Error:"error",Prop:"prop",Position:"position"},o={ABSTRACT:"abstract",DATATYPE:"data-type",ENUM:"enum",ELEMENT:"element",RULE:"rule",PRIMITIVE:i},l={backspace:"Backspace",tab:"Tab",enter:"Enter",ctrl:"Control",alt:"Alt",escape:"Escape",spacebar:" ",page_up:"PageUp",page_down:"PageDown",end:"End",home:"Home",left_arrow:"ArrowLeft",up_arrow:"ArrowUp",right_arrow:"ArrowRight",down_arrow:"ArrowDown",delete:"Delete",period:"."},c={ATTR_WRAPPER:"attr-wrapper",COLLAPSE:"collapse",CHECKED:"checked",DISABLED:"disabled",EMPTY:"empty",HIDDEN:"hidden",SELECTED:"selected",Element:{ANCHOR:{name:"ANCHOR"},ATTRIBUTE:{name:"ATTRIBUTE",class:"attr",toClass:()=>".attr",toString:()=>"ATTRIBUTE"},ATTRIBUTE_ABSTRACT:{name:"ATTRIBUTE",class:"attr attr--extension",toString:()=>"ABSTRACT ATTRIBUTE"},BUTTON:{name:"BUTTON",class:"btn",toString:()=>"BUTTON"},BUTTON_MENU:{name:"BUTTON",class:"btn btn-menu",toString:()=>"MENU BUTTON"},OPTION:{name:"OPTION",class:"option",toString:()=>"OPTION"}}}},function(e,t,n){"use strict";var r=n(10),i=n(4),a=n(0);(function(e){e.show=function(t){e.removeClass(t,a.g.HIDDEN)},e.hide=function(t){e.addClass(t,a.g.HIDDEN)},e.fakeHide=function(e){return Object.assign(e,{position:"absolute",top:"-9999px",left:"-9999px"})},e.highlight=function(t){e.addClass(t,a.g.SELECTED)},e.unhighlight=function(t){e.removeClass(t,a.g.SELECTED)},e.enable=function(e){e.hasAttribute(a.g.DISABLED)&&(e.disabled=!1),e.dataset.disabled=!1},e.disable=function(e){e.hasAttribute(a.g.DISABLED)&&(e.disabled=!0),e.dataset.disabled=!0}})(i.a),function(e){e.createOptionSelect=function(t,n,r){var i=e.createSpan({class:["option",a.g.EMPTY],data:{placeholder:"What next?",path:r,position:t+".."+n}});return i.contentEditable=!0,i},e.createButtonNew=function(t,n){var r=e.createButton({class:["btn","btn-new"],data:{action:"add"}});return r.appendChild(e.createSpan({class:"btn-new-content",html:"<strong>New</strong> "+t})),r.tabIndex=-1,r.addEventListener("click",n,!1),r},e.createButtonAdd=function(t){var n=e.createButton({class:["btn","btn-add"],text:"Add",data:{action:"add"}});return n.tabIndex=-1,n.addEventListener("click",t,!1),n},e.createButtonDelete=function(t,n){var r=e.createButton({class:["btn","btn-delete"],text:"✖",data:{action:"remove"}});return r.addEventListener("click",n),r.addEventListener("mouseenter",function(n){e.addClass(t,"delete")}),r.addEventListener("mouseleave",function(n){e.removeClass(t,"delete")}),e.addClass(t,"removable"),r}}(i.a);n.d(t,"b",function(){return i.a}),n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r={events:{},on:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},off:function(e,t){if(this.events[e])for(var n=0;n<this.events[e].length;n++)if(this.events[e][n]===t){this.events[e].splice(n,1);break}},emit:function(e,t){this.events[e]&&this.events[e].forEach(function(e){e(t)})}}},function(e,t,n){"use strict";var r=n(5),i=n(13),a=n(14),s=n(1);const o=function(e,t){return r.a.create({init(){var e=this;this.validators.push(function(){var n=e.struct.format,r=RegExp("^"+n+"$").test(e.value);if(!r){var i=n.replace(/\[0-9\]\+/gi,"INT").replace(/[[\]]/gi,"'").replace("("," (");this.error=t.valOrDefault(e.element.message,"This value is not valid.<br>Format:"+i)}return r})},struct:void 0})}(s.b,s.a);var l=n(15);n.d(t,"b",function(){return r.a}),n.d(t,"a",function(){return i.a}),n.d(t,"d",function(){return a.a}),n.d(t,"c",function(){return o}),n.d(t,"e",function(){return l.a})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});const r=function(t){const n=void 0!==e&&e.exports?{}:document;var r={get windowWidth(){return window.innerWidth||n.documentElement.clientWidth||n.body.clientWidth},getElement:(e,r)=>(r=t.valOrDefault(r,n),/^#[a-zA-Z0-9_-]+$/.test(e)?n.getElementById(e.substring(1)):/^\.[a-zA-Z0-9_-]+$/.test(e)?r.getElementsByClassName(e.substring(1))[0]:r.querySelector(e)),getElements:(e,r)=>(r=t.valOrDefault(r,n),/^\.[a-zA-Z0-9_-]+$/.test(e)?r.getElementsByClassName(e.substring(1)):r.querySelectorAll(e)),getElementSibling(e,t){for(var n=e[t];n&&this.hasClass(n,"autocomplete");)n=n[t];return n},getPreviousElementSibling(e){return this.getElementSibling(e,"previousElementSibling")},getNextElementSibling(e){return this.getElementSibling(e,"nextElementSibling")},insertBeforeElement(e,t){e.insertAdjacentElement("beforebegin",t)},insertAfterElement(e,t){e.insertAdjacentElement("afterend",t)},preprendChild(e,t){e.insertAdjacentElement("afterbegin",t)},appendChildren(e,t){var n=this.createDocFragment();return t.forEach(e=>{n.appendChild(e)}),e.appendChild(n),n=null,e},hasClass(e,t){var n=e.className.split(" ");for(let e=0,r=n.length;e<r;e++)if(t==n[e])return!0;return!1},removeClass(e,t){if(this.hasClass(e,t)){var n=e.className.split(" "),r="";for(let e=0,i=n.length;e<i;e++)t!=n[e]&&(r+=" "+n[e]);e.className=r.trim()}},addClass(e,n){Array.isArray(n)&&(n=n.map(function(e){return t.valOrDefault(e.class,e)}).join(" ")),t.isNullOrWhiteSpace(e.className)?e.className=n:r.hasClass(e,n)||(e.className+=" "+n)},toggleClass(e,t){this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)},replaceClass(e,t,n){this.hasClass(n,e)?n.className=n.className.replace(e,t):r.hasClass(n,t)?n.className=n.className.replace(t,e):this.addClass(t,n)},removeChildren(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)},createElement(e,t,r){var i=n.createElement(e);return t&&(i.id=t),r&&this.addClass(i,r),i},createDocFragment:()=>n.createDocumentFragment(),createLineBreak(){return this.createElement("br")},createLink(e,t,n){var r=this.createElement("link");return r.rel=e,r.href=t,n&&this.addAttributes(r,n),r},createAnchor(e,t){var n=this.createElement("a");return e&&(n.href=e),t&&this.addAttributes(n,t),n},createDiv(e){var t=this.createElement("div");return e&&this.addAttributes(t,e),t},createHeading(e,t){var n=this.createElement(e);return t&&this.addAttributes(n,t),n},createAside(e){var t=this.createElement("aside");return e&&this.addAttributes(t,e),t},createUl(e){var t=this.createElement("ul");return e&&this.addAttributes(t,e),t},createP(e){var t=this.createElement("p");return e&&this.addAttributes(t,e),t},createHeader(e){var t=this.createElement("header");return e&&this.addAttributes(t,e),t},createCheckbox(e){var t=this.createElement("input");t.type="checkbox";var n=this.createElement("label");return n.appendChild(t),e&&this.addAttributes(n,e),n},createFileInput(e){var t=this.createElement("input");return t.type="file",e&&(e.accept&&(t.accept=e.accept),this.addAttributes(t,e)),t},createLabel(e){var t=this.createElement("label");return e&&this.addAttributes(t,e),t},createTextArea(e){var t=this.createElement("textarea");return e&&(this.addFormAttributes(t,e),this.addAttributes(t,e)),t},createLi(e,t){var n=this.createElement("li");return e&&this.addAttributes(n,e),Array.isArray(t)?this.appendChildren(n,t):t&&n.appendChild(t),n},createSpan(e){var t=this.createElement("span");return e&&this.addAttributes(t,e),t},createStrong(e){var t=this.createElement("strong");return e&&this.addAttributes(t,e),t},createEm(e){var t=this.createElement("em");return e&&this.addAttributes(t,e),t},createButton(e){var t=this.createElement("button");return t.type="button",e&&(this.addFormAttributes(t,e),this.addAttributes(t,e)),t},createTableRow(e){var t=this.createElement("tr");return e&&this.addAttributes(t,e),t},createTableCell(e){var t=this.createElement("td");return e&&this.addAttributes(t,e),t},addAttributes(e,t){t.id&&(e.id=t.id),t.class&&this.addClass(e,t.class),t.text&&(e.textContent=t.text),t.html&&(e.innerHTML=t.html),t.data&&Object.assign(e.dataset,t.data)},addFormAttributes(e,t){t.value&&(e.value=t.value),t.placeholder&&(e.placeholder=t.placeholder),t.disabled&&(e.disabled=t.disabled),t.readonly&&(e.readOnly=t.readonly)}};return r}(n(10).a)}).call(this,n(9)(e))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),i=n(1);const a=function(e,t){const n=r.g.Element;function i(){var e=!0;return this.isOptional||(e=!t.isNullOrWhiteSpace(this.value.toString()))||(this.error="This attribute is <strong>required</strong>."),e}return{create:function(e){var t=Object.create(this);return Object.assign(t,e),t._validators=[],t._refs=[],t.isOptional||t.validators.push(i),Object.getPrototypeOf(t)!==a&&a.isPrototypeOf(t)&&t.init(),t},prepare:function(e,t,n,r,i){return Object.freeze({_id:e,_val:t,_mAttribute:n,_type:r,_update:i,_isOptional:n.isOptional,_name:n.name})},get modelAttribute(){return this._mAttribute},get value(){return this._input.textContent},set value(n){this._input.textContent=n,t.isNullOrWhiteSpace(n)?e.addClass(this._input,r.g.EMPTY):e.removeClass(this._input,r.g.EMPTY);for(let e=0,t=this.refs.length;e<t;e++)this.modelAttribute.MODEL.projections[this.refs[e]].update()},get name(){return this._name},get isOptional(){return this._isOptional},get hasError(){return!t.isNullOrWhiteSpace(this.error)},get id(){return this._id},get type(){return this._type},get error(){return this._error},set error(e){this._error=e},get position(){return this._position},get validators(){return this._validators},get refs(){return this._refs},index:0,element:null,isDisabled:!1,focus(){this._input.focus()},focusIn(){this.isOptional&&e.removeClass(this._input,r.g.COLLAPSE)},focusOut(){this.isOptional&&t.isNullOrWhiteSpace(this.value)&&e.addClass(this._input,r.g.COLLAPSE)},update(){var n=this,i=n._mAttribute,a=n._input.textContent;if(""===a&&e.addClass(n._input,r.g.EMPTY),this.value=a,n._update(n.value,n.index),i.type===r.a.ID){let a=i.MODEL.ID.find(function(e){return e.id==n.id});if(a){let n=a.ref;for(let i=0,s=n.length;i<s;i++){let s=e.getElement("#"+n[i]);s.textContent=a.attr.val,t.isNullOrWhiteSpace(a.attr.val)?e.addClass(s,r.g.EMPTY):e.removeClass(s,r.g.EMPTY)}}}},addReference(e){this.refs.push(e)},createInput(i){var a,s=this._mAttribute,o=this._mAttribute.Element;if(s.type===r.a.boolean){var l=e.createCheckbox({id:this._id,class:"attr--bool",data:{name:s.name}});return l.setAttribute("data-representation",s.representation.val),l.addEventListener(r.c.CHANGE,function(t){e.getElement("input",this).checked?e.addClass(this,r.g.CHECKED):e.removeClass(this,r.g.CHECKED)}),this._input=l,this.element=l,l}if(this._input=e.createSpan({id:this._id,class:[n.ATTRIBUTE],html:"",data:{name:s.name,type:s.type,placeholder:s.name}}),this._input.contentEditable=t.valOrDefault(i,!0),this._input.tabIndex=0,this._options&&e.addAttributes(this._input,this._options),s.isOptional&&Object.assign(this._input.dataset,{optional:!0}),this.value=this._val,a=this._input,s.isMultiple&&"text"==o.representation.type){var c=e.createLi({class:"array-item",data:{prop:"val",separator:s.separator}});c.appendChild(a),a=c}return this.element=a,a},validate(){var e;for(e of this.validators)if(!e.call(this))return!1;return!!this.modelAttribute.validate(this)&&(this.error="",!0)},remove(){e.removeChildren(this._input),this._input.remove(),e.removeChildren(this.element),this.element.remove()},delete(){this.modelAttribute.remove(this.index)},disable(){this._input.contentEditable=!1,this._input.tabIndex=-1,this.isDisabled=!0},enable(){this._input.contentEditable=!0,this._input.tabIndex=0,this.isDisabled=!1}}}(i.b,i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r={UnimplementedError:{create:function(e){var t=Object.create(this);return this._message=e,t},get message(){return this._message},get name(){return"UnimplementedError"},toString(){return this.name+": "+this.message}},InvalidModelError:{create:function(e){var t=Object.create(this);return this._message=e,t},get message(){return this._message},get name(){return"InvalidModelError"},toString(){return this.name+": "+this.message}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return l});var r=n(14),i=n(13),a=n(15);function s(e){return r.a.isPrototypeOf(e)}function o(e){return i.a.isPrototypeOf(e)}function l(e){return a.a.isPrototypeOf(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});const r=n(0).b.TEST,i="0.10"},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=function(){return{cloneObject:function(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e.isActiveClone=null,t[n]=this.cloneObject(e[n]),delete e.isActiveClone);return t},isNullOrWhiteSpace:function(e){return!e||0===e.length||/^\s*$/.test(e)},isInt:function(e){return e%1==0},compareTime:function(e,t){var n=e.split(":"),r=t.split(":");if(+n[0]>+r[0])return 1;if(+n[0]<+r[0])return-1;if(+n[1]>+r[1])return 1;if(+n[1]<+r[1])return-1;if(n.length==r.length&&3==n.length){if(+n[2]>+r[2])return 1;if(+n[2]<+r[2])return-1}return 0},parseTime:function(e){var t=0|+e,n="00";return this.isInt(+e)||(n=6*(e+"").split(".")[1]),t+":"+n},dayOfWeek:function(e){var t=e.getDay();return 0==t?6:t-1},valOrDefault:(e,t)=>void 0!==e?e:t,capitalize:e=>e.replace(/\b\w/,function(e){return e.toUpperCase()}),capitalizeFirstLetter:e=>e.charAt(0).toUpperCase()+e.slice(1),pluralize:(e,t,n)=>e?t:(n=n.split("|"),t.substring(0,t.lastIndexOf(n[0]))+n[1]),removeAccents:e=>String.prototype.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e.replace(/[àâäæ]/gi,"a").replace(/[ç]/gi,"c").replace(/[éèê]/gi,"e").replace(/[îï]/gi,"i").replace(/[ôœ]/gi,"o").replace(/[ùûü]/gi,"u"),XHR:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&200===n.status&&t(n.responseText)},n.open("GET",e,!0),n.send()},toBoolean:function(e){return!0===(e=this.valOrDefault(e,!1))||"true"===e.toString().toLowerCase()},boolToInt:e=>e?1:0,isString:e=>"string"==typeof myVar||e instanceof String,addPath:function(e,t){return this.isNullOrWhiteSpace(e)?t:e+"."+t},getDir:function(e){return e.substring(0,e.lastIndexOf("."))},getDirTarget:function(e,t){return e.substring(0,e.lastIndexOf(t)-1)},defProp:Object.defineProperty,find(e,t){if(Array.isArray(e)){let n=e.indexOf(t);if(-1!==n)return n}else for(const n of Object.keys(e))if(e[n]===t||e[n].val===t)return n},insert(e,t,n){e.splice(t,0,n)},random:(e,t)=>(null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1)))}}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(1),i=n(12),a=n(3),s=n(6),o=n(0),l=n(2);const c=function(t,n,r,i){const s=void 0!==e&&e.exports?{}:document,c="option",u="composition",p="text",d="table";var h={create:function(e,t){var r=Object.create(this);return r._source=t,r._path="",r._model=e,r._position=n.valOrDefault(t.position,0),r._attributes=[],r._elements=[],r},get model(){return this._model},get attributes(){return this._attributes},get path(){return this._path},set path(e){this._path=e},get isOptional(){return n.toBoolean(this._source.optional)},get isAbstract(){return n.toBoolean(this._source.abstract)},get isMultiple(){return n.toBoolean(this._source.multiple)},get composition(){return this._source.composition},get elements(){return this._elements},get position(){return this._position},get name(){return this._source.name},get representation(){return this._source.representation},eHTML:void 0,options:[],parent:null,render:function(e,r){var i,s=this;if(s.path=n.valOrDefault(e,"root"),r?i=t.createDocFragment():(i=t.createDiv({class:["section","line"],index:"0"}),s.eHTML=i),s._source.abstract){let e=a.a.prepare(s.model.generateID(),s.parent,s.parent.type),t=a.a.create(e);return t.extensions=s._source.extensions,t.modelElement=s,s.model.projections.push(t),t.createInput()}return i.appendChild(s.getAttribute()),s.isOptional&&i.appendChild(t.createButtonDelete(i,function(){s.remove();var e=s.parent.composition,t=s.model.getModelElement(s.parent.name).composition.find(function(e){return e.position==s.position});e.splice(e.indexOf(s._source),1),s.isMultiple||s.parent.options.push(n.cloneObject(t)),l.a.emit("model.change","ModelElement[l.79]:delete")})),i},getAttribute:function(){var e=this;if(e._source.hasOwnProperty("attr")||(e._source.attr={}),e._source.base){let t={};Object.assign(t,e.model.getModelElement(e._source.base).attr,e._source.attr),e._source.attr=n.cloneObject(t)}if(e._source.representation.type===p)return e.representation_handler();if(e._source.representation.type===d){var r=s.createDocumentFragment(),i=e._source.representation.col,a=e._source.representation.cell,o=t.createElement("table"),l=t.createTableRow(),c=t.createElement("th");c.appendChild(m(i,e._source.attr,function(t){return e.createModelAttribute(t,"col")})),l.appendChild(c),o.appendChild(l),l=t.createTableRow();var u=t.createTableCell();u.appendChild(m(a,e._source.attr,function(t){return e.createModelAttribute(t,"cell")})),l.appendChild(u),o.appendChild(l);var h=t.createButton({class:"btn-add-col"});return h.addEventListener("click",function(n){for(let n=0,r=o.children;n<o.childElementCount;n++){let i=t.createElement(0===n?"th":"td"),a=e.attributes[n];a.add(e.model.createInstance(a.type));let s=a.handler(a._source,a.value[a.count-1],a.path);i.appendChild(s),r[n].appendChild(i)}}),r.appendChild(o),r.appendChild(h),r}return s.createTextNode("")},composition_handler(){var e=this,r=this.composition,i=s.createDocumentFragment(),a=e.model.getModelElement(e.name)[u].filter(function(t){return-1===e.composition.findIndex(function(e){return e.position==t.position})});e.options=a;for(var o=a.length>0,c=1,p=0;p<r.length;){let s=r[p];if(s.optional&&!s.flag)a.push(s),r.splice(p,1),o=!0;else{let a=h.create(e.model,s);a.parent=e,e.elements.push(a);let m=a.render(n.addPath(this.path,u+"["+p+"]"));if(Object.assign(m.dataset,{prop:u,position:r[p].position}),s.optional&&m.appendChild(t.createButtonDelete(m,function(){a.remove();var t=e.composition,r=e.model.getModelElement(e.name).composition.find(function(e){return e.position==a.position});t.splice(t.indexOf(a._source),1),a.isMultiple||e.options.push(n.cloneObject(r)),l.a.emit("model.change","ModelElement[l.177]:delete")})),c+1<s.position){let r=t.createOptionSelect(c,s.position-1,n.addPath(this.path,u));r.dataset.index=e.model.options.length,e.model.options.push(e),i.appendChild(r);let a=d();o=a&&s.position<a.position}i.appendChild(m),c=s.position,p++}}if(o){let r=t.createOptionSelect(c+1,d().position,n.addPath(this.path,u));r.dataset.index=e.model.options.length,e.model.options.push(e),i.appendChild(r)}return i;function d(){return a[a.length-1]}},representation_handler:function(){var e=t.createDocFragment(),r=this.representation?this.representation.val.replace(/ /g," space ").replace(/(#[A-Za-z0-9_]+)/g," $1 ").split(" ").filter(function(e){return!n.isNullOrWhiteSpace(e)}):[];for(let n=0,p=r.length;n<p;n++){var a=r[n].charAt(0),o=r[n].substring(1);switch(a){case"$":if(o===u)e.appendChild(this.composition_handler());else if(this.representation[o]){let n=this.representation[o];if("group"===n.type){var l=t.createDiv({class:"attr-group"});"right"==n.align&&t.addClass(l,"right"),e.appendChild(l)}else if("keyword"===n.type){let r=t.createSpan({class:"keyword",text:n.val});n.color&&(r.style.color=n.color),e.appendChild(r),e.appendChild(s.createTextNode(" "))}else if("text"===n.type){let r=t.createSpan({text:n.val});e.appendChild(r),e.appendChild(s.createTextNode(" "))}}else if(this._source[o]){let n=t.createSpan({class:"keyword",text:this._source[o]});e.appendChild(n),e.appendChild(s.createTextNode(" "))}break;case"#":if(!this._source.attr[o])throw i.InvalidModelError.create("The attribute "+o+" was not found.");{let t=this.createModelAttribute(this._source.attr[o]);e.appendChild(t.render_attr())}break;case"&":if("NL"===o&&e.appendChild(t.createElement("br")),"CL"===o){var c=t.createElement("br");t.addClass(c,"clear"),e.appendChild(c)}break;default:e.appendChild(s.createTextNode("space"==r[n]?" ":r[n]))}}return e},createModelAttribute(e,n){let i=r.prepare(this,e,this.path);var a;return e.hasOwnProperty("multiple")?(a=r.MultiValueAttribute.create(i),"table"==this.representation.type&&("col"==n?(a.represent="column",a.fnMultiple=function(){var e=t.createDocFragment();if(0===a.value.length){let n=t.createButton({class:"btn btn-new"});n.appendChild(t.createSpan({class:"btn-new-content",html:"<strong>New</strong> "+a.name})),e.appendChild(n)}for(var n=0;n<a.value.length;n++)e.appendChild(a.handler(a._source,a.value[n],a.path));return e}):"cell"==n&&(a.represent="cell"))):a=r.SingleValueAttribute.create(i),this.attributes.push(a),a},remove(){this.attributes.splice(0).forEach(function(e){e.remove()}),this.elements.splice(0).forEach(function(e){e.remove()}),this.isOptional&&function(){var e,r=n.addPath(n.getDir(this.path),u),i=t.getPreviousElementSibling(this.eHTML),a=t.getNextElementSibling(this.eHTML),s=this.position,l=s;if(i&&t.hasClass(i,c)){let t=i.dataset[o.d.Position];(e=t.split(".."))[0]<s&&(s=e[0]),i.remove()}if(a&&t.hasClass(a,c)){let t=a.dataset[o.d.Position];(e=t.split(".."))[1]>l&&(l=e[1]),a.remove()}var p=t.createOptionSelect(s,l,r);p.dataset.index=this.model.options.length,this.model.options.push(this.parent),t.insertAfterElement(this.eHTML,p)}.call(this),this.eHTML.remove()},implement(e){var t=this.model.createInstance(e);return this._source=t,this.parent.set(t,this.index),this.render(this.path,!0)},toString(){var e=this,t="",r=this.representation?this.representation.val.replace(/ /g," space ").replace(/(#[A-Za-z0-9_]+)/g," $1 ").split(" ").filter(function(e){return!n.isNullOrWhiteSpace(e)}):[];for(let n=0,s=r.length;n<s;n++){var i=r[n].charAt(0),a=r[n].substring(1);switch(i){case"$":if(a===u){let n=e.elements.slice();n.sort(function(e,t){return e.position-t.position}),n.forEach(function(e){t+="\n"+e.toString()})}else if(this.representation[a]){let e=this.representation[a];"keyword"===e.type?t+=e.val+" ":"text"===e.type&&(t+=e.val+" ")}else e._source[a]&&(t+=e._source[a]+" ");break;case"#":if(this._source.attr[a]){let n=e.attributes.find(function(t){return t.name==e._source.attr[a].name});t+=n.toString()}break;case"&":"NL"===a&&(t+="\n");break;default:t+="space"==r[n]?" ":r[n]}}return t}};Object.create({init(){},render(){},implement(){var e=a.a.prepare(this.model.generateID(),this.parent,this.parent.type);let t=a.a.create(e);return t.extensions=this._source.extensions,t.modelElement=this,this.model.projections.push(t),t.createInput()}});function m(e,r,a){var o=e?e.val.replace(/ /g," space ").replace(/(#[A-Za-z0-9_]+)/g," $1 ").split(" ").filter(function(e){return!n.isNullOrWhiteSpace(e)}):[],l=t.createDocFragment();for(let n=0,m=o.length;n<m;n++){var c=o[n].charAt(0),p=o[n].substring(1);switch(c){case"$":if(p===u)l.appendChild(this.composition_handler());else if(e[p]){let n=e[p];if("group"===n.type){var d=t.createDiv({class:"attr-group"});"right"==n.align&&t.addClass(d,"right"),l.appendChild(d)}else if("keyword"===n.type){let e=t.createSpan({class:"keyword",text:n.val});n.color&&(e.style.color=n.color),l.appendChild(e),l.appendChild(s.createTextNode(" "))}else if("text"===n.type){let e=t.createSpan({text:n.val});l.appendChild(e),l.appendChild(s.createTextNode(" "))}}else if(this._source[p]){let e=t.createSpan({class:"keyword",text:this._source[p]});l.appendChild(e),l.appendChild(s.createTextNode(" "))}break;case"#":if(!r[p])throw i.InvalidModelError.create("The attribute "+p+" was not found.");{let e=a(r[p]);l.appendChild(e.render_attr())}break;case"&":if("NL"===p&&l.appendChild(t.createElement("br")),"CL"===p){var h=t.createElement("br");t.addClass(h,"clear"),l.appendChild(h)}break;default:l.appendChild(s.createTextNode("space"==o[n]?" ":o[n]))}}return l}return h}(r.b,r.a,i.a,s.a)}).call(this,n(9)(e))},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),i=n(1),a=n(3),s=n(6),o=n(2);const l=function(e,t,n){const i={Add:"Add",New:"New"},s="abstract",l=r.g.Element;var c={create(e){var t=Object.create(this);return Object.assign(t,e,d),t._fnUpdate,t._projections=[],t._elements=[],Object.getPrototypeOf(t)!==c&&c.isPrototypeOf(t)&&t.init(),t},get Element(){return this._parent},get MODEL(){return this.Element.model},get name(){return this._name},get type(){return this._type},get isMultiple(){return this._isMultiple},get isOptional(){return this._isOptional},get path(){return this._path},get representation(){return this._representation},get projections(){return this._projections},get elements(){return this._elements},get fnUpdate(){return this._fnUpdate},get fnCreateProjection(){return this._fnCreateProjection},render_attr(){if(Object.getPrototypeOf(this)!==c&&c.isPrototypeOf(this))throw String(n.UnimplementedError.create("Unimplemented abstract method"))},handler(n,a,s){var l,c,u,p=this,d=n.hasOwnProperty("multiple"),h=n.type;if(d&&(l=n.val.indexOf(a)),p.MODEL.isDataType(h)||p.MODEL.isEnum(h))return p.MODEL.path.push(d?t.addPath(s,"val["+l+"]"):s),u=p.createProjection(a),n.type===r.a.ID&&p.MODEL.ID.push({projection:u,type:p.MODEL.getModelElementType(p.Element._source)}),u.createInput();if(p.MODEL.isElement(h)){c=t.addPath(s,d?"val["+l+"]":"val");let r=p.MODEL.createModelElement(a);if(r.parent=p,p.elements.push(r),d){let a,s=l==n.val.length-1,o=t.toBoolean(n.inline);if(p.MODEL.hasComposition(h)){if(a=r.render(c),s)return f(a,i.New)}else{(a=e.createLi({class:"array-item",prop:"val"})).dataset.separator=t.valOrDefault(n.separator,",");var m=e.createDiv({class:["attr-wrapper","multiple"]});if(m.appendChild(r.render(c,!0)),a.appendChild(m),r.eHTML=a,r.index=l,o){if(s)return f(a,i.Add,r)}else if(e.addClass(a,"block"),s)return f(a,i.New,r)}return a}return r.render(c)}return null;function f(t,r,a){var s=e.createDocFragment();switch(s.appendChild(t),r){case i.New:s.appendChild(e.createButtonNew(n.name,function(){v(this,a)}));break;case i.Add:s.appendChild(e.createButtonAdd(function(){v(this,a)}))}return s}function v(t,n){p.isMultiple?p.add(p.MODEL.createInstance(p.type)):p.value=p.MODEL.createInstance(p.type);var r=p.handler(p._source,p.value[p.count-1],p.path),i=p.getElement(-1),a=r.children[0],s=e.createButtonDelete(a,function(){p.remove(p.elements.indexOf(i)),o.a.emit("model.change","ModelAttribute[l.162]:delete")});a.appendChild(s),t.parentElement.appendChild(r),t.remove()}},validate(e){return this._source.min&&+e.value<this._source.min?(e.error="Please enter a value greater than or equal to "+this._source.min,!1):!(this._source.max&&+e.value>this._source.max)||(e.error="Please enter a value less than or equal to "+this._source.max,!1)},remove(){this.projections.splice(0).forEach(function(e){e.remove()}),this.elements.splice(0).forEach(function(e){e.remove()}),void 0!==this._val?this.value=this._val:delete this._source.val},toString(){var e=this;if(this.elements.length){let n="";return this.elements.forEach(function(r){n+=t.toBoolean(e._source.inline)?r.toString():"\n"+r.toString()}),n}if(this.projections.length){let n=this.projections.filter(function(e){return!t.isNullOrWhiteSpace(e._input.textContent)}),i=n.map(function(t){var n=t._input.textContent;return e.type===r.a.string?'"'+n+'"':n}).join(t.valOrDefault(e.separator,""));return n.length&&e.representation&&(i=e.representation.val.replace("$val",i)),i}return""}};const u=c.create({init(){var e=this;e._source.hasOwnProperty("val")||(e._source.val=e.MODEL.createInstance(e._type)),e._fnUpdate=function(t){e.value=t}},render_attr(){var t;if(this.representation){t=e.createDiv({class:["attr-wrapper",r.g.EMPTY]});let n=this.representation.val.split("$val");Object.assign(t.dataset,{before:n[0],after:n[1]})}else t=e.createDocFragment();return t.appendChild(this.handler(this._source,this.value,this.path)),t},createProjection:d}),p=c.create({init(){var e=this;if(!e._source.hasOwnProperty("val")){let r=t.valOrDefault(e._source.multiple.min,1);if(0==r||e.isOptional)e._source.val=[];else if(r>0){e._source.val=[];for(let t=0;t<r;t++)e._source.val.push(e.MODEL.createInstance(e._type))}else n.InvalidModelError.create("Unexpected value for the min property")}e._isMultiple=!0,e._represent="",e.indexer={},e._fnUpdate=function(t,n){e.set(t,n)}},createProjection:function(e){var t=d.call(this,e);return t.index=this.count-1,t},get fnMultiple(){return this._fnMultiple},set fnMultiple(e){this._fnMultiple=e},get represent(){return this._represent},set represent(e){this._represent=e},multiple_handler(){this.fnMultiple()},render_attr(){var t=this,n=t.MODEL,r=e.createDocFragment();if(t.fnMultiple)return t.fnMultiple();if(n.isElement(t.type)&&n.hasComposition(t.type))t.eHTML=r,t.initValueHandler();else if(t.isOptional){let n=e.createButtonNew(t.name,function(){t.eHTML=t.createContainer(),e.insertBeforeElement(n,t.eHTML),t.initValueHandler(),this.remove()});e.addClass(n,"inline"),r.appendChild(n)}else t.eHTML=t.createContainer(),r.appendChild(t.eHTML),t.initValueHandler();return r},initValueHandler(){var t=this,n=t.MODEL,i=t.value.length;if(0===i){let i=e.createButtonNew(t.name,function(){t.add(n.createInstance(t.type));var i=t.count-1,a=t.handler(t._source,t.value[i],t.path),s=this.parentElement;s.appendChild(a),e.removeClass(s,r.g.EMPTY),this.remove()});t.eHTML.appendChild(i)}else{for(let e=0,n=i-1;e<i;e++)t.eHTML.appendChild(t.handler(t._source,t.value[e],t.path,e===n));if(n.isDataType(t.type)||n.isEnum(t.type)){let r=e.createButtonAdd(function(){var r=n.createInstance(t.type);t.add(r);let i=t.handler(t._source,r,t.path);e.insertBeforeElement(this,i);let a=e.createButtonDelete(i,function(){t.remove(t.count-1),o.a.emit("model.change","attribute:delete_clicked")});i.appendChild(a),e.getElement(l.ATTRIBUTE.toClass(),i).focus()});t.eHTML.appendChild(r)}}},createContainer(){var t=this.MODEL,n=e.createUl({class:"bare-list "+(t.isElement(this.type)&&t.getModelElement(this.type).extensions?"list empty":"array")});if(!1===this._source.inline&&e.addClass(n,"block"),Object.assign(n.dataset,{multiple:!0}),this.representation){var r=this.representation.val.split("$val");Object.assign(n.dataset,{before:r[0],after:r[1]})}return n},get(e){return this._source.val[e]},getIndex(e){return this._source.val.indexOf(e)},getElement(e){return e<0?this.elements[this.elements.length+e]:this.elements[e]},set(e,t,n){this._source.val[t]!==e&&(this._source.val[t]=e,o.a.emit("model.change","ModelAttributeMultivalue[l.405]:set")),n&&(this.elements[t]=n)},add(e){this._source.val.push(e),o.a.emit("model.change","ModelAttributeMultivalue[l.416]:add")},remove(e){e>-1?(this.projections[e]&&this.projections.splice(e,1)[0].remove(),this.elements[e]&&this.elements.splice(e,1)[0].remove(),this._source.val.splice(e,1)):this.removeAll();var t=!!this._source.val&&0===this.count;if("category"===this.name&&this.multiplicity.min>0&&t){var n=this.MODEL.createInstance(this.type),r=this.MODEL.createModelElement(n);this.eHTML.appendChild(this.handler(this._source,n,this.path,!0)),this.set(n,e,r)}},removeAll(){this.projections.slice(0).forEach(function(e){e.remove()}),this.elements.slice(0).forEach(function(e){e.remove()}),void 0!==this._val?this.value=this._val:delete this._source.val,this.indexer={}}});function d(e){var t,n=this.MODEL,i=this.MODEL.getModelElement(this.type),o=a.b.prepare(this.MODEL.generateID(),e,this,this.type,this.fnUpdate);if(e&&e.hasOwnProperty(s))(t=a.a.create(o)).extensions=i.extensions;else if(i){let e=n.getModelElementType(i);n.isEnum(e)?(t=a.d.create(o)).values=i.values:n.isDataType(e)?(t=a.c.create(o)).struct=i:t=a.b.create(o)}else this.type===r.a.IDREF?(t=a.e.create(o)).reference=this._source.ref:t=a.b.create(o);return this.projections.push(t),this.MODEL.projections.push(t),t}return t.defProp(p,"count",{get(){return this._source.val.length}}),t.defProp(p,"multiplicity",{get(){return this._source.multiple}}),t.defProp(p,"separator",{get(){return t.valOrDefault(this._source.separator,",")}}),t.defProp(c,"value",{get(){return this._source.val},set(e){this._source.val!==e&&(this._source.val=e,o.a.emit("model.change","ModelAttribute[l.467]:set"))}}),{prepare:function(e,n,r){return Object.freeze({_parent:e,_source:n,_val:n.val,_name:n.name,_path:t.addPath(r,"attr."+n.name),_type:n.type,_isOptional:t.toBoolean(n.optional),_representation:n.representation})},SingleValueAttribute:u,MultiValueAttribute:p}}(i.b,i.a,s.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(0);const a=function(e,t){const n=i.g.Element;return{create(e){var t=Object.create(this);return Object.assign(t,e),t},prepare:(e,t,n)=>Object.freeze({_id:e,_mAttribute:t,_type:n}),get value(){return this._input.textContent},get id(){return this._id},get modelAttribute(){return this._mAttribute},get type(){return this._type},get error(){return this._error},get position(){return this._position},update:function(){},createInput:function(t){var r=this._mAttribute,a=e.createSpan({id:this._id,class:[n.ATTRIBUTE_ABSTRACT,i.g.EMPTY],data:{name:r.name,type:r.type,placeholder:r.name,path:r.path}});return a.contentEditable=!0,this._input=a,a},extensions:[],valuesKV(){var e=[];return this.extensions.forEach(function(t,n){e.push({key:t,val:t})}),e},implement(e){var t=this.modelElement.implement(e),n=this._input.parentElement;return this._input.parentNode.insertBefore(t,this._input),this._input.remove(),n},focus(){},focusIn(){},focusOut(){},validate:()=>!0,remove(){e.removeChildren(this._input),this._input.remove()},delete(e){e=t.valOrDefault(e,this.index),this.modelAttribute.remove(e)},disable(){this._input.contentEditable=!1,this.isDisabled=!0},enable(){this._input.contentEditable=!0,this.isDisabled=!1}}}(r.b,r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),i=n(0),a=n(5);const s=function(e,t){return a.a.create({init(){var n=this;t.defProp(this,"value",{get(){return this._value},set(n){if(this._value=n,t.isNullOrWhiteSpace(n)&&!Number.isInteger(n))this._input.textContent="",e.addClass(this._input,i.g.EMPTY);else{let r=this.values[n];this._input.textContent=Array.isArray(this.values)?r:t.valOrDefault(r.val,r),e.removeClass(this._input,i.g.EMPTY)}}});this.validators.push(function(){var e=Array.isArray(n.values)?+n.value<n.values.length:n.values.hasOwnProperty(n.value);if(!e){let e=[];n.valuesKV().forEach(function(t){e.push(t.val)}),n.error=function(e){var t="";return e.forEach(function(e){t+=e+"<br>"}),t}(["This value is not valid.","Valid values: "+e.join(", ")])}return e})},update(){var n=this._input.textContent;t.isNullOrWhiteSpace(n)&&e.addClass(this._input,i.g.EMPTY),this._value=t.valOrDefault(t.find(this.values,n),n),this._update(this.value,this.index)},values:void 0,valuesKV(){var e=[];if(Array.isArray(this.values))this.values.forEach(function(t,n){e.push({key:n,val:t})});else for(const[n,r]of Object.entries(this.values))e.push({key:n,val:t.valOrDefault(r.val,r)});return e}})}(r.b,r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),i=n(0),a=n(5);const s=function(e,t){return a.a.create({init(){var n=this,r=n.modelAttribute.MODEL;t.defProp(this,"value",{get(){return this._value},set(a){if(this.pointsTo&&(r.projections[+this.pointsTo].unreference(this.id),this.pointsTo=null),this._value=a,t.isNullOrWhiteSpace(a))e.addClass(this._input,i.g.EMPTY);else if(t.isInt(a)){var s=r.projections[a];this.pointsTo=+a,this._input.textContent=s.value,s.addReference(n.id),e.removeClass(this._input,i.g.EMPTY)}}});this.validators.push(function(){return!0})},update(){var e=this.modelAttribute.MODEL.projections[this.value];this._input.textContent=e.value,this._update(this.value,this.index)},pointsTo:void 0,reference:void 0,valuesKV(){var e=this;return e.modelAttribute.MODEL.ID.filter(function(n){return-1!==n.type.split(".").indexOf(e.reference)&&!t.isNullOrWhiteSpace(n.projection.value)}).map(function(e){return{key:e.projection.id,val:e.projection.value}})}})}(r.b,r.a)},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var r=n(1),i=n(17),a=n(6),s=n(18),o=n(7),l=n(8),c=n(0),u=n(2);const p=function(t,n,r,i,a){const s=t.getElement("[data-gentleman-editor]");s.tabIndex=-1;const p=void 0!==e&&e.exports?{}:document,d=c.g.Element,h="read",m="edit";t.windowWidth;function f(e){return"."+e}function v(e){return"#"+e}function g(e){return f(e.class)}var b=window.matchMedia("(max-width: 800px)");return{state:{create:function(){var e=Object.create(this),t=[],r=[];return n.defProp(e,"hasUndo",{get:()=>t.length>0}),n.defProp(e,"hasRedo",{get:()=>r.length>0}),Object.assign(e,{undo:function(){r=[e.current,...r],e.current=t.pop()},redo:function(){t=[...t,e.current],e.current=r[0],r=r.slice(1)},set:function(i){t=[...t,e.current],e.current=n.cloneObject(i),r=[]},clear:function(){t=[],r=[]}}),e},init(e){this.clear(),this.current=n.cloneObject(e)},current:void 0}.create(),menu:null,note:null,MM:null,create(e){var i=Object.create(this);if(i.MM=e,e["@config"]){let t=e["@config"];t.language&&(i._language=t.language)}if(e["@resources"]){let n="../assets/css/";var a=t.getElements(f("gentleman-css"));for(let e=0,t=a.length;e<t;e++)a.item(e).remove();e["@resources"].forEach(function(e){p.head.appendChild(t.createLink("stylesheet",n+e,{class:"gentleman-css"}))})}return i._abstract=null,i._concrete=null,i._current=null,i._isInitialized=!1,i._body=t.createDiv({class:"body"}),i._autocomplete=r.create(),i._mode=!1,{init(e){i.init(e)},get language(){return i.language},get model(){return i.concrete},get state(){return i.state},get mode(){return i._mode},set mode(e){i._mode=e;switch(e){case m:t.removeClass(i.body,"read-mode"),i.projections.forEach(function(e){e.enable()});break;case h:t.addClass(i.body,"read-mode"),i.projections.forEach(function(e){e.disable()})}},undo(){i.state.undo(),i.setState(n.cloneObject(i.state.current)),u.a.emit("editor.undo",i.state.hasUndo)},redo(){i.state.redo(),i.setState(n.cloneObject(i.state.current)),u.a.emit("editor.redo",i.state.hasRedo)},save(){i.save()},copy(){var e=t.createTextArea({value:i.abstract.toString(),readonly:!0});t.fakeHide(e),s.appendChild(e),e.select(),p.execCommand("copy"),e.remove()}}},get abstract(){return this._abstract},set abstract(e){this._abstract=e},get concrete(){return this._concrete},set concrete(e){this._concrete=e},get current(){return this._current},set current(e){this._current=e},get language(){return this._language},get autocomplete(){return this._autocomplete},get projections(){return this.abstract.projections},get options(){return this.abstract.options},get currentLine(){return this._currentLine},set currentLine(e){this._currentLine=e},get body(){return this._body},get isInitialized(){return this._isInitialized},get hasError(){return this._hasError},getProjection(e){return this.projections[e]},resize(){},setState(e){this._concrete=e,this._abstract.init(this._concrete),this._current=this._abstract.createModelElement(this._concrete.root,!0),this.clear(),this.currentLine=this.body,this.render()},save(){this.state.set(this.concrete),u.a.emit("editor.save")},clear(){t.removeChildren(this.body),u.a.emit("editor.clear")},init(e){if(e)this.concrete=e;else{let e=this.MM["@root"];if(!e){let e=a.InvalidModelError.create("Root not found: The model does not contain an element with the attribute root");throw s.appendChild(t.createP({class:"body",text:e.toString()})),e}this.concrete={root:JSON.parse(JSON.stringify(this.MM[e]))}}this.abstract=i.create(this.MM,this._concrete),this.current=this.abstract.createModelElement(this.concrete.root,!0),this.state.init(this.concrete),u.a.emit("editor.state.initialized"),this.clear(),this.currentLine=this.body,t.hide(t.getElement(v("splashscreen"))),this.render();var n=t.getElement(g(d.ATTRIBUTE),this.currentLine)||t.getElement(g(d.OPTION),s),r=n.parentElement;r!==this.currentLine&&(this.currentLine=r),n.focus(),this.isInitialized||(u.a.emit("editor.initialized"),this.bindEvents(),this._isInitialized=!0)},render(){this.isInitialized||t.preprendChild(s,this.body),this.currentLine.appendChild(this.current.render()),this.currentLine=this.currentLine.firstChild,this.currentLine.contentEditable=!1},openConv(){const e=["convo","convo--user"],r=["convo","convo--gentleman","font-gentleman"];var i,a,s=t.getElement(f("convo-container")),o=t.createP({class:r});s?(t.show(s),(a=t.getElement(f("convo-wrapper"))).appendChild(o),i=t.getElement(f("question"))):(s=t.createDiv({class:"convo-container"}),(a=t.createDiv({class:["convo-wrapper"]})).appendChild(o),(i=t.createTextArea({class:["question"],placeholder:"Ask a question"})).addEventListener(c.c.KEYDOWN,function(o){switch(o.key){case c.e.enter:var u=i.value,p=t.createP({class:e,text:u});a.appendChild(p),i.value="",setTimeout(function(){var e=t.createP({class:r});a.appendChild(e);var i=function(e){const t=["thx","ty","thanks","thank"],r=["You're welcome.","I'm happy to help.","Glad I could help.","Anytime.","It was nothing.","No problem.","Don't mention it.","It was my pleasure."],i=["bye","close","exit","done"];var a=n.removeAccents(e).replace(/[^a-zA-Z0-9 _-]/gi,"").split(" ");if(-1!==a.findIndex(function(e){return"version"===e.toLowerCase()}))return[{type:0,val:"You are currently using Gentleman "},{type:1,val:"version "+l.b}];if(-1!==a.findIndex(function(e){return-1!==t.indexOf(e.toLowerCase())}))return[{type:0,val:r[n.random(r.length-1)]}];if(-1!==a.findIndex(function(e){return-1!==i.indexOf(e.toLowerCase())})){let e=[{type:0,val:"Good bye, happy coding :)"}];return e.close=!0,e}return[{type:0,val:"Sorry, I cannot answer this question at the moment. Ask me again later."}]}(u);t.TypeWriter(e,i,function(){i.close&&setTimeout(function(){t.hide(s)},500)})},200),o.preventDefault(),o.stopPropagation();break;case c.e.backspace:o.stopPropagation();break;case c.e.escape:t.hide(s),o.stopPropagation()}}),t.appendChildren(s,[a,i]),this.body.appendChild(s)),t.TypeWriter(o,[{type:0,val:"Hello, how may I help you?"}]),i.focus()},bindEvents:function(){var e,r,i=this,a=!1,l=!1;function p(e){var n=e.parentElement,r=i.getProjection(e.id),a=t.getElement(v(e.id+"error"),n);if(r.validate())a&&(a.parentElement.className="attr-validation-valid",t.removeChildren(a),t.hide(a)),t.removeClass(e,"error");else{if(!a){a=t.createSpan({id:e.id+"error",class:"error-marker"});let n=t.createSpan();e.insertAdjacentElement("beforebegin",n),n.appendChild(e),n.appendChild(a)}a.innerHTML=r.error,a.parentElement.className="attr-validation-error",t.addClass(e,"error"),t.show(a)}}i.body.addEventListener(c.c.CLICK,function(e){l?l=!1:i.autocomplete.hide()},!1),s.addEventListener(c.c.KEYUP,function(e){var n=e.target,s=i.getProjection(n.id);switch(s&&""===n.textContent&&s.update(),r==e.key&&(r=-1),e.key){case c.e.spacebar:r==c.e.ctrl&&s&&!s.isDisabled&&function(e){var n=[];if(i.autocomplete.isOpen)return;o.b(e)?(n=e.valuesKV(),i.autocomplete.onSelect=function(n){let r=e.implement(n.key);t.getElement(g(d.ATTRIBUTE),r).focus()},i.autocomplete.init(e._input,n)):(o.c(e)||o.a(e))&&(n=e.valuesKV(),i.autocomplete.onSelect=function(t){e.value=t.key,e.focus()},i.autocomplete.init(e._input,n))}(s);break;case c.e.delete:r==c.e.ctrl&&(a=!0,s.delete(),a=!1);break;case"z":r==c.e.ctrl&&(a=!0,i.state.undo(),a=!1);break;case"g":r===c.e.ctrl&&(i.openConv(),e.preventDefault())}},!1),s.addEventListener(c.c.KEYDOWN,function(e){var n=e.target,a=n.parentElement,s=i.getProjection(n.id);switch(e.key){case c.e.backspace:i.abstract.isEnum(s.type)&&(s.value="");break;case c.e.ctrl:r=c.e.ctrl,e.preventDefault();break;case c.e.delete:i.abstract.isEnum(s.type)&&(s.value="");break;case c.e.enter:i.autocomplete.hasFocus=!1,n.blur(),e.preventDefault();break;case c.e.escape:i.autocomplete.hide();break;case c.e.tab:i.autocomplete.hasFocus=!1;break;case"z":case"g":r==c.e.ctrl&&e.preventDefault()}1===e.key.length&&(t.removeClass(n,c.g.EMPTY),t.removeClass(a,c.g.EMPTY))},!1),i.body.addEventListener(c.c.FOCUSIN,function(r){i.autocomplete.hide(),l=!0;var a=r.target,c=i.getProjection(a.id);(e=function e(n){var r=n.parentElement;if(t.hasClass(r,"removable"))return r;if(r.isSameNode(s))return null;return e(r)}(a))&&t.addClass(e,"current");var p=[];if(t.hasClass(a,"option")){a.getAttribute("data-path");let e=a.getAttribute("data-position");var h=(e=e.split(".."))[0],m=e[1],f=a.dataset.index,v=i.options[+f];p=(p=v.options.filter(function(e){return e.position>=h&&e.position<=m})).map(function(e){return{val:e.name,element:e}}),i.autocomplete.init(a,p),i.autocomplete.onSelect=function(e){!function(e,r,a){var s=r.dataset.path,o=r.dataset.index,l=i.options[+o],c=l.composition,p=n.cloneObject(e.element);p.flag=!0,c.push(p),c.sort(function(e,t){return e.position-t.position}),u.a.emit("model.change","Editor[l.1008]:option");var h=i.abstract.createModelElement(p);h.parent=l,l.elements.push(h),h.path=s+"["+(c.length-1)+"]";var m=h.render(s+"["+(c.length-1)+"]");if(Object.assign(m.dataset,{prop:"composition",position:p.position}),t.insertBeforeElement(r,m),!p.multiple){r.remove(),l.options=l.options.filter(function(e){return e.name!==p.name});var f=(a=a.map(function(e){return e.element})).filter(function(e){return e.position<p.position}),v=a.filter(function(e){return e.position>p.position});if(f.length>0){f.sort(function(e,t){return e.position-t.position});let e=t.createOptionSelect(f[0].position,f[f.length-1].position,s);e.dataset.index=o,t.insertBeforeElement(m,e)}if(v.length>0){v.sort(function(e,t){return e.position-t.position});let e=t.createOptionSelect(v[0].position,v[v.length-1].position,s);e.dataset.index=o,t.insertAfterElement(m,e)}}var b=t.getElement(g(d.ATTRIBUTE),m);b&&b.focus()}(e,a,p)}}else if(c){if(c.isDisabled)return;if(c.focusIn(),u.a.emit("editor.change",c),o.b(c))p=c.valuesKV(),i.autocomplete.onSelect=function(e){let n=c.implement(e.key);t.getElement(g(d.ATTRIBUTE),n).focus()},i.autocomplete.init(a,p);else{if(!o.c(c)&&!o.a(c))return;p=c.valuesKV(),i.autocomplete.onSelect=function(e){c.value=e.key,c.focus()},i.autocomplete.init(a,p)}}},!1),i.body.addEventListener(c.c.FOCUSOUT,function(n){if(a)a=!1;else if(!i.autocomplete.hasFocus||i.autocomplete.input!=r){var r=n.target;if(e&&t.removeClass(e,"current"),t.hasClass(r,"attr")){let e=i.getProjection(r.id);if(e.isDisabled)return;e&&(e.focusOut(),e.update()),i.autocomplete.hasFocus?setTimeout(function(){p(r)},100):p(r)}}},!1),u.a.on("model.change",function(e){i.save()}),b.addListener(function(e){i.resize()})}}}(r.b,r.a,i.a,s.a,a.a)}).call(this,n(9)(e))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n(0),i=n(1);const a=function(t,n){const i=void 0!==e&&e.exports?{}:document;return{create:function(e){var n=Object.create(this);return e&&Object.keys(e).forEach(function(t){n[t]=e[t]}),n._input=t.createUl({class:"bare-list autocomplete"}),n._target=void 0,n._id="",n._data=[],n._items=[],n._position=0,n._isOpen=!1,n._hasFocus=!1,n._onSelect=void 0,n},init:function(e,t){this._target=e,this._data=n.valOrDefault(t,[]),this.position=0,this._items=[],e.dataset.autocompleteHandler||this.bindEvents(),this.render()},get id(){return this._id},set id(e){this._id=e},get data(){return this._data},set data(e){this._data=e},get position(){return this._position},set position(e){this._position=e},get itemPosition(){return this._items[this._position]},get hasFocus(){return this._hasFocus},set hasFocus(e){this._hasFocus=e},get isOpen(){return this._isOpen},set isOpen(e){this._isOpen=e},get onSelect(){return this._onSelect},set onSelect(e){this._onSelect=e},reset:function(){this.id="",this.data=[],this.position=0},update:function(){this._items.length!=this.data.length&&(this.position=0),this._items.length>0&&t.highlight(this._input.children[this.itemPosition])},show:function(){t.show(this._input),this.isOpen=!0},hide:function(){t.hide(this._input),this.hasFocus=!1,this.isOpen=!1},filter:function(e){this._items=[];for(let n=0,i=this.data.length;n<i;n++)-1===this.data[n].val.toLowerCase().indexOf(e.toLowerCase())?t.addClass(this._input.children[n],r.g.HIDDEN):(this._items.push(n),t.removeClass(this._input.children[n],r.g.HIDDEN)),t.unhighlight(this._input.children[n]);this.update()},select:function(e){this.hasFocus=!1,e(this.data[this.itemPosition]),this.hide()},up:function(){t.unhighlight(this._input.children[this.itemPosition]),this.position=(0==this.position?this._items.length:this.position)-1,t.highlight(this._input.children[this.itemPosition])},down:function(){t.unhighlight(this._input.children[this.itemPosition]),this.position=(this.position+1)%this._items.length,t.highlight(this._input.children[this.itemPosition])},bindEvents:function(){var e=this;e._target.addEventListener(r.c.KEYDOWN,function(t){if(e.isOpen)switch(t.key){case r.e.down_arrow:case r.e.up_arrow:t.preventDefault();break;case r.e.enter:e.select(e.onSelect)}},!1),e._target.addEventListener(r.c.KEYUP,function(t){switch(t.key){case r.e.down_arrow:e.down();break;case r.e.up_arrow:e.up();break;default:-1===[r.e.tab,r.e.ctrl].indexOf(t.key)&&e.filter(e._target.textContent)}}),e._target.dataset.autocompleteHandler=!0},render:function(){var e=this,n=i.createDocumentFragment();for(let i=0,s=e.data.length;i<s;i++){e._items.push(i);var a=t.createLi({text:e.data[i].val,class:"autocomplete-item"});a.addEventListener(r.c.CLICK,function(t){e.position=i,e.select(e.onSelect),t.stopPropagation()}),n.appendChild(a)}t.removeChildren(e._input),e._input.appendChild(n),e._input.addEventListener("mouseenter",function(){e.hasFocus=!0}),e._input.addEventListener("mouseleave",function(){e.hasFocus=!1}),e.update(),e._target.insertAdjacentElement("afterend",e._input),e._input.style.left=e._target.offsetLeft+"px",e._input.style.minWidth=e._target.offsetWidth+"px",e.show()}}}(i.b,i.a)}).call(this,n(9)(e))},function(e,t,n){"use strict";var r=n(1),i=n(11),a=n(6),s=n(0);const o=function(e,t,n,r){return{create(e,t){var n=Object.create(this);return n._model=t,n._metamodel=e,n.ID=[],n.path=[],n.options=[],n.projections=[],n.root=void 0,n},init(e){this._model=e,this.ID=[],this.path=[],this.options=[],this.projections=[],this.root=void 0},get concrete(){return this._model},get MM(){return this._metamodel},createModelElement(e,r){r=t.valOrDefault(r,!1);var i=n.create(this,e);return r&&(this.root=i),i},addModelElement(e){var t=this.createInstance(e.type);return e.val.push(t),t},removeElement(e,t,n){var r=e[n];return r.splice(r.indexOf(t),1),t.optional&&!t.multiple&&r.options.push(t),r},getModelElement(e){return this.isElement(e)?JSON.parse(JSON.stringify(this.MM[e])):void 0},findModelElement(e){for(var t,n,r,i,a=e.split("."),s=this.concrete,o=0;o<a.length;o++)t=a[o],/\[\d+\]/.test(t)?(r=+(n=t.match(/\[\d+\]/g))[0].match(/\d+/g),s=s[t.substring(0,t.indexOf("["))][r]):/\[\w+\]/.test(t)?(n=t.match(/\[\w+\]/g),i=n[0].match(/\w+/g),s=s[t.substring(0,t.indexOf("["))].find(function(e){return e.name==i})):s=s[t];return s},generateID(){return this.projections.length.toString()},createInstance(e){var n=this.getModelElement(e);return!n||this.isEnum(e)||this.isDataType(e)?"":t.cloneObject(n)},isElement(e){return void 0!==this.MM[e]},isEnum(e){return this.isElement(e)&&this.MM[e].type==s.f.ENUM},isDataType(e){return s.a.hasOwnProperty(e.split(":")[0])||this.isModelDataType(e)},isModelDataType(e){return this.isElement(e)&&this.MM[e].type===s.f.DATATYPE},hasComposition(e){return this.isElement(e)&&this.MM[e].hasOwnProperty("composition")},getModelElementType(e){return e.hasOwnProperty("base")?this.getModelElementType(this.getModelElement(e.base))+"."+e.name:e.name},toString(){return this.root.toString()}}}(r.b,r.a,i.a,a.a);n(12);n.d(t,"a",function(){return o})},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(8),a=n(0),s=n(2);const o=function(e,t){const n=a.g.Element,r="read",i="edit";return{editor:void 0,container:void 0,btnUndo:void 0,btnRedo:void 0,btnEdit:void 0,btnRead:void 0,btnPrint:void 0,btnCopy:void 0,btnNew:void 0,create(){return Object.create(this)},init(t,n){var r=this;r.editor=t,s.a.on("editor.initialized",function(){e.enable(r.btnPrint),e.enable(r.btnCopy),e.enable(r.btnRead),e.enable(r.btnEdit),e.enable(r.btnSave)}),n.appendChild(this.render()),this.bindEvents()},render(){var r=this;r.container=e.createUl({id:"menu",class:["bare-list","menu"]}),r.btnOpen=e.createLabel({class:"btn btn-menu",text:"Open"});var i=e.createFileInput({id:"fileInput",accept:".json"});return i.addEventListener("change",function(e){var t=this.files[0],n=new FileReader;t.name.endsWith(".json")?(n.onload=function(e){r.editor.init(JSON.parse(n.result))},n.readAsText(t)):alert("File not supported!")}),r.btnOpen.appendChild(i),r.btnNew=s("btnNew","New"),r.btnEdit=s("btnEdit","Edit",!0,!0),r.btnRead=s("btnRead","Read",!0),r.btnUndo=s("btnUndo","Undo",!0),r.btnRedo=s("btnRedo","Redo",!0),r.btnSave=s("btnSave","Save",!0),r.btnCopy=s("btnCopy","Copy",!0),r.btnPrint=s("btnPrint","Download",!0,!1,n.ANCHOR.name),e.appendChildren(r.container,[o(r.btnNew),o(r.btnOpen),o(r.btnSave),o(r.btnCopy),o(r.btnPrint),o([r.btnUndo,r.btnRedo]),o([r.btnEdit,r.btnRead])]),r.container;function s(r,i,s,o,l){s=t.valOrDefault(s,!1);var c=t.valOrDefault(o,!1)?[n.BUTTON_MENU,a.g.SELECTED]:[n.BUTTON_MENU];switch(t.valOrDefault(l,n.BUTTON.name)){case n.ANCHOR.name:return e.createAnchor(null,{id:r,class:c,text:i,data:{disabled:s}});case n.BUTTON.name:return e.createButton({id:r,class:c,disabled:s,text:i})}}function o(n,r){r=t.valOrDefault(r,{class:"menu-item"});var i=e.createLi(r);return Array.isArray(n)?e.appendChildren(i,n):n&&i.appendChild(n),i}},bindEvents(){var n=this;const o="application/json";var l=n.editor;n.container.addEventListener(a.c.CLICK,function(a){switch(a.target){case n.btnNew:l.init();break;case n.btnRead:l.mode=r,e.unhighlight(n.btnEdit),e.highlight(n.btnRead);break;case n.btnEdit:l.mode=i,e.unhighlight(n.btnRead),e.highlight(n.btnEdit);break;case n.btnPrint:if(t.toBoolean(n.btnPrint.dataset.disabled))return!1;window.URL=window.webkitURL||window.URL,t.isNullOrWhiteSpace(n.btnPrint.href)||window.URL.revokeObjectURL(n.btnPrint.href);var s=new Blob([JSON.stringify(l.model)],{type:o});Object.assign(n.btnPrint,{download:"model_"+l.language+"_"+Date.now()+".json",href:window.URL.createObjectURL(s)}),n.btnPrint.dataset.downloadurl=[o,n.btnPrint.download,n.btnPrint.href].join(":"),e.disable(n.btnPrint),setTimeout(function(){window.URL.revokeObjectURL(n.btnPrint.href),e.enable(n.btnPrint)},1500);break;case n.btnCopy:l.copy();break;case n.btnSave:l.save();break;case n.btnUndo:l.undo();break;case n.btnRedo:l.redo()}}),s.a.on("editor.undo",function(e){n.btnUndo.disabled=!e,n.btnRedo.disabled=!1}),s.a.on("editor.redo",function(e){n.btnRedo.disabled=!e,n.btnUndo.disabled=!1}),s.a.on("editor.state.initialized",function(){n.btnUndo.disabled=!0,n.btnRedo.disabled=!0}),s.a.on("editor.save",function(){n.btnUndo.disabled=!1})}}}(r.b,r.a);var l=n(16);!function(e,t,n){const r=t.getElement("[data-gentleman-editor]"),s=a.g.Element;var o=t.createHeader({id:"header",class:"editor-header"}),l=t.createDiv({class:"content-wrapper editor-header-content"}),c=t.createDiv({id:"splashscreen",class:"splashscreen"}),u=t.createP({class:"instruction-container font-gentleman"});switch(i.a){case a.b.TEST:var p=e.Editor.create({project:{name:"project",attr:{short_name:{name:"short_name",type:"ID"},name:{name:"name",type:"string"}},composition:[{name:"Screening section",position:1,optional:!0,attr:{screen_action:{name:"screen_action",type:"ID",optional:!0},screening:{name:"screening",type:"screening",multiple:{type:"list"}}},representation:{type:"text",k1:{type:"keyword",val:"SCREENING"},val:"$k1 #screen_action #screening"}},{name:"Question/Answer section",position:2,optional:!0,attr:{qa_action:{name:"qa_action",type:"ID",optional:!0},quality_assess:{name:"quality_assess",type:"qa",multiple:{type:"list",min:0}}},representation:{type:"text",k1:{type:"keyword",val:"QA"},val:"$k1 #qa_action #quality_assess"}},{name:"Data extraction section",position:3,attr:{class_action:{name:"class_action",type:"ID",optional:!0},category:{name:"category",type:"category",multiple:{type:"array",min:1},inline:!1,separator:""}},representation:{type:"text",k1:{type:"keyword",val:"DATA EXTRACTION"},val:"$k1 #class_action #category"}},{name:"Report section",keyword:"",position:4,optional:!0,attr:{reporting:{name:"reporting",type:"report",multiple:{type:"list"},inline:!1}},representation:{type:"text",k1:{type:"keyword",val:"SYNTHESIS"},val:"$k1 #reporting"}}],representation:{type:"text",k1:{type:"keyword",val:"PROJECT"},val:"$k1 #short_name #name $composition"}},screening:{name:"screening",composition:[{name:"reviews",keyword:"Reviews",position:1,attr:{review_per_paper:{name:"review_per_paper",type:"integer",val:"2"}},representation:{type:"text",val:"$keyword #review_per_paper"}},{name:"conflict",keyword:"Conflict",position:2,attr:{conflict_type:{name:"conflict_type",type:"conflictType"},conflict_resolution:{name:"conflict_resolution",type:"conflictResolution",val:"unanimity"}},representation:{type:"text",val:"$keyword on #conflict_type resolved by #conflict_resolution"}},{name:"criteria",keyword:"Criteria",position:3,attr:{exclusion_criteria:{name:"exclusion_criteria",type:"string",multiple:{type:"list",min:1}}},representation:{type:"text",val:"$keyword = [#exclusion_criteria]"}},{name:"sources",keyword:"Sources",position:4,optional:!0,attr:{source_papers:{name:"source_papers",type:"string",multiple:{type:"list"}}},representation:{type:"text",val:"$keyword = [#source_papers]"}},{name:"strategies",keyword:"Strategies",position:5,optional:!0,attr:{search_strategy:{name:"search_strategy",type:"string",multiple:{type:"list"}}},representation:{type:"text",val:"$keyword = [#search_strategy]"}},{name:"validation",keyword:"Validation",position:6,optional:!0,attr:{validation_percentage:{name:"validation_percentage",type:"integer",val:"20",min:0,max:100},validation_assignment_mode:{name:"validation_assignment_mode",type:"assignmentMode",val:"normal",optional:!0}},representation:{type:"text",val:"$keyword #validation_percentage% #validation_assignment_mode"}},{name:"phases",keyword:"Phases",position:7,optional:!0,attr:{phases:{name:"phases",type:"phase",multiple:{type:"list"},inline:!1}},representation:{type:"text",val:"$keyword #phases"}}],representation:{type:"text",val:"$composition"}},phase:{name:"phase",attr:{title:{name:"title",type:"string"},description:{name:"description",type:"string",optional:!0},fields:{name:"fields",type:"field",multiple:{type:"list",separator:","}}},representation:{type:"text",val:"#title #description Fields (#fields)"}},qa:{name:"qa",composition:[{name:"questions",keyword:"Questions",position:1,attr:{question:{name:"question",type:"string",multiple:{type:"array",min:1}}},representation:{type:"text",val:"$keyword [#question]"}},{name:"response",keyword:"Response",position:2,attr:{response:{name:"response",type:"response",multiple:{type:"array",min:1},inline:!0}},representation:{type:"text",val:"$keyword [#response]"}},{name:"min_score",keyword:"Min_score",position:3,attr:{min_score:{name:"min_score",type:"double"}},representation:{type:"text",val:"$keyword #min_score"}}],representation:{type:"text",val:"$composition"}},response:{name:"response",attr:{title:{name:"title",type:"string"},score:{name:"score",type:"double"}},representation:{type:"text",val:"#title:#score"}},double:{name:"double",type:"data-type",format:"[0-9]+([.][0-9]+)?"},report:{name:"report",attr:{name:{name:"name",type:"ID"},title:{name:"title",type:"string",optional:!0},value:{name:"value",type:"IDREF",ref:"category"},chart:{name:"chart",type:"graphType",multiple:{type:"array"}}},abstract:!0,extensions:["simple_graph","compare_graph"]},simple_graph:{name:"simple_graph",keyword:"Simple",base:"report",representation:{type:"text",val:"$keyword #name #title on #value charts(#chart)"}},compare_graph:{name:"compare_graph",keyword:"Compare",base:"report",attr:{reference:{name:"reference",type:"IDREF",ref:"category"}},representation:{type:"text",val:"$keyword #name #title on #value with #reference charts(#chart)"}},category:{name:"category",attr:{name:{name:"name",type:"ID"},title:{name:"title",type:"string",optional:!0},mandatory:{name:"mandatory",type:"boolean",representation:{val:"*"},val:!0},numberOfValues:{name:"numberOfValues",type:"integer",optional:!0,val:"1",representation:{type:"text",val:"[$val]"}},subCategory:{name:"subCategory",type:"category",optional:!0,multiple:{type:"list"},inline:!1,representation:{type:"text",val:"{$val}"}}},named_composition:[{name:"subCategory",type:"category",multiple:!0}],abstract:!0,extensions:["freeCategory","staticCategory","independantDynamicCategory","dependantDynamicCategory"]},freeCategory:{name:"freeCategory",keyword:"Simple",base:"category",attr:{type:{name:"type",type:"simpleType",val:"string"},max_char:{name:"max_char",type:"integer",optional:!0,representation:{type:"text",val:"($val)"}},pattern:{name:"pattern",type:"string",optional:!0,representation:{type:"text",val:"style($val)"}},initial_value:{name:"initial_value",type:"string",optional:!0,representation:{type:"text",val:"= [$val]"}}},representation:{type:"text",val:"$keyword #name #title #mandatory #numberOfValues : #type #max_char #pattern #initial_value #subCategory"}},staticCategory:{name:"staticCategory",keyword:"List",base:"category",attr:{values:{name:"values",type:"string",multiple:{type:"list"}}},representation:{type:"text",val:"$keyword #name #title #mandatory #numberOfValues = [#values] #subCategory"}},independantDynamicCategory:{name:"independantDynamicCategory",keyword:"DynamicList",base:"category",attr:{reference_name:{name:"reference_name",type:"string",optional:!0},initial_values:{name:"initial_values",type:"string",multiple:{type:"list"},optional:!0,representation:{type:"text",val:"= [$val]"}}},representation:{type:"text",val:"$keyword #name #title #mandatory #numberOfValues #reference_name #initial_values #subCategory"}},dependantDynamicCategory:{name:"dependantDynamicCategory",keyword:"DynamicList",base:"category",attr:{depends_on:{name:"depends_on",type:"IDREF",ref:"category"}},representation:{type:"text",val:"$keyword #name #title #mandatory #numberOfValues depends on #depends_on #subCategory"}},simpleType:{name:"simpleType",type:"enum",values:{bool:"bool",date:"date",int:"int",real:"real",string:"string",text:"text"}},assignmentMode:{name:"assignmentMode",type:"enum",values:{info:"Info",normal:"Normal",veto:"Veto"}},conflictType:{name:"conflictType",type:"enum",values:{exclusionCriteria:"Criteria",includeExclude:"Decision"}},conflictResolution:{name:"conflictResolution",type:"enum",values:{majority:"Majority",unanimity:"Unanimity"}},graphType:{name:"graphType",type:"enum",values:["bar","line","pie"]},field:{name:"field",type:"enum",values:["abstract","bibtex","link","preview","title"]},"@root":"project","@config":{language:"ReLiS",settings:{autosave:!0}},"@resources":["relis.css"]});l.appendChild(t.createSpan({id:"language",class:"model-language",text:p.language})),e.Menu.create().init(p,l),o.appendChild(l),t.appendChildren(r,[o,c]),e.Note.create().init(p,r),p.init();break;case a.b.PROD:var d=t.createLabel({class:[s.BUTTON,"btn-loader",a.g.HIDDEN],text:"Load a Metamodel"}),h=t.createFileInput({id:"fileInput",accept:".json"});h.addEventListener("change",function(n){var r=this.files[0],i=new FileReader;r.name.endsWith(".json")?(i.onload=function(n){t.hide(d),p=e.Editor.create(JSON.parse(i.result)),l.appendChild(t.createSpan({id:"language",class:"model-language",text:p.language})),e.Menu.create().init(p,l),o.appendChild(l),t.TypeWriter(u,[{type:0,val:"Good news! Your Metamodel is valid and has been successfully loaded."},{type:0,val:"\nTo continue, open a saved model or create a new one."}],function(){})},i.readAsText(r)):alert("File not supported!")}),d.appendChild(h),t.appendChildren(c,[u,d]),t.appendChildren(r,[o,c]),t.TypeWriter(u,[{type:0,val:"Hello friend, welcome to "},{type:1,val:"Gentleman"},{type:0,val:".\nTo begin, please load a "},{type:2,val:"Metamodel.",tooltip:"A metamodel is ..."}],function(){t.show(d)})}}({Menu:o,Note:function(e,t){function n(e){return"#"+e}return{editor:void 0,container:void 0,create(){return Object.create(this)},init(e,t){this.editor=e,t.appendChild(this.render()),this.bindEvents()},render(){return this.container=e.createAside({class:"note"}),this.container},bindEvents(){var e=this;e.editor;s.a.on("editor.change",function(t){e.update(t)}),s.a.on("editor.clear",function(){e.clear()})},clear(){e.removeChildren(this.container)},update(r){var i=this;i.clear();var s=e.createDocFragment();const o="note-info-label",l="note-info-value";var c=e.createHeading("h3",{class:["note-attr","font-code"]});c.textContent=r.name,s.appendChild(c);var u=e.createP({class:"note-section"});r.hasError?(e.addClass(u,"note-error"),e.appendChildren(u,[e.createSpan({html:"You seem to have an error on that attribute:"}),e.createLineBreak(),e.createSpan({html:r.error})]),s.appendChild(u)):(e.addClass(u,"note-error--valid"),u.appendChild(e.createSpan({html:"Everything is good here."})),s.appendChild(u));var p=e.createHeading("h4",{class:"note-section-title",text:"Properties"}),d=e.createUl({class:["bare-list","note-info"]}),h=g("Type",r.type+" ("+(r.isOptional?"optional":"required")+")"),m=g("Value",t.isNullOrWhiteSpace(r.value)?"&mdash;":r.value),f=g("Path",function(e){return e.replace(/.val|.attr/g,"").replace(/.composition\[\d+\]./g,">").replace(/\.+/g,".")}(r.modelAttribute.path));if(e.appendChildren(d,[h,m,f]),e.appendChildren(s,[p,d]),"ID"==r.type){var v=e.createP({class:["note-section","note-dependency"]});let o=r.refs,l=o.length;if(0===l)v.textContent="This attribute has no dependency";else{v.textContent="This attribute has: "+l+" "+t.pluralize(1==l,"dependency","y|ies");let s=e.createUl({class:"ref-list"});for(let t=0;t<l;t++){let l=o[t],c=e.createLi({class:"ref-list-item"}),u=e.createAnchor(n(l),{text:r.name});u.addEventListener(a.c.CLICK,function(){e.getElement(n(l),i.editor.body).focus()}),c.appendChild(u),s.appendChild(c)}v.appendChild(s)}s.appendChild(v)}function g(t,n){return e.createLi({class:"note-info-item"},[e.createSpan({class:[o],text:t}),e.createSpan({class:[l,"font-code"],html:n})])}i.container.appendChild(s)}}}(r.b,r.a),Editor:l.a},r.b,r.a)}]);